/*! For license information please see webgl-build.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,n,r){void 0===n&&(n=!1),i(this,t),this._fn=e,this._once=n,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function a(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var s=function(){function t(){i(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=o,e.default=s,t.exports=e.default},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function f(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,a;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=f(t))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,console&&console.warn}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):v(i,i.length)}function _(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,f=v(u,c);for(n=0;n<c;++n)o(f[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},s.prototype.listenerCount=_,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e){t.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,RED:6403,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0,R8:33321}},function(t,e,n){"use strict";var r=n(14);r.stats=n(6),t.exports=r},function(t,e,n){"use strict";var r=n(2).EventEmitter;function i(){r.call(this),this.setMaxListeners(20)}i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.off=function(t,e){return e?this.removeListener(t,e):t?this.removeAllListeners(t):this.removeAllListeners()},t.exports=i},function(t,e,n){"use strict";t.exports={mbs:0,secs:0,update:function(t,e,n,r){var i,o=t.getAllResponseHeaders();if(o){var a=o.match(/content-length: (\d+)/i);a&&a.length&&(i=a[1])}if(i){var s=(i=parseInt(i,10))/1024/1024,u=(Date.now()-e)/1e3;this.secs+=u,this.mbs+=s,r&&this.log(n,s,u)}},log:function(t,e,n){if(t)t.substr(t.lastIndexOf("/")+1),e.toFixed(2),n.toFixed(2),(e/n).toFixed(2);this.mbs.toFixed(2),this.secs.toFixed(2),this.getMbps().toFixed(2)},getMbps:function(){return this.mbs/this.secs}}},function(t,e){var n=a("DXT1"),r=a("DXT3"),i=a("DXT5"),o=a("DX10");function a(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}t.exports=function(t){var e,a,s=new Int32Array(t,0,31);if(542327876!==s[0])throw new Error("Invalid magic number in DDS header");if(4&!s[20])throw new Error("Unsupported format, must contain a FourCC code");var u=s[21];switch(u){case n:e=8,a="dxt1";break;case r:e=16,a="dxt3";break;case i:e=16,a="dxt5";break;case 116:a="rgba32f";break;case o:var c=new Uint32Array(t.slice(128,148));a=c[0];var f=c[1];c[2],c[3],c[4];if(3!==f||2!==a)throw new Error("Unsupported DX10 texture format "+a);a="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+(h=u,String.fromCharCode(255&h,h>>8&255,h>>16&255,h>>24&255)))}var h;var l=s[2],p=1;131072&l&&(p=Math.max(1,s[7]));var d=!1;512&s[28]&&(d=!0);var _,v=s[4],m=s[3],y=s[1]+4,b=v,g=m,E=[];u===o&&(y+=20);if(d)for(var T=0;T<6;T++){if("rgba32f"!==a)throw new Error("Only RGBA32f cubemaps are supported");v=b,m=g;for(var R=Math.log(v)/Math.log(2)+1,x=0;x<R;x++)_=v*m*16,E.push({offset:y,length:_,shape:[v,m]}),x<p&&(y+=_),v=Math.floor(v/2),m=Math.floor(m/2)}else for(x=0;x<p;x++)_=Math.max(4,v)/4*Math.max(4,m)/4*e,E.push({offset:y,length:_,shape:[v,m]}),y+=_,v=Math.floor(v/2),m=Math.floor(m/2);return{shape:[b,g],images:E,format:a,flags:l,cubemap:d}}},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(11)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".webgl {\n\tuser-select: none;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.Main-Canvas {\n\tbackground-color: black;\n}\n",""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}));return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t,e){return e?e.querySelector(t):document.querySelector(t)},u=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=s.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),c=null,f=0,h=[],l=n(12);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function _(t,e){var n=u(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(t.insertAt.before,n);n.insertBefore(e,i)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return y(e,t.attrs),_(t,e),e}function y(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=f++;n=c||(c=m(e)),r=T.bind(null,n,a,!1),i=T.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),_(t,e),e}(e),r=x.bind(null,n,e),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=R.bind(null,n),i=function(){v(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return p(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}t&&p(d(t,e),e);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete o[s.id]}}}};var g,E=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function T(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=E(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function R(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function x(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=l(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e){t.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),n=[],r=0;r<t.length-1;r++)n.push(t[r],e[r]||"");return n.push(t[r]),n.join("")}},function(t,e,n){"use strict";var r=n(5),i=n(15),o=0;t.exports=function t(e){var n,a={},s=[],u=[],c=0,f=0,h={},l=function(r){return Array.isArray(r)?(r.forEach(l),n):((o=!!r.assets&&Array.isArray(r.assets)?t(d(r,e)):i(d(r,e))).once("destroy",y),u.push(o),h[o.id]=o,n);var o},p=function(t){return arguments.length?a[t]?a[t]:h[t]:s},d=function(t,e){"string"==typeof t&&(t={url:t});return void 0===t.isTouchLocked&&(t.isTouchLocked=e.isTouchLocked),void 0===t.blob&&(t.blob=e.blob),void 0===t.basePath&&(t.basePath=e.basePath),t.id=t.id||t.url||String(++o),t.type=t.type||function(t){return t&&t.split("?")[0].split(".").pop().toLowerCase()}(t.url),t.crossOrigin=t.crossOrigin||e.crossOrigin,t.webAudioContext=t.webAudioContext||e.webAudioContext,t.log=e.log,t},_=function(t){var e=c+t;n.emit("progress",e/f)},v=function(t,e,r){Array.isArray(t)&&(t={id:e,file:t,type:r}),c++,n.emit("progress",c/f),a[t.id]=t.file,s.push(t),n.emit("childcomplete",t),b()},m=function(t){f--,n.listeners("error").length&&n.emit("error",t),b()},y=function(t){h[t]=null,delete h[t],a[t]=null,delete a[t],s.some((function(e,n){if(e.id===t)return s.splice(n,1),!0}))},b=function(){c>=f&&n.emit("complete",s,a,e.id,"group")};return n=Object.create(r.prototype,{_events:{value:{}},id:{get:function(){return e.id}},add:{value:l},start:{value:function(){return f=u.length,u.forEach((function(t){t.on("progress",_).once("complete",v).once("error",m).start()})),u=[],n}},get:{value:p},find:{value:function(t){if(p(t))return p(t);var e=null;return Object.keys(h).some((function(n){return!!(e=h[n].find&&h[n].find(t))})),e}},getLoader:{value:function(t){return h[t]}},loaded:{get:function(){return c>=f}},file:{get:function(){return s}},destroy:{value:function(){for(;u.length;)u.pop().destroy();return n.off("error"),n.off("progress"),n.off("complete"),s=[],a={},e.webAudioContext=null,f=0,c=0,Object.keys(h).forEach((function(t){h[t].destroy()})),h={},n.emit("destroy",n.id),n}}}),e=d(e||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(e.assets)&&l(e.assets),n}},function(t,e,n){"use strict";var r=n(5),i=n(16),o=n(6);t.exports=function(t){var e,n,a,s,u,c,f=t.id,h=t.basePath||"",l=t.url,p=t.type,d=t.crossOrigin,_=t.isTouchLocked,v=t.blob&&i,m=t.webAudioContext,y=t.log,b=function(t){t&&(c={id:f,file:t,type:p},e.emit("progress",1),e.emit("complete",c,f,p),D())},g=function(t,e){n=e||T,(a=new XMLHttpRequest).open("GET",h+l,!0),a.responseType=t,a.addEventListener("progress",E),a.addEventListener("load",n),a.addEventListener("error",N),a.send()},E=function(t){t.lengthComputable&&e.emit("progress",t.loaded/t.total)},T=function(){R()&&b(a.response)},R=function(){return a&&a.status<400?(o.update(a,s,l,y),!0):(N(a&&a.statusText),!1)},x=function(){g("json",(function(){if(R()){var t=a.response;"string"==typeof t&&(t=JSON.parse(t)),b(t)}}))},M=function(){v?S():A()},A=function(){a=new Image,d&&(a.crossOrigin="anonymous"),a.addEventListener("error",N,!1),a.addEventListener("load",w,!1),a.src=h+l},w=function(t){window.clearTimeout(u),t||!a.error&&a.readyState?b(a):N()},S=function(){g("blob",(function(){R()&&((a=new Image).addEventListener("error",N,!1),a.addEventListener("load",O,!1),a.src=window.URL.createObjectURL(a.response))}))},O=function(){window.URL.revokeObjectURL(a.src),b(a)},P=function(){m?I():L("audio")},C=function(){v?g("blob"):L("video")},I=function(){g("arraybuffer",(function(){R()&&m.decodeAudioData(a.response,(function(t){a=null,b(t)}),(function(t){N(t)}))}))},L=function(t){a=document.createElement(t),_||(window.clearTimeout(u),u=window.setTimeout(w,2e3),a.addEventListener("canplaythrough",w,!1)),a.addEventListener("error",N,!1),a.preload="auto",a.src=h+l,a.load(),_&&b(a)},N=function(t){window.clearTimeout(u);var n=t;if(a&&a.tagName&&a.error){n="MediaError: "+["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"][a.error.code]+" "+a.src}else a&&a.statusText?n=a.statusText:t&&t.message?n=t.message:t&&t.type&&(n=t.type);e.emit("error",'Error loading "'+h+l+'" '+n),F()},D=function(){e.off("error"),e.off("progress"),e.off("complete"),a&&(a.removeEventListener("progress",E),a.removeEventListener("load",n),a.removeEventListener("error",N),a.removeEventListener("load",w),a.removeEventListener("canplaythrough",w),a.removeEventListener("load",O))},F=function(){D(),a&&a.abort&&a.readyState<4&&a.abort(),a=null,m=null,c=null,window.clearTimeout(u),e.emit("destroy",f)};return e=Object.create(r.prototype,{_events:{value:{}},id:{value:t.id},start:{value:function(){switch(s=Date.now(),p){case"json":x();break;case"jpg":case"png":case"gif":case"webp":case"svg":M();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":P();break;case"ogv":case"mp4":case"webm":case"hls":C();break;case"bin":case"binary":g("arraybuffer");break;case"txt":case"text":g("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+h+l+" ("+p+")"}}},loaded:{get:function(){return!!c}},file:{get:function(){return c}},destroy:{value:F}})}},function(t,e,n){"use strict";t.exports=function(){try{return!!new Blob}catch(t){return!1}}()},function(t,e){window.gui={add:function(){}}},function(t,e,n){"use strict";n.r(e),n.d(e,"WebGL",(function(){return Ob}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return E})),n.d(r,"ARRAY_TYPE",(function(){return T})),n.d(r,"RANDOM",(function(){return R})),n.d(r,"setMatrixArrayType",(function(){return x})),n.d(r,"toRadian",(function(){return A})),n.d(r,"equals",(function(){return w}));var i={};n.r(i),n.d(i,"create",(function(){return S})),n.d(i,"clone",(function(){return O})),n.d(i,"copy",(function(){return P})),n.d(i,"identity",(function(){return C})),n.d(i,"fromValues",(function(){return I})),n.d(i,"set",(function(){return L})),n.d(i,"transpose",(function(){return N})),n.d(i,"invert",(function(){return D})),n.d(i,"adjoint",(function(){return F})),n.d(i,"determinant",(function(){return k})),n.d(i,"multiply",(function(){return U})),n.d(i,"rotate",(function(){return B})),n.d(i,"scale",(function(){return X})),n.d(i,"fromRotation",(function(){return j})),n.d(i,"fromScaling",(function(){return V})),n.d(i,"str",(function(){return H})),n.d(i,"frob",(function(){return G})),n.d(i,"LDU",(function(){return z})),n.d(i,"add",(function(){return Y})),n.d(i,"subtract",(function(){return W})),n.d(i,"exactEquals",(function(){return q})),n.d(i,"equals",(function(){return Z})),n.d(i,"multiplyScalar",(function(){return K})),n.d(i,"multiplyScalarAndAdd",(function(){return Q})),n.d(i,"mul",(function(){return $})),n.d(i,"sub",(function(){return J}));var o={};n.r(o),n.d(o,"create",(function(){return tt})),n.d(o,"clone",(function(){return et})),n.d(o,"copy",(function(){return nt})),n.d(o,"identity",(function(){return rt})),n.d(o,"fromValues",(function(){return it})),n.d(o,"set",(function(){return ot})),n.d(o,"invert",(function(){return at})),n.d(o,"determinant",(function(){return st})),n.d(o,"multiply",(function(){return ut})),n.d(o,"rotate",(function(){return ct})),n.d(o,"scale",(function(){return ft})),n.d(o,"translate",(function(){return ht})),n.d(o,"fromRotation",(function(){return lt})),n.d(o,"fromScaling",(function(){return pt})),n.d(o,"fromTranslation",(function(){return dt})),n.d(o,"str",(function(){return _t})),n.d(o,"frob",(function(){return vt})),n.d(o,"add",(function(){return mt})),n.d(o,"subtract",(function(){return yt})),n.d(o,"multiplyScalar",(function(){return bt})),n.d(o,"multiplyScalarAndAdd",(function(){return gt})),n.d(o,"exactEquals",(function(){return Et})),n.d(o,"equals",(function(){return Tt})),n.d(o,"mul",(function(){return Rt})),n.d(o,"sub",(function(){return xt}));var a={};n.r(a),n.d(a,"create",(function(){return Mt})),n.d(a,"fromMat4",(function(){return At})),n.d(a,"clone",(function(){return wt})),n.d(a,"copy",(function(){return St})),n.d(a,"fromValues",(function(){return Ot})),n.d(a,"set",(function(){return Pt})),n.d(a,"identity",(function(){return Ct})),n.d(a,"transpose",(function(){return It})),n.d(a,"invert",(function(){return Lt})),n.d(a,"adjoint",(function(){return Nt})),n.d(a,"determinant",(function(){return Dt})),n.d(a,"multiply",(function(){return Ft})),n.d(a,"translate",(function(){return kt})),n.d(a,"rotate",(function(){return Ut})),n.d(a,"scale",(function(){return Bt})),n.d(a,"fromTranslation",(function(){return Xt})),n.d(a,"fromRotation",(function(){return jt})),n.d(a,"fromScaling",(function(){return Vt})),n.d(a,"fromMat2d",(function(){return Ht})),n.d(a,"fromQuat",(function(){return Gt})),n.d(a,"normalFromMat4",(function(){return zt})),n.d(a,"projection",(function(){return Yt})),n.d(a,"str",(function(){return Wt})),n.d(a,"frob",(function(){return qt})),n.d(a,"add",(function(){return Zt})),n.d(a,"subtract",(function(){return Kt})),n.d(a,"multiplyScalar",(function(){return Qt})),n.d(a,"multiplyScalarAndAdd",(function(){return $t})),n.d(a,"exactEquals",(function(){return Jt})),n.d(a,"equals",(function(){return te})),n.d(a,"mul",(function(){return ee})),n.d(a,"sub",(function(){return ne}));var s={};n.r(s),n.d(s,"create",(function(){return re})),n.d(s,"clone",(function(){return ie})),n.d(s,"copy",(function(){return oe})),n.d(s,"fromValues",(function(){return ae})),n.d(s,"set",(function(){return se})),n.d(s,"identity",(function(){return ue})),n.d(s,"transpose",(function(){return ce})),n.d(s,"invert",(function(){return fe})),n.d(s,"adjoint",(function(){return he})),n.d(s,"determinant",(function(){return le})),n.d(s,"multiply",(function(){return pe})),n.d(s,"translate",(function(){return de})),n.d(s,"scale",(function(){return _e})),n.d(s,"rotate",(function(){return ve})),n.d(s,"rotateX",(function(){return me})),n.d(s,"rotateY",(function(){return ye})),n.d(s,"rotateZ",(function(){return be})),n.d(s,"fromTranslation",(function(){return ge})),n.d(s,"fromScaling",(function(){return Ee})),n.d(s,"fromRotation",(function(){return Te})),n.d(s,"fromXRotation",(function(){return Re})),n.d(s,"fromYRotation",(function(){return xe})),n.d(s,"fromZRotation",(function(){return Me})),n.d(s,"fromRotationTranslation",(function(){return Ae})),n.d(s,"fromQuat2",(function(){return we})),n.d(s,"getTranslation",(function(){return Se})),n.d(s,"getScaling",(function(){return Oe})),n.d(s,"getRotation",(function(){return Pe})),n.d(s,"fromRotationTranslationScale",(function(){return Ce})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return Ie})),n.d(s,"fromQuat",(function(){return Le})),n.d(s,"frustum",(function(){return Ne})),n.d(s,"perspective",(function(){return De})),n.d(s,"perspectiveFromFieldOfView",(function(){return Fe})),n.d(s,"ortho",(function(){return ke})),n.d(s,"lookAt",(function(){return Ue})),n.d(s,"targetTo",(function(){return Be})),n.d(s,"str",(function(){return Xe})),n.d(s,"frob",(function(){return je})),n.d(s,"add",(function(){return Ve})),n.d(s,"subtract",(function(){return He})),n.d(s,"multiplyScalar",(function(){return Ge})),n.d(s,"multiplyScalarAndAdd",(function(){return ze})),n.d(s,"exactEquals",(function(){return Ye})),n.d(s,"equals",(function(){return We})),n.d(s,"mul",(function(){return qe})),n.d(s,"sub",(function(){return Ze}));var u={};n.r(u),n.d(u,"create",(function(){return Ke})),n.d(u,"clone",(function(){return Qe})),n.d(u,"length",(function(){return $e})),n.d(u,"fromValues",(function(){return Je})),n.d(u,"copy",(function(){return tn})),n.d(u,"set",(function(){return en})),n.d(u,"add",(function(){return nn})),n.d(u,"subtract",(function(){return rn})),n.d(u,"multiply",(function(){return on})),n.d(u,"divide",(function(){return an})),n.d(u,"ceil",(function(){return sn})),n.d(u,"floor",(function(){return un})),n.d(u,"min",(function(){return cn})),n.d(u,"max",(function(){return fn})),n.d(u,"round",(function(){return hn})),n.d(u,"scale",(function(){return ln})),n.d(u,"scaleAndAdd",(function(){return pn})),n.d(u,"distance",(function(){return dn})),n.d(u,"squaredDistance",(function(){return _n})),n.d(u,"squaredLength",(function(){return vn})),n.d(u,"negate",(function(){return mn})),n.d(u,"inverse",(function(){return yn})),n.d(u,"normalize",(function(){return bn})),n.d(u,"dot",(function(){return gn})),n.d(u,"cross",(function(){return En})),n.d(u,"lerp",(function(){return Tn})),n.d(u,"hermite",(function(){return Rn})),n.d(u,"bezier",(function(){return xn})),n.d(u,"random",(function(){return Mn})),n.d(u,"transformMat4",(function(){return An})),n.d(u,"transformMat3",(function(){return wn})),n.d(u,"transformQuat",(function(){return Sn})),n.d(u,"rotateX",(function(){return On})),n.d(u,"rotateY",(function(){return Pn})),n.d(u,"rotateZ",(function(){return Cn})),n.d(u,"angle",(function(){return In})),n.d(u,"zero",(function(){return Ln})),n.d(u,"str",(function(){return Nn})),n.d(u,"exactEquals",(function(){return Dn})),n.d(u,"equals",(function(){return Fn})),n.d(u,"sub",(function(){return Un})),n.d(u,"mul",(function(){return Bn})),n.d(u,"div",(function(){return Xn})),n.d(u,"dist",(function(){return jn})),n.d(u,"sqrDist",(function(){return Vn})),n.d(u,"len",(function(){return Hn})),n.d(u,"sqrLen",(function(){return Gn})),n.d(u,"forEach",(function(){return zn}));var c={};n.r(c),n.d(c,"create",(function(){return Yn})),n.d(c,"clone",(function(){return Wn})),n.d(c,"fromValues",(function(){return qn})),n.d(c,"copy",(function(){return Zn})),n.d(c,"set",(function(){return Kn})),n.d(c,"add",(function(){return Qn})),n.d(c,"subtract",(function(){return $n})),n.d(c,"multiply",(function(){return Jn})),n.d(c,"divide",(function(){return tr})),n.d(c,"ceil",(function(){return er})),n.d(c,"floor",(function(){return nr})),n.d(c,"min",(function(){return rr})),n.d(c,"max",(function(){return ir})),n.d(c,"round",(function(){return or})),n.d(c,"scale",(function(){return ar})),n.d(c,"scaleAndAdd",(function(){return sr})),n.d(c,"distance",(function(){return ur})),n.d(c,"squaredDistance",(function(){return cr})),n.d(c,"length",(function(){return fr})),n.d(c,"squaredLength",(function(){return hr})),n.d(c,"negate",(function(){return lr})),n.d(c,"inverse",(function(){return pr})),n.d(c,"normalize",(function(){return dr})),n.d(c,"dot",(function(){return _r})),n.d(c,"cross",(function(){return vr})),n.d(c,"lerp",(function(){return mr})),n.d(c,"random",(function(){return yr})),n.d(c,"transformMat4",(function(){return br})),n.d(c,"transformQuat",(function(){return gr})),n.d(c,"zero",(function(){return Er})),n.d(c,"str",(function(){return Tr})),n.d(c,"exactEquals",(function(){return Rr})),n.d(c,"equals",(function(){return xr})),n.d(c,"sub",(function(){return Mr})),n.d(c,"mul",(function(){return Ar})),n.d(c,"div",(function(){return wr})),n.d(c,"dist",(function(){return Sr})),n.d(c,"sqrDist",(function(){return Or})),n.d(c,"len",(function(){return Pr})),n.d(c,"sqrLen",(function(){return Cr})),n.d(c,"forEach",(function(){return Ir}));var f={};n.r(f),n.d(f,"create",(function(){return Lr})),n.d(f,"identity",(function(){return Nr})),n.d(f,"setAxisAngle",(function(){return Dr})),n.d(f,"getAxisAngle",(function(){return Fr})),n.d(f,"getAngle",(function(){return kr})),n.d(f,"multiply",(function(){return Ur})),n.d(f,"rotateX",(function(){return Br})),n.d(f,"rotateY",(function(){return Xr})),n.d(f,"rotateZ",(function(){return jr})),n.d(f,"calculateW",(function(){return Vr})),n.d(f,"exp",(function(){return Hr})),n.d(f,"ln",(function(){return Gr})),n.d(f,"pow",(function(){return zr})),n.d(f,"slerp",(function(){return Yr})),n.d(f,"random",(function(){return Wr})),n.d(f,"invert",(function(){return qr})),n.d(f,"conjugate",(function(){return Zr})),n.d(f,"fromMat3",(function(){return Kr})),n.d(f,"fromEuler",(function(){return Qr})),n.d(f,"str",(function(){return $r})),n.d(f,"clone",(function(){return oi})),n.d(f,"fromValues",(function(){return ai})),n.d(f,"copy",(function(){return si})),n.d(f,"set",(function(){return ui})),n.d(f,"add",(function(){return ci})),n.d(f,"mul",(function(){return fi})),n.d(f,"scale",(function(){return hi})),n.d(f,"dot",(function(){return li})),n.d(f,"lerp",(function(){return pi})),n.d(f,"length",(function(){return di})),n.d(f,"len",(function(){return _i})),n.d(f,"squaredLength",(function(){return vi})),n.d(f,"sqrLen",(function(){return mi})),n.d(f,"normalize",(function(){return yi})),n.d(f,"exactEquals",(function(){return bi})),n.d(f,"equals",(function(){return gi})),n.d(f,"rotationTo",(function(){return Ei})),n.d(f,"sqlerp",(function(){return Ti})),n.d(f,"setAxes",(function(){return Ri}));var h={};n.r(h),n.d(h,"create",(function(){return xi})),n.d(h,"clone",(function(){return Mi})),n.d(h,"fromValues",(function(){return Ai})),n.d(h,"fromRotationTranslationValues",(function(){return wi})),n.d(h,"fromRotationTranslation",(function(){return Si})),n.d(h,"fromTranslation",(function(){return Oi})),n.d(h,"fromRotation",(function(){return Pi})),n.d(h,"fromMat4",(function(){return Ci})),n.d(h,"copy",(function(){return Ii})),n.d(h,"identity",(function(){return Li})),n.d(h,"set",(function(){return Ni})),n.d(h,"getReal",(function(){return Di})),n.d(h,"getDual",(function(){return Fi})),n.d(h,"setReal",(function(){return ki})),n.d(h,"setDual",(function(){return Ui})),n.d(h,"getTranslation",(function(){return Bi})),n.d(h,"translate",(function(){return Xi})),n.d(h,"rotateX",(function(){return ji})),n.d(h,"rotateY",(function(){return Vi})),n.d(h,"rotateZ",(function(){return Hi})),n.d(h,"rotateByQuatAppend",(function(){return Gi})),n.d(h,"rotateByQuatPrepend",(function(){return zi})),n.d(h,"rotateAroundAxis",(function(){return Yi})),n.d(h,"add",(function(){return Wi})),n.d(h,"multiply",(function(){return qi})),n.d(h,"mul",(function(){return Zi})),n.d(h,"scale",(function(){return Ki})),n.d(h,"dot",(function(){return Qi})),n.d(h,"lerp",(function(){return $i})),n.d(h,"invert",(function(){return Ji})),n.d(h,"conjugate",(function(){return to})),n.d(h,"length",(function(){return eo})),n.d(h,"len",(function(){return no})),n.d(h,"squaredLength",(function(){return ro})),n.d(h,"sqrLen",(function(){return io})),n.d(h,"normalize",(function(){return oo})),n.d(h,"str",(function(){return ao})),n.d(h,"exactEquals",(function(){return so})),n.d(h,"equals",(function(){return uo}));var l={};n.r(l),n.d(l,"create",(function(){return co})),n.d(l,"clone",(function(){return fo})),n.d(l,"fromValues",(function(){return ho})),n.d(l,"copy",(function(){return lo})),n.d(l,"set",(function(){return po})),n.d(l,"add",(function(){return _o})),n.d(l,"subtract",(function(){return vo})),n.d(l,"multiply",(function(){return mo})),n.d(l,"divide",(function(){return yo})),n.d(l,"ceil",(function(){return bo})),n.d(l,"floor",(function(){return go})),n.d(l,"min",(function(){return Eo})),n.d(l,"max",(function(){return To})),n.d(l,"round",(function(){return Ro})),n.d(l,"scale",(function(){return xo})),n.d(l,"scaleAndAdd",(function(){return Mo})),n.d(l,"distance",(function(){return Ao})),n.d(l,"squaredDistance",(function(){return wo})),n.d(l,"length",(function(){return So})),n.d(l,"squaredLength",(function(){return Oo})),n.d(l,"negate",(function(){return Po})),n.d(l,"inverse",(function(){return Co})),n.d(l,"normalize",(function(){return Io})),n.d(l,"dot",(function(){return Lo})),n.d(l,"cross",(function(){return No})),n.d(l,"lerp",(function(){return Do})),n.d(l,"random",(function(){return Fo})),n.d(l,"transformMat2",(function(){return ko})),n.d(l,"transformMat2d",(function(){return Uo})),n.d(l,"transformMat3",(function(){return Bo})),n.d(l,"transformMat4",(function(){return Xo})),n.d(l,"rotate",(function(){return jo})),n.d(l,"angle",(function(){return Vo})),n.d(l,"zero",(function(){return Ho})),n.d(l,"str",(function(){return Go})),n.d(l,"exactEquals",(function(){return zo})),n.d(l,"equals",(function(){return Yo})),n.d(l,"len",(function(){return Wo})),n.d(l,"sub",(function(){return qo})),n.d(l,"mul",(function(){return Zo})),n.d(l,"div",(function(){return Ko})),n.d(l,"dist",(function(){return Qo})),n.d(l,"sqrDist",(function(){return $o})),n.d(l,"sqrLen",(function(){return Jo})),n.d(l,"forEach",(function(){return ta}));var p={};n.r(p),n.d(p,"glMatrix",(function(){return r})),n.d(p,"mat2",(function(){return i})),n.d(p,"mat2d",(function(){return o})),n.d(p,"mat3",(function(){return a})),n.d(p,"mat4",(function(){return s})),n.d(p,"quat",(function(){return f})),n.d(p,"quat2",(function(){return h})),n.d(p,"vec2",(function(){return l})),n.d(p,"vec3",(function(){return u})),n.d(p,"vec4",(function(){return c}));n(8);var d=n(1),_=n.n(d),v=new _.a,m=new _.a,y=new _.a,b=new _.a,g=new _.a,E=1e-6,T="undefined"!=typeof Float32Array?Float32Array:Array,R=Math.random;function x(t){T=t}var M=Math.PI/180;function A(t){return t*M}function w(t,e){return Math.abs(t-e)<=E*Math.max(1,Math.abs(t),Math.abs(e))}function S(){var t=new T(4);return T!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function O(t){var e=new T(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function P(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function C(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function I(t,e,n,r){var i=new T(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function L(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function N(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function D(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function F(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function k(t){return t[0]*t[3]-t[2]*t[1]}function U(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*f,t[3]=i*c+a*f,t}function B(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function X(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function j(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function V(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function H(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function G(t){return Math.hypot(t[0],t[1],t[2],t[3])}function z(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function Y(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function W(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function q(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Z(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=E*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=E*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=E*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=E*Math.max(1,Math.abs(o),Math.abs(c))}function K(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Q(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var $=U,J=W;function tt(){var t=new T(6);return T!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function et(t){var e=new T(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function nt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function rt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function it(t,e,n,r,i,o){var a=new T(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function ot(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function at(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null}function st(t){return t[0]*t[3]-t[1]*t[2]}function ut(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1],h=n[2],l=n[3],p=n[4],d=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*h+o*l,t[3]=i*h+a*l,t[4]=r*p+o*d+s,t[5]=i*p+a*d+u,t}function ct(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*-c+o*f,t[3]=i*-c+a*f,t[4]=s,t[5]=u,t}function ft(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*f,t[3]=a*f,t[4]=s,t[5]=u,t}function ht(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+s,t[5]=i*c+a*f+u,t}function lt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function pt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function dt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function _t(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function vt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function mt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function yt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function bt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function gt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function Et(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Tt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],c=e[1],f=e[2],h=e[3],l=e[4],p=e[5];return Math.abs(n-u)<=E*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=E*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=E*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-h)<=E*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-l)<=E*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(s-p)<=E*Math.max(1,Math.abs(s),Math.abs(p))}var Rt=ut,xt=yt;function Mt(){var t=new T(9);return T!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function At(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function wt(t){var e=new T(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function St(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ot(t,e,n,r,i,o,a,s,u){var c=new T(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=u,c}function Pt(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function Ct(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=f*a-s*c,l=-f*o+s*u,p=c*o-a*u,d=n*h+r*l+i*p;return d?(d=1/d,t[0]=h*d,t[1]=(-f*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=l*d,t[4]=(f*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null}function Nt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=a*f-s*c,t[1]=i*c-r*f,t[2]=r*s-i*a,t[3]=s*u-o*f,t[4]=n*f-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function Dt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function Ft(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=n[0],p=n[1],d=n[2],_=n[3],v=n[4],m=n[5],y=n[6],b=n[7],g=n[8];return t[0]=l*r+p*a+d*c,t[1]=l*i+p*s+d*f,t[2]=l*o+p*u+d*h,t[3]=_*r+v*a+m*c,t[4]=_*i+v*s+m*f,t[5]=_*o+v*u+m*h,t[6]=y*r+b*a+g*c,t[7]=y*i+b*s+g*f,t[8]=y*o+b*u+g*h,t}function kt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l*r+p*a+c,t[7]=l*i+p*s+f,t[8]=l*o+p*u+h,t}function Ut(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=Math.sin(n),p=Math.cos(n);return t[0]=p*r+l*a,t[1]=p*i+l*s,t[2]=p*o+l*u,t[3]=p*a-l*r,t[4]=p*s-l*i,t[5]=p*u-l*o,t[6]=c,t[7]=f,t[8]=h,t}function Bt(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Xt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function jt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Vt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ht(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Gt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,h=r*s,l=i*a,p=i*s,d=i*u,_=o*a,v=o*s,m=o*u;return t[0]=1-h-d,t[3]=f-m,t[6]=l+v,t[1]=f+m,t[4]=1-c-d,t[7]=p-_,t[2]=l-v,t[5]=p+_,t[8]=1-c-h,t}function zt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],l=e[10],p=e[11],d=e[12],_=e[13],v=e[14],m=e[15],y=n*s-r*a,b=n*u-i*a,g=n*c-o*a,E=r*u-i*s,T=r*c-o*s,R=i*c-o*u,x=f*_-h*d,M=f*v-l*d,A=f*m-p*d,w=h*v-l*_,S=h*m-p*_,O=l*m-p*v,P=y*O-b*S+g*w+E*A-T*M+R*x;return P?(P=1/P,t[0]=(s*O-u*S+c*w)*P,t[1]=(u*A-a*O-c*M)*P,t[2]=(a*S-s*A+c*x)*P,t[3]=(i*S-r*O-o*w)*P,t[4]=(n*O-i*A+o*M)*P,t[5]=(r*A-n*S-o*x)*P,t[6]=(_*R-v*T+m*E)*P,t[7]=(v*g-d*R-m*b)*P,t[8]=(d*T-_*g+m*y)*P,t):null}function Yt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Wt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function qt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Zt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Kt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Qt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function $t(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Jt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function te(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=e[0],l=e[1],p=e[2],d=e[3],_=e[4],v=e[5],m=e[6],y=e[7],b=e[8];return Math.abs(n-h)<=E*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-l)<=E*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-p)<=E*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=E*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-_)<=E*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-v)<=E*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-m)<=E*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-y)<=E*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-b)<=E*Math.max(1,Math.abs(f),Math.abs(b))}var ee=Ft,ne=Kt;function re(){var t=new T(16);return T!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ie(t){var e=new T(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function oe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ae(t,e,n,r,i,o,a,s,u,c,f,h,l,p,d,_){var v=new T(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=c,v[10]=f,v[11]=h,v[12]=l,v[13]=p,v[14]=d,v[15]=_,v}function se(t,e,n,r,i,o,a,s,u,c,f,h,l,p,d,_,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=p,t[13]=d,t[14]=_,t[15]=v,t}function ue(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ce(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function fe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],l=e[10],p=e[11],d=e[12],_=e[13],v=e[14],m=e[15],y=n*s-r*a,b=n*u-i*a,g=n*c-o*a,E=r*u-i*s,T=r*c-o*s,R=i*c-o*u,x=f*_-h*d,M=f*v-l*d,A=f*m-p*d,w=h*v-l*_,S=h*m-p*_,O=l*m-p*v,P=y*O-b*S+g*w+E*A-T*M+R*x;return P?(P=1/P,t[0]=(s*O-u*S+c*w)*P,t[1]=(i*S-r*O-o*w)*P,t[2]=(_*R-v*T+m*E)*P,t[3]=(l*T-h*R-p*E)*P,t[4]=(u*A-a*O-c*M)*P,t[5]=(n*O-i*A+o*M)*P,t[6]=(v*g-d*R-m*b)*P,t[7]=(f*R-l*g+p*b)*P,t[8]=(a*S-s*A+c*x)*P,t[9]=(r*A-n*S-o*x)*P,t[10]=(d*T-_*g+m*y)*P,t[11]=(h*g-f*T-p*y)*P,t[12]=(s*M-a*w-u*x)*P,t[13]=(n*w-r*M+i*x)*P,t[14]=(_*b-d*E-v*y)*P,t[15]=(f*E-h*b+l*y)*P,t):null}function he(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],l=e[10],p=e[11],d=e[12],_=e[13],v=e[14],m=e[15];return t[0]=s*(l*m-p*v)-h*(u*m-c*v)+_*(u*p-c*l),t[1]=-(r*(l*m-p*v)-h*(i*m-o*v)+_*(i*p-o*l)),t[2]=r*(u*m-c*v)-s*(i*m-o*v)+_*(i*c-o*u),t[3]=-(r*(u*p-c*l)-s*(i*p-o*l)+h*(i*c-o*u)),t[4]=-(a*(l*m-p*v)-f*(u*m-c*v)+d*(u*p-c*l)),t[5]=n*(l*m-p*v)-f*(i*m-o*v)+d*(i*p-o*l),t[6]=-(n*(u*m-c*v)-a*(i*m-o*v)+d*(i*c-o*u)),t[7]=n*(u*p-c*l)-a*(i*p-o*l)+f*(i*c-o*u),t[8]=a*(h*m-p*_)-f*(s*m-c*_)+d*(s*p-c*h),t[9]=-(n*(h*m-p*_)-f*(r*m-o*_)+d*(r*p-o*h)),t[10]=n*(s*m-c*_)-a*(r*m-o*_)+d*(r*c-o*s),t[11]=-(n*(s*p-c*h)-a*(r*p-o*h)+f*(r*c-o*s)),t[12]=-(a*(h*v-l*_)-f*(s*v-u*_)+d*(s*l-u*h)),t[13]=n*(h*v-l*_)-f*(r*v-i*_)+d*(r*l-i*h),t[14]=-(n*(s*v-u*_)-a*(r*v-i*_)+d*(r*u-i*s)),t[15]=n*(s*l-u*h)-a*(r*l-i*h)+f*(r*u-i*s),t}function le(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],h=t[10],l=t[11],p=t[12],d=t[13],_=t[14],v=t[15];return(e*a-n*o)*(h*v-l*_)-(e*s-r*o)*(f*v-l*d)+(e*u-i*o)*(f*_-h*d)+(n*s-r*a)*(c*v-l*p)-(n*u-i*a)*(c*_-h*p)+(r*u-i*s)*(c*d-f*p)}function pe(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=e[9],p=e[10],d=e[11],_=e[12],v=e[13],m=e[14],y=e[15],b=n[0],g=n[1],E=n[2],T=n[3];return t[0]=b*r+g*s+E*h+T*_,t[1]=b*i+g*u+E*l+T*v,t[2]=b*o+g*c+E*p+T*m,t[3]=b*a+g*f+E*d+T*y,b=n[4],g=n[5],E=n[6],T=n[7],t[4]=b*r+g*s+E*h+T*_,t[5]=b*i+g*u+E*l+T*v,t[6]=b*o+g*c+E*p+T*m,t[7]=b*a+g*f+E*d+T*y,b=n[8],g=n[9],E=n[10],T=n[11],t[8]=b*r+g*s+E*h+T*_,t[9]=b*i+g*u+E*l+T*v,t[10]=b*o+g*c+E*p+T*m,t[11]=b*a+g*f+E*d+T*y,b=n[12],g=n[13],E=n[14],T=n[15],t[12]=b*r+g*s+E*h+T*_,t[13]=b*i+g*u+E*l+T*v,t[14]=b*o+g*c+E*p+T*m,t[15]=b*a+g*f+E*d+T*y,t}function de(t,e,n){var r,i,o,a,s,u,c,f,h,l,p,d,_=n[0],v=n[1],m=n[2];return e===t?(t[12]=e[0]*_+e[4]*v+e[8]*m+e[12],t[13]=e[1]*_+e[5]*v+e[9]*m+e[13],t[14]=e[2]*_+e[6]*v+e[10]*m+e[14],t[15]=e[3]*_+e[7]*v+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=p,t[11]=d,t[12]=r*_+s*v+h*m+e[12],t[13]=i*_+u*v+l*m+e[13],t[14]=o*_+c*v+p*m+e[14],t[15]=a*_+f*v+d*m+e[15]),t}function _e(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ve(t,e,n,r){var i,o,a,s,u,c,f,h,l,p,d,_,v,m,y,b,g,T,R,x,M,A,w,S,O=r[0],P=r[1],C=r[2],I=Math.hypot(O,P,C);return I<E?null:(O*=I=1/I,P*=I,C*=I,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],u=e[1],c=e[2],f=e[3],h=e[4],l=e[5],p=e[6],d=e[7],_=e[8],v=e[9],m=e[10],y=e[11],b=O*O*a+o,g=P*O*a+C*i,T=C*O*a-P*i,R=O*P*a-C*i,x=P*P*a+o,M=C*P*a+O*i,A=O*C*a+P*i,w=P*C*a-O*i,S=C*C*a+o,t[0]=s*b+h*g+_*T,t[1]=u*b+l*g+v*T,t[2]=c*b+p*g+m*T,t[3]=f*b+d*g+y*T,t[4]=s*R+h*x+_*M,t[5]=u*R+l*x+v*M,t[6]=c*R+p*x+m*M,t[7]=f*R+d*x+y*M,t[8]=s*A+h*w+_*S,t[9]=u*A+l*w+v*S,t[10]=c*A+p*w+m*S,t[11]=f*A+d*w+y*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function me(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=s*i+h*r,t[7]=u*i+l*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=h*i-s*r,t[11]=l*i-u*r,t}function ye(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=s*i-h*r,t[3]=u*i-l*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=s*r+h*i,t[11]=u*r+l*i,t}function be(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],h=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=s*i+h*r,t[3]=u*i+l*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=h*i-s*r,t[7]=l*i-u*r,t}function ge(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Ee(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Te(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<E?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Re(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xe(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ae(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,h=r*u,l=r*c,p=i*u,d=i*c,_=o*c,v=a*s,m=a*u,y=a*c;return t[0]=1-(p+_),t[1]=h+y,t[2]=l-m,t[3]=0,t[4]=h-y,t[5]=1-(f+_),t[6]=d+v,t[7]=0,t[8]=l+m,t[9]=d-v,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function we(t,e){var n=new T(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=r*r+i*i+o*o+a*a;return h>0?(n[0]=2*(s*a+f*r+u*o-c*i)/h,n[1]=2*(u*a+f*i+c*r-s*o)/h,n[2]=2*(c*a+f*o+s*i-u*r)/h):(n[0]=2*(s*a+f*r+u*o-c*i),n[1]=2*(u*a+f*i+c*r-s*o),n[2]=2*(c*a+f*o+s*i-u*r)),Ae(t,e,n),t}function Se(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Oe(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,f),t}function Pe(t,e){var n=new T(3);Oe(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,c=e[4]*r,f=e[5]*i,h=e[6]*o,l=e[8]*r,p=e[9]*i,d=e[10]*o,_=a+f+d,v=0;return _>0?(v=2*Math.sqrt(_+1),t[3]=.25*v,t[0]=(h-p)/v,t[1]=(l-u)/v,t[2]=(s-c)/v):a>f&&a>d?(v=2*Math.sqrt(1+a-f-d),t[3]=(h-p)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(l+u)/v):f>d?(v=2*Math.sqrt(1+f-a-d),t[3]=(l-u)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(h+p)/v):(v=2*Math.sqrt(1+d-a-f),t[3]=(s-c)/v,t[0]=(l+u)/v,t[1]=(h+p)/v,t[2]=.25*v),t}function Ce(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,h=i*u,l=i*c,p=i*f,d=o*c,_=o*f,v=a*f,m=s*u,y=s*c,b=s*f,g=r[0],E=r[1],T=r[2];return t[0]=(1-(d+v))*g,t[1]=(l+b)*g,t[2]=(p-y)*g,t[3]=0,t[4]=(l-b)*E,t[5]=(1-(h+v))*E,t[6]=(_+m)*E,t[7]=0,t[8]=(p+y)*T,t[9]=(_-m)*T,t[10]=(1-(h+d))*T,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ie(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,h=s+s,l=o*c,p=o*f,d=o*h,_=a*f,v=a*h,m=s*h,y=u*c,b=u*f,g=u*h,E=r[0],T=r[1],R=r[2],x=i[0],M=i[1],A=i[2],w=(1-(_+m))*E,S=(p+g)*E,O=(d-b)*E,P=(p-g)*T,C=(1-(l+m))*T,I=(v+y)*T,L=(d+b)*R,N=(v-y)*R,D=(1-(l+_))*R;return t[0]=w,t[1]=S,t[2]=O,t[3]=0,t[4]=P,t[5]=C,t[6]=I,t[7]=0,t[8]=L,t[9]=N,t[10]=D,t[11]=0,t[12]=n[0]+x-(w*x+P*M+L*A),t[13]=n[1]+M-(S*x+C*M+N*A),t[14]=n[2]+A-(O*x+I*M+D*A),t[15]=1,t}function Le(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,h=r*s,l=i*a,p=i*s,d=i*u,_=o*a,v=o*s,m=o*u;return t[0]=1-h-d,t[1]=f+m,t[2]=l-v,t[3]=0,t[4]=f-m,t[5]=1-c-d,t[6]=p+_,t[7]=0,t[8]=l+v,t[9]=p-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ne(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function De(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function Fe(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function ke(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function Ue(t,e,n,r){var i,o,a,s,u,c,f,h,l,p,d=e[0],_=e[1],v=e[2],m=r[0],y=r[1],b=r[2],g=n[0],T=n[1],R=n[2];return Math.abs(d-g)<E&&Math.abs(_-T)<E&&Math.abs(v-R)<E?ue(t):(f=d-g,h=_-T,l=v-R,i=y*(l*=p=1/Math.hypot(f,h,l))-b*(h*=p),o=b*(f*=p)-m*l,a=m*h-y*f,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=h*a-l*o,u=l*i-f*a,c=f*o-h*i,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=l,t[11]=0,t[12]=-(i*d+o*_+a*v),t[13]=-(s*d+u*_+c*v),t[14]=-(f*d+h*_+l*v),t[15]=1,t)}function Be(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],f=i-n[0],h=o-n[1],l=a-n[2],p=f*f+h*h+l*l;p>0&&(f*=p=1/Math.sqrt(p),h*=p,l*=p);var d=u*l-c*h,_=c*f-s*l,v=s*h-u*f;return(p=d*d+_*_+v*v)>0&&(d*=p=1/Math.sqrt(p),_*=p,v*=p),t[0]=d,t[1]=_,t[2]=v,t[3]=0,t[4]=h*v-l*_,t[5]=l*d-f*v,t[6]=f*_-h*d,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Xe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function je(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ve(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function He(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ge(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function ze(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ye(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function We(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],l=t[10],p=t[11],d=t[12],_=t[13],v=t[14],m=t[15],y=e[0],b=e[1],g=e[2],T=e[3],R=e[4],x=e[5],M=e[6],A=e[7],w=e[8],S=e[9],O=e[10],P=e[11],C=e[12],I=e[13],L=e[14],N=e[15];return Math.abs(n-y)<=E*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=E*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-g)<=E*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(o-T)<=E*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(a-R)<=E*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(s-x)<=E*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-M)<=E*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-A)<=E*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-w)<=E*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(h-S)<=E*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(l-O)<=E*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(p-P)<=E*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(d-C)<=E*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(_-I)<=E*Math.max(1,Math.abs(_),Math.abs(I))&&Math.abs(v-L)<=E*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(m-N)<=E*Math.max(1,Math.abs(m),Math.abs(N))}var qe=pe,Ze=He;function Ke(){var t=new T(3);return T!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Qe(t){var e=new T(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function $e(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Je(t,e,n){var r=new T(3);return r[0]=t,r[1]=e,r[2]=n,r}function tn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function en(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function nn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function rn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function on(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function an(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function sn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function un(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function cn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function fn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function hn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function ln(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function pn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function dn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function _n(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function vn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function mn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function yn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function bn(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function gn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function En(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function Tn(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function Rn(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*f,t}function xn(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,h=3*u*a,l=u*o;return t[0]=e[0]*c+n[0]*f+r[0]*h+i[0]*l,t[1]=e[1]*c+n[1]*f+r[1]*h+i[1]*l,t[2]=e[2]*c+n[2]*f+r[2]*h+i[2]*l,t}function Mn(t,e){e=e||1;var n=2*R()*Math.PI,r=2*R()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function An(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function wn(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function Sn(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=i*c-o*u,h=o*s-r*c,l=r*u-i*s,p=i*l-o*h,d=o*f-r*l,_=r*h-i*f,v=2*a;return f*=v,h*=v,l*=v,p*=2,d*=2,_*=2,t[0]=s+f+p,t[1]=u+h+d,t[2]=c+l+_,t}function On(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Pn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Cn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function In(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&gn(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function Ln(t){return t[0]=0,t[1]=0,t[2]=0,t}function Nn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Dn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Fn(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=E*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=E*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=E*Math.max(1,Math.abs(i),Math.abs(s))}var kn,Un=rn,Bn=on,Xn=an,jn=dn,Vn=_n,Hn=$e,Gn=vn,zn=(kn=Ke(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)kn[0]=t[a],kn[1]=t[a+1],kn[2]=t[a+2],i(kn,kn,o),t[a]=kn[0],t[a+1]=kn[1],t[a+2]=kn[2];return t});function Yn(){var t=new T(4);return T!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Wn(t){var e=new T(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function qn(t,e,n,r){var i=new T(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Zn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Kn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Qn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function $n(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Jn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function tr(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function er(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function nr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function rr(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function ir(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function or(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function ar(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function sr(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function ur(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function cr(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function fr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function hr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function lr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function pr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function dr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function _r(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function vr(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],h=e[1],l=e[2],p=e[3];return t[0]=h*c-l*u+p*s,t[1]=-f*c+l*a-p*o,t[2]=f*u-h*a+p*i,t[3]=-f*s+h*o-l*i,t}function mr(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function yr(t,e){var n,r,i,o,a,s;e=e||1;do{a=(n=2*R()-1)*n+(r=2*R()-1)*r}while(a>=1);do{s=(i=2*R()-1)*i+(o=2*R()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function br(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function gr(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,h=c*i+u*r-a*o,l=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=f*c+p*-a+h*-u-l*-s,t[1]=h*c+p*-s+l*-a-f*-u,t[2]=l*c+p*-u+f*-s-h*-a,t[3]=e[3],t}function Er(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Tr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Rr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function xr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=E*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=E*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=E*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=E*Math.max(1,Math.abs(o),Math.abs(c))}var Mr=$n,Ar=Jn,wr=tr,Sr=ur,Or=cr,Pr=fr,Cr=hr,Ir=function(){var t=Yn();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Lr(){var t=new T(4);return T!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Nr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Dr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Fr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>E?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function kr(t,e){var n=li(t,e);return Math.acos(2*n*n-1)}function Ur(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,t}function Br(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}function Xr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}function jr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function Vr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Hr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*Math.cos(a),t}function Gr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function zr(t,e,n){return Gr(t,e),hi(t,t,n),Hr(t,t),t}function Yr(t,e,n,r){var i,o,a,s,u,c=e[0],f=e[1],h=e[2],l=e[3],p=n[0],d=n[1],_=n[2],v=n[3];return(o=c*p+f*d+h*_+l*v)<0&&(o=-o,p=-p,d=-d,_=-_,v=-v),1-o>E?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*f+u*d,t[2]=s*h+u*_,t[3]=s*l+u*v,t}function Wr(t){var e=R(),n=R(),r=R(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function qr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function Zr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Kr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function Qr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=o*u*f-a*s*c,t[1]=a*s*f+o*u*c,t[2]=a*u*c-o*s*f,t[3]=a*u*f+o*s*c,t}function $r(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Jr,ti,ei,ni,ri,ii,oi=Wn,ai=qn,si=Zn,ui=Kn,ci=Qn,fi=Ur,hi=ar,li=_r,pi=mr,di=fr,_i=di,vi=hr,mi=vi,yi=dr,bi=Rr,gi=xr,Ei=(Jr=Ke(),ti=Je(1,0,0),ei=Je(0,1,0),function(t,e,n){var r=gn(e,n);return r<-.999999?(En(Jr,ti,e),Hn(Jr)<1e-6&&En(Jr,ei,e),bn(Jr,Jr),Dr(t,Jr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(En(Jr,e,n),t[0]=Jr[0],t[1]=Jr[1],t[2]=Jr[2],t[3]=1+r,yi(t,t))}),Ti=(ni=Lr(),ri=Lr(),function(t,e,n,r,i,o){return Yr(ni,e,i,o),Yr(ri,n,r,o),Yr(t,ni,ri,2*o*(1-o)),t}),Ri=(ii=Mt(),function(t,e,n,r){return ii[0]=n[0],ii[3]=n[1],ii[6]=n[2],ii[1]=r[0],ii[4]=r[1],ii[7]=r[2],ii[2]=-e[0],ii[5]=-e[1],ii[8]=-e[2],yi(t,Kr(t,ii))});function xi(){var t=new T(8);return T!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Mi(t){var e=new T(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Ai(t,e,n,r,i,o,a,s){var u=new T(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u}function wi(t,e,n,r,i,o,a){var s=new T(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,c=.5*o,f=.5*a;return s[4]=u*r+c*n-f*e,s[5]=c*r+f*t-u*n,s[6]=f*r+u*e-c*t,s[7]=-u*t-c*e-f*n,s}function Si(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*s,t[5]=i*c+o*a-r*u,t[6]=o*c+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function Oi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Pi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ci(t,e){var n=Lr();Pe(n,e);var r=new T(3);return Se(r,e),Si(t,n,r),t}function Ii(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Li(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ni(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}var Di=si;function Fi(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var ki=si;function Ui(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Bi(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*u-i*s),t[1]=2*(r*c+o*s+i*a-n*u),t[2]=2*(i*c+o*u+n*s-r*a),t}function Xi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=e[4],h=e[5],l=e[6],p=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*c-o*u+f,t[5]=a*u+o*s-r*c+h,t[6]=a*c+r*u-i*s+l,t[7]=-r*s-i*u-o*c+p,t}function ji(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=s*a+f*r+u*o-c*i,l=u*a+f*i+c*r-s*o,p=c*a+f*o+s*i-u*r,d=f*a-s*r-u*i-c*o;return Br(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+d*r+l*o-p*i,t[5]=l*a+d*i+p*r-h*o,t[6]=p*a+d*o+h*i-l*r,t[7]=d*a-h*r-l*i-p*o,t}function Vi(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=s*a+f*r+u*o-c*i,l=u*a+f*i+c*r-s*o,p=c*a+f*o+s*i-u*r,d=f*a-s*r-u*i-c*o;return Xr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+d*r+l*o-p*i,t[5]=l*a+d*i+p*r-h*o,t[6]=p*a+d*o+h*i-l*r,t[7]=d*a-h*r-l*i-p*o,t}function Hi(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=s*a+f*r+u*o-c*i,l=u*a+f*i+c*r-s*o,p=c*a+f*o+s*i-u*r,d=f*a-s*r-u*i-c*o;return jr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+d*r+l*o-p*i,t[5]=l*a+d*i+p*r-h*o,t[6]=p*a+d*o+h*i-l*r,t[7]=d*a-h*r-l*i-p*o,t}function Gi(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*a+f*r+u*o-c*i,t[1]=u*a+f*i+c*r-s*o,t[2]=c*a+f*o+s*i-u*r,t[3]=f*a-s*r-u*i-c*o,s=e[4],u=e[5],c=e[6],f=e[7],t[4]=s*a+f*r+u*o-c*i,t[5]=u*a+f*i+c*r-s*o,t[6]=c*a+f*o+s*i-u*r,t[7]=f*a-s*r-u*i-c*o,t}function zi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,s=n[4],u=n[5],c=n[6],f=n[7],t[4]=r*f+a*s+i*c-o*u,t[5]=i*f+a*u+o*s-r*c,t[6]=o*f+a*c+r*u-i*s,t[7]=a*f-r*s-i*u-o*c,t}function Yi(t,e,n,r){if(Math.abs(r)<E)return Ii(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,s=o*n[1]/i,u=o*n[2]/i,c=Math.cos(r),f=e[0],h=e[1],l=e[2],p=e[3];t[0]=f*c+p*a+h*u-l*s,t[1]=h*c+p*s+l*a-f*u,t[2]=l*c+p*u+f*s-h*a,t[3]=p*c-f*a-h*s-l*u;var d=e[4],_=e[5],v=e[6],m=e[7];return t[4]=d*c+m*a+_*u-v*s,t[5]=_*c+m*s+v*a-d*u,t[6]=v*c+m*u+d*s-_*a,t[7]=m*c-d*a-_*s-v*u,t}function Wi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function qi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],f=n[7],h=e[4],l=e[5],p=e[6],d=e[7],_=n[0],v=n[1],m=n[2],y=n[3];return t[0]=r*y+a*_+i*m-o*v,t[1]=i*y+a*v+o*_-r*m,t[2]=o*y+a*m+r*v-i*_,t[3]=a*y-r*_-i*v-o*m,t[4]=r*f+a*s+i*c-o*u+h*y+d*_+l*m-p*v,t[5]=i*f+a*u+o*s-r*c+l*y+d*v+p*_-h*m,t[6]=o*f+a*c+r*u-i*s+p*y+d*m+h*v-l*_,t[7]=a*f-r*s-i*u-o*c+d*y-h*_-l*v-p*m,t}var Zi=qi;function Ki(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Qi=li;function $i(t,e,n,r){var i=1-r;return Qi(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Ji(t,e){var n=ro(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function to(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var eo=di,no=eo,ro=vi,io=ro;function oo(t,e){var n=ro(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],f=e[7],h=r*s+i*u+o*c+a*f;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-r*h)/n,t[5]=(u-i*h)/n,t[6]=(c-o*h)/n,t[7]=(f-a*h)/n}return t}function ao(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function so(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function uo(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=e[0],h=e[1],l=e[2],p=e[3],d=e[4],_=e[5],v=e[6],m=e[7];return Math.abs(n-f)<=E*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=E*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-l)<=E*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-p)<=E*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-d)<=E*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-_)<=E*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(u-v)<=E*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-m)<=E*Math.max(1,Math.abs(c),Math.abs(m))}function co(){var t=new T(2);return T!=Float32Array&&(t[0]=0,t[1]=0),t}function fo(t){var e=new T(2);return e[0]=t[0],e[1]=t[1],e}function ho(t,e){var n=new T(2);return n[0]=t,n[1]=e,n}function lo(t,e){return t[0]=e[0],t[1]=e[1],t}function po(t,e,n){return t[0]=e,t[1]=n,t}function _o(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function vo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function mo(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function yo(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function bo(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function go(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Eo(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function To(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function Ro(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function xo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Mo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Ao(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function wo(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function So(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Oo(t){var e=t[0],n=t[1];return e*e+n*n}function Po(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Co(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Io(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Lo(t,e){return t[0]*e[0]+t[1]*e[1]}function No(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Do(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function Fo(t,e){e=e||1;var n=2*R()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function ko(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function Uo(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function Bo(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Xo(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function jo(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function Vo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function Ho(t){return t[0]=0,t[1]=0,t}function Go(t){return"vec2("+t[0]+", "+t[1]+")"}function zo(t,e){return t[0]===e[0]&&t[1]===e[1]}function Yo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=E*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=E*Math.max(1,Math.abs(r),Math.abs(o))}var Wo=So,qo=vo,Zo=mo,Ko=yo,Qo=Ao,$o=wo,Jo=Oo,ta=function(){var t=co();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),ea=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","OES_vertex_array_object","ANGLE_instanced_arrays","WEBGL_draw_buffers"],na=n(3),ra=n.n(na),ia=function(){for(var t in ra.a)_a[t]||(_a[t]=ra.a[t])};function oa(t,e){var n=t.getExtension(e);if(!n)return!1;var r=e.split("_")[0],i=new RegExp("".concat(r,"$"));for(var o in n){if("function"==typeof n[o]){var a=o.replace(i,"");o.substring&&(t[a]=n[o].bind(n))}}return!0}var aa,sa=function(t,e,n){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[n]&&(e.cacheAttribLoc[n]=t.getAttribLocation(e,n)),e.cacheAttribLoc[n]},ua=!1;var ca,fa=function(){return ua||(aa=_a.webgl2||_a.getExtension("OES_texture_float")?_a.gl.FLOAT:_a.gl.UNSIGNED_BYTE),aa},ha=!1;var la,pa=function(){return ha||(ca=function(){if(_a.webgl2)return _a.gl.HALF_FLOAT;var t=_a.getExtension("OES_texture_half_float");return t?t.HALF_FLOAT_OES:_a.gl.UNSIGNED_BYTE}()),ca};function da(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=s.create(),this._normalMatrix=a.create(),this._inverseModelViewMatrix=a.create(),this._modelMatrix=s.create(),this._matrix=s.create(),this._matrixStacks=[],this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance=!1,this._extArrayInstance=!1,this._hasCheckedExt=!1,s.identity(this.identityMatrix,this.identityMatrix),this.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=t&&(void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=t,this.setSize(window.innerWidth,window.innerHeight),n.useWebgl2=n.useWebgl2||!1,n.useWebgl2&&(e=this.canvas.getContext("experimental-webgl2",n)||this.canvas.getContext("webgl2",n))?this._useWebGL2=!0:(e=this.canvas.getContext("webgl",n)||this.canvas.getContext("experimental-webgl",n),this._useWebGL2=!1),this.initWithGL(e))}},{key:"initWithGL",value:function(t){this.canvas||(this.canvas=t.canvas),la=this.gl=t,this.extensions={};for(var e=0;e<ea.length;e++)this.extensions[ea[e]]=la.getExtension(ea[e]);ia(),oa(la,"OES_vertex_array_object"),oa(la,"ANGLE_instanced_arrays"),oa(la,"WEBGL_draw_buffers"),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.enable(this.BLEND),this.enableAlphaBlending()}},{key:"setViewport",value:function(t,e,n,r){var i=!1;t!==this._viewport[0]&&(i=!0),e!==this._viewport[1]&&(i=!0),n!==this._viewport[2]&&(i=!0),r!==this._viewport[3]&&(i=!0),i&&(la.viewport(t,e,n,r),this._viewport=[t,e,n,r])}},{key:"scissor",value:function(t,e,n,r){this.gl.scissor(t,e,n,r)}},{key:"clear",value:function(t,e,n,r){this.gl.clearColor(t,e,n,r),this.gl.clear(la.COLOR_BUFFER_BIT|la.DEPTH_BUFFER_BIT)}},{key:"cullFace",value:function(t){this.gl.cullFace(t)}},{key:"setMatrices",value:function(t){this.camera=t,this.rotate(this.identityMatrix)}},{key:"useShader",value:function(t){this.shader=t,this.shaderProgram=this.shader.shaderProgram}},{key:"rotate",value:function(t){s.copy(this._modelMatrix,t),s.multiply(this._matrix,this.camera.matrix,this._modelMatrix),a.fromMat4(this._normalMatrix,this._matrix),a.invert(this._normalMatrix,this._normalMatrix),a.transpose(this._normalMatrix,this._normalMatrix),a.fromMat4(this._inverseModelViewMatrix,this._matrix),a.invert(this._inverseModelViewMatrix,this._inverseModelViewMatrix)}},{key:"draw",value:function(t,e){var n=this.gl;if(t.length)for(var r=0;r<t.length;r++)this.draw(t[r]);else{t.bind(this.shaderProgram),void 0!==this.camera&&(this.shader.uniform("uProjectionMatrix","mat4",this.camera.projection),this.shader.uniform("uViewMatrix","mat4",this.camera.matrix)),this.shader.uniform("uModelMatrix","mat4",this._modelMatrix),this.shader.uniform("uNormalMatrix","mat3",this._normalMatrix),this.shader.uniform("uModelViewMatrixInverse","mat3",this._inverseModelViewMatrix);var i=t.drawType;void 0!==e&&(i=e),t.isInstanced?n.drawElementsInstanced(t.drawType,t.iBuffer.numItems,n.UNSIGNED_SHORT,0,t.numInstance):i===n.POINTS?n.drawArrays(i,0,t.vertexSize):n.drawElements(i,t.iBuffer.numItems,n.UNSIGNED_SHORT,0),t.unbind()}}},{key:"drawTransformFeedback",value:function(t){var e=this.gl,n=t.meshSource,r=t.meshDestination,i=t.numPoints,o=t.transformFeedback;n.bind(this.shaderProgram),r.generateBuffers(this.shaderProgram),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,o),r.attributes.forEach((function(t,n){e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,t.buffer)})),e.enable(e.RASTERIZER_DISCARD),e.beginTransformFeedback(e.POINTS),e.drawArrays(e.POINTS,0,i),e.endTransformFeedback(),e.disable(e.RASTERIZER_DISCARD),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),r.attributes.forEach((function(t,n){e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,null)})),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),n.unbind()}},{key:"setSize",value:function(t,e){var n=this.gl;this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,n&&this.viewport(0,0,this._width,this._height)}},{key:"showExtensions",value:function(){for(var t in this.extensions)this.extensions[t]}},{key:"checkExtension",value:function(t){return!!this.extensions[t]}},{key:"getExtension",value:function(t){return this.extensions[t]}},{key:"enableAlphaBlending",value:function(){var t=this.gl;t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}},{key:"enableAdditiveBlending",value:function(){var t=this.gl;t.blendFunc(t.ONE,t.ONE)}},{key:"pushMatrix",value:function(){var t=s.clone(this._modelMatrix);this._matrixStacks.push(t)}},{key:"popMatrix",value:function(){if(0==this._matrixStacks.length)return null;var t=this._matrixStacks.pop();this.rotate(t)}},{key:"enable",value:function(t){this.gl.enable(t)}},{key:"disable",value:function(t){this.gl.disable(t)}},{key:"viewport",value:function(t,e,n,r){this.setViewport(t,e,n,r)}},{key:"destroy",value:function(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(t){}this.canvas=null}},{key:"FLOAT",get:function(){return fa()}},{key:"HALF_FLOAT",get:function(){return pa()}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"aspectRatio",get:function(){return this._aspectRatio}},{key:"webgl2",get:function(){return this._useWebGL2}}])&&da(e.prototype,n),r&&da(e,r),t}());function va(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ma=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mesh=e,this._shader=n}var e,n,r;return e=t,(n=[{key:"draw",value:function(){this._shader.bind(),_a.draw(this.mesh)}},{key:"destroy",value:function(){this.mesh.destroy();var t=_a.gl;t.useProgram(null),t.deleteProgram(this._shader.shaderProgram)}},{key:"mesh",get:function(){return this._mesh}},{key:"shader",get:function(){return this._shader}}])&&va(e.prototype,n),r&&va(e,r),t}();function ya(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ba(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ga=function(t,e){var n;return void 0!==t.buffer?n=t.buffer:(n=e.createBuffer(),t.buffer=n),n},Ea=function(t,e){for(var n=[],r=0;r<t.length;r+=e){for(var i=[],o=0;o<e;o++)i.push(t[r+o]);n.push(i)}return n},Ta=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ya(this,t),this.gl=_a.gl,this.drawType=e,this._attributes=[],this._numInstance=-1,this._enabledVertexAttribute=[],this._indices=[],this._faces=[],this._bufferChanged=[],this._hasIndexBufferChanged=!1,this._hasVAO=!1,this._isInstanced=!1,this._extVAO=!!_a.gl.createVertexArray,this._useVAO=!!this._extVAO&&n}var e,n,r;return e=t,(n=[{key:"bufferVertex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this.bufferData(t,"aVertexPosition",3,e),this.normals.length<this.vertices.length&&this.bufferNormal(t,e),this}},{key:"bufferTexCoord",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this.bufferData(t,"aTextureCoord",2,e),this}},{key:"bufferNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this.bufferData(t,"aNormal",3,e),this}},{key:"bufferIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.gl;return this._drawType=e?n.DYNAMIC_DRAW:n.STATIC_DRAW,this._indices=new Uint16Array(t),this._numItems=this._indices.length,this}},{key:"bufferFlattenData",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];var r=Ea(t,n);return this.bufferData(r,e,n,35044,!1),this}},{key:"bufferData",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:35044,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=r,s=[];for(n||(n=t[0].length),this._isInstanced=i||this._isInstanced,o=0;o<t.length;o++)for(var u=0;u<t[o].length;u++)s.push(t[o][u]);var c=new Float32Array(s),f=this.getAttribute(e);return f?(f.itemSize=n,f.dataArray=c,f.source=t):this._attributes.push({name:e,source:t,itemSize:n,drawType:a,dataArray:c,isInstanced:i}),this._bufferChanged.push(e),this}},{key:"bufferInstance",value:function(t,e){if(_a.gl.vertexAttribDivisor){var n=t[0].length;this._numInstance=t.length,this.bufferData(t,e,n,35044,!0)}}},{key:"bind",value:function(t){var e=this.gl;this.generateBuffers(t),this.hasVAO?e.bindVertexArray(this.vao):(this.attributes.forEach((function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);var n=t.attrPosition;e.vertexAttribPointer(n,t.itemSize,e.FLOAT,!1,0,0),t.isInstanced&&e.vertexAttribDivisor(n,1)})),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.iBuffer))}},{key:"generateBuffers",value:function(t){var e=this,n=this.gl;0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=n.createVertexArray()),n.bindVertexArray(this._vao),this._attributes.forEach((function(r){if(-1!==e._bufferChanged.indexOf(r.name)){var i=ga(r,e.gl);n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,r.dataArray,r.drawType);var o=sa(n,t,r.name);n.enableVertexAttribArray(o),n.vertexAttribPointer(o,r.itemSize,n.FLOAT,!1,0,0),r.attrPosition=o,r.isInstanced&&n.vertexAttribDivisor(o,1)}})),this._updateIndexBuffer(),n.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach((function(r){if(-1!==e._bufferChanged.indexOf(r.name)){var i=ga(r,e.gl);n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,r.dataArray,r.drawType);var o=sa(n,t,r.name);n.enableVertexAttribArray(o),n.vertexAttribPointer(o,r.itemSize,n.FLOAT,!1,0,0),r.attrPosition=o,r.isInstanced&&n.vertexAttribDivisor(o,1)}})),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}},{key:"unbind",value:function(){var t=this.gl;this._useVAO&&t.bindVertexArray(null),this._attributes.forEach((function(e){e.isInstanced&&t.vertexAttribDivisor(e.attrPosition,0)}))}},{key:"_updateIndexBuffer",value:function(){var t=this.gl;this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}},{key:"computeNormals",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.generateFaces(),t?this._computeFaceNormals():this._computeVertexNormals()}},{key:"_computeFaceNormals",value:function(){for(var t,e,n=[],r=0;r<this._indices.length;r+=3){t=r/3;var i=(e=this._faces[t]).normal;n[e.indices[0]]=i,n[e.indices[1]]=i,n[e.indices[2]]=i}this.bufferNormal(n)}},{key:"_computeVertexNormals",value:function(){for(var t,e=u.create(),n=[],r=this.vertices,i=0;i<r.length;i++){u.set(e,0,0,0);for(var o=0;o<this._faces.length;o++)(t=this._faces[o]).indices.indexOf(i)>=0&&(e[0]+=t.normal[0],e[1]+=t.normal[1],e[2]+=t.normal[2]);u.normalize(e,e),n.push([e[0],e[1],e[2]])}this.bufferNormal(n)}},{key:"generateFaces",value:function(){u.create(),u.create(),u.create();for(var t,e,n,r=this.vertices,i=0;i<this._indices.length;i+=3){var o={indices:[t=this._indices[i],e=this._indices[i+1],n=this._indices[i+2]],vertices:[r[t],r[e],r[n]]};this._faces.push(o)}}},{key:"getAttribute",value:function(t){return this._attributes.find((function(e){return e.name===t}))}},{key:"getSource",value:function(t){var e=this.getAttribute(t);return e?e.source:[]}},{key:"destroy",value:function(){var t=this,e=this.gl;this._attributes.forEach((function(n){var r=ga(n,t.gl);e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,1,e.STATIC_DRAW),e.deleteBuffer(r),n.buffer=null})),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.iBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,1,e.STATIC_DRAW),e.deleteBuffer(this.iBuffer),this.hasVAO&&e.deleteVertexArray(this._vao),this.iBuffer=null,this._vao=null}},{key:"vertices",get:function(){return this.getSource("aVertexPosition")}},{key:"normals",get:function(){return this.getSource("aNormal")}},{key:"coords",get:function(){return this.getSource("aTextureCoord")}},{key:"indices",get:function(){return this._indices}},{key:"vertexSize",get:function(){return this.vertices.length}},{key:"faces",get:function(){return this._faces}},{key:"attributes",get:function(){return this._attributes}},{key:"hasVAO",get:function(){return this._hasVAO}},{key:"vao",get:function(){return this._vao}},{key:"numInstance",get:function(){return this._numInstance}},{key:"isInstanced",get:function(){return this._isInstanced}}])&&ba(e.prototype,n),r&&ba(e,r),t}(),Ra="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}",xa="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}";n(13);function Ma(t){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Aa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Sa=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},Oa=function(t){return t.slice?t.slice(0):new Float32Array(t)},Pa={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},Ca=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ra,r=arguments.length>2?arguments[2]:void 0;Aa(this,t),this.gl=_a.gl,this.parameters=[],this.uniformTextures=[],this._varyings=r,e||(e=xa),n||(n=xa);var i=this._createShaderProgram(e,!0),o=this._createShaderProgram(n,!1);this._attachShaderProgram(i,o)}var e,n,r;return e=t,(n=[{key:"bind",value:function(){_a.shader!==this&&(this.gl.useProgram(this.shaderProgram),_a.useShader(this),this.uniformTextures=[])}},{key:"uniform",value:function(t,e,n){if("object"!==Ma(t)){for(var r,i=Pa[e]||e,o=!1,a=-1,s=0;s<this.parameters.length;s++)if((r=this.parameters[s]).name===t){o=!0,a=s;break}var u=!1;o?(this.shaderProgram[t]=r.uniformLoc,u=r.isNumber):(u="uniform1i"===i||"uniform1f"===i,this.shaderProgram[t]=this.gl.getUniformLocation(this.shaderProgram,t),u?this.parameters.push({name:t,type:i,value:n,uniformLoc:this.shaderProgram[t],isNumber:u}):this.parameters.push({name:t,type:i,value:Oa(n),uniformLoc:this.shaderProgram[t],isNumber:u}),a=this.parameters.length-1),this.parameters[a].uniformLoc&&(-1===i.indexOf("Matrix")?u?(this.parameters[a].value!==n||!o)&&(this.gl[i](this.shaderProgram[t],n),this.parameters[a].value=n):Sa(this.parameters[a].value,n)&&o||(this.gl[i](this.shaderProgram[t],n),this.parameters[a].value=Oa(n)):Sa(this.parameters[a].value,n)&&o||(this.gl[i](this.shaderProgram[t],!1,n),this.parameters[a].value=Oa(n)))}else this.uniformObject(t)}},{key:"uniformObject",value:function(e){for(var n in e){var r=e[n],i=t.getUniformType(r);if(r.concat&&r[0].concat){for(var o=[],a=0;a<r.length;a++)o=o.concat(r[a]);r=o}this.uniform(n,i,r)}}},{key:"_createShaderProgram",value:function(t,e){var n=this.gl,r=e?_a.VERTEX_SHADER:_a.FRAGMENT_SHADER,i=n.createShader(r);return n.shaderSource(i,t),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)?i:null}},{key:"_attachShaderProgram",value:function(t,e){var n=this.gl;this.shaderProgram=n.createProgram(),n.attachShader(this.shaderProgram,t),n.attachShader(this.shaderProgram,e),n.deleteShader(t),n.deleteShader(e),this._varyings&&n.transformFeedbackVaryings(this.shaderProgram,this._varyings,n.SEPARATE_ATTRIBS),n.linkProgram(this.shaderProgram)}},{key:"destroy",value:function(){var t=_a.gl;t.useProgram(null),t.deleteProgram(this.shaderProgram)}}])&&wa(e.prototype,n),r&&wa(e,r),t}();Ca.getUniformType=function(t){var e=function(t){return 9===t.length?"uniformMatrix3fv":16===t.length?"uniformMatrix4fv":"vec".concat(t.length)};return!!t.concat?t[0].concat?e(t[0]):e(t):"float"};var Ia=Ca;function La(t){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Na(t,e){return(Na=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Da(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ka(t);if(e){var i=ka(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fa(this,n)}}function Fa(t,e){return!e||"object"!==La(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ua,Ba=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Na(t,e)}(n,t);var e=Da(n);function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var t=[],r=[],i=9999;t.push([-i,0,0]),t.push([i,0,0]),t.push([0,-i,0]),t.push([0,i,0]),t.push([0,0,-i]),t.push([0,0,i]),r.push([1,0,0]),r.push([1,0,0]),r.push([0,1,0]),r.push([0,1,0]),r.push([0,0,1]),r.push([0,0,1]);var o=new Ta(_a.LINES);o.bufferVertex(t),o.bufferIndex([0,1,2,3,4,5]),o.bufferData(r,"aColor",3);var a=new Ia("// axis.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vColor = aColor;\n    vNormal = aNormal;\n}","// axis.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\t// vec3 color = vNormal;\n\tvec3 color = vColor + vNormal * 0.0001;\n    gl_FragColor = vec4(color, 1.0);\n}");return e.call(this,o,a)}return n}(ma),Xa={};Xa.plane=function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xy",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,o=[],a=[],s=[],u=[],c=t/n,f=e/n,h=1/n,l=.5*-t,p=.5*-e,d=0,_=0;_<n;_++)for(var v=0;v<n;v++){var m=c*_+l,y=f*v+p,b=_/n,g=v/n;"xz"===r?(o.push([m,0,y+f]),o.push([m+c,0,y+f]),o.push([m+c,0,y]),o.push([m,0,y]),a.push([b,1-(g+h)]),a.push([b+h,1-(g+h)]),a.push([b+h,1-g]),a.push([b,1-g]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0])):"yz"===r?(o.push([0,y,m]),o.push([0,y,m+c]),o.push([0,y+f,m+c]),o.push([0,y+f,m]),a.push([b,g]),a.push([b+h,g]),a.push([b+h,g+h]),a.push([b,g+h]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0])):(o.push([m,y,0]),o.push([m+c,y,0]),o.push([m+c,y+f,0]),o.push([m,y+f,0]),a.push([b,g]),a.push([b+h,g]),a.push([b+h,g+h]),a.push([b,g+h]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1])),s.push(4*d+0),s.push(4*d+1),s.push(4*d+2),s.push(4*d+0),s.push(4*d+2),s.push(4*d+3),d++}var E=new Ta(i);return E.bufferVertex(o),E.bufferTexCoord(a),E.bufferIndex(s),E.bufferNormal(u),E},Xa.sphere=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=[],o=[],a=[],s=[],u=1/e,c=0;function f(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n/e*Math.PI-.5*Math.PI,a=r/e*Math.PI*2,s=i?1:t,u=[];u[1]=Math.sin(o)*s;var c=Math.cos(o)*s;u[0]=Math.cos(a)*c,u[2]=Math.sin(a)*c;var f=1e4;return u[0]=Math.floor(u[0]*f)/f,u[1]=Math.floor(u[1]*f)/f,u[2]=Math.floor(u[2]*f)/f,u}for(var h=0;h<e;h++)for(var l=0;l<e;l++){i.push(f(h,l)),i.push(f(h+1,l)),i.push(f(h+1,l+1)),i.push(f(h,l+1)),s.push(f(h,l,!0)),s.push(f(h+1,l,!0)),s.push(f(h+1,l+1,!0)),s.push(f(h,l+1,!0));var p=l/e,d=h/e;o.push([1-p,d]),o.push([1-p,d+u]),o.push([1-p-u,d+u]),o.push([1-p-u,d]),a.push(4*c+0),a.push(4*c+1),a.push(4*c+2),a.push(4*c+0),a.push(4*c+2),a.push(4*c+3),c++}n&&a.reverse();var _=new Ta(r);return _.bufferVertex(i),_.bufferTexCoord(o),_.bufferIndex(a),_.bufferNormal(s),_},Xa.cube=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=t/2,o=(e=e||t)/2,a=(n=n||t)/2,s=[],u=[],c=[],f=[],h=0;s.push([-i,o,-a]),s.push([i,o,-a]),s.push([i,-o,-a]),s.push([-i,-o,-a]),f.push([0,0,-1]),f.push([0,0,-1]),f.push([0,0,-1]),f.push([0,0,-1]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),c.push(4*h+0),c.push(4*h+1),c.push(4*h+2),c.push(4*h+0),c.push(4*h+2),c.push(4*h+3),h++,s.push([i,o,-a]),s.push([i,o,a]),s.push([i,-o,a]),s.push([i,-o,-a]),f.push([1,0,0]),f.push([1,0,0]),f.push([1,0,0]),f.push([1,0,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),c.push(4*h+0),c.push(4*h+1),c.push(4*h+2),c.push(4*h+0),c.push(4*h+2),c.push(4*h+3),h++,s.push([i,o,a]),s.push([-i,o,a]),s.push([-i,-o,a]),s.push([i,-o,a]),f.push([0,0,1]),f.push([0,0,1]),f.push([0,0,1]),f.push([0,0,1]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),c.push(4*h+0),c.push(4*h+1),c.push(4*h+2),c.push(4*h+0),c.push(4*h+2),c.push(4*h+3),h++,s.push([-i,o,a]),s.push([-i,o,-a]),s.push([-i,-o,-a]),s.push([-i,-o,a]),f.push([-1,0,0]),f.push([-1,0,0]),f.push([-1,0,0]),f.push([-1,0,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),c.push(4*h+0),c.push(4*h+1),c.push(4*h+2),c.push(4*h+0),c.push(4*h+2),c.push(4*h+3),h++,s.push([i,o,-a]),s.push([-i,o,-a]),s.push([-i,o,a]),s.push([i,o,a]),f.push([0,1,0]),f.push([0,1,0]),f.push([0,1,0]),f.push([0,1,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),c.push(4*h+0),c.push(4*h+1),c.push(4*h+2),c.push(4*h+0),c.push(4*h+2),c.push(4*h+3),h++,s.push([i,-o,a]),s.push([-i,-o,a]),s.push([-i,-o,-a]),s.push([i,-o,-a]),f.push([0,-1,0]),f.push([0,-1,0]),f.push([0,-1,0]),f.push([0,-1,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),c.push(4*h+0),c.push(4*h+1),c.push(4*h+2),c.push(4*h+0),c.push(4*h+2),c.push(4*h+3),h++;var l=new Ta(r);return l.bufferVertex(s),l.bufferTexCoord(u),l.bufferIndex(c),l.bufferNormal(f),l},Xa.skybox=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=[],r=[],i=[],o=[],a=0;n.push([t,t,-t]),n.push([-t,t,-t]),n.push([-t,-t,-t]),n.push([t,-t,-t]),o.push([0,0,-1]),o.push([0,0,-1]),o.push([0,0,-1]),o.push([0,0,-1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,n.push([t,-t,-t]),n.push([t,-t,t]),n.push([t,t,t]),n.push([t,t,-t]),o.push([1,0,0]),o.push([1,0,0]),o.push([1,0,0]),o.push([1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,n.push([-t,t,t]),n.push([t,t,t]),n.push([t,-t,t]),n.push([-t,-t,t]),o.push([0,0,1]),o.push([0,0,1]),o.push([0,0,1]),o.push([0,0,1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,n.push([-t,-t,t]),n.push([-t,-t,-t]),n.push([-t,t,-t]),n.push([-t,t,t]),o.push([-1,0,0]),o.push([-1,0,0]),o.push([-1,0,0]),o.push([-1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,n.push([t,t,t]),n.push([-t,t,t]),n.push([-t,t,-t]),n.push([t,t,-t]),o.push([0,1,0]),o.push([0,1,0]),o.push([0,1,0]),o.push([0,1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,n.push([t,-t,-t]),n.push([-t,-t,-t]),n.push([-t,-t,t]),n.push([t,-t,t]),o.push([0,-1,0]),o.push([0,-1,0]),o.push([0,-1,0]),o.push([0,-1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3);var s=new Ta(e);return s.bufferVertex(n),s.bufferTexCoord(r),s.bufferIndex(i),s.bufferNormal(o),s},Xa.bigTriangle=function(){return(Ua=new Ta).bufferData([[-1,-1],[-1,4],[4,-1]],"aPosition",2),Ua.bufferIndex([2,1,0]),Ua};var ja=Xa,Va="// generalWithNormal.vert\n\n#define SHADER_NAME GENERAL_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec3 position;\nuniform vec3 scale;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tvec3 pos      = aVertexPosition * scale;\n\tpos           += position;\n\tgl_Position   = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n\t\n\tvTextureCoord = aTextureCoord;\n\tvNormal       = normalize(uNormalMatrix * aNormal);\n}",Ha="// simpleColor.frag\n\n#define SHADER_NAME SIMPLE_COLOR\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(color, opacity);\n}";function Ga(t){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ya(t,e,n){return(Ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ka(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ka(t);if(e){var i=Ka(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Za(this,n)}}function Za(t,e){return!e||"object"!==Ga(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ka(t){return(Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wa(t,e)}(o,t);var e,n,r,i=qa(o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var t=ja.sphere(1,24),e=new Ia(Va,Ha);return i.call(this,t,e)}return e=o,(n=[{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.shader.bind(),this.shader.uniform("position","uniform3fv",t),this.shader.uniform("scale","uniform3fv",e),this.shader.uniform("color","uniform3fv",n),this.shader.uniform("opacity","uniform1f",r),Ya(Ka(o.prototype),"draw",this).call(this)}}])&&za(e.prototype,n),r&&za(e,r),o}(ma),$a="// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}",Ja="// copy.frag\n\n#define SHADER_NAME COPY_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}";function ts(t){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function es(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ns(t,e,n){return(ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=as(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function rs(t,e){return(rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function is(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=as(t);if(e){var i=as(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return os(this,n)}}function os(t,e){return!e||"object"!==ts(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function as(t){return(as=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ss=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rs(t,e)}(o,t);var e,n,r,i=is(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=ja.bigTriangle(),n=new Ia($a,Ja);return t=i.call(this,e,n),n.bind(),n.uniform("texture","uniform1i",0),t}return e=o,(n=[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),ns(as(o.prototype),"draw",this).call(this)}}])&&es(e.prototype,n),r&&es(e,r),o}(ma);function us(t){return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fs(t,e,n){return(fs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ds(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function hs(t,e){return(hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ls(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ds(t);if(e){var i=ds(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ps(this,n)}}function ps(t,e){return!e||"object"!==us(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ds(t){return(ds=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hs(t,e)}(o,t);var e,n,r,i=ls(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e,n,r=[],a=[],s=0;for(e=-100;e<100;e+=1)for(n=-100;n<100;n+=1)r.push([e,n,0]),a.push(s),s++,r.push([e,0,n]),a.push(s),s++;var u=new Ta(_a.POINTS);u.bufferVertex(r),u.bufferIndex(a);var c=new Ia("// basic.vert\n\n#define SHADER_NAME DOTS_PLANE_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 viewport;\n\nvarying vec3 vNormal;\n\nconst float radius = 0.008;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition + aNormal * 0.000001, 1.0);\n    // gl_PointSize = 1.0;\n    vNormal = aNormal;\n\n\tfloat distOffset = viewport.y * uProjectionMatrix[1][1] * radius / gl_Position.w;\n    gl_PointSize = distOffset;\n}","// dotsPlane.frag\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n\tif(distance(gl_PointCoord, vec2(.5)) > .5) {\n\t\tdiscard;\n\t}\n    gl_FragColor = vec4(color, opacity);\n}");return(t=i.call(this,u,c)).color=[1,1,1],t.opacity=.65,t}return e=o,(n=[{key:"draw",value:function(){this.shader.bind(),this.shader.uniform("color","uniform3fv",this.color),this.shader.uniform("opacity","uniform1f",this.opacity),this.shader.uniform("viewport","vec2",[_a.width,_a.height]),fs(ds(o.prototype),"draw",this).call(this)}}])&&cs(e.prototype,n),r&&cs(e,r),o}(ma);function vs(t){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ys(t,e,n){return(ys="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ts(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function bs(t,e){return(bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ts(t);if(e){var i=Ts(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Es(this,n)}}function Es(t,e){return!e||"object"!==vs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bs(t,e)}(o,t);var e,n,r,i=gs(o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var t=[];t.push([0,0,0]),t.push([0,0,0]);var e=new Ta(_a.LINES);e.bufferVertex(t),e.bufferTexCoord([[0,0],[1,1]]),e.bufferIndex([0,1]);var n=new Ia(xa,Ha);return i.call(this,e,n)}return e=o,(n=[{key:"draw",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._mesh.bufferVertex([t,e]),this._shader.bind(),this._shader.uniform("color","vec3",n),this._shader.uniform("opacity","float",r),ys(Ts(o.prototype),"draw",this).call(this)}}])&&ms(e.prototype,n),r&&ms(e,r),o}(ma),xs="// sky.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n    gl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}";function Ms(t){return(Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ws(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ss(t,e,n){return(Ss="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Is(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Os(t,e){return(Os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ps(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Is(t);if(e){var i=Is(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cs(this,n)}}function Cs(t,e){return!e||"object"!==Ms(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Is(t){return(Is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ls=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Os(t,e)}(o,t);var e,n,r,i=Ps(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;As(this,o);var n=ja.sphere(t,e,!0),r=new Ia(xs,Ja);return i.call(this,n,r)}return e=o,(n=[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),Ss(Is(o.prototype),"draw",this).call(this)}}])&&ws(e.prototype,n),r&&ws(e,r),o}(ma),Ns="// basic.frag\n\n#define SHADER_NAME SKYBOX_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\nuniform samplerCube texture;\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\n\nvoid main(void) {\n    gl_FragColor = textureCube(texture, vVertex);\n}",Ds="// basic.vert\n\n#define SHADER_NAME SKYBOX_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n\tgl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n\tvTextureCoord = aTextureCoord;\n\t\n\tvVertex = aVertexPosition;\n\tvNormal = aNormal;\n}";function Fs(t){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ks(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bs(t,e,n){return(Bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hs(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Xs(t,e){return(Xs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function js(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hs(t);if(e){var i=Hs(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vs(this,n)}}function Vs(t,e){return!e||"object"!==Fs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hs(t){return(Hs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xs(t,e)}(o,t);var e,n,r,i=js(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;ks(this,o);var e=ja.skybox(t),n=new Ia(Ds,Ns);return i.call(this,e,n)}return e=o,(n=[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),Bs(Hs(o.prototype),"draw",this).call(this)}}])&&Us(e.prototype,n),r&&Us(e,r),o}(ma);function zs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ws=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];zs(this,t),this._req=new XMLHttpRequest,this._req.addEventListener("load",(function(t){return e._onLoaded(t)})),this._req.addEventListener("progress",(function(t){return e._onProgress(t)})),n&&(this._req.responseType="arraybuffer")}var e,n,r;return e=t,(n=[{key:"load",value:function(t,e){this._callback=e,this._req.open("GET",t),this._req.send()}},{key:"_onLoaded",value:function(){this._callback(this._req.response)}},{key:"_onProgress",value:function(){}}])&&Ys(e.prototype,n),r&&Ys(e,r),t}();function qs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zs=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._matrix=s.create(),this._quat=f.create(),this._orientation=s.create(),this._projection=s.create(),this.position=vec3.create()}var e,n,r;return e=t,(n=[{key:"lookAt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1,0];this._eye=vec3.clone(t),this._center=vec3.clone(e),vec3.copy(this.position,t),s.identity(this._matrix),s.lookAt(this._matrix,t,e,n)}},{key:"setFromOrientation",value:function(t,e,n,r){f.set(this._quat,t,e,n,r),s.fromQuat(this._orientation,this._quat),s.translate(this._matrix,this._orientation,this.positionOffset)}},{key:"setProjection",value:function(t){this._projection=s.clone(t)}},{key:"setView",value:function(t){this._matrix=s.clone(t)}},{key:"setFromViewProj",value:function(t,e){this.setView(t),this.setProjection(e)}},{key:"matrix",get:function(){return this._matrix}},{key:"viewMatrix",get:function(){return this._matrix}},{key:"projection",get:function(){return this._projection}},{key:"projectionMatrix",get:function(){return this._projection}},{key:"eye",get:function(){return this._eye}},{key:"center",get:function(){return this._center}}])&&qs(e.prototype,n),r&&qs(e,r),t}();function Ks(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qs=u.create(),$s=u.create(),Js=u.create(),tu=u.create(),eu=u.create(),nu=u.create(),ru=u.create(),iu=u.create(),ou=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.origin=u.clone(e),this.direction=u.clone(n)}var e,n,r;return e=t,(n=[{key:"at",value:function(t){return u.copy(tu,this.direction),u.scale(tu,tu,t),u.add(tu,tu,this.origin),tu}},{key:"lookAt",value:function(t){u.sub(this.direction,t,this.origin),u.normalize(this.origin,this.origin)}},{key:"closestPointToPoint",value:function(t){var e=u.create();u.sub(t,this.origin);var n=u.dot(e,this.direction);return n<0?u.clone(this.origin):(u.copy(e,this.direction),u.scale(e,e,n),u.add(e,e,this.origin),e)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=u.create();u.sub(e,t,this.origin);var n=u.dot(e,this.direction);return n<0?u.squaredDistance(this.origin,t):(u.copy(e,this.direction),u.scale(e,e,n),u.add(e,e,this.origin),u.squaredDistance(e,t))}},{key:"intersectsSphere",value:function(t,e){return this.distanceToPoint(t)<=e}},{key:"intersectSphere",value:function(t,e){var n=u.create();u.sub(n,t,this.origin);var r=u.dot(n,this.direction),i=u.dot(n,n)-r*r,o=e*e;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c):this.at(s)}},{key:"distanceToPlane",value:function(t,e){u.dot(e,this.direction)}},{key:"intersectTriangle",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];u.copy(Qs,t),u.copy($s,e),u.copy(Js,n),u.sub(eu,$s,Qs),u.sub(nu,Js,Qs),u.cross(ru,eu,nu);var i,o=u.dot(this.direction,ru);if(o>0){if(r)return null;i=1}else{if(!(o<0))return null;i=-1,o=-o}u.sub(iu,this.origin,Qs),u.cross(nu,iu,nu);var a=i*u.dot(this.direction,nu);if(a<0)return null;u.cross(eu,eu,iu);var s=i*u.dot(this.direction,eu);if(s<0)return null;if(a+s>o)return null;var c=-i*u.dot(iu,ru);return c<0?null:this.at(c/o)}}])&&Ks(e.prototype,n),r&&Ks(e,r),t}();function au(t){return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function su(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uu(t,e){return(uu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hu(t);if(e){var i=hu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fu(this,n)}}function fu(t,e){return!e||"object"!==au(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hu(t){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lu=s.create(),pu=u.create(),du=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uu(t,e)}(o,t);var e,n,r,i=cu(o);function o(t,e,n,r){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),a=i.call(this),t&&a.setPerspective(t,e,n,r),a}return e=o,(n=[{key:"setPerspective",value:function(t,e,n,r){this._fov=t,this._near=n,this._far=r,this._aspectRatio=e,s.perspective(this._projection,t,e,n,r)}},{key:"setAspectRatio",value:function(t){this._aspectRatio=t,s.perspective(this.projection,this._fov,t,this._near,this._far)}},{key:"generateRay",value:function(t,e){var n=this.projectionMatrix,r=this.viewMatrix;return s.multiply(lu,n,r),s.invert(lu,lu),u.transformMat4(pu,t,lu),u.sub(pu,pu,this.position),u.normalize(pu,pu),e?(e.origin=this.position,e.direction=pu):e=new ou(this.position,pu),e}}])&&su(e.prototype,n),r&&su(e,r),o}(Zs);function _u(t){return(_u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mu(t,e){return(mu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gu(t);if(e){var i=gu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bu(this,n)}}function bu(t,e){return!e||"object"!==_u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gu(t){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Eu=[[u.fromValues(0,0,0),u.fromValues(1,0,0),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(-1,0,0),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(0,1,0),u.fromValues(0,0,1)],[u.fromValues(0,0,0),u.fromValues(0,-1,0),u.fromValues(0,0,-1)],[u.fromValues(0,0,0),u.fromValues(0,0,1),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(0,0,-1),u.fromValues(0,-1,0)]],Tu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mu(t,e)}(o,t);var e,n,r,i=yu(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).setPerspective(Math.PI/2,1,.1,1e3),t}return e=o,(n=[{key:"face",value:function(t){var e=Eu[t];this.lookAt(e[0],e[1],e[2])}}])&&vu(e.prototype,n),r&&vu(e,r),o}(du);function Ru(t){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mu(t,e){return(Mu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Au(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Su(t);if(e){var i=Su(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wu(this,n)}}function wu(t,e){return!e||"object"!==Ru(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Su(t){return(Su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ou,Pu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mu(t,e)}(o,t);var e,n,r,i=Au(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),t=i.call(this);var e=u.clone([0,0,5]),n=u.create(),r=u.clone([0,1,0]);return t.lookAt(e,n,r),t.ortho(-1,1,1,-1),t}return e=o,(n=[{key:"setBoundary",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;this.ortho(t,e,n,r,i,o)}},{key:"ortho",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;this.left=t,this.right=e,this.top=n,this.bottom=r,mat4.ortho(this._projection,t,e,r,n,i,o)}}])&&xu(e.prototype,n),r&&xu(e,r),o}(Zs),Cu=n(7),Iu=n.n(Cu);function Lu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Du=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Lu(this,t),Ou=_a.gl,r)this.texture=e;else{var i=e.length>6;e[0].mipmapCount&&(i=e[0].mipmapCount>1),this.texture=Ou.createTexture(),this.magFilter=n.magFilter||Ou.LINEAR,this.minFilter=n.minFilter||Ou.LINEAR_MIPMAP_LINEAR,this.wrapS=n.wrapS||Ou.CLAMP_TO_EDGE,this.wrapT=n.wrapT||Ou.CLAMP_TO_EDGE,i||this.minFilter!=Ou.LINEAR_MIPMAP_LINEAR||(this.minFilter=Ou.LINEAR),Ou.bindTexture(Ou.TEXTURE_CUBE_MAP,this.texture);var o=[Ou.TEXTURE_CUBE_MAP_POSITIVE_X,Ou.TEXTURE_CUBE_MAP_NEGATIVE_X,Ou.TEXTURE_CUBE_MAP_POSITIVE_Y,Ou.TEXTURE_CUBE_MAP_NEGATIVE_Y,Ou.TEXTURE_CUBE_MAP_POSITIVE_Z,Ou.TEXTURE_CUBE_MAP_NEGATIVE_Z],a=1,s=0;if(a=e.length/6,this.numLevels=a,i)for(var u=0;u<6;u++)for(var c=0;c<a;c++)Ou.pixelStorei(Ou.UNPACK_FLIP_Y_WEBGL,!1),e[s=u*a+c].shape?Ou.texImage2D(o[u],c,Ou.RGBA,e[s].shape[0],e[s].shape[1],0,Ou.RGBA,Ou.FLOAT,e[s].data):Ou.texImage2D(o[u],c,Ou.RGBA,Ou.RGBA,Ou.UNSIGNED_BYTE,e[s]),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_WRAP_S,this.wrapS),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_WRAP_T,this.wrapT),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_MAG_FILTER,this.magFilter),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_MIN_FILTER,this.minFilter);else{for(var f=0,h=0;h<6;h++)f=h*a,Ou.pixelStorei(Ou.UNPACK_FLIP_Y_WEBGL,!1),e[f].shape?Ou.texImage2D(o[h],0,Ou.RGBA,e[f].shape[0],e[f].shape[1],0,Ou.RGBA,Ou.FLOAT,e[f].data):Ou.texImage2D(o[h],0,Ou.RGBA,Ou.RGBA,Ou.UNSIGNED_BYTE,e[f]),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_WRAP_S,this.wrapS),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_WRAP_T,this.wrapT),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_MAG_FILTER,this.magFilter),Ou.texParameteri(Ou.TEXTURE_CUBE_MAP,Ou.TEXTURE_MIN_FILTER,this.minFilter);Ou.generateMipmap(Ou.TEXTURE_CUBE_MAP)}Ou.bindTexture(Ou.TEXTURE_CUBE_MAP,null)}}var e,n,r;return e=t,(n=[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_a.shader&&(Ou.activeTexture(Ou.TEXTURE0+t),Ou.bindTexture(Ou.TEXTURE_CUBE_MAP,this.texture),Ou.uniform1i(_a.shader.uniformTextures[t],t),this._bindIndex=t)}},{key:"unbind",value:function(){Ou.bindTexture(Ou.TEXTURE_CUBE_MAP,null)}}])&&Nu(e.prototype,n),r&&Nu(e,r),t}();Du.parseDDS=function(t){var e=Iu()(t),n=e.flags,r=new Int32Array(t,0,31),i=1;131072&n&&(i=Math.max(1,r[7]));var o=e.images.map((function(e){return{data:new Float32Array(t.slice(e.offset,e.offset+e.length)),shape:e.shape,mipmapCount:i}}));return new Du(o)};var Fu,ku=Du;function Uu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Uu(this,t),Fu=_a.gl,this._size=e,this.magFilter=n.magFilter||Fu.LINEAR,this.minFilter=n.minFilter||Fu.LINEAR,this.wrapS=n.wrapS||Fu.CLAMP_TO_EDGE,this.wrapT=n.wrapT||Fu.CLAMP_TO_EDGE,this._init()}var e,n,r;return e=t,(n=[{key:"_init",value:function(){this.texture=Fu.createTexture(),this.glTexture=new ku(this.texture,{},!0),Fu.bindTexture(Fu.TEXTURE_CUBE_MAP,this.texture),Fu.texParameteri(Fu.TEXTURE_CUBE_MAP,Fu.TEXTURE_MAG_FILTER,this.magFilter),Fu.texParameteri(Fu.TEXTURE_CUBE_MAP,Fu.TEXTURE_MIN_FILTER,this.minFilter),Fu.texParameteri(Fu.TEXTURE_CUBE_MAP,Fu.TEXTURE_WRAP_S,this.wrapS),Fu.texParameteri(Fu.TEXTURE_CUBE_MAP,Fu.TEXTURE_WRAP_T,this.wrapT);for(var t=[Fu.TEXTURE_CUBE_MAP_POSITIVE_X,Fu.TEXTURE_CUBE_MAP_NEGATIVE_X,Fu.TEXTURE_CUBE_MAP_POSITIVE_Y,Fu.TEXTURE_CUBE_MAP_NEGATIVE_Y,Fu.TEXTURE_CUBE_MAP_POSITIVE_Z,Fu.TEXTURE_CUBE_MAP_NEGATIVE_Z],e=0;e<t.length;e++)Fu.pixelStorei(Fu.UNPACK_FLIP_Y_WEBGL,!1),Fu.texImage2D(t[e],0,Fu.RGBA,this.width,this.height,0,Fu.RGBA,Fu.FLOAT,null);this._frameBuffers=[];for(var n=0;n<t.length;n++){var r=Fu.createFramebuffer();Fu.bindFramebuffer(Fu.FRAMEBUFFER,r),Fu.framebufferTexture2D(Fu.FRAMEBUFFER,Fu.COLOR_ATTACHMENT0,t[n],this.texture,0),Fu.checkFramebufferStatus(Fu.FRAMEBUFFER),Fu.FRAMEBUFFER_COMPLETE,this._frameBuffers.push(r)}Fu.bindFramebuffer(Fu.FRAMEBUFFER,null),Fu.bindRenderbuffer(Fu.RENDERBUFFER,null),Fu.bindTexture(Fu.TEXTURE_CUBE_MAP,null)}},{key:"bind",value:function(t){_a.viewport(0,0,this.width,this.height),Fu.bindFramebuffer(Fu.FRAMEBUFFER,this._frameBuffers[t])}},{key:"unbind",value:function(){Fu.bindFramebuffer(Fu.FRAMEBUFFER,null),_a.viewport(0,0,_a.width,_a.height)}},{key:"getTexture",value:function(){return this.glTexture}},{key:"width",get:function(){return this._size}},{key:"height",get:function(){return this._size}}])&&Bu(e.prototype,n),r&&Bu(e,r),t}();function ju(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vu=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uniforms={},this._uniformTextures=[],this._fbo,this._clearColor={r:0,g:0,b:0,a:0},this}var e,n,r;return e=t,(n=[{key:"setClearColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=n,this._clearColor.a=r,this}},{key:"useProgram",value:function(t,e){return this._shader=t instanceof Ia?t:new Ia(t,e),this}},{key:"setMesh",value:function(t){return this._mesh=t,this}},{key:"createMesh",value:function(t){return this._mesh=new Ta(t),this}},{key:"bufferVertex",value:function(t){return this._mesh||(this._mesh=new Ta),this._mesh.bufferVertex(t),this}},{key:"bufferTexCoord",value:function(t){return this._mesh||(this._mesh=new Ta),this._mesh.bufferTexCoord(t),this}},{key:"bufferNormal",value:function(t){return this._mesh||(this._mesh=new Ta),this._mesh.bufferNormal(t),this}},{key:"bufferIndex",value:function(t){return this._mesh||(this._mesh=new Ta),this._mesh.bufferIndex(t),this}},{key:"bufferInstance",value:function(t,e){return this._mesh?(this._mesh.bufferInstance(t,e),this):this}},{key:"bufferData",value:function(t,e){return this._mesh||(this._mesh=new Ta),this._mesh.bufferData(t,e),this}},{key:"uniform",value:function(t,e,n){return this._uniforms[t]={type:e,value:n},this}},{key:"uniformTexture",value:function(t,e,n){return void 0!==n?this._uniformTextures[n]={name:t,texture:e}:this._uniformTextures.push({name:t,texture:e}),this}},{key:"bindFrameBuffer",value:function(t){return this._fbo=t,this}},{key:"draw",value:function(){var t=this;if(this._shader&&this._mesh){if(this._fbo){var e=this._clearColor,n=e.r,r=e.g,i=e.b,o=e.a;this._fbo.bind(),_a.clear(n,r,i,o)}for(var a in this._shader.bind(),this._uniforms){var s=this._uniforms[a];this._shader.uniform(a,s.type,s.value)}return this._uniformTextures.forEach((function(e,n){void 0!==e&&(t._shader.uniform(e.name,"uniform1i",n),e.texture.bind(n))})),_a.draw(this._mesh),this._fbo&&this._fbo.unbind(),this}}},{key:"shader",get:function(){return this._shader}},{key:"framebuffer",get:function(){return this._fbo}}])&&ju(e.prototype,n),r&&ju(e,r),t}();var Hu=new class{constructor(){this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._startTime=(new Date).getTime(),this._deltaTime=0,this._internalTime=0,this._isPaused=!1,this._loop()}addEF(t,e){e=e||[];const n=this._idTable;return this._enterframeTasks[n]={func:t,params:e},this._idTable++,n}removeEF(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1}delay(t,e,n){const r={func:t,params:e,delay:n,time:(new Date).getTime()};this._delayTasks.push(r)}defer(t,e){const n={func:t,params:e};this._deferTasks.push(n)}next(t,e){const n={func:t,params:e};this._nextTasks.push(n)}usurp(t,e){const n={func:t,params:e};this._usurpTask.push(n)}pause(){this._isPaused=!0}advance(){this._internalTime+=1/60}resume(){this._isPaused=!1}_process(){let t,e,n,r=0;for(r=0;r<this._enterframeTasks.length;r++)t=this._enterframeTasks[r],null!=t&&t.func(t.params);for(;this._highTasks.length>0;)t=this._highTasks.pop(),t.func(t.params);let i=(new Date).getTime(),o=this._deltaTime;for(this._deltaTime=(i-this._startTime)/1e3,r=0;r<this._delayTasks.length;r++)t=this._delayTasks[r],i-t.time>t.delay&&(t.func(t.params),this._delayTasks.splice(r,1));for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/60;this._deferTasks.length>0;){if(t=this._deferTasks.shift(),n=(new Date).getTime(),!(n-i<e)){this._deferTasks.unshift(t);break}t.func(t.params)}for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/60;this._usurpTask.length>0;)t=this._usurpTask.shift(),n=(new Date).getTime(),n-i<e&&t.func(t.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[],this._isPaused||(this._internalTime+=this._deltaTime-o)}_loop(){this._process(),window.requestAnimationFrame(()=>this._loop())}get intervalTime(){return this._internalTime}get deltaTime(){return this._deltaTime}};function Gu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Yu=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;Gu(this,t),this.easing=r,this._value=e,this._targetValue=e,this._efIndex=Hu.addEF((function(){return n._update()}))}var e,n,r;return e=t,(n=[{key:"_update",value:function(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}},{key:"setTo",value:function(t){this._targetValue=this._value=t}},{key:"add",value:function(t){this._targetValue+=t}},{key:"limit",value:function(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){Hu.removeEF(this._efIndex)}},{key:"value",set:function(t){this._targetValue=t},get:function(){return this._value}},{key:"targetValue",get:function(){return this._targetValue}}])&&zu(e.prototype,n),r&&zu(e,r),t}();function Wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qu=!0;try{document.createEvent("CustomEvent");null}catch(t){qu=!1}var Zu=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._eventListeners={}}var e,n,r;return e=t,(n=[{key:"addEventListener",value:function(t,e){return null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={}),this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e),this}},{key:"on",value:function(t,e){return this.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var n=this._eventListeners[t];if(void 0===n)return this;for(var r=n.length,i=0;i<r;i++)n[i]===e&&(n.splice(i,1),i--,r--);return this}},{key:"off",value:function(t,e){return this.removeEventListener(t,e)}},{key:"dispatchEvent",value:function(t){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var e=t.type;try{null===t.target&&(t.target=this),t.currentTarget=this}catch(r){var n={type:e,detail:t.detail,dispatcher:this};return this.dispatchEvent(n)}var r=this._eventListeners[e];if(null!=r)for(var i=this._copyArray(r),o=i.length,a=0;a<o;a++)i[a].call(this,t);return this}},{key:"dispatchCustomEvent",value:function(t,e){var n;return qu?((n=document.createEvent("CustomEvent")).dispatcher=this,n.initCustomEvent(t,!1,!1,e)):n={type:t,detail:e,dispatcher:this},this.dispatchEvent(n)}},{key:"trigger",value:function(t,e){return this.dispatchCustomEvent(t,e)}},{key:"_destroy",value:function(){if(null!==this._eventListeners){for(var t in this._eventListeners)if(this._eventListeners.hasOwnProperty(t)){for(var e=this._eventListeners[t],n=e.length,r=0;r<n;r++)e[r]=null;delete this._eventListeners[t]}this._eventListeners=null}}},{key:"_copyArray",value:function(t){for(var e=new Array(t.length),n=e.length,r=0;r<n;r++)e[r]=t[r];return e}}])&&Wu(e.prototype,n),r&&Wu(e,r),t}();function Ku(t){return 0!==t&&!(t&t-1)}var Qu,$u=function(t,e,n,r){if(!t.minFilter){var i=_a.LINEAR;n&&n&&Ku(n)&&Ku(r)&&(i=_a.NEAREST_MIPMAP_LINEAR),t.minFilter=i}return t.mipmap=void 0===t.mipmap||t.mipmap,t.magFilter=t.magFilter||_a.LINEAR,t.wrapS=t.wrapS||_a.CLAMP_TO_EDGE,t.wrapT=t.wrapT||_a.CLAMP_TO_EDGE,t.internalFormat=t.internalFormat||_a.RGBA,t.format=t.format||_a.RGBA,t.premultiplyAlpha=void 0!==t.premultiplyAlpha&&t.premultiplyAlpha,t.level=t.level||0,t},Ju=n(0),tc=n.n(Ju);function ec(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rc,ic,oc,ac=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ec(this,t),Qu=_a.gl,this._source=e,this._getDimension(e,i,o),this._sourceType=r.type||uc(e),this._checkSource(),this._texelType=this._getTexelType(),this._isTextureReady=!0,this._params=$u(r,e,this._width,this._height),this._checkMipmap(),this._checkWrapping(),this._texture=Qu.createTexture(),"video"===this._sourceType?(this._isTextureReady=!1,Hu.addEF((function(){return n._loop()}))):this._uploadTexture()}var e,n,r;return e=t,(n=[{key:"_loop",value:function(){4===this._source.readyState&&(this._isTextureReady=!0,this._uploadTexture())}},{key:"_uploadTexture",value:function(){Qu.bindTexture(Qu.TEXTURE_2D,this._texture),Qu.pixelStorei(Qu.UNPACK_FLIP_Y_WEBGL,!0),this._isSourceHtmlElement()?Qu.texImage2D(Qu.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._texelType,this._source):Qu.texImage2D(Qu.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._texelType,this._source),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_MAG_FILTER,this._params.magFilter),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_MIN_FILTER,this._params.minFilter),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_WRAP_S,this._params.wrapS),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_WRAP_T,this._params.wrapT),Qu.pixelStorei(Qu.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._generateMipmap&&Qu.generateMipmap(Qu.TEXTURE_2D),Qu.bindTexture(Qu.TEXTURE_2D,null)}},{key:"bind",value:function(e){void 0===e&&(e=0),_a.shader&&(Qu.activeTexture(Qu.TEXTURE0+e),this._isTextureReady?Qu.bindTexture(Qu.TEXTURE_2D,this._texture):Qu.bindTexture(Qu.TEXTURE_2D,t.blackTexture().texture),this._bindIndex=e)}},{key:"updateTexture",value:function(t){this._source=t,this._checkSource(),this._uploadTexture()}},{key:"generateMipmap",value:function(){this._generateMipmap&&(Qu.bindTexture(Qu.TEXTURE_2D,this._texture),Qu.generateMipmap(Qu.TEXTURE_2D),Qu.bindTexture(Qu.TEXTURE_2D,null))}},{key:"showParameters",value:function(){for(var t in this._params);}},{key:"_getDimension",value:function(t,e,n){t?(this._width=t.width||t.videoWidth,this._height=t.height||t.videoWidth,this._width=this._width||e,this._height=this._height||n,this._width&&this._height||(this._width=this._height=Math.sqrt(t.length/4))):(this._width=e,this._height=n)}},{key:"_checkSource",value:function(){this._source&&(this._sourceType===_a.UNSIGNED_BYTE?this._source instanceof Uint8Array||(this._source=new Uint8Array(this._source)):this._sourceType===_a.FLOAT&&(this._source instanceof Float32Array||(this._source=new Float32Array(this._source))))}},{key:"_getTexelType",value:function(){return this._isSourceHtmlElement()?_a.UNSIGNED_BYTE:_a[tc.a[this._sourceType]]}},{key:"_checkMipmap",value:function(){this._generateMipmap=this._params.mipmap,sc(this._width)&&sc(this._height)||(this._generateMipmap=!1),-1===tc.a[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}},{key:"_checkWrapping",value:function(){this._generateMipmap||(this._params.wrapS=_a.CLAMP_TO_EDGE,this._params.wrapT=_a.CLAMP_TO_EDGE)}},{key:"_isSourceHtmlElement",value:function(){return"image"===this._sourceType||"video"===this._sourceType||"canvas"===this._sourceType}},{key:"minFilter",get:function(){return this._params.minFilter},set:function(t){this._params.minFilter=t,this._checkMipmap(),Qu.bindTexture(Qu.TEXTURE_2D,this._texture),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_MIN_FILTER,this._params.minFilter),Qu.bindTexture(Qu.TEXTURE_2D,null),this.generateMipmap()}},{key:"magFilter",get:function(){return this._params.minFilter},set:function(t){this._params.magFilter=t,Qu.bindTexture(Qu.TEXTURE_2D,this._texture),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_MAG_FILTER,this._params.magFilter),Qu.bindTexture(Qu.TEXTURE_2D,null)}},{key:"wrapS",get:function(){return this._params.wrapS},set:function(t){this._params.wrapS=t,this._checkWrapping(),Qu.bindTexture(Qu.TEXTURE_2D,this._texture),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_WRAP_S,this._params.wrapS),Qu.bindTexture(Qu.TEXTURE_2D,null)}},{key:"wrapT",get:function(){return this._params.wrapT},set:function(t){this._params.wrapT=t,this._checkWrapping(),Qu.bindTexture(Qu.TEXTURE_2D,this._texture),Qu.texParameteri(Qu.TEXTURE_2D,Qu.TEXTURE_WRAP_T,this._params.wrapT),Qu.bindTexture(Qu.TEXTURE_2D,null)}},{key:"texelType",get:function(){return this._texelType}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"texture",get:function(){return this._texture}},{key:"isTextureReady",get:function(){return this._isTextureReady}}])&&nc(e.prototype,n),r&&nc(e,r),t}();function sc(t){return 0!==t&&!(t&t-1)}function uc(t){var e=_a.UNSIGNED_BYTE;return t instanceof Array||t instanceof Uint8Array?e=_a.UNSIGNED_BYTE:t instanceof Float32Array?e=_a.FLOAT:t instanceof HTMLImageElement?e="image":t instanceof HTMLCanvasElement?e="canvas":t instanceof HTMLVideoElement&&(e="video"),e}ac.whiteTexture=function(){if(void 0===rc){var t=document.createElement("canvas");t.width=t.height=2;var e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,2,2),rc=new ac(t)}return rc},ac.greyTexture=function(){if(void 0===ic){var t=document.createElement("canvas");t.width=t.height=2;var e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,2,2),ic=new ac(t)}return ic},ac.blackTexture=function(){if(void 0===oc){var t=document.createElement("canvas");t.width=t.height=2;var e=t.getContext("2d");e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,2,2),oc=new ac(t)}return oc};var cc,fc=ac;function hc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pc,dc=!1,_c=function(){return!!_a.webgl2||!!(pc=_a.getExtension("WEBGL_draw_buffers"))},vc=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;hc(this,t),this.gl=_a.gl,cc=_a.checkExtension("WEBGL_depth_texture")||_a.webgl2,this.width=e,this.height=n,this._numTargets=i,this._multipleTargets=i>1,this._parameters=r,dc||_c(),this._multipleTargets&&this._checkMaxNumRenderTarget(),this._init()}var e,n,r;return e=t,(n=[{key:"_init",value:function(){var t=this.gl;if(this._initTextures(),this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),_a.webgl2){for(var e=[],n=0;n<this._numTargets;n++)t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.TEXTURE_2D,this._textures[n].texture,0),e.push(t["COLOR_ATTACHMENT".concat(n)]);t.drawBuffers(e),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.glDepthTexture.texture,0)}else{for(var r=0;r<this._numTargets;r++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.TEXTURE_2D,this._textures[r].texture,0);if(this._multipleTargets){for(var i=[],o=0;o<this._numTargets;o++)i.push(pc["COLOR_ATTACHMENT".concat(o,"_WEBGL")]);pc.drawBuffersWEBGL(i)}cc&&t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.glDepthTexture.texture,0)}t.checkFramebufferStatus(t.FRAMEBUFFER),t.FRAMEBUFFER_COMPLETE,t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.clear()}},{key:"_checkMaxNumRenderTarget",value:function(){var t=_a.gl.getParameter(pc.MAX_DRAW_BUFFERS_WEBGL);this._numTargets>t&&(this._numTargets=t)}},{key:"_initTextures",value:function(){var t=this.gl;this._textures=[];for(var e=0;e<this._numTargets;e++){var n=this._createTexture();this._textures.push(n)}_a.webgl2?this.glDepthTexture=this._createTexture(t.DEPTH_COMPONENT16,t.UNSIGNED_SHORT,t.DEPTH_COMPONENT,{minFilter:_a.NEAREST,magFilter:_a.NEAREST,mipmap:!1}):this.glDepthTexture=this._createTexture(t.DEPTH_COMPONENT,t.UNSIGNED_SHORT,t.DEPTH_COMPONENT,{minFilter:_a.LINEAR})}},{key:"_createTexture",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.gl,o=Object.assign({},this._parameters);for(var a in n||(n=t),o.internalFormat=t||i.RGBA,o.format=n,o.type=o.type||e||_a.UNSIGNED_BYTE,e===i.UNSIGNED_SHORT&&(o.type=e),r)o[a]=r[a];var s=new fc(null,o,this.width,this.height);return s}},{key:"bind",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.gl;t&&_a.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.gl;t&&_a.viewport(0,0,_a.width,_a.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this._textures.forEach((function(t){t.generateMipmap()}))}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.bind(),_a.clear(t,e,n,r),this.unbind()}},{key:"getTexture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._textures[t]}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}},{key:"destroy",value:function(){var t=this.gl;t.deleteFramebuffer(this.framebuffer),this._textures.forEach((function(e){t.deleteTexture(e._texture)})),t.deleteTexture(this.glDepthTexture._texture)}},{key:"showParameters",value:function(){this._textures[0].showParameters()}},{key:"texture",get:function(){return this._textures[0]}},{key:"depthTexture",get:function(){return this.glDepthTexture}},{key:"minFilter",get:function(){return this._textures[0].minFilter},set:function(t){this._textures.forEach((function(e){e.minFilter=t}))}},{key:"magFilter",get:function(){return this._textures[0].magFilter},set:function(t){this._textures.forEach((function(e){e.magFilter=t}))}},{key:"wrapS",get:function(){return this._textures[0].wrapS},set:function(t){this._textures.forEach((function(e){e.wrapS=t}))}},{key:"wrapT",get:function(){return this._textures[0].wrapT},set:function(t){this._textures.forEach((function(e){e.wrapT=t}))}},{key:"numTargets",get:function(){return this._numTargets}}])&&lc(e.prototype,n),r&&lc(e,r),t}();function mc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bc=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;mc(this,t),this._fbos=[];for(var a=0;a<e;a++){var s=new vc(n,r,i,o);this._fbos.push(s)}}var e,n,r;return e=t,(n=[{key:"swap",value:function(){var t=this._fbos.shift();this._fbos.push(t)}},{key:"read",get:function(){return this._fbos[this._fbos.length-1]}},{key:"write",get:function(){return this._fbos[0]}},{key:"all",get:function(){return this._fbos}}])&&yc(e.prototype,n),r&&yc(e,r),t}();function gc(t){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ec(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tc(t,e){return(Tc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mc(t);if(e){var i=Mc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xc(this,n)}}function xc(t,e){return!e||"object"!==gc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mc(t){return(Mc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ac=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tc(t,e)}(n,t);var e=Rc(n);function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Ec(this,n),e.call(this,2,t,r,i,o)}return n}(bc),wc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Sc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Oc={NORMAL:"aNormal",POSITION:"aVertexPosition",TEXCOORD_0:"aTextureCoord",WEIGHTS_0:"aWeight",JOINTS_0:"aJoint",COLOR:"aColor"},Pc=function(t,e){return new Promise((function(n,r){var i=t.bufferViews;t.buffers;i.forEach((function(t,n){var r=e;t.data=r.slice(t.byteOffset||0,(t.byteOffset||0)+(t.byteLength||0))})),n(t)}))},Cc=function(t){return new Promise((function(e,n){var r=t.meshes;t.geometries=[],r.forEach((function(e,n){var r=e.primitives,i={};r.forEach((function(e,n){var r=Object.keys(e.attributes),o={};if(r.forEach((function(n,r){var a=e.attributes[n],s=t.accessors[a],u=Oc[n];if(u){"NORMAL"===n&&(o.HAS_NORMALS=1),n.indexOf("TEXCOORD")>-1&&(o.HAS_UV=1);var c=Sc[s.type],f=Ic(t,a);f instanceof Uint32Array&&(f=new Float32Array(f)),i[u]={value:f,size:c}}})),null!=e.indices){var a=Ic(t,e.indices,!0);i.indices={value:a,size:1}}var s=new Ta;for(var u in i){var c=i[u];"indices"!==u?s.bufferFlattenData(c.value,u,c.size):s.bufferIndex(c.value)}if(t.output.meshes.push(s),e.material){var f=t.output.materials[e.material];s.material=f,o=objectAssign(o,s.material.defines),s.defines=o;var h=Shaders.get(ShaderLibs.gltfVert,ShaderLibs.gltfFrag,o),l=f.emissiveFacotr,p=f.normalTexture,d=f.occlusionTexture,_=f.pbrMetallicRoughness,v=_.baseColorTexture,m=_.metallicRoughnessTexture,y={uEmissiveFactor:l||[0,0,0],uBaseColor:_.baseColorFactor||[1,1,1,1],uRoughness:_.roughnessFactor||1,uMetallic:_.metallicFactor||1,uScaleDiffBaseMR:[0,0,0,0],uScaleFGDSpec:[0,0,0,0],uScaleIBLAmbient:[1,1,1,1],uLightDirection:[1,1,1],uLightColor:[1,1,1],uGamma:1};v&&(y.uColorMap=v.glTexture),m&&(y.uMetallicRoughnessMap=m.glTexture),p&&(y.uNormalScale=p.scale||1,y.uNormalMap=p.glTexture),d&&(y.uAoMap=d.glTexture,y.uOcclusionStrength=d.strength||1),h.bind(),h.uniform(y),s.material.shader=h,s.material.uniforms=y}t.geometries.push(i)}))})),e(t)}))},Ic=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.accessors[e],i=t.bufferViews[r.bufferView].data,o=r.byteOffset||0,a=wc[r.componentType]||Float32Array,s=Sc[r.type];null==s&&n&&(s=1);var u=new a(i,o,s*r.count),c=r.extensions&&r.extensions.WEB3D_quantized_attributes;if(c){for(var f=new Float32Array(s*r.count),h=c.decodeMatrix,l=new Array(s),p=new Array(s),d=0;d<s;d++)l[d]=h[s*(s+1)+d],p[d]=h[d*(s+1)+d];for(var _=0;_<r.count;_++)for(var v=0;v<s;v++)f[_*s+v]=u[_*s+v]*p[v]+l[v];u=f}return u},Lc={parse:function(t,e){return new Promise((function(n,r){t.output={meshes:[],scenes:[],textures:[]},Pc(t,e).then(Cc).then((function(t){n(t)})).catch((function(t){}))}))}};var Nc=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var e=0,n=t.length;function r(){var r="";do{var i=t[e];if(10===i){++e;break}r+=String.fromCharCode(i)}while(++e<n);return r}for(var i=0,o=0,a=1,s=!1,u=0;u<20;u++){var c=r(),f=void 0;if(f=c.match("#\\?RADIANCE"));else if(f=c.match("FORMAT=32-bit_rle_rgbe"))s=!0;else if(f=c.match("EXPOSURE=\\s*([0-9]*[.][0-9]*)"))a=Number(f[1]);else if(f=c.match("#.*"));else if(f=c.match("-Y ([0-9]+) \\+X ([0-9]+)")){o=Number(f[1]),i=Number(f[2]);break}}if(!s)throw new Error("File is not run length encoded!");var h=new Uint8Array(i*o*4);!function(t,e,n,r,i,o){var a,s,u,c=new Array(4),f=null,h=new Array(2),l=t.length;function p(e){var n=0;do{e[n++]=t[r]}while(++r<l&&n<e.length);return n}function d(e,n,i){var o=0;do{e[n+o++]=t[r]}while(++r<l&&o<i);return o}function _(t,e,n,r){var i=4*r,o=d(e,n,i);if(o<i)throw new Error("Error reading raw pixels: got ".concat(o," bytes, expected ").concat(i))}for(;o>0;){if(p(c)<c.length)throw new Error("Error reading bytes: expected ".concat(c.length));if(2!==c[0]||2!==c[1]||0!=(128&c[2]))return e[n++]=c[0],e[n++]=c[1],e[n++]=c[2],e[n++]=c[3],void _(0,e,n,i*o-1);if(((255&c[2])<<8|255&c[3])!==i)throw new Error("Wrong scanline width ".concat((255&c[2])<<8|255&c[3],", expected ").concat(i));null===f&&(f=new Array(4*i)),a=0;for(var v=0;v<4;v++)for(s=(v+1)*i;a<s;){if(p(h)<h.length)throw new Error("Error reading 2-byte buffer");if((255&h[0])>128){if(0===(u=(255&h[0])-128)||u>s-a)throw new Error("Bad scanline data");for(;u-- >0;)f[a++]=h[1]}else{if(0===(u=255&h[0])||u>s-a)throw new Error("Bad scanline data");if(f[a++]=h[1],--u>0){if(d(f,a,u)<u)throw new Error("Error reading non-run data");a+=u}}}for(var m=0;m<i;m++)e[n+0]=f[m],e[n+1]=f[m+i],e[n+2]=f[m+2*i],e[n+3]=f[m+3*i],n+=4;o--}}(t,h,0,e,i,o);for(var l=new Float32Array(i*o*4),p=0;p<h.length;p+=4){var d=h[p+0]/255,_=h[p+1]/255,v=h[p+2]/255,m=h[p+3],y=Math.pow(2,m-128);d*=y,_*=y,v*=y;var b=p;l[b+0]=d,l[b+1]=_,l[b+2]=v,l[b+3]=1}return{shape:[i,o],exposure:a,gamma:1,data:l}};function Dc(t){return(Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kc(t,e){return(kc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xc(t);if(e){var i=Xc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bc(this,n)}}function Bc(t,e){return!e||"object"!==Dc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xc(t){return(Xc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kc(t,e)}(o,t);var e,n,r,i=Uc(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,!0)}return e=o,(n=[{key:"parse",value:function(t){return Nc(t)}},{key:"_onLoaded",value:function(){var t=this.parse(this._req.response);this._callback&&this._callback(t)}}])&&Fc(e.prototype,n),r&&Fc(e,r),o}(Ws);jc.parse=function(t){return Nc(t)};var Vc,Hc=jc;function Gc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yc(t){return 0!==t&&!(t&t-1)}function Wc(t){var e=t.width||t.videoWidth,n=t.height||t.videoHeight;return!(!e||!n)&&(Yc(e)&&Yc(n))}var qc,Zc,Kc,Qc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Gc(this,t),Vc=_a.gl,n)this._texture=e;else{this._mSource=e,this._texture=Vc.createTexture(),this._isVideo="VIDEO"===e.tagName,this._premultiplyAlpha=!0,this._magFilter=r.magFilter||Vc.LINEAR,this._minFilter=r.minFilter||Vc.NEAREST_MIPMAP_LINEAR,this._wrapS=r.wrapS||Vc.MIRRORED_REPEAT,this._wrapT=r.wrapT||Vc.MIRRORED_REPEAT;var i=e.width||e.videoWidth;i&&Wc(e)||(this._wrapS=this._wrapT=Vc.CLAMP_TO_EDGE,this._minFilter===Vc.NEAREST_MIPMAP_LINEAR&&(this._minFilter=Vc.LINEAR)),Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.pixelStorei(Vc.UNPACK_FLIP_Y_WEBGL,!0),e.exposure?Vc.texImage2D(Vc.TEXTURE_2D,0,Vc.RGBA,e.shape[0],e.shape[1],0,Vc.RGBA,Vc.FLOAT,e.data):Vc.texImage2D(Vc.TEXTURE_2D,0,Vc.RGBA,Vc.RGBA,Vc.UNSIGNED_BYTE,e),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_MAG_FILTER,this._magFilter),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_MIN_FILTER,this._minFilter),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_WRAP_S,this._wrapS),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_WRAP_T,this._wrapT);var o=_a.getExtension("EXT_texture_filter_anisotropic");if(o){var a=Vc.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT);Vc.texParameterf(Vc.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,a)}this._canGenerateMipmap()&&Vc.generateMipmap(Vc.TEXTURE_2D),Vc.bindTexture(Vc.TEXTURE_2D,null)}}var e,n,r;return e=t,(n=[{key:"generateMipmap",value:function(){this._canGenerateMipmap()&&(Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.generateMipmap(Vc.TEXTURE_2D),Vc.bindTexture(Vc.TEXTURE_2D,null))}},{key:"updateTexture",value:function(t){t&&(this._mSource=t),Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.pixelStorei(Vc.UNPACK_FLIP_Y_WEBGL,!0),Vc.texImage2D(Vc.TEXTURE_2D,0,Vc.RGBA,Vc.RGBA,Vc.UNSIGNED_BYTE,this._mSource),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_MAG_FILTER,this._magFilter),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_MIN_FILTER,this._minFilter),this._canGenerateMipmap()&&Vc.generateMipmap(Vc.TEXTURE_2D),Vc.bindTexture(Vc.TEXTURE_2D,null)}},{key:"bind",value:function(t){void 0===t&&(t=0),_a.shader&&(Vc.activeTexture(Vc.TEXTURE0+t),Vc.bindTexture(Vc.TEXTURE_2D,this._texture),this._bindIndex=t)}},{key:"_canGenerateMipmap",value:function(){return this._minFilter===Vc.LINEAR_MIPMAP_NEAREST||this._minFilter===Vc.NEAREST_MIPMAP_LINEAR||this._minFilter===Vc.LINEAR_MIPMAP_LINEAR||this._minFilter===Vc.NEAREST_MIPMAP_NEAREST}},{key:"minFilter",set:function(t){if(t!==Vc.LINEAR&&t!==Vc.NEAREST&&t!==Vc.NEAREST_MIPMAP_LINEAR&&t!==Vc.NEAREST_MIPMAP_LINEAR&&t!==Vc.LINEAR_MIPMAP_LINEAR&&t!==Vc.NEAREST_MIPMAP_NEAREST)return this;this._minFilter=t,Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_MIN_FILTER,this._minFilter),Vc.bindTexture(Vc.TEXTURE_2D,null)},get:function(){return this._minFilter}},{key:"magFilter",set:function(t){if(t!==Vc.LINEAR&&t!==Vc.NEAREST)return this;this._magFilter=t,Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_MAG_FILTER,this._magFilter),Vc.bindTexture(Vc.TEXTURE_2D,null)},get:function(){return this._magFilter}},{key:"wrapS",set:function(t){if(t!==Vc.CLAMP_TO_EDGE&&t!==Vc.REPEAT&&t!==Vc.MIRRORED_REPEAT)return this;this._wrapS=t,Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_WRAP_S,this._wrapS),Vc.bindTexture(Vc.TEXTURE_2D,null)},get:function(){return this._wrapS}},{key:"wrapT",set:function(t){if(t!==Vc.CLAMP_TO_EDGE&&t!==Vc.REPEAT&&t!==Vc.MIRRORED_REPEAT)return this;this._wrapT=t,Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.texParameteri(Vc.TEXTURE_2D,Vc.TEXTURE_WRAP_T,this._wrapT),Vc.bindTexture(Vc.TEXTURE_2D,null)},get:function(){return this._wrapT}},{key:"premultiplyAlpha",set:function(t){this._premultiplyAlpha=t,Vc.bindTexture(Vc.TEXTURE_2D,this._texture),Vc.pixelStorei(Vc.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),Vc.bindTexture(Vc.TEXTURE_2D,null)},get:function(){return this._premultiplyAlpha}},{key:"texture",get:function(){return this._texture}}])&&zc(e.prototype,n),r&&zc(e,r),t}();Qc.whiteTexture=function(){if(void 0===qc){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,4,4),qc=new Qc(t)}return qc},Qc.greyTexture=function(){if(void 0===Zc){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),Zc=new Qc(t)}return Zc},Qc.blackTexture=function(){if(void 0===Kc){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),Kc=new Qc(t)}return Kc};var $c,Jc=Qc;function tf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ef(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nf(t){return 0!==t&&!(t&t-1)}var rf=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tf(this,t),$c=_a.gl,this.width=e,this.height=n,this.magFilter=r.magFilter||$c.LINEAR,this.minFilter=r.minFilter||$c.LINEAR,this.wrapS=r.wrapS||$c.CLAMP_TO_EDGE,this.wrapT=r.wrapT||$c.CLAMP_TO_EDGE,this.useDepth=r.useDepth||!0,this.useStencil=r.useStencil||!1,this.texelType=r.type,this._numSample=r.numSample||8,nf(this.width)&&nf(this.height)||(this.wrapS=this.wrapT=$c.CLAMP_TO_EDGE,this.minFilter===$c.LINEAR_MIPMAP_NEAREST&&(this.minFilter=$c.LINEAR)),this._init()}var e,n,r;return e=t,(n=[{key:"_init",value:function(){var t=$c.UNSIGNED_BYTE;this.texelType&&(t=this.texelType),this.texelType=t,this.frameBuffer=$c.createFramebuffer(),this.frameBufferColor=$c.createFramebuffer(),this.renderBufferColor=$c.createRenderbuffer(),this.renderBufferDepth=$c.createRenderbuffer(),this.glTexture=this._createTexture(),this.glDepthTexture=this._createTexture($c.DEPTH_COMPONENT16,$c.UNSIGNED_SHORT,$c.DEPTH_COMPONENT,!0),$c.bindRenderbuffer($c.RENDERBUFFER,this.renderBufferColor),$c.renderbufferStorageMultisample($c.RENDERBUFFER,this._numSample,$c.RGBA8,this.width,this.height),$c.bindRenderbuffer($c.RENDERBUFFER,this.renderBufferDepth),$c.renderbufferStorageMultisample($c.RENDERBUFFER,this._numSample,$c.DEPTH_COMPONENT16,this.width,this.height),$c.bindFramebuffer($c.FRAMEBUFFER,this.frameBuffer),$c.framebufferRenderbuffer($c.FRAMEBUFFER,$c.COLOR_ATTACHMENT0,$c.RENDERBUFFER,this.renderBufferColor),$c.framebufferRenderbuffer($c.FRAMEBUFFER,$c.DEPTH_ATTACHMENT,$c.RENDERBUFFER,this.renderBufferDepth),$c.bindFramebuffer($c.FRAMEBUFFER,null),$c.bindFramebuffer($c.FRAMEBUFFER,this.frameBufferColor),$c.framebufferTexture2D($c.FRAMEBUFFER,$c.COLOR_ATTACHMENT0,$c.TEXTURE_2D,this.glTexture.texture,0),$c.bindFramebuffer($c.FRAMEBUFFER,null)}},{key:"_createTexture",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];void 0===t&&(t=$c.RGBA),void 0===e&&(e=this.texelType),n||(n=t);var i=$c.createTexture(),o=new Jc(i,!0),a=r?_a.NEAREST:this.magFilter,s=r?_a.NEAREST:this.minFilter;return $c.bindTexture($c.TEXTURE_2D,i),$c.texParameteri($c.TEXTURE_2D,$c.TEXTURE_MAG_FILTER,a),$c.texParameteri($c.TEXTURE_2D,$c.TEXTURE_MIN_FILTER,s),$c.texParameteri($c.TEXTURE_2D,$c.TEXTURE_WRAP_S,this.wrapS),$c.texParameteri($c.TEXTURE_2D,$c.TEXTURE_WRAP_T,this.wrapT),$c.texImage2D($c.TEXTURE_2D,0,t,this.width,this.height,0,n,e,null),$c.bindTexture($c.TEXTURE_2D,null),o}},{key:"bind",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&_a.viewport(0,0,this.width,this.height),$c.bindFramebuffer($c.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&_a.viewport(0,0,_a.width,_a.height);var e=this.width,n=this.height;$c.bindFramebuffer($c.FRAMEBUFFER,null),$c.bindFramebuffer($c.READ_FRAMEBUFFER,this.frameBuffer),$c.bindFramebuffer($c.DRAW_FRAMEBUFFER,this.frameBufferColor),$c.clearBufferfv($c.COLOR,0,[0,0,0,0]),$c.blitFramebuffer(0,0,e,n,0,0,e,n,$c.COLOR_BUFFER_BIT,_a.NEAREST),$c.bindFramebuffer($c.FRAMEBUFFER,null)}},{key:"getTexture",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.glTexture}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}}])&&ef(e.prototype,n),r&&ef(e,r),t}();function of(t){return(of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function af(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uf(t,e,n){return(uf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cf(t,e){return(cf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lf(t);if(e){var i=lf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hf(this,n)}}function hf(t,e){return!e||"object"!==of(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lf(t){return(lf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cf(t,e)}(o,t);var e,n,r,i=ff(o);function o(){return af(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"load",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;this._drawType=n,uf(lf(o.prototype),"load",this).call(this,t,e)}},{key:"_onLoaded",value:function(){this.parseObj(this._req.response)}},{key:"parseObj",value:function(t){var e,n=t.split("\n"),r=[],i=[],o=[],a=[],s=[],u=[],c=[],f=0,h=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,l=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,p=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,d=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,_=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,v=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,m=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function y(t){var e=parseInt(t);return 3*(e>=0?e-1:e+a.length/3)}function b(t){var e=parseInt(t);return 3*(e>=0?e-1:e+s.length/3)}function g(t){var e=parseInt(t);return 2*(e>=0?e-1:e+u.length/2)}function E(t,e,n){r.push([a[t],a[t+1],a[t+2]]),r.push([a[e],a[e+1],a[e+2]]),r.push([a[n],a[n+1],a[n+2]]),c.push(3*f+0),c.push(3*f+1),c.push(3*f+2),f++}function T(t,e,n){i.push([u[t],u[t+1]]),i.push([u[e],u[e+1]]),i.push([u[n],u[n+1]])}function R(t,e,n){o.push([s[t],s[t+1],s[t+2]]),o.push([s[e],s[e+1],s[e+2]]),o.push([s[n],s[n+1],s[n+2]])}function x(t,e,n,r,i,o,a,s,u,c,f,h){var l,p=y(t),d=y(e),_=y(n);void 0===r?E(p,d,_):(E(p,d,l=y(r)),E(d,_,l)),void 0!==i&&(p=g(i),d=g(o),_=g(a),void 0===r?T(p,d,_):(T(p,d,l=g(s)),T(d,_,l))),void 0!==u&&(p=b(u),d=b(c),_=b(f),void 0===r?R(p,d,_):(R(p,d,l=b(h)),R(d,_,l)))}for(var M=0;M<n.length;M++){var A=n[M];0!==(A=A.trim()).length&&"#"!==A.charAt(0)&&(null!==(e=h.exec(A))?a.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])):null!==(e=l.exec(A))?s.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])):null!==(e=p.exec(A))?u.push(parseFloat(e[1]),parseFloat(e[2])):null!==(e=d.exec(A))?x(e[1],e[2],e[3],e[4]):null!==(e=_.exec(A))?x(e[2],e[5],e[8],e[11],e[3],e[6],e[9],e[12]):null!==(e=v.exec(A))?x(e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15],e[4],e[8],e[12],e[16]):null!==(e=m.exec(A))&&x(e[2],e[5],e[8],e[11],void 0,void 0,void 0,void 0,e[3],e[6],e[9],e[12]))}return this._generateMeshes({positions:r,coords:i,normals:o,indices:c})}},{key:"_generateMeshes",value:function(t){var e,n=t.normals.length>0,r=t.coords.length>0;if(t.positions.length>65535){var i=[],o=0,a={};for(a.positions=t.positions.concat(),a.coords=t.coords.concat(),a.indices=t.indices.concat(),a.normals=t.normals.concat();t.indices.length>0;){for(var s=Math.min(65535,t.positions.length),u=t.indices.splice(0,s),c=[],f=[],h=[],l=void 0,p=0,d=0;d<u.length;d++)u[d]>p&&(p=u[d]),l=u[d],c.push(a.positions[l]),r&&f.push(a.coords[l]),n&&h.push(a.normals[l]),u[d]-=o;o=p+1,(e=new Ta(this._drawType)).bufferVertex(c),r&&e.bufferTexCoord(f),e.bufferIndex(u),n&&e.bufferNormal(h),i.push(e)}return this._callback&&this._callback(i,a),i}return(e=new Ta(this._drawType)).bufferVertex(t.positions),r&&e.bufferTexCoord(t.coords),e.bufferIndex(t.indices),n&&e.bufferNormal(t.normals),this._callback&&this._callback(e,t),e}}])&&sf(e.prototype,n),r&&sf(e,r),o}(Ws);pf.parse=function(t){return(new pf).parseObj(t)};var df=pf,_f=s.create(),vf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:1,y:1,z:1},r=_f,i=t.x,o=t.y,a=t.z,s=t.w,u=i+i,c=o+o,f=a+a,h=i*u,l=i*c,p=i*f,d=o*c,_=o*f,v=a*f,m=s*u,y=s*c,b=s*f,g=n.x,E=n.y,T=n.z;return r[0]=(1-(d+v))*g,r[1]=(l+b)*g,r[2]=(p-y)*g,r[3]=0,r[4]=(l-b)*E,r[5]=(1-(h+v))*E,r[6]=(_+m)*E,r[7]=0,r[8]=(p+y)*T,r[9]=(_-m)*T,r[10]=(1-(h+d))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,_f},mf=function(t){return vf({x:t[0],y:t[1],z:t[2],w:t[3]})},yf=function(t,e){var n=document.createElement("a"),r=function(t){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],r=atob(e[1]),i=r.length,o=new Uint8Array(i);i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}(t.toDataURL({format:"png",multiplier:4})),i=URL.createObjectURL(r);n.download="".concat(e,".png"),n.href=i,n.click()},bf=function(t){var e;return t.container?((e=document.createElement("div")).className="webgl",t.container.appendChild(e)):(e=document.querySelector(".webgl"),t.container=e),e};function gf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ef,Tf,Rf,xf={},Mf=function(t){var e=t.height/3;t.injectCSS&&(xf[t.cssprefix]||(!function(t){var e=document.createElement("style");e.innerHTML=t;var n=document.getElementsByTagName("head")[0];n.insertBefore(e,n.firstChild)}(Sf(t,e)),xf[t.cssprefix]=!0));var n,r,i,o=document.createElement("div");return o.innerHTML=(n=t.cssprefix,i=Af(n,r=.8*e)+wf(n,r),'<button class="'.concat(n,'-button">\n          <div class="').concat(n,'-title"></div>\n          <div class="').concat(n,'-logo" >').concat(i,"</div>\n        </button>")),o.firstChild},Af=function(t,e){return'<svg class="'.concat(t,'-svg" version="1.1" x="0px" y="0px"\n        width="').concat(28/18*e,'px" height="').concat(e,'px" viewBox="0 0 28 18" xml:space="preserve">\n        <path d="M26.8,1.1C26.1,0.4,25.1,0,24.2,0H3.4c-1,0-1.7,0.4-2.4,1.1C0.3,1.7,0,2.7,0,3.6v10.7\n        c0,1,0.3,1.9,0.9,2.6C1.6,17.6,2.4,18,3.4,18h5c0.7,0,1.3-0.2,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l\n        1.5-2.6C13.2,13.1,13,13,14,13v0h-0.2 h0c0.3,0,0.7,0.1,0.8,0.5l1.4,2.6c0.3,0.6,0.8,1.1,1.3,\n        1.4c0.6,0.3,1.2,0.5,1.8,0.5h5c1,0,2-0.4,2.7-1.1c0.7-0.7,1.2-1.6,1.2-2.6 V3.6C28,2.7,27.5,\n        1.7,26.8,1.1z M7.4,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8c1.6,0,2.8,1.3,2.8,2.8\n        C10.2,10.5,8.9,11.8,7.4,11.8z M20.1,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8C21.7\n        ,6.2,23,7.4,23,9 C23,10.5,21.7,11.8,20.1,11.8z"/>\n    </svg>')},wf=function(t,e){return'<svg class="'.concat(t,'-svg-error" x="0px" y="0px"\n        width="').concat(28/18*e,'px" height="').concat(28/18*e,'px" viewBox="0 0 28 28" xml:space="preserve">\n        <path d="M17.6,13.4c0-0.2-0.1-0.4-0.1-0.6c0-1.6,1.3-2.8,2.8-2.8s2.8,1.3,2.8,2.8s-1.3,2.8-2.8,2.8\n        c-0.2,0-0.4,0-0.6-0.1l5.9,5.9c0.5-0.2,0.9-0.4,1.3-0.8\n        c0.7-0.7,1.1-1.6,1.1-2.5V7.4c0-1-0.4-1.9-1.1-2.5c-0.7-0.7-1.6-1-2.5-1\n        H8.1 L17.6,13.4z"/>\n        <path d="M10.1,14.2c-0.5,0.9-1.4,1.4-2.4,1.4c-1.6,0-2.8-1.3-2.8-2.8c0-1.1,0.6-2,1.4-2.5\n        L0.9,5.1 C0.3,5.7,0,6.6,0,7.5v10.7c0,1,0.4,1.8,1.1,2.5c0.7,0.7,1.6,1,2.5,1\n        h5c0.7,0,1.3-0.1,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l1.3-2.6 L10.1,14.2z"/>\n        <path d="M25.5,27.5l-25-25C-0.1,2-0.1,1,0.5,0.4l0,0C1-0.1,2-0.1,2.6,0.4l25,25c0.6,0.6,0.6,1.5\n        ,0,2.1l0,0 C27,28.1,26,28.1,25.5,27.5z"/>\n    </svg>')},Sf=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,r=t.height,i=2,o=t.background?t.background:t.color,a=t.cssprefix;return e="round"==t.corners?t.height/2:"square"==t.corners?2:t.corners,"\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'),\n             url(https://fonts.gstatic.com/s/karla/v5/31P4mP32i98D9CEnGyeX9Q.woff2) format('woff2');\n        unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\n    }\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'),\n             url(https://fonts.gstatic.com/s/karla/v5/Zi_e6rBgGqv33BWF8WTq8g.woff2) format('woff2');\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074,\n                       U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;\n    }\n\n    button.".concat(a,"-button {\n        font-family: 'Karla', sans-serif;\n\n        border: ").concat(o," ").concat(i,"px solid;\n        border-radius: ").concat(e,"px;\n        box-sizing: border-box;\n        background: ").concat(t.background?t.background:"none",";\n\n        height: ").concat(r,"px;\n        min-width: ").concat(9.6*n,"px;\n        display: inline-block;\n        position: relative;\n\n        cursor: pointer;\n        transition: border 0.5s;\n    }\n\n    button.").concat(a,"-button:focus {\n      outline: none;\n    }\n\n    /*\n    * Logo\n    */\n\n    .").concat(a,"-logo {\n        width: ").concat(r,"px;\n        height: ").concat(r,"px;\n        position: absolute;\n        top:0px;\n        left:0px;\n        width: ").concat(r-4,"px;\n        height: ").concat(r-4,"px;\n    }\n    .").concat(a,"-svg {\n        fill: ").concat(t.color,";\n        margin-top: ").concat((r-.8*n)/2-2,"px;\n        margin-left: ").concat(r/3,"px;\n    }\n    .").concat(a,"-svg-error {\n        fill: ").concat(t.color,";\n        display:none;\n        margin-top: ").concat((r-28/18*n*.8)/2-2,"px;\n        margin-left: ").concat(r/3,"px;\n    }\n\n\n    /*\n    * Title\n    */\n\n    .").concat(a,"-title {\n        color: ").concat(t.color,";\n        position: relative;\n        font-size: ").concat(n,"px;\n        padding-left: ").concat(1.05*r,"px;\n        padding-right: ").concat(e-10<5?r/3:e-10,"px;\n        transition: color 0.5s;\n    }\n\n    /*\n    * disabled\n    */\n\n    button.").concat(a,"-button[disabled=true] {\n        opacity: ").concat(t.disabledOpacity,";\n    }\n\n    button.").concat(a,"-button[disabled=true] > .").concat(a,"-logo > .").concat(a,"-svg {\n        display:none;\n    }\n\n    button.").concat(a,"-button[disabled=true] > .").concat(a,"-logo > .").concat(a,"-svg-error {\n        display:initial;\n    }\n\n    /*\n    * error\n    */\n\n    button.").concat(a,"-button[error=true] {\n        animation: errorShake 0.4s;\n    }\n\n    @keyframes errorShake {\n      0% { transform: translate(1px, 0) }\n      10% { transform: translate(-2px, 0) }\n      20% { transform: translate(2px, 0) }\n      30% { transform: translate(-2px, 0) }\n      40% { transform: translate(2px, 0) }\n      50% { transform: translate(-2px, 0) }\n      60% { transform: translate(2px, 0) }\n      70% { transform: translate(-2px, 0) }\n      80% { transform: translate(2px, 0) }\n      90% { transform: translate(-1px, 0) }\n      100% { transform: translate(0px, 0) }\n    }\n  ")},Of=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).color=e.color||"rgb(80,168,252)",e.background=e.background||!1,e.disabledOpacity=e.disabledOpacity||.5,e.height=e.height||55,e.corners=e.corners||"square",e.cssprefix=e.cssprefix||"webvr-ui",e.textEnterXRTitle=e.textEnterXRTitle||"ENTER VR",e.textXRNotFoundTitle=e.textXRNotFoundTitle||"VR NOT FOUND",e.textExitXRTitle=e.textExitXRTitle||"EXIT VR",e.onRequestSession=e.onRequestSession||function(){},e.onEndSession=e.onEndSession||function(){},e.injectCSS=!1!==e.injectCSS,this.options=e,this._enabled=!1,this.session=null,this.domElement=e.domElement||Mf(e),this.__defaultDisplayStyle=this.domElement.style.display||"initial",this.domElement.addEventListener("click",(function(){return n.__onXRButtonClick()})),this.__forceDisabled=!1,this.__setDisabledAttribute(!0),this.setTitle(this.options.textXRNotFoundTitle)}var e,n,r;return e=t,(n=[{key:"setSession",value:function(t){return this.session=t,this.__updateButtonState(),this}},{key:"setTitle",value:function(t){return this.domElement.title=t,Pf(this.domElement,this.options.cssprefix,"title",(function(e){t?(e.innerText=t,e.style.display="initial"):e.style.display="none"})),this}},{key:"setTooltip",value:function(t){return this.domElement.title=t,this}},{key:"show",value:function(){return this.domElement.style.display=this.__defaultDisplayStyle,this}},{key:"hide",value:function(){return this.domElement.style.display="none",this}},{key:"enable",value:function(){return this.__setDisabledAttribute(!1),this.__forceDisabled=!1,this}},{key:"disable",value:function(){return this.__setDisabledAttribute(!0),this.__forceDisabled=!0,this}},{key:"remove",value:function(){this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement)}},{key:"__setDisabledAttribute",value:function(t){t||this.__forceDisabled?this.domElement.setAttribute("disabled","true"):this.domElement.removeAttribute("disabled")}},{key:"__onXRButtonClick",value:function(){var t=this;if(this.session)this.options.onEndSession(this.session);else if(this._enabled){var e=this.options.onRequestSession();e&&e.catch((function(e){var n="XRSession creation failed: ".concat(e.message);t.setTooltip(n),t.__setDisabledAttribute(!0),t.domElement.setAttribute("error","true"),setTimeout((function(){t.__setDisabledAttribute(!1),t.domElement.setAttribute("error","false")}),1e3)}))}}},{key:"__updateButtonState",value:function(){this.session?(this.setTitle(this.options.textExitXRTitle),this.setTooltip("Exit XR presentation"),this.__setDisabledAttribute(!1)):this._enabled?(this.setTitle(this.options.textEnterXRTitle),this.setTooltip("Enter XR"),this.__setDisabledAttribute(!1)):(this.setTitle(this.options.textXRNotFoundTitle),this.setTooltip("No XR headset found."),this.__setDisabledAttribute(!0))}},{key:"enabled",set:function(t){return this._enabled=t,this.__updateButtonState(),this},get:function(){return this._enabled}}])&&gf(e.prototype,n),r&&gf(e,r),t}(),Pf=function(t,e,n,r){var i=t.querySelector("."+e+"-"+n);i&&r(i)};function Cf(){return navigator.xr.requestSession("immersive-ar",{requiredFeatures:["local","hit-test"]}).then((function(t){t.isImmersive=!0,Ef.setSession(t),function(t){t.addEventListener("end",Lf),Tf.addSession(t)}(t)}))}function If(t){t.end()}function Lf(t){Ef.setSession(null)}var Nf=function(t,e){return Rf=e||document.querySelector("header"),Tf=t,Ef=new Of({onRequestSession:Cf,onEndSession:If,textEnterXRTitle:"START AR",textXRNotFoundTitle:"AR NOT FOUND",textExitXRTitle:"EXIT  AR"}),navigator.xr&&navigator.xr.isSessionSupported("immersive-ar").then((function(t){Ef.enabled=t,Rf.appendChild(Ef.domElement)})),Ef},Df=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=t._fov,s=Ff(e),u=o||s-i,c=2*Math.tan(a/2)*u,f=c*_a.aspectRatio,h=r/(1/c),l=n/(1/f);return{scaleX:l,scaleY:h}},Ff=function(t){return isNaN(t)?t.radius.targetValue:t},kf=function(t,e,n,r,i){var o=Df(r,i,t/window.innerWidth,1,n).scaleX;return Ff(i)/(o/e)},Uf=function(t,e){var n=e||[];return t.touches?(n[0]=t.touches[0].pageX,n[1]=t.touches[0].pageY):(n[0]=t.clientX,n[1]=t.clientY),n},Bf=function(t,e,n,r,i){n|=window.innerWidth,r|=window.innerHeight,t=t||n,e=e||r;var o=i?1:Math.min(window.devicePixelRatio,1.25);_a.setSize(t*o,e*o);var a=Math.min(t,n),s=Math.min(e,r),u=n/t,c=r/e,f=Math.min(u,c);a=t*f,s=e*f,_a.canvas.style.width="".concat(a,"px"),_a.canvas.style.height="".concat(s,"px")};function Xf(t){return function(t){if(Array.isArray(t))return jf(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return jf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jf(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Vf=c.create();function Hf(t,e){return c.copy(Vf,[t[0],t[1],t[2],1]),c.transformMat4(Vf,Vf,e),c.clone(Vf)}var Gf=function(t,e,n){for(var r,i,o,a,s,u,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=1e8,h=0;h<e.length;h+=3){var l=e[h],p=e[h+1],d=e[h+2];if(n?(i=Hf(l,n),o=Hf(p,n),a=Hf(d,n)):(i=l,o=p,a=d),r=t.intersectTriangle(i,o,a,!1)){if(!c)return r;(u=Yf(t.origin[0],t.origin[1],t.origin[2],r[0],r[1],r[2]))<f&&(f=u,s=Xf(r))}}return s},zf=function(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o},Yf=function(t,e,n,r,i,o){var a=t-r,s=e-i,u=n-o;return a*a+s*s+u*u},Wf=u.create(),qf=function(t){return u.transformMat4(Wf,t,_a.camera._matrix),u.transformMat4(Wf,Wf,_a.camera.projection),Wf[0]/=Wf[2],Wf[1]/=Wf[2],Wf[0]=(Wf[0]+1)*_a.width/2,Wf[1]=_a.height-(Wf[1]+1)*_a.height/2,Wf},Zf=function(t,e,n,r,i){return(t-e)/(n-e)*(i-r)+r},Kf=function(t,e,n){return n<t?t:n>e?e:n},Qf=function(t,e,n){var r=t,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],f=r[2],h=r[6],l=r[10],p=0,d=0,_=0;return"XYZ"===e?(d=Math.asin(Kf(-1,1,a)),Math.abs(a)<.9999999?(p=Math.atan2(-c,l),_=Math.atan2(-o,i)):(p=Math.atan2(h,u),_=0)):"YXZ"===e?(p=Math.asin(-Kf(-1,1,c)),Math.abs(c)<.9999999?(d=Math.atan2(a,l),_=Math.atan2(s,u)):(d=Math.atan2(-f,i),_=0)):"ZXY"===e?(p=Math.asin(Kf(-1,1,h)),Math.abs(h)<.9999999?(d=Math.atan2(-f,l),_=Math.atan2(-o,u)):(d=0,_=Math.atan2(s,i))):"ZYX"===e?(d=Math.asin(-Kf(-1,1,f)),Math.abs(f)<.9999999?(p=Math.atan2(h,l),_=Math.atan2(s,i)):(p=0,_=Math.atan2(-o,u))):"YZX"===e?(_=Math.asin(Kf(-1,1,s)),Math.abs(s)<.9999999?(p=Math.atan2(-c,u),d=Math.atan2(-f,i)):(p=0,d=Math.atan2(a,l))):"XZY"===e&&(_=Math.asin(-Kf(-1,1,o)),Math.abs(o)<.9999999?(p=Math.atan2(h,u),d=Math.atan2(a,i)):(p=Math.atan2(-c,l),d=0)),[p,d,_]};function $f(t,e){var n=t[0],r=t[1],i=t[2],o=1/(e[3]*n+e[7]*r+e[11]*i+e[15]);t[0]=(e[0]*n+e[4]*r+e[8]*i+e[12])*o,t[1]=(e[1]*n+e[5]*r+e[9]*i+e[13])*o,t[2]=(e[2]*n+e[6]*r+e[10]*i+e[14])*o}function Jf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var th=f.create(),eh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._ax=0,this._ay=0,this._az=0,this._position=u.create(),this._scale=u.fromValues(1,1,1),this._rotation=u.create(),this._anchor=u.create(),this._anchorNegative=u.create(),this._matrix=s.create(),this._matrixParent=s.create(),this._matrixRotation=s.create(),this._matrixScale=s.create(),this._matrixTranslation=s.create(),this._matrixQuaternion=s.create(),this._quat=f.create(),this._children=[]}var e,n,r;return e=t,(n=[{key:"addChild",value:function(t){this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);-1!=e&&this._children.splice(e,1)}},{key:"_update",value:function(){this._needUpdate&&(u.set(this._scale,this._sx,this._sy,this._sz),u.set(this._rotation,this._rx,this._ry,this._rz),u.set(this._position,this._x,this._y,this._z),u.set(this._anchor,this._ax,this._ay,this._az),u.set(this._anchorNegative,-this._ax,-this._ay,-this._az),s.identity(this._matrixTranslation,this._matrixTranslation),s.identity(this._matrixScale,this._matrixScale),s.identity(this._matrixRotation,this._matrixRotation),s.translate(this._matrixRotation,this._matrixRotation,this._anchor),s.rotateX(this._matrixRotation,this._matrixRotation,this._rx),s.rotateY(this._matrixRotation,this._matrixRotation,this._ry),s.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),s.translate(this._matrixRotation,this._matrixRotation,this._anchorNegative),s.fromQuat(this._matrixQuaternion,this._quat),s.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),s.scale(this._matrixScale,this._matrixScale,this._scale),s.translate(this._matrixTranslation,this._matrixTranslation,this._position),s.mul(this._matrix,this._matrixTranslation,this._matrixRotation),s.mul(this._matrix,this._matrix,this._matrixScale),s.mul(this._matrix,this._matrixParent,this._matrix),this.updateMatrix(),this._needUpdate=!1)}},{key:"setParentMatrix",value:function(t){t?s.copy(this._matrixParent,t):s.identify(this._matrixParent)}},{key:"updateMatrix",value:function(t){var e=this;t&&(this._needUpdate=!0,s.copy(this._matrixParent,t)),this._needUpdate&&this._children.forEach((function(t){t.updateMatrix(e._matrix)}))}},{key:"setRotationFromQuaternion",value:function(t){var e=this;f.copy(this._quat,t),this._needUpdate=!0,Hu.next((function(){return e._update()}))}},{key:"getRotationEuler",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XYZ";s.getRotation(th,t);var n=mf(th);return Qf(n,e)}},{key:"setMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XYZ";s.identity(this._matrix),s.getTranslation(this._position,t),this._x=this._position[0],this._y=this._position[1],this._z=this._position[2],s.getScaling(this._scale,t),this._sx=this._scale[0],this._sy=this._scale[1],this._sz=this._scale[2];var n=this.getRotationEuler(t,e);this._rx=n[0],this._ry=n[1],this._rz=n[2],this._needUpdate=!0}},{key:"setRotationEulerFromMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XYZ",n=this.getRotationEuler(t,e);this._rx=n[0],this._ry=n[1],this._rz=n[2],this._needUpdate=!0}},{key:"setPosition",value:function(t,e,n){this.x=t,this.y=e,this.z=n}},{key:"setScale",value:function(t,e,n){this.scaleX=t,this.scaleY=e||t,this.scaleZ=n||t}},{key:"setRotationEuler",value:function(t,e,n){this.rotationX=t,this.rotationY=e,this.rotationZ=n}},{key:"matrix",get:function(){return this._needUpdate&&this._update(),this._matrix}},{key:"x",get:function(){return this._x},set:function(t){var e=this;this._needUpdate=!0,this._x=t,Hu.next((function(){return e._update()}))}},{key:"y",get:function(){return this._y},set:function(t){var e=this;this._needUpdate=!0,this._y=t,Hu.next((function(){return e._update()}))}},{key:"z",get:function(){return this._z},set:function(t){var e=this;this._needUpdate=!0,this._z=t,Hu.next((function(){return e._update()}))}},{key:"scaleX",get:function(){return this._sx},set:function(t){var e=this;this._needUpdate=!0,this._sx=t,Hu.next((function(){return e._update()}))}},{key:"scaleY",get:function(){return this._sy},set:function(t){var e=this;this._needUpdate=!0,this._sy=t,Hu.next((function(){return e._update()}))}},{key:"scaleZ",get:function(){return this._sz},set:function(t){var e=this;this._needUpdate=!0,this._sz=t,Hu.next((function(){return e._update()}))}},{key:"rotationX",get:function(){return this._rx},set:function(t){var e=this;this._needUpdate=!0,this._rx=t,Hu.next((function(){return e._update()}))}},{key:"rotationY",get:function(){return this._ry},set:function(t){var e=this;this._needUpdate=!0,this._ry=t,Hu.next((function(){return e._update()}))}},{key:"rotationZ",get:function(){return this._rz},set:function(t){var e=this;this._needUpdate=!0,this._rz=t,Hu.next((function(){return e._update()}))}},{key:"anchorX",get:function(){return this._ax},set:function(t){var e=this;this._needUpdate=!0,this._ax=t,Hu.next((function(){return e._update()}))}},{key:"anchorY",get:function(){return this._ay},set:function(t){var e=this;this._needUpdate=!0,this._ay=t,Hu.next((function(){return e._update()}))}},{key:"anchorZ",get:function(){return this._az},set:function(t){var e=this;this._needUpdate=!0,this._az=t,Hu.next((function(){return e._update()}))}},{key:"children",get:function(){return this._children}}])&&Jf(e.prototype,n),r&&Jf(e,r),t}();function nh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ih=function(t,e){var n=e||{};return t.touches?(n.x=t.touches[0].pageX,n.y=t.touches[0].pageY):(n.x=t.clientX,n.y=t.clientY),n},oh=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;nh(this,t),this.connected=!1,this._target=e,this._listenerTarget=r,this._mouse={},this._preMouse={},this.center=u.create(),this._up=u.fromValues(0,1,0),this.radius=new Yu(i),this.position=u.fromValues(0,0,this.radius.value),this.positionOffset=u.create(),this._rx=new Yu(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new Yu(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._wheelBind=function(t){return n._onWheel(t)},this._downBind=function(t){return n._onDown(t)},this._moveBind=function(t){return n._onMove(t)},this._upBind=function(){return n._onUp()},this._efIndex=Hu.addEF((function(){return n._loop()}))}var e,n,r;return e=t,(n=[{key:"connect",value:function(t){this.connected&&this.disconnect(),t&&(this._listenerTarget=t),this.disconnect(),this.connected=!0,this._listenerTarget.addEventListener("mousewheel",this._wheelBind,{passive:!1}),this._listenerTarget.addEventListener("DOMMouseScroll",this._wheelBind,{passive:!1}),this._listenerTarget.addEventListener("mousedown",this._downBind,{passive:!1}),this._listenerTarget.addEventListener("touchstart",this._downBind,{passive:!1}),this._listenerTarget.addEventListener("mousemove",this._moveBind,{passive:!1}),this._listenerTarget.addEventListener("touchmove",this._moveBind,{passive:!1}),window.addEventListener("touchend",this._upBind),window.addEventListener("mouseup",this._upBind)}},{key:"disconnect",value:function(){this.connected=!1,this._listenerTarget.removeEventListener("mousewheel",this._wheelBind,{passive:!1}),this._listenerTarget.removeEventListener("DOMMouseScroll",this._wheelBind,{passive:!1}),this._listenerTarget.removeEventListener("mousedown",this._downBind,{passive:!1}),this._listenerTarget.removeEventListener("touchstart",this._downBind,{passive:!1}),this._listenerTarget.removeEventListener("mousemove",this._moveBind,{passive:!1}),this._listenerTarget.removeEventListener("touchmove",this._moveBind,{passive:!1}),window.removeEventListener("touchend",this._upBind),window.removeEventListener("mouseup",this._upBind)}},{key:"lock",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLockZoom=t,this._isLockRotation=t,this._isMouseDown=!1}},{key:"lockZoom",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLockZoom=t}},{key:"lockRotation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLockRotation=t}},{key:"inverseControl",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isInvert=t}},{key:"_onDown",value:function(t){this._isLockRotation||(this._isMouseDown=!0,ih(t,this._mouse),ih(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}},{key:"_onMove",value:function(t){if(!this._isLockRotation&&(ih(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){var e=-(this._mouse.x-this._preMouse.x);this._isInvert&&(e*=-1),this._ry.value=this._preRY-.01*e*this.sensitivity;var n=-(this._mouse.y-this._preMouse.y);this._isInvert&&(n*=-1),this._rx.value=this._preRX-.01*n*this.sensitivity}}},{key:"_onUp",value:function(){this._isLockRotation||(this._isMouseDown=!1)}},{key:"_onWheel",value:function(t){if(!this._isLockZoom){var e=t.wheelDelta,n=t.detail,r=0;r=n?e?e/n/40*n>0?1:-1:-n/3:e/120,this.radius.add(2*-r)}}},{key:"_loop",value:function(){this._updatePosition(),this._target&&this._target.viewMatrix?this._updateCamera():this._target._rotation&&(this._target.rotationX=this._rx.value,this._target.rotationY=this._ry.value)}},{key:"_updatePosition",value:function(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;var t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t,u.add(this.position,this.position,this.positionOffset)}},{key:"getPosition",value:function(t,e,n){var r=Math.sin(t)*n,i=Math.cos(t)*n;return[Math.cos(e+.5*Math.PI)*i,r,Math.sin(e+.5*Math.PI)*i]}},{key:"_updateCamera",value:function(){this._target.lookAt(this.position,this.center,this._up)}},{key:"destroy",value:function(){this.disconnect(),Hu.removeEF(this._efIndex)}},{key:"rx",get:function(){return this._rx}},{key:"ry",get:function(){return this._ry}}])&&rh(e.prototype,n),r&&rh(e,r),t}();function ah(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var uh=function(t,e){var n=e||{};return t.touches?(n.x=t.touches[0].pageX,n.y=t.touches[0].pageY):(n.x=t.clientX,n.y=t.clientY),n},ch=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;ah(this,t),this._target=e,this._listenerTarget=r,this.matrix=s.create(),this.m=s.create(),this._vZaxis=u.clone([0,0,0]),this._zAxis=u.clone([0,0,1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=f.create(),this.tempRotation=f.create(),this._rotateZMargin=0,this._offset=.004,this._slerp=-1,this._isLocked=!1,this._diffX=new Yu(0,i),this._diffY=new Yu(0,i),this._listenerTarget.addEventListener("mousedown",(function(t){return n._onDown(t)})),this._listenerTarget.addEventListener("touchstart",(function(t){return n._onDown(t)})),this._listenerTarget.addEventListener("mousemove",(function(t){return n._onMove(t)})),this._listenerTarget.addEventListener("touchmove",(function(t){return n._onMove(t)})),window.addEventListener("touchend",(function(){return n._onUp()})),window.addEventListener("mouseup",(function(){return n._onUp()})),Hu.addEF((function(){return n._loop()}))}var e,n,r;return e=t,(n=[{key:"inverseControl",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isInvert=t}},{key:"lock",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isLocked=t}},{key:"setCameraPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;if(this.easing=e,!(this._slerp>0)){var n=f.clone(this._rotation);this._updateRotation(n),this._rotation=f.clone(n),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=f.clone(t),this._slerp=1}}},{key:"resetQuat",value:function(){this._rotation=f.clone([0,0,1,0]),this.tempRotation=f.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1}},{key:"_onDown",value:function(t){if(!this._isLocked){var e=uh(t),n=f.clone(this._rotation);this._updateRotation(n),this._rotation=n,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:e.x,y:e.y},e.y<this._rotateZMargin||e.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(e.x<this._rotateZMargin||e.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._diffX.setTo(0),this._diffY.setTo(0)}}},{key:"_onMove",value:function(t){this._isLocked||uh(t,this.mouse)}},{key:"_onUp",value:function(){this._isLocked||(this._isMouseDown=!1)}},{key:"_updateRotation",value:function(t){var e,n;if(this._isMouseDown&&!this._isLocked&&(this._diffX.value=-(this.mouse.x-this.preMouse.x),this._diffY.value=this.mouse.y-this.preMouse.y,this._isInvert&&(this._diffX.value=-this._diffX.targetValue,this._diffY.value=-this._diffY.targetValue)),this._isRotateZ>0)1===this._isRotateZ?(e=-this._diffX.value*this._offset,e*=this.preMouse.y<this._rotateZMargin?-1:1,n=f.clone([0,0,Math.sin(e),Math.cos(e)]),f.multiply(n,t,n)):(e=-this._diffY.value*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,n=f.clone([0,0,Math.sin(e),Math.cos(e)]),f.multiply(n,t,n));else{var r=u.clone([this._diffX.value,this._diffY.value,0]),i=u.create();u.cross(i,r,this._zAxis),u.normalize(i,i),e=u.length(r)*this._offset,n=f.clone([Math.sin(e)*i[0],Math.sin(e)*i[1],Math.sin(e)*i[2],Math.cos(e)]),f.multiply(t,n,t)}}},{key:"_loop",value:function(){s.identity(this.m),void 0===this._targetQuat?(f.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<5e-4?(f.copy(this._rotation,this._targetQuat),f.copy(this.tempRotation,this._targetQuat),this._targetQuat=void 0,this._diffX.setTo(0),this._diffY.setTo(0),this._slerp=-1):(f.set(this.tempRotation,0,0,0,0),f.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),u.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),s.fromQuat(this.matrix,this.tempRotation)}},{key:"easing",set:function(t){this._diffX.easing=t,this._diffY.easing=t},get:function(){return this._diffX.easing}}])&&sh(e.prototype,n),r&&sh(e,r),t}();function fh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var lh=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fh(this,t),this._children=[],this._matrixIdentity=mat4.create(),_a.enableAlphaBlending(),this._init(n),this._initTextures(n),this._initViews(n),this._efIndex=Hu.addEF((function(){return e._loop()})),this._targetListener=n.container||window,this._resize=this.resize.bind(this),window.addEventListener("resize",this._resize)}var e,n,r;return e=t,(n=[{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"stop",value:function(){-1!==this._efIndex&&(this._efIndex=Hu.removeEF(this._efIndex))}},{key:"start",value:function(){var t=this;-1===this._efIndex&&(this._efIndex=Hu.addEF((function(){return t._loop()})))}},{key:"resize",value:function(t,e){_a.setSize(t||window.innerWidth,e||window.innerHeight),this.camera.setAspectRatio(_a.aspectRatio)}},{key:"addChild",value:function(t){this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);-1!=e&&this._children.splice(e,1)}},{key:"_initTextures",value:function(){}},{key:"_initViews",value:function(){}},{key:"_renderChildren",value:function(){for(var t=0;t<this._children.length;t++)this._children[t].toRender();_a.rotate(this._matrixIdentity)}},{key:"_init",value:function(t){this.camera=new du,this.camera.setPerspective(45*Math.PI/180,_a.aspectRatio,.1,100),this.orbitalControl=new oh(this.camera,this._targetListener,15),t.noControl||this.orbitalControl.connect(),this.orbitalControl.radius.value=10,this.cameraOrtho=new Pu}},{key:"_loop",value:function(t){_a.viewport(0,0,_a.width,_a.height),_a.setMatrices(this.camera),this.update(),this._renderChildren(),this.render()}},{key:"destroy",value:function(){this.orbitalControl.disconnect(),this._efIndex=Hu.removeEF(this._efIndex),window.removeEventListener("resize",this._resize)}}])&&hh(e.prototype,n),r&&hh(e,r),t}(),ph={simpleColorFrag:Ha,bigTriangleVert:$a,generalVert:Va,copyFrag:Ja,basicVert:xa,skyboxVert:Ds,skyboxFrag:Ns};function dh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vh=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;dh(this,t),this._value=e,this._targetValue=e,this.speed=r,this.decreaseRate=i,this._velocity=0,this._efIndex=Hu.addEF((function(){return n._update()}))}var e,n,r;return e=t,(n=[{key:"_update",value:function(){this._checkLimit(),Math.abs(this._targetValue-this._value)<1e-4?this._value=this._targetValue:(this._velocity+=(this._targetValue-this._value)*this.speed,this._value+=this._velocity,this._velocity*=this.decreaseRate,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue))}},{key:"limit",value:function(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){Hu.removeEF(this._efIndex)}},{key:"value",set:function(t){this._targetValue=t},get:function(){return this._value}}])&&_h(e.prototype,n),r&&_h(e,r),t}();var mh;function yh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bh=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),mh=_a.gl,this._vs=e,this._fs=n,this._init()}var e,n,r;return e=t,(n=[{key:"_init",value:function(){this._meshCurrent=new Ta,this._meshTarget=new Ta,this._numPoints=-1,this._varyings=[],this.transformFeedback=mh.createTransformFeedback()}},{key:"bufferData",value:function(t,e,n){var r=!!n;this._meshCurrent.bufferData(t,e,null,mh.STREAM_COPY,!1),this._meshTarget.bufferData(t,e,null,mh.STREAM_COPY,!1),r&&(this._varyings.push(n),this._numPoints<0&&(this._numPoints=t.length))}},{key:"bufferIndex",value:function(t){this._meshCurrent.bufferIndex(t),this._meshTarget.bufferIndex(t)}},{key:"uniform",value:function(t,e,n){this.shader&&this.shader.uniform(t,e,n)}},{key:"generate",value:function(){this.shader=new Ia(this._vs,this._fs,this._varyings)}},{key:"render",value:function(){this.shader||this.generate(),this.shader.bind(),_a.drawTransformFeedback(this),this._swap()}},{key:"_swap",value:function(){var t=this._meshCurrent;this._meshCurrent=this._meshTarget,this._meshTarget=t}},{key:"numPoints",get:function(){return this._numPoints}},{key:"meshCurrent",get:function(){return this._meshCurrent}},{key:"meshTarget",get:function(){return this._meshTarget}},{key:"meshSource",get:function(){return this._meshCurrent}},{key:"meshDestination",get:function(){return this._meshTarget}}])&&yh(e.prototype,n),r&&yh(e,r),t}();function gh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Th={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},Out:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{in:function(t){return 1-Th.Bounce.out(1-t)},out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOut:function(t){return t<.5?.5*Th.Bounce.in(2*t):.5*Th.Bounce.out(2*t-1)+.5}}};var Rh=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expOut",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;gh(this,t),this._value=e,this._startValue=e,this._targetValue=e,this._counter=1,this.speed=i,this.easing=r,this._needUpdate=!0,this._efIndex=Hu.addEF((function(){return n._update()}))}var e,n,r;return e=t,(n=[{key:"_update",value:function(){var t=this._counter+this.speed;t>1&&(t=1),this._counter!==t?(this._counter=t,this._needUpdate=!0):this._needUpdate=!1}},{key:"limit",value:function(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}},{key:"setTo",value:function(t){this._value=t,this._targetValue=t,this._counter=1}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){Hu.removeEF(this._efIndex)}},{key:"value",set:function(t){this._startValue=this._value,this._targetValue=t,this._checkLimit(),this._counter=0},get:function(){if(this._needUpdate){var t=function(t){switch(t){default:case"linear":return Th.Linear.None;case"expIn":return Th.Exponential.In;case"expOut":return Th.Exponential.Out;case"expInOut":return Th.Exponential.InOut;case"cubicIn":return Th.Cubic.In;case"cubicOut":return Th.Cubic.Out;case"cubicInOut":return Th.Cubic.InOut;case"quarticIn":return Th.Quartic.In;case"quarticOut":return Th.Quartic.Out;case"quarticInOut":return Th.Quartic.InOut;case"quinticIn":return Th.Quintic.In;case"quinticOut":return Th.Quintic.Out;case"quinticInOut":return Th.Quintic.InOut;case"sinusoidalIn":return Th.Sinusoidal.In;case"sinusoidalOut":return Th.Sinusoidal.Out;case"sinusoidalInOut":return Th.Sinusoidal.InOut;case"circularIn":return Th.Circular.In;case"circularOut":return Th.Circular.Out;case"circularInOut":return Th.Circular.InOut;case"elasticIn":return Th.Elastic.In;case"elasticOut":return Th.Elastic.Out;case"elasticInOut":return Th.Elastic.InOut;case"backIn":return Th.Back.In;case"backOut":return Th.Back.Out;case"backInOut":return Th.Back.InOut;case"bounceIn":return Th.Bounce.in;case"bounceOut":return Th.Bounce.out;case"bounceInOut":return Th.Bounce.inOut}}(this.easing)(this._counter);this._value=this._startValue+t*(this._targetValue-this._startValue),this._needUpdate=!1}return this._value}},{key:"targetValue",get:function(){return this._targetValue}}])&&Eh(e.prototype,n),r&&Eh(e,r),t}();function xh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mh=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shader=new Ia(e,n),this._init()}var e,n,r;return e=t,(n=[{key:"_init",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){this.shader.destroy()}}])&&xh(e.prototype,n),r&&xh(e,r),t}();function Ah(t){return(Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sh(t,e){return(Sh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ch(t);if(e){var i=Ch(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ph(this,n)}}function Ph(t,e){return!e||"object"!==Ah(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ch(t){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ih=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sh(t,e)}(o,t);var e,n,r,i=Oh(o);function o(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this))._children=[],r.shader=new Ia(t,e),r._init(n),r}return e=o,(n=[{key:"_init",value:function(t){}},{key:"render",value:function(){}},{key:"destroy",value:function(){this.shader.destroy()}}])&&wh(e.prototype,n),r&&wh(e,r),o}(eh);function Lh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Nh=new(function(){function t(){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glm=p,this.GL=_a,this.GLTool=_a,this.GLShader=Ia,this.GLTexture=fc,this.GLCubeTexture=ku,this.Mesh=Ta,this.Geom=ja,this.Batch=ma,this.FrameBuffer=vc,this.CubeFrameBuffer=Xu,this.Scheduler=Hu,this.EventDispatcher=Zu,this.EaseNumber=Yu,this.SpringNumber=vh,this.TweenNumber=Rh,this.Camera=Zs,this.CameraOrtho=Pu,this.CameraPerspective=du,this.Ray=ou,this.CameraCube=Tu,this.OrbitalControl=oh,this.QuatRotation=ch,this.BinaryLoader=Ws,this.ObjLoader=df,this.GLTFParser=Lc,this.HDRLoader=Hc,this.BatchCopy=ss,this.BatchAxis=Ba,this.BatchBall=Qa,this.BatchBall=Qa,this.BatchLine=Rs,this.BatchSkybox=Gs,this.BatchSky=Ls,this.BatchDotsPlane=_s,this.Scene=lh,this.View=Mh,this.View3D=Ih,this.Draw=Vu,this.Object3D=eh,this.ShaderLibs=ph,this.WebglNumber=tc.a,this.FboArray=bc,this.FboPingPong=Ac,this.MultisampleFrameBuffer=rf,this.TransformFeedbackObject=bh,p)p[e]&&window&&(window[e]=p[e])}var e,n,r;return e=t,(n=[{key:"log",value:function(){for(var t in navigator.userAgent.indexOf("Chrome"),this)this[t]}}])&&Lh(e.prototype,n),r&&Lh(e,r),t}()),Dh=!1,Fh={white:{height:1/2.8}},kh={x:56,y:37.5,z:36.7},Uh=.04,Bh=.014,Xh={active:!1,points:[{rx:.27,ry:.96,center:[-1.0832843780517578,1.0943561792373657,-.11954474449157715],target:[-1.0832843780517578,1.0943561792373657,-.2323902130126953],offset:[0,0,0],zoom:3.800000000000007,label:"ultra-light-elegance",indexImg:18},{rx:.51,ry:1.17,center:[-1.1039751768112183,0,.3466957211494446],target:[-1.1039751768112183,0,.3466957211494446],offset:[0,0,0],zoom:3.6000000000000156,label:"512GB NVMe SSD",indexImg:22},{rx:.43,ry:-.3500000000000001,center:[.9984817504882812,0,1.3048655986785889],target:[.9984817504882812,0,1.3048655986785889],offset:[0,0,0],zoom:3.6000000000000156,label:"Intel i7",indexImg:19},{rx:.43,ry:-.3500000000000001,center:[-.03543674945831299,.0012476444244384766,.8513486385345459],target:[-.03543674945831299,.0012476444244384766,.8513486385345459],offset:[0,0,0],zoom:3.6000000000000156,label:"Scissors Keyboard",indexImg:21,fitWidth:!0},{rx:.56,ry:-1.1300000000000001,center:[1.079626202583313,1.323491096496582,-.14323902130126953],target:[1.079626202583313,1.323491096496582,-.2623902130126953],offset:[0,0,0],zoom:3.6000000000000156,label:"FHD Immersive Horizon Display",indexImg:17},{rx:.12000000000000005,ry:-1.2000000000000002,center:[1.1241345405578613,-.0007125735282897949,.42821913957595825],target:[1.1241345405578613,-.0007125735282897949,.42821913957595825],offset:[0,0,0],zoom:3.6000000000000156,label:"Nvidia Geforce MX350",indexImg:24},{rx:.31,ry:.4899999999999999,center:[-.7933534383773804,0,1.2124137878417969],target:[-.7933534383773804,0,1.2124137878417969],offset:[0,0,0],zoom:3.6000000000000156,label:"Premium Metallic Body",indexImg:23},{rx:.22,ry:.02999999999999986,center:[-.018160417675971985,-.020937621593475342,1.45339035987854],target:[-.018160417675971985,-.020937621593475342,1.45339035987854],offset:[0,0,0],zoom:3.6000000000000156,label:"Battery",indexImg:20}]};function jh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vh(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Hh,Gh,zh,Yh,Wh,qh,Zh,Kh,Qh,$h,Jh,tl,el,nl,rl,il,ol,al,sl,ul,cl,fl,hl,ll,pl,dl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_l={duration:.5,overwrite:!1,delay:0},vl=1e8,ml=2*Math.PI,yl=ml/4,bl=0,gl=Math.sqrt,El=Math.cos,Tl=Math.sin,Rl=function(t){return"string"==typeof t},xl=function(t){return"function"==typeof t},Ml=function(t){return"number"==typeof t},Al=function(t){return void 0===t},wl=function(t){return"object"==typeof t},Sl=function(t){return!1!==t},Ol=function(){return"undefined"!=typeof window},Pl=function(t){return xl(t)||Rl(t)},Cl=Array.isArray,Il=/(?:-?\.?\d|\.)+/gi,Ll=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,Nl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Dl=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,Fl=/\(([^()]+)\)/i,kl=/[+-]=-?[\.\d]+/,Ul=/[#\-+.]*\b[a-z\d-=+%.]+/gi,Bl={},Xl={},jl=function(t){return(Xl=lp(t,Bl))&&zd},Vl=function(t,e){return!e&&void 0},Hl=function(t,e){return t&&(Bl[t]=e)&&Xl&&(Xl[t]=e)||Bl},Gl=function(){return 0},zl={},Yl=[],Wl={},ql={},Zl={},Kl=30,Ql=[],$l="",Jl=function(t){var e,n,r=t[0];if(wl(r)||xl(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=Ql.length;n--&&!Ql[n].targetTest(r););e=Ql[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new vd(t[n],e)))||t.splice(n,1);return t},tp=function(t){return t._gsap||Jl(kp(t))[0]._gsap},ep=function(t,e){var n=t[e];return xl(n)?t[e]():Al(n)&&t.getAttribute(e)||n},np=function(t,e){return(t=t.split(",")).forEach(e)||t},rp=function(t){return Math.round(1e5*t)/1e5||0},ip=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},op=function(t,e,n){var r,i=Ml(t[1]),o=(i?2:1)+(e<2?0:1),a=t[o];if(i&&(a.duration=t[1]),a.parent=n,e){for(r=a;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=Sl(n.vars.inherit)&&n.parent;a.immediateRender=Sl(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return a},ap=function(){var t,e,n=Yl.length,r=Yl.slice(0);for(Wl={},Yl.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},sp=function(t,e,n,r){Yl.length&&ap(),t.render(e,n,r),Yl.length&&ap()},up=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Ul).length<2?e:t},cp=function(t){return t},fp=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},hp=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},lp=function(t,e){for(var n in e)t[n]=e[n];return t},pp=function t(e,n){for(var r in n)e[r]=wl(n[r])?t(e[r]||(e[r]={}),n[r]):n[r];return e},dp=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},_p=function(t){var e=t.parent||Hh,n=t.keyframes?hp:fp;if(Sl(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent;return t},vp=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},mp=function(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0},yp=function(t){for(var e=t;e;)e._dirty=1,e=e.parent;return t},bp=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},gp=function(t){return t._repeat?Ep(t._tTime,t=t.duration()+t._rDelay)*t:0},Ep=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},Tp=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Rp=function(t){return t._end=rp(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},xp=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=Tp(t.rawTime(),e),(!e._dur||Ip(0,e.totalDuration(),n)-e._tTime>1e-8)&&e.render(n,!0)),yp(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},Mp=function(t,e,n,r){return e.parent&&mp(e),e._start=rp(n+e._delay),e._end=rp(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=t[r];if(i)for(o=e[i];a&&a[i]>o;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,r||xp(t,e),t},Ap=function(t,e,n,r){return Rd(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&qh!==id.frame?(Yl.push(t),t._lazy=[e,r],1):void 0:1},wp=function(t,e,n){var r=t._repeat,i=rp(e)||0;return t._dur=i,t._tDur=r?r<0?1e12:rp(i*(r+1)+t._rDelay*r):i,t._time>i&&(t._time=i,t._tTime=Math.min(t._tTime,t._tDur)),!n&&yp(t.parent),t.parent&&Rp(t),t},Sp=function(t){return t instanceof yd?yp(t):wp(t,t._dur)},Op={_start:0,endTime:Gl},Pp=function t(e,n){var r,i,o=e.labels,a=e._recent||Op,s=e.duration()>=vl?a.endTime(!1):e._dur;return Rl(n)&&(isNaN(n)||n in o)?"<"===(r=n.charAt(0))||">"===r?("<"===r?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0):(r=n.indexOf("="))<0?(n in o||(o[n]=s),o[n]):(i=+(n.charAt(r-1)+n.substr(r+1)),r>1?t(e,n.substr(0,r-1))+i:s+i):null==n?s:+n},Cp=function(t,e){return t||0===t?e(t):e},Ip=function(t,e,n){return n<t?t:n>e?e:n},Lp=function(t){return(t+"").substr((parseFloat(t)+"").length)},Np=[].slice,Dp=function(t,e){return t&&wl(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&wl(t[0]))&&!t.nodeType&&t!==Gh},Fp=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return Rl(t)&&!e||Dp(t,1)?(r=n).push.apply(r,kp(t)):n.push(t)}))||n},kp=function(t,e){return!Rl(t)||e||!zh&&od()?Cl(t)?Fp(t,e):Dp(t)?Np.call(t,0):t?[t]:[]:Np.call(Yh.querySelectorAll(t),0)},Up=function(t){return t.sort((function(){return.5-Math.random()}))},Bp=function(t){if(xl(t))return t;var e=wl(t)?t:{each:t},n=hd(e.ease),r=e.from||0,i=parseFloat(e.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,u=e.axis,c=r,f=r;return Rl(r)?c=f={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(c=r[0],f=r[1]),function(t,a,h){var l,p,d,_,v,m,y,b,g,E=(h||e).length,T=o[E];if(!T){if(!(g="auto"===e.grid?0:(e.grid||[1,vl])[1])){for(y=-vl;y<(y=h[g++].getBoundingClientRect().left)&&g<E;);g--}for(T=o[E]=[],l=s?Math.min(g,E)*c-.5:r%g,p=s?E*f/g-.5:r/g|0,y=0,b=vl,m=0;m<E;m++)d=m%g-l,_=p-(m/g|0),T[m]=v=u?Math.abs("y"===u?_:d):gl(d*d+_*_),v>y&&(y=v),v<b&&(b=v);"random"===r&&Up(T),T.max=y-b,T.min=b,T.v=E=(parseFloat(e.amount)||parseFloat(e.each)*(g>E?E-1:u?"y"===u?E/g:g:Math.max(g,E/g))||0)*("edges"===r?-1:1),T.b=E<0?i-E:i,T.u=Lp(e.amount||e.each)||0,n=n&&E<0?fd(n):n}return E=(T[t]-T.min)/T.max||0,rp(T.b+(n?n(E):E)*T.v)+T.u}},Xp=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){return~~(Math.round(parseFloat(n)/t)*t*e)/e+(Ml(n)?0:Lp(n))}},jp=function(t,e){var n,r,i=Cl(t);return!i&&wl(t)&&(n=i=t.radius||vl,t.values?(t=kp(t.values),(r=!Ml(t[0]))&&(n*=n)):t=Xp(t.increment)),Cp(e,i?xl(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,o,a=parseFloat(r?e.x:e),s=parseFloat(r?e.y:0),u=vl,c=0,f=t.length;f--;)(i=r?(i=t[f].x-a)*i+(o=t[f].y-s)*o:Math.abs(t[f]-a))<u&&(u=i,c=f);return c=!n||u<=n?t[c]:e,r||c===e||Ml(e)?c:c+Lp(e)}:Xp(t))},Vp=function(t,e,n,r){return Cp(Cl(t)?!e:!0===n?!!(n=0):!r,(function(){return Cl(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&~~(Math.round((t+Math.random()*(e-t))/n)*n*r)/r}))},Hp=function(t,e,n){return Cp(n,(function(n){return t[~~e(n)]}))},Gp=function(t){for(var e,n,r,i,o=0,a="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?Ul:Il),a+=t.substr(o,e-o)+Vp(i?n:+n[0],+n[1],+n[2]||1e-5),o=r+1;return a+t.substr(o,t.length-o)},zp=function(t,e,n,r,i){var o=e-t,a=r-n;return Cp(i,(function(e){return n+(e-t)/o*a}))},Yp=function(t,e,n){var r,i,o,a=t.labels,s=vl;for(r in a)(i=a[r]-e)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},Wp=function(t,e,n){var r,i,o=t.vars,a=o[e];if(a)return r=o[e+"Params"],i=o.callbackScope||t,n&&Yl.length&&ap(),r?a.apply(i,r):a.call(i)},qp=function(t){return mp(t),t.progress()<1&&Wp(t,"onInterrupt"),t},Zp=function(t){var e=(t=!t.name&&t.default||t).name,n=xl(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:Gl,render:Fd,add:Ed,kill:Ud,modifier:kd,rawVars:0},o={targetTest:0,get:0,getSetter:Id,aliases:{},register:0};if(od(),t!==r){if(ql[e])return;fp(r,fp(dp(t,i),o)),lp(r.prototype,lp(i,dp(t,o))),ql[r.prop=e]=r,t.targetTest&&(Ql.push(r),zl[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Hl(e,r),t.register&&t.register(zd,r,jd)},Kp={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},Qp=function(t,e,n){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0},$p=function(t,e,n){var r,i,o,a,s,u,c,f,h,l,p=t?Ml(t)?[t>>16,t>>8&255,255&t]:0:Kp.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Kp[t])p=Kp[t];else if("#"===t.charAt(0))4===t.length&&(r=t.charAt(1),i=t.charAt(2),o=t.charAt(3),t="#"+r+r+i+i+o+o),p=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(p=l=t.match(Il),e){if(~t.indexOf("="))return p=t.match(Ll),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,s=+p[1]/100,r=2*(u=+p[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),p.length>3&&(p[3]*=1),p[0]=Qp(a+1/3,r,i),p[1]=Qp(a,r,i),p[2]=Qp(a-1/3,r,i);else p=t.match(Il)||Kp.transparent;p=p.map(Number)}return e&&!l&&(r=p[0]/255,i=p[1]/255,o=p[2]/255,u=((c=Math.max(r,i,o))+(f=Math.min(r,i,o)))/2,c===f?a=s=0:(h=c-f,s=u>.5?h/(2-c-f):h/(c+f),a=c===r?(i-o)/h+(i<o?6:0):c===i?(o-r)/h+2:(r-i)/h+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*s+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p},Jp=function(t){var e=[],n=[],r=-1;return t.split(ed).forEach((function(t){var i=t.match(Nl)||[];e.push.apply(e,i),n.push(r+=i.length+1)})),e.c=n,e},td=function(t,e,n){var r,i,o,a,s="",u=(t+s).match(ed),c=e?"hsla(":"rgba(",f=0;if(!u)return t;if(u=u.map((function(t){return(t=$p(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(o=Jp(t),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=t.replace(ed,"1").split(Nl)).length-1;f<a;f++)s+=i[f]+(~r.indexOf(f)?u.shift()||c+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!i)for(a=(i=t.split(ed)).length-1;f<a;f++)s+=i[f]+u[f];return s+i[a]},ed=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in Kp)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),nd=/hsl[a]?\(/,rd=function(t){var e,n=t.join(" ");if(ed.lastIndex=0,ed.test(n))return e=nd.test(n),t[1]=td(t[1],e),t[0]=td(t[0],e,Jp(t[1])),!0},id=(el=Date.now,nl=500,rl=33,il=el(),ol=il,sl=al=1/240,cl=function t(e){var n,r,i=el()-ol,o=!0===e;i>nl&&(il+=i-rl),ol+=i,tl.time=(ol-il)/1e3,((n=tl.time-sl)>0||o)&&(tl.frame++,sl+=n+(n>=al?.004:al-n),r=1),o||(Qh=$h(t)),r&&ul.forEach((function(t){return t(tl.time,i,tl.frame,e)}))},tl={time:0,frame:0,tick:function(){cl(!0)},wake:function(){Wh&&(!zh&&Ol()&&(Gh=zh=window,Yh=Gh.document||{},Bl.gsap=zd,(Gh.gsapVersions||(Gh.gsapVersions=[])).push(zd.version),jl(Xl||Gh.GreenSockGlobals||!Gh.gsap&&Gh||{}),Jh=Gh.requestAnimationFrame),Qh&&tl.sleep(),$h=Jh||function(t){return setTimeout(t,1e3*(sl-tl.time)+1|0)},Kh=1,cl(2))},sleep:function(){(Jh?Gh.cancelAnimationFrame:clearTimeout)(Qh),Kh=0,$h=Gl},lagSmoothing:function(t,e){nl=t||1/1e-8,rl=Math.min(e,nl,0)},fps:function(t){al=1/(t||240),sl=tl.time+al},add:function(t){ul.indexOf(t)<0&&ul.push(t),od()},remove:function(t){var e;~(e=ul.indexOf(t))&&ul.splice(e,1)},_listeners:ul=[]}),od=function(){return!Kh&&id.wake()},ad={},sd=/^[\d.\-M][\d.\-,\s]/,ud=/["']/g,cd=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],e=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[a]=isNaN(r)?r.replace(ud,"").trim():+r,a=n.substr(e+1).trim();return i},fd=function(t){return function(e){return 1-t(1-e)}},hd=function(t,e){return t&&(xl(t)?t:ad[t]||function(t){var e=(t+"").split("("),n=ad[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[cd(e[1])]:Fl.exec(t)[1].split(",").map(up)):ad._CE&&sd.test(t)?ad._CE("",t):n}(t))||e},ld=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,o={easeIn:e,easeOut:n,easeInOut:r};return np(t,(function(t){for(var e in ad[t]=Bl[t]=o,ad[i=t.toLowerCase()]=n,o)ad[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=ad[t+"."+e]=o[e]})),o},pd=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},dd=function t(e,n,r){var i=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),a=o/ml*(Math.asin(1/i)||0),s=function(t){return 1===t?1:i*Math.pow(2,-10*t)*Tl((t-a)*o)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:pd(s);return o=ml/o,u.config=function(n,r){return t(e,n,r)},u},_d=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:pd(r);return i.config=function(n){return t(e,n)},i};np("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;ld(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),ad.Linear.easeNone=ad.none=ad.Linear.easeIn,ld("Elastic",dd("in"),dd("out"),dd()),fl=7.5625,ll=1/(hl=2.75),ld("Bounce",(function(t){return 1-pl(1-t)}),pl=function(t){return t<ll?fl*t*t:t<.7272727272727273?fl*Math.pow(t-1.5/hl,2)+.75:t<.9090909090909092?fl*(t-=2.25/hl)*t+.9375:fl*Math.pow(t-2.625/hl,2)+.984375}),ld("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),ld("Circ",(function(t){return-(gl(1-t*t)-1)})),ld("Sine",(function(t){return 1-El(t*yl)})),ld("Back",_d("in"),_d("out"),_d()),ad.SteppedEase=ad.steps=Bl.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*Ip(0,1-1e-8,t)|0)+i)*n}}},_l.ease=ad["quad.out"],np("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return $l+=t+","+t+"Params,"}));var vd=function(t,e){this.id=bl++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:ep,this.set=e?e.getSetter:Id},md=function(){function t(t,e){var n=t.parent||Hh;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,wp(this,+t.duration,1),this.data=t.data,Kh||id.wake(),n&&Mp(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,wp(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(od(),!arguments.length)return this._tTime;var n=this.parent||this._dp;if(n&&n.smoothChildTiming&&this._ts){for(this._start=rp(n._time-(this._ts>0?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),Rp(this),n._dirty||yp(n);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&Mp(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime))&&(this._ts||(this._pTime=t),sp(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+gp(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+gp(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Ep(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Tp(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,bp(this.totalTime(Ip(0,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(od(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8)&&1e-8!==Math.abs(this._zTime)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Mp(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Sl(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Tp(e.rawTime(t),this):this._tTime:this._tTime},e.repeat=function(t){return arguments.length?(this._repeat=t,Sp(this)):this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,Sp(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Pp(this,t),Sl(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Sl(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=0,this._zTime=-1e-8,this},e.isActive=function(t){var e,n=this.parent||this._dp,r=this._start;return!(n&&!(this._ts&&(this._initted||!t)&&n.isActive(t)&&(e=n.rawTime(!0))>=r&&e<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(n){var r=xl(t)?t:cp,i=function(){var t=e.then;e.then=null,xl(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){qp(this)},t}();fp(md.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var yd=function(t){function e(e,n){var r;return void 0===e&&(e={}),(r=t.call(this,e,n)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=Sl(e.sortChildren),r.parent&&xp(r.parent,jh(r)),r}Vh(e,t);var n=e.prototype;return n.to=function(t,e,n){return new wd(t,op(arguments,0,this),Pp(this,Ml(e)?arguments[3]:n)),this},n.from=function(t,e,n){return new wd(t,op(arguments,1,this),Pp(this,Ml(e)?arguments[3]:n)),this},n.fromTo=function(t,e,n,r){return new wd(t,op(arguments,2,this),Pp(this,Ml(e)?arguments[4]:r)),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,_p(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new wd(t,e,Pp(this,n),1),this},n.call=function(t,e,n){return Mp(this,wd.delayedCall(0,t,e),Pp(this,n))},n.staggerTo=function(t,e,n,r,i,o,a){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new wd(t,n,Pp(this,i)),this},n.staggerFrom=function(t,e,n,r,i,o,a){return n.runBackwards=1,_p(n).immediateRender=Sl(n.immediateRender),this.staggerTo(t,e,n,r,i,o,a)},n.staggerFromTo=function(t,e,n,r,i,o,a,s){return r.startAt=n,_p(r).immediateRender=Sl(r.immediateRender),this.staggerTo(t,e,r,i,o,a,s)},n.render=function(t,e,n){var r,i,o,a,s,u,c,f,h,l,p,d,_=this._time,v=this._dirty?this.totalDuration():this._tDur,m=this._dur,y=this!==Hh&&t>v-1e-8&&t>=0?v:t<1e-8?0:t,b=this._zTime<0!=t<0&&(this._initted||!m);if(y!==this._tTime||n||b){if(_!==this._time&&m&&(y+=this._time-_,t+=this._time-_),r=y,h=this._start,u=!(f=this._ts),b&&(m||(_=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(p=this._yoyo,s=m+this._rDelay,((r=rp(y%s))>m||v===y)&&(r=m),(a=~~(y/s))&&a===y/s&&(r=m,a--),p&&1&a&&(r=m-r,d=1),a!==(l=Ep(this._tTime,s))&&!this._lock)){var g=p&&1&l,E=g===(p&&1&a);if(a<l&&(g=!g),_=g?0:m,this._lock=1,this.render(_,e,!m)._lock=0,!e&&this.parent&&Wp(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),_!==this._time||u!==!this._ts)return this;if(E&&(this._lock=2,_=g?m+1e-4:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!d&&this.invalidate()),this._lock=0,!this._ts&&!u)return this}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,rp(_),rp(r)))&&(y-=r-(r=c._start)),this._tTime=y,this._time=r,this._act=!f,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),_||!r||e||Wp(this,"onStart"),r>=_&&t>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!u){c=0,o&&(y+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var T=t<0?t:r;i;){if(o=i._prev,(i._act||T<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(T-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(T-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!u){c=0,o&&(y+=this._zTime=T?-1e-8:1e-8);break}}i=o}}if(c&&!e&&(this.pause(),c.render(r>=_?0:-1e-8)._zTime=r>=_?1:-1,this._ts))return this._start=h,Rp(this),this.render(t,e,n);this._onUpdate&&!e&&Wp(this,"onUpdate",!0),(y===v&&v>=this.totalDuration()||!y&&this._ts<0)&&(h!==this._start&&Math.abs(f)===Math.abs(this._ts)||this._lock||((t||!m)&&(t&&this._ts>0||!y&&this._ts<0)&&mp(this,1),e||t<0&&!_||(Wp(this,y===v?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},n.add=function(t,e){var n=this;if(Ml(e)||(e=Pp(this,e)),!(t instanceof md)){if(Cl(t))return t.forEach((function(t){return n.add(t,e)})),yp(this);if(Rl(t))return this.addLabel(t,e);if(!xl(t))return this;t=wd.delayedCall(0,t)}return this!==t?Mp(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-vl);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof wd?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return Rl(t)?this.removeLabel(t):xl(t)?this.killTweensOf(t):(vp(this,t),t===this._recent&&(this._recent=this._last),yp(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=rp(id.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Pp(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=wd.delayedCall(0,e||Gl,n);return r.data="isPause",this._hasPause=1,Mp(this,r,Pp(this,t))},n.removePause=function(t){var e=this._first;for(t=Pp(this,t);e;)e._start===t&&"isPause"===e.data&&mp(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)bd!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=kp(t),o=this._first;o;)o instanceof wd?!ip(o._targets,i)||e&&!o.isActive("started"===e)||r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(t,e){e=e||{};var n=this,r=Pp(n,t),i=e,o=i.startAt,a=i.onStart,s=i.onStartParams,u=wd.to(n,fp(e,{ease:"none",lazy:!1,time:r,duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale())||1e-8,onStart:function(){n.pause();var t=e.duration||Math.abs((r-n._time)/n.timeScale());u._dur!==t&&wp(u,t).render(u._time,!0,!0),a&&a.apply(u,s||[])}}));return u},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,fp({startAt:{time:Pp(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),Yp(this,Pp(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),Yp(this,Pp(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return yp(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._time=this._tTime=0,t&&(this.labels={}),yp(this)},n.totalDuration=function(t){var e,n,r,i,o=0,a=this,s=a._last,u=vl;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(i=a.parent;s;)e=s._prev,s._dirty&&s.totalDuration(),(r=s._start)>u&&a._sort&&s._ts&&!a._lock?(a._lock=1,Mp(a,s,r-s._delay,1)._lock=0):u=r,r<0&&s._ts&&(o-=r,(!i&&!a._dp||i&&i.smoothChildTiming)&&(a._start+=r/a._ts,a._time-=r,a._tTime-=r),a.shiftChildren(-r,!1,-1e20),u=0),(n=Rp(s))>o&&s._ts&&(o=n),s=e;wp(a,a===Hh&&a._time>o?a._time:Math.min(vl,o),1),a._dirty=0}return a._tDur},e.updateRoot=function(t){if(Hh._ts&&(sp(Hh,Tp(t,Hh)),qh=id.frame),id.frame>=Kl){Kl+=dl.autoSleep||120;var e=Hh._first;if((!e||!e._ts)&&dl.autoSleep&&id._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||id.sleep()}}},e}(md);fp(yd.prototype,{_lock:0,_hasPause:0,_forcing:0});var bd,gd=function(t,e,n,r,i,o,a){var s,u,c,f,h,l,p,d,_=new jd(this._pt,t,e,0,1,Dd,null,i),v=0,m=0;for(_.b=n,_.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=Gp(r)),o&&(o(d=[n,r],t,e),n=d[0],r=d[1]),u=n.match(Dl)||[];s=Dl.exec(r);)f=s[0],h=r.substring(v,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),f!==u[m++]&&(l=parseFloat(u[m-1])||0,_._pt={_next:_._pt,p:h||1===m?h:",",s:l,c:"="===f.charAt(1)?parseFloat(f.substr(2))*("-"===f.charAt(0)?-1:1):parseFloat(f)-l,m:c&&c<4?Math.round:0},v=Dl.lastIndex);return _.c=v<r.length?r.substring(v,r.length):"",_.fp=a,(kl.test(r)||p)&&(_.e=0),this._pt=_,_},Ed=function(t,e,n,r,i,o,a,s,u){xl(r)&&(r=r(i||0,t,o));var c,f=t[e],h="get"!==n?n:xl(f)?u?t[e.indexOf("set")||!xl(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():f,l=xl(f)?u?Pd:Od:Sd;if(Rl(r)&&(~r.indexOf("random(")&&(r=Gp(r)),"="===r.charAt(1)&&(r=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(Lp(h)||0))),h!==r)return isNaN(h+r)?gd.call(this,t,e,h,r,l,s||dl.stringFilter,u):(c=new jd(this._pt,t,e,+h||0,r-(h||0),"boolean"==typeof f?Nd:Ld,0,l),u&&(c.fp=u),a&&c.modifier(a,this,t),this._pt=c)},Td=function(t,e,n,r,i,o){var a,s,u,c;if(ql[t]&&!1!==(a=new ql[t]).init(i,a.rawVars?e[t]:function(t,e,n,r,i){if(xl(t)&&(t=xd(t,i,e,n,r)),!wl(t)||t.style&&t.nodeType||Cl(t))return Rl(t)?xd(t,i,e,n,r):t;var o,a={};for(o in t)a[o]=xd(t[o],i,e,n,r);return a}(e[t],r,i,o,n),n,r,o)&&(n._pt=s=new jd(n._pt,i,t,0,1,a.render,a,0,a.priority),n!==Zh))for(u=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)u[a._props[c]]=s;return a},Rd=function t(e,n){var r,i,o,a,s,u,c,f,h,l,p,d,_=e.vars,v=_.ease,m=_.startAt,y=_.immediateRender,b=_.lazy,g=_.onUpdate,E=_.onUpdateParams,T=_.callbackScope,R=_.runBackwards,x=_.yoyoEase,M=_.keyframes,A=_.autoRevert,w=e._dur,S=e._startAt,O=e._targets,P=e.parent,C=P&&"nested"===P.data?P.parent._targets:O,I="auto"===e._overwrite,L=e.timeline;if(!L||M&&v||(v="none"),e._ease=hd(v,_l.ease),e._yEase=x?fd(hd(!0===x?v:x,_l.ease)):0,x&&e._yoyo&&!e._repeat&&(x=e._yEase,e._yEase=e._ease,e._ease=x),!L){if(S&&S.render(-1,!0).kill(),m){if(mp(e._startAt=wd.set(O,fp({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:Sl(b),startAt:null,delay:0,onUpdate:g,onUpdateParams:E,callbackScope:T,stagger:0},m))),y)if(n>0)!A&&(e._startAt=0);else if(w)return}else if(R&&w)if(S)!A&&(e._startAt=0);else if(n&&(y=!1),mp(e._startAt=wd.set(O,lp(dp(_,zl),{overwrite:!1,data:"isFromStart",lazy:y&&Sl(b),immediateRender:y,stagger:0,parent:P}))),y){if(!n)return}else t(e._startAt,1e-8);for(r=dp(_,zl),e._pt=0,d=(f=O[0]?tp(O[0]).harness:0)&&_[f.prop],b=w&&Sl(b)||b&&!w,i=0;i<O.length;i++){if(c=(s=O[i])._gsap||Jl(O)[i]._gsap,e._ptLookup[i]=l={},Wl[c.id]&&ap(),p=C===O?i:C.indexOf(s),f&&!1!==(h=new f).init(s,d||r,e,p,C)&&(e._pt=a=new jd(e._pt,s,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(t){l[t]=a})),h.priority&&(u=1)),!f||d)for(o in r)ql[o]&&(h=Td(o,r,e,p,s,C))?h.priority&&(u=1):l[o]=a=Ed.call(e,s,o,"get",r[o],p,C,0,_.stringFilter);e._op&&e._op[i]&&e.kill(s,e._op[i]),I&&e._pt&&(bd=e,Hh.killTweensOf(s,l,"started"),bd=0),e._pt&&b&&(Wl[c.id]=1)}u&&Xd(e),e._onInit&&e._onInit(e)}e._from=!L&&!!_.runBackwards,e._onUpdate=g,e._initted=1},xd=function(t,e,n,r,i){return xl(t)?t.call(e,n,r,i):Rl(t)&&~t.indexOf("random(")?Gp(t):t},Md=$l+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ad=(Md+",id,stagger,delay,duration,paused").split(","),wd=function(t){function e(e,n,r,i){var o;"number"==typeof n&&(r.duration=n,n=r,r=null);var a,s,u,c,f,h,l,p,d=(o=t.call(this,i?n:_p(n),r)||this).vars,_=d.duration,v=d.delay,m=d.immediateRender,y=d.stagger,b=d.overwrite,g=d.keyframes,E=d.defaults,T=o.parent,R=(Cl(e)?Ml(e[0]):"length"in n)?[e]:kp(e);if(o._targets=R.length?Jl(R):Vl(0,!dl.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=b,g||y||Pl(_)||Pl(v)){if(n=o.vars,(a=o.timeline=new yd({data:"nested",defaults:E||{}})).kill(),a.parent=jh(o),g)fp(a.vars.defaults,{ease:"none"}),g.forEach((function(t){return a.to(R,t,">")}));else{if(c=R.length,l=y?Bp(y):Gl,wl(y))for(f in y)~Md.indexOf(f)&&(p||(p={}),p[f]=y[f]);for(s=0;s<c;s++){for(f in u={},n)Ad.indexOf(f)<0&&(u[f]=n[f]);u.stagger=0,p&&lp(u,p),n.yoyoEase&&!n.repeat&&(u.yoyoEase=n.yoyoEase),h=R[s],u.duration=+xd(_,jh(o),s,h,R),u.delay=(+xd(v,jh(o),s,h,R)||0)-o._delay,!y&&1===c&&u.delay&&(o._delay=v=u.delay,o._start+=v,u.delay=0),a.to(h,u,l(s,h,R))}_=v=0}_||o.duration(_=a.duration())}else o.timeline=0;return!0===b&&(bd=jh(o),Hh.killTweensOf(R),bd=0),T&&xp(T,jh(o)),(m||!_&&!g&&o._start===T._time&&Sl(m)&&function t(e){return!e||e._ts&&t(e.parent)}(jh(o))&&"nested"!==T.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-v))),o}Vh(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,o,a,s,u,c,f,h,l=this._time,p=this._tDur,d=this._dur,_=t>p-1e-8&&t>=0?p:t<1e-8?0:t;if(d){if(_!==this._tTime||!t||n||this._startAt&&this._zTime<0!=t<0){if(r=_,f=this.timeline,this._repeat){if(a=d+this._rDelay,((r=rp(_%a))>d||p===_)&&(r=d),(o=~~(_/a))&&o===_/a&&(r=d,o--),(u=this._yoyo&&1&o)&&(h=this._yEase,r=d-r),s=Ep(this._tTime,a),r===l&&!n&&this._initted)return this;o!==s&&(!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(a*o,!0).invalidate()._lock=0))}if(!this._initted){if(Ap(this,r,n,e))return this._tTime=0,this;if(d!==this._dur)return this.render(t,e,n)}for(this._tTime=_,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(r/d),this._from&&(this.ratio=c=1-c),l||!r||e||Wp(this,"onStart"),i=this._pt;i;)i.r(c,i.d),i=i._next;f&&f.render(t<0?t:!r&&u?-1e-8:f._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),Wp(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!e&&this.parent&&Wp(this,"onRepeat"),_!==this._tDur&&_||this._tTime!==_||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,n),(t||!d)&&(t&&this._ts>0||!_&&this._ts<0)&&mp(this,1),e||t<0&&!l||_<p&&this.timeScale()>0||(Wp(this,_===p?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}}else!function(t,e,n,r){var i,o=t._zTime<0?0:1,a=e<0?0:1,s=t._rDelay,u=0;if(s&&t._repeat&&(u=Ip(0,t._tDur,e),Ep(u,s)!==Ep(t._tTime,s)&&(o=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),(t._initted||!Ap(t,e,r,n))&&(a!==o||r||1e-8===t._zTime||!e&&t._zTime)){for(t._zTime=e||(n?1e-8:0),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=u,n||Wp(t,"onStart"),i=t._pt;i;)i.r(a,i.d),i=i._next;!a&&t._startAt&&!t._onUpdate&&t._start&&t._startAt.render(e,!0,r),t._onUpdate&&(n||Wp(t,"onUpdate")),u&&t._repeat&&!n&&t.parent&&Wp(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(t.ratio&&mp(t,1),n||(Wp(t,t.ratio?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return qp(this);if(this.timeline)return this.timeline.killTweensOf(t,e,bd&&!0!==bd.vars.overwrite),this;var n,r,i,o,a,s,u,c=this._targets,f=t?kp(t):c,h=this._ptLookup,l=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(c,f))return qp(this);for(n=this._op=this._op||[],"all"!==e&&(Rl(e)&&(a={},np(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var n,r,i,o,a=t[0]?tp(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(r in n=lp({},e),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(c,e)),u=c.length;u--;)if(~f.indexOf(c[u]))for(a in r=h[u],"all"===e?(n[u]=e,o=r,i={}):(i=n[u]=n[u]||{},o=e),o)(s=r&&r[a])&&("kill"in s.d&&!0!==s.d.kill(a)||vp(this,s,"_pt"),delete r[a]),"all"!==i&&(i[a]=1);return this._initted&&!this._pt&&l&&qp(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,n){return new e(t,op(arguments,1))},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,n,r){return new e(t,op(arguments,2))},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return Hh.killTweensOf(t,e,n)},e}(md);fp(wd.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),np("staggerTo,staggerFrom,staggerFromTo",(function(t){wd[t]=function(){var e=new yd,n=Np.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var Sd=function(t,e,n){return t[e]=n},Od=function(t,e,n){return t[e](n)},Pd=function(t,e,n,r){return t[e](r.fp,n)},Cd=function(t,e,n){return t.setAttribute(e,n)},Id=function(t,e){return xl(t[e])?Od:Al(t[e])&&t.setAttribute?Cd:Sd},Ld=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Nd=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Dd=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},Fd=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},kd=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},Ud=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?vp(this,r,"_pt"):r.dep||(e=1),r=n;return!e},Bd=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},Xd=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},jd=function(){function t(t,e,n,r,i,o,a,s,u){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||Ld,this.d=a||this,this.set=s||Sd,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Bd,this.m=t,this.mt=n,this.tween=e},t}();np($l+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",(function(t){return zl[t]=1})),Bl.TweenMax=Bl.TweenLite=wd,Bl.TimelineLite=Bl.TimelineMax=yd,Hh=new yd({sortChildren:!1,defaults:_l,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),dl.stringFilter=rd;var Vd={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return Zp(t)}))},timeline:function(t){return new yd(t)},getTweensOf:function(t,e){return Hh.getTweensOf(t,e)},getProperty:function(t,e,n,r){Rl(t)&&(t=kp(t)[0]);var i=tp(t||{}).get,o=n?cp:up;return"native"===n&&(n=""),t?e?o((ql[e]&&ql[e].get||i)(t,e,n,r)):function(e,n,r){return o((ql[e]&&ql[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=kp(t)).length>1){var r=t.map((function(t){return zd.quickSetter(t,e,n)})),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var o=ql[e],a=tp(t),s=o?function(e){var r=new o;Zh._pt=0,r.init(t,n?e+n:e,Zh,0,[t]),r.render(1,r),Zh._pt&&Fd(1,Zh)}:a.set(t,e);return o?s:function(r){return s(t,e,n?r+n:r,a,1)}},isTweening:function(t){return Hh.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=hd(t.ease,_l.ease)),pp(_l,t||{})},config:function(t){return pp(dl,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!ql[t]&&!Bl[t]&&Vl()})),Zl[e]=function(t,e,r){return n(kp(t),fp(e||{},i),r)},o&&(yd.prototype[e]=function(t,n,r){return this.add(Zl[e](t,wl(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){ad[t]=hd(e)},parseEase:function(t,e){return arguments.length?hd(t,e):ad},getById:function(t){return Hh.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new yd(t);for(i.smoothChildTiming=Sl(t.smoothChildTiming),Hh.remove(i),i._dp=0,i._time=i._tTime=Hh._time,n=Hh._first;n;)r=n._next,!e&&!n._dur&&n instanceof wd&&n.vars.onComplete===n._targets[0]||Mp(i,n,n._start-n._delay),n=r;return Mp(Hh,i,0),i},utils:{wrap:function t(e,n,r){var i=n-e;return Cl(e)?Hp(e,t(0,e.length),n):Cp(r,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,n,r){var i=n-e,o=2*i;return Cl(e)?Hp(e,t(0,e.length-1),n):Cp(r,(function(t){return e+((t=(o+(t-e)%o)%o)>i?o-t:t)}))},distribute:Bp,random:Vp,snap:jp,normalize:function(t,e,n){return zp(t,e,0,1,n)},getUnit:Lp,clamp:function(t,e,n){return Cp(n,(function(n){return Ip(t,e,n)}))},splitColor:$p,toArray:kp,mapRange:zp,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||Lp(n))}},interpolate:function t(e,n,r,i){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,u,c,f,h=Rl(e),l={};if(!0===r&&(i=1)&&(r=null),h)e={p:e},n={p:n};else if(Cl(e)&&!Cl(n)){for(u=[],c=e.length,f=c-2,s=1;s<c;s++)u.push(t(e[s-1],e[s]));c--,o=function(t){t*=c;var e=Math.min(f,~~t);return u[e](t-e)},r=n}else i||(e=lp(Cl(e)?[]:{},e));if(!u){for(a in n)Ed.call(l,e,a,"get",n[a]);o=function(t){return Fd(t,l)||(h?e.p:e)}}}return Cp(r,o)},shuffle:Up},install:jl,effects:Zl,ticker:id,updateRoot:yd.updateRoot,plugins:ql,globalTimeline:Hh,core:{PropTween:jd,globals:Hl,Tween:wd,Timeline:yd,Animation:md,getCache:tp,_removeLinkedListItem:vp}};np("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Vd[t]=wd[t]})),id.add(yd.updateRoot),Zh=Vd.to({},{duration:0});var Hd=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Gd=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(Rl(n)&&(r={},np(n,(function(t){return r[t]=1})),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,o=t._targets;for(n in e)for(r=o.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Hd(i,n)),i&&i.modifier&&i.modifier(e[n],t,o[r],n))}(t,n)}}}},zd=Vd.registerPlugin({name:"attr",init:function(t,e,n,r,i){for(var o in e)this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],r,i,0,0,o),this._props.push(o)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},Gd("roundProps",Xp),Gd("modifiers"),Gd("snap",jp))||Vd;wd.version=yd.version=zd.version="3.2.6",Wh=1,Ol()&&od();ad.Power0,ad.Power1,ad.Power2,ad.Power3,ad.Power4,ad.Linear,ad.Quad,ad.Cubic,ad.Quart,ad.Quint,ad.Strong,ad.Elastic,ad.Back,ad.SteppedEase,ad.Bounce,ad.Sine,ad.Expo,ad.Circ;var Yd,Wd,qd,Zd,Kd,Qd,$d,Jd,t_={},e_=180/Math.PI,n_=Math.PI/180,r_=Math.atan2,i_=/([A-Z])/g,o_=/(?:left|right|width|margin|padding|x)/i,a_=/[\s,\(]\S/,s_={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},u_=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},c_=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},f_=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},h_=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},l_=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},p_=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},d_=function(t,e,n){return t.style[e]=n},__=function(t,e,n){return t.style.setProperty(e,n)},v_=function(t,e,n){return t._gsap[e]=n},m_=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},y_=function(t,e,n,r,i){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},b_=function(t,e,n,r,i){var o=t._gsap;o[e]=n,o.renderTransform(i,o)},g_="transform",E_=g_+"Origin",T_=function(t,e){var n=Wd.createElementNS?Wd.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Wd.createElement(t);return n.style?n:Wd.createElement(t)},R_=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(i_,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,M_(n)||n,1)||""},x_="O,Moz,ms,Ms,Webkit".split(","),M_=function(t,e,n){var r=(e||Kd).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(x_[i]+t in r););return i<0?null:(3===i?"ms":i>=0?x_[i]:"")+t},A_=function(){"undefined"!=typeof window&&(Yd=window,Wd=Yd.document,qd=Wd.documentElement,Kd=T_("div")||{style:{}},Qd=T_("div"),g_=M_(g_),E_=M_(E_),Kd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Jd=!!M_("perspective"),Zd=1)},w_=function t(e){var n,r=T_("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(qd.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(o?i.insertBefore(this,o):i.appendChild(this)),qd.removeChild(r),this.style.cssText=a,n},S_=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},O_=function(t){var e;try{e=t.getBBox()}catch(n){e=w_.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===w_||(e=w_.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+S_(t,["x","cx","x1"])||0,y:+S_(t,["y","cy","y1"])||0,width:0,height:0}},P_=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!O_(t))},C_=function(t,e){if(e){var n=t.style;e in t_&&(e=g_),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(i_,"-$1").toLowerCase())):n.removeAttribute(e)}},I_=function(t,e,n,r,i,o){var a=new jd(t._pt,e,n,0,1,o?p_:l_);return t._pt=a,a.b=r,a.e=i,t._props.push(n),a},L_={deg:1,rad:1,turn:1},N_=function t(e,n,r,i){var o,a,s,u,c=parseFloat(r)||0,f=(r+"").trim().substr((c+"").length)||"px",h=Kd.style,l=o_.test(n),p="svg"===e.tagName.toLowerCase(),d=(p?"client":"offset")+(l?"Width":"Height"),_="px"===i,v="%"===i;return i===f||!c||L_[i]||L_[f]?c:("px"!==f&&!_&&(c=t(e,n,r,"px")),u=e.getCTM&&P_(e),v&&(t_[n]||~n.indexOf("adius"))?rp(c/(u?e.getBBox()[l?"width":"height"]:e[d])*100):(h[l?"width":"height"]=100+(_?f:i),a=~n.indexOf("adius")||"em"===i&&e.appendChild&&!p?e:e.parentNode,u&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Wd&&a.appendChild||(a=Wd.body),(s=a._gsap)&&v&&s.width&&l&&s.time===id.time?rp(c/s.width*100):((v||"%"===f)&&(h.position=R_(e,"position")),a===e&&(h.position="static"),a.appendChild(Kd),o=Kd[d],a.removeChild(Kd),h.position="absolute",l&&v&&((s=tp(a)).time=id.time,s.width=a[d]),rp(_?o*c/100:o&&c?100/o*c:0))))},D_=function(t,e,n,r){var i;return Zd||A_(),e in s_&&"transform"!==e&&~(e=s_[e]).indexOf(",")&&(e=e.split(",")[0]),t_[e]&&"transform"!==e?(i=Y_(t,r),i="transformOrigin"!==e?i[e]:W_(R_(t,E_))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=B_[e]&&B_[e](t,e,n)||R_(t,e)||ep(t,e)||("opacity"===e?1:0)),n&&!~(i+"").indexOf(" ")?N_(t,e,i,n)+n:i},F_=function(t,e,n,r){if(!n||"none"===n){var i=M_(e,t,1),o=i&&R_(t,i,1);o&&o!==n&&(e=i,n=o)}var a,s,u,c,f,h,l,p,d,_,v,m,y=new jd(this._pt,t.style,e,0,1,Dd),b=0,g=0;if(y.b=n,y.e=r,n+="","auto"===(r+="")&&(t.style[e]=r,r=R_(t,e)||r,t.style[e]=n),rd(a=[n,r]),r=a[1],u=(n=a[0]).match(Nl)||[],(r.match(Nl)||[]).length){for(;s=Nl.exec(r);)l=s[0],d=r.substring(b,s.index),f?f=(f+1)%5:"rgba("!==d.substr(-5)&&"hsla("!==d.substr(-5)||(f=1),l!==(h=u[g++]||"")&&(c=parseFloat(h)||0,v=h.substr((c+"").length),(m="="===l.charAt(1)?+(l.charAt(0)+"1"):0)&&(l=l.substr(2)),p=parseFloat(l),_=l.substr((p+"").length),b=Nl.lastIndex-_.length,_||(_=_||dl.units[e]||v,b===r.length&&(r+=_,y.e+=_)),v!==_&&(c=N_(t,e,h,_)||0),y._pt={_next:y._pt,p:d||1===g?d:",",s:c,c:m?m*p:p-c,m:f&&f<4?Math.round:0});y.c=b<r.length?r.substring(b,r.length):""}else y.r="display"===e&&"none"===r?p_:l_;return kl.test(r)&&(y.e=0),this._pt=y,y},k_={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},U_=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,a=o.style,s=e.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],t_[n]&&(r=1,n="transformOrigin"===n?E_:g_),C_(o,n);r&&(C_(o,g_),u&&(u.svg&&o.removeAttribute("transform"),Y_(o,1),u.uncache=1))}},B_={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var o=t._pt=new jd(t._pt,e,n,0,0,U_);return o.u=r,o.pr=-10,o.tween=i,t._props.push(n),1}}},X_=[1,0,0,1,0,0],j_={},V_=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},H_=function(t){var e=R_(t,g_);return V_(e)?X_:e.substr(7).match(Ll).map(rp)},G_=function(t,e){var n,r,i,o,a=t._gsap||tp(t),s=t.style,u=H_(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?X_:u:(u!==X_||t.offsetParent||t===qd||a.svg||(i=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(o=1,r=t.nextSibling,qd.appendChild(t)),u=H_(t),i?s.display=i:C_(t,"display"),o&&(r?n.insertBefore(t,r):n?n.appendChild(t):qd.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},z_=function(t,e,n,r,i,o){var a,s,u,c=t._gsap,f=i||G_(t,!0),h=c.xOrigin||0,l=c.yOrigin||0,p=c.xOffset||0,d=c.yOffset||0,_=f[0],v=f[1],m=f[2],y=f[3],b=f[4],g=f[5],E=e.split(" "),T=parseFloat(E[0])||0,R=parseFloat(E[1])||0;n?f!==X_&&(s=_*y-v*m)&&(u=T*(-v/s)+R*(_/s)-(_*g-v*b)/s,T=T*(y/s)+R*(-m/s)+(m*g-y*b)/s,R=u):(T=(a=O_(t)).x+(~E[0].indexOf("%")?T/100*a.width:T),R=a.y+(~(E[1]||E[0]).indexOf("%")?R/100*a.height:R)),r||!1!==r&&c.smooth?(b=T-h,g=R-l,c.xOffset=p+(b*_+g*m)-b,c.yOffset=d+(b*v+g*y)-g):c.xOffset=c.yOffset=0,c.xOrigin=T,c.yOrigin=R,c.smooth=!!r,c.origin=e,c.originIsAbsolute=!!n,t.style[E_]="0px 0px",o&&(I_(o,c,"xOrigin",h,T),I_(o,c,"yOrigin",l,R),I_(o,c,"xOffset",p,c.xOffset),I_(o,c,"yOffset",d,c.yOffset)),t.setAttribute("data-svg-origin",T+" "+R)},Y_=function(t,e){var n=t._gsap||new vd(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,o,a,s,u,c,f,h,l,p,d,_,v,m,y,b,g,E,T,R,x,M,A,w,S,O,P,C,I,L,N,D=t.style,F=n.scaleX<0,k=R_(t,E_)||"0";return r=i=o=u=c=f=h=l=p=0,a=s=1,n.svg=!(!t.getCTM||!P_(t)),v=G_(t,n.svg),n.svg&&(A=!n.uncache&&t.getAttribute("data-svg-origin"),z_(t,A||k,!!A||n.originIsAbsolute,!1!==n.smooth,v)),d=n.xOrigin||0,_=n.yOrigin||0,v!==X_&&(g=v[0],E=v[1],T=v[2],R=v[3],r=x=v[4],i=M=v[5],6===v.length?(a=Math.sqrt(g*g+E*E),s=Math.sqrt(R*R+T*T),u=g||E?r_(E,g)*e_:0,(h=T||R?r_(T,R)*e_+u:0)&&(s*=Math.cos(h*n_)),n.svg&&(r-=d-(d*g+_*T),i-=_-(d*E+_*R))):(N=v[6],I=v[7],O=v[8],P=v[9],C=v[10],L=v[11],r=v[12],i=v[13],o=v[14],c=(m=r_(N,C))*e_,m&&(A=x*(y=Math.cos(-m))+O*(b=Math.sin(-m)),w=M*y+P*b,S=N*y+C*b,O=x*-b+O*y,P=M*-b+P*y,C=N*-b+C*y,L=I*-b+L*y,x=A,M=w,N=S),f=(m=r_(-T,C))*e_,m&&(y=Math.cos(-m),L=R*(b=Math.sin(-m))+L*y,g=A=g*y-O*b,E=w=E*y-P*b,T=S=T*y-C*b),u=(m=r_(E,g))*e_,m&&(A=g*(y=Math.cos(m))+E*(b=Math.sin(m)),w=x*y+M*b,E=E*y-g*b,M=M*y-x*b,g=A,x=w),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,f=180-f),a=rp(Math.sqrt(g*g+E*E+T*T)),s=rp(Math.sqrt(M*M+N*N)),m=r_(x,M),h=Math.abs(m)>2e-4?m*e_:0,p=L?1/(L<0?-L:L):0),n.svg&&(v=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!V_(R_(t,g_)),v&&t.setAttribute("transform",v))),Math.abs(h)>90&&Math.abs(h)<270&&(F?(a*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),n.x=((n.xPercent=r&&Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)?0:r)+"px",n.y=((n.yPercent=i&&Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)?0:i)+"px",n.z=o+"px",n.scaleX=rp(a),n.scaleY=rp(s),n.rotation=rp(u)+"deg",n.rotationX=rp(c)+"deg",n.rotationY=rp(f)+"deg",n.skewX=h+"deg",n.skewY=l+"deg",n.transformPerspective=p+"px",(n.zOrigin=parseFloat(k.split(" ")[2])||0)&&(D[E_]=W_(k)),n.xOffset=n.yOffset=0,n.force3D=dl.force3D,n.renderTransform=n.svg?Q_:Jd?K_:Z_,n.uncache=0,n},W_=function(t){return(t=t.split(" "))[0]+" "+t[1]},q_=function(t,e,n){var r=Lp(e);return rp(parseFloat(e)+parseFloat(N_(t,"x",n+"px",r)))+r},Z_=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,K_(t,e)},K_=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,c=n.rotationY,f=n.rotationX,h=n.skewX,l=n.skewY,p=n.scaleX,d=n.scaleY,_=n.transformPerspective,v=n.force3D,m=n.target,y=n.zOrigin,b="",g="auto"===v&&t&&1!==t||!0===v;if(y&&("0deg"!==f||"0deg"!==c)){var E,T=parseFloat(c)*n_,R=Math.sin(T),x=Math.cos(T);T=parseFloat(f)*n_,E=Math.cos(T),o=q_(m,o,R*E*-y),a=q_(m,a,-Math.sin(T)*-y),s=q_(m,s,x*E*-y+y)}"0px"!==_&&(b+="perspective("+_+") "),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(g||"0px"!==o||"0px"!==a||"0px"!==s)&&(b+="0px"!==s||g?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+") "),"0deg"!==u&&(b+="rotate("+u+") "),"0deg"!==c&&(b+="rotateY("+c+") "),"0deg"!==f&&(b+="rotateX("+f+") "),"0deg"===h&&"0deg"===l||(b+="skew("+h+", "+l+") "),1===p&&1===d||(b+="scale("+p+", "+d+") "),m.style[g_]=b||"translate(0, 0)"},Q_=function(t,e){var n,r,i,o,a,s=e||this,u=s.xPercent,c=s.yPercent,f=s.x,h=s.y,l=s.rotation,p=s.skewX,d=s.skewY,_=s.scaleX,v=s.scaleY,m=s.target,y=s.xOrigin,b=s.yOrigin,g=s.xOffset,E=s.yOffset,T=s.forceCSS,R=parseFloat(f),x=parseFloat(h);l=parseFloat(l),p=parseFloat(p),(d=parseFloat(d))&&(p+=d=parseFloat(d),l+=d),l||p?(l*=n_,p*=n_,n=Math.cos(l)*_,r=Math.sin(l)*_,i=Math.sin(l-p)*-v,o=Math.cos(l-p)*v,p&&(d*=n_,a=Math.tan(p-d),i*=a=Math.sqrt(1+a*a),o*=a,d&&(a=Math.tan(d),n*=a=Math.sqrt(1+a*a),r*=a)),n=rp(n),r=rp(r),i=rp(i),o=rp(o)):(n=_,o=v,r=i=0),(R&&!~(f+"").indexOf("px")||x&&!~(h+"").indexOf("px"))&&(R=N_(m,"x",f,"px"),x=N_(m,"y",h,"px")),(y||b||g||E)&&(R=rp(R+y-(y*n+b*i)+g),x=rp(x+b-(y*r+b*o)+E)),(u||c)&&(a=m.getBBox(),R=rp(R+u/100*a.width),x=rp(x+c/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+R+","+x+")",m.setAttribute("transform",a),T&&(m.style[g_]=a)},$_=function(t,e,n,r,i,o){var a,s,u=Rl(i),c=parseFloat(i)*(u&&~i.indexOf("rad")?e_:1),f=o?c*o:c-r,h=r+f+"deg";return u&&("short"===(a=i.split("_")[1])&&(f%=360)!==f%180&&(f+=f<0?360:-360),"cw"===a&&f<0?f=(f+36e9)%360-360*~~(f/360):"ccw"===a&&f>0&&(f=(f-36e9)%360-360*~~(f/360))),t._pt=s=new jd(t._pt,e,n,r,f,c_),s.e=h,s.u="deg",t._props.push(n),s},J_=function(t,e,n){var r,i,o,a,s,u,c,f=Qd.style,h=n._gsap;for(i in f.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",f[g_]=e,Wd.body.appendChild(Qd),r=Y_(Qd,1),t_)(o=h[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=Lp(o)!==(c=Lp(a))?N_(n,i,o,c):parseFloat(o),u=parseFloat(a),t._pt=new jd(t._pt,h,i,s,u-s,u_),t._pt.u=c||0,t._props.push(i));Wd.body.removeChild(Qd)};np("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",i="Bottom",o="Left",a=(e<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return e<2?t+n:"border"+n+t}));B_[e>1?"border"+t:t]=function(t,e,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(e){return D_(t,e,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,i)}}));var tv,ev,nv={name:"css",register:A_,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,a,s,u,c,f,h,l,p,d,_,v,m,y,b,g,E,T,R,x=this._props,M=t.style;for(h in Zd||A_(),e)if("autoRound"!==h&&(a=e[h],!ql[h]||!Td(h,e,n,r,t,i)))if(c=typeof a,f=B_[h],"function"===c&&(c=typeof(a=a.call(n,r,t,i))),"string"===c&&~a.indexOf("random(")&&(a=Gp(a)),f)f(this,t,h,a,n)&&(b=1);else if("--"===h.substr(0,2))this.add(M,"setProperty",getComputedStyle(t).getPropertyValue(h)+"",a+"",r,i,0,0,h);else{if(o=D_(t,h),u=parseFloat(o),(d="string"===c&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),s=parseFloat(a),h in s_&&("autoAlpha"===h&&(1===u&&"hidden"===D_(t,"visibility")&&s&&(u=0),I_(this,M,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=s_[h]).indexOf(",")&&(h=h.split(",")[0])),_=h in t_)if(v||((m=t._gsap).renderTransform||Y_(t),y=!1!==e.smoothOrigin&&m.smooth,(v=this._pt=new jd(this._pt,M,g_,0,1,m.renderTransform,m,0,-1)).dep=1),"scale"===h)this._pt=new jd(this._pt,m,"scaleY",m.scaleY,d?d*s:s-m.scaleY),x.push("scaleY",h),h+="X";else{if("transformOrigin"===h){E=void 0,T=void 0,R=void 0,E=(g=a).split(" "),T=E[0],R=E[1]||"50%","top"!==T&&"bottom"!==T&&"left"!==R&&"right"!==R||(g=T,T=R,R=g),E[0]=k_[T]||T,E[1]=k_[R]||R,a=E.join(" "),m.svg?z_(t,a,0,y,0,this):((p=parseFloat(a.split(" ")[2])||0)!==m.zOrigin&&I_(this,m,"zOrigin",m.zOrigin,p),I_(this,M,h,W_(o),W_(a)));continue}if("svgOrigin"===h){z_(t,a,1,y,0,this);continue}if(h in j_){$_(this,m,h,u,a,d);continue}if("smoothOrigin"===h){I_(this,m,"smooth",m.smooth,a);continue}if("force3D"===h){m[h]=a;continue}if("transform"===h){J_(this,a,t);continue}}else h in M||(h=M_(h)||h);if(_||(s||0===s)&&(u||0===u)&&!a_.test(a)&&h in M)s||(s=0),(l=(o+"").substr((u+"").length))!==(p=(a+"").substr((s+"").length)||(h in dl.units?dl.units[h]:l))&&(u=N_(t,h,o,p)),this._pt=new jd(this._pt,_?m:M,h,u,d?d*s:s-u,"px"!==p||!1===e.autoRound||_?u_:h_),this._pt.u=p||0,l!==p&&(this._pt.b=o,this._pt.r=f_);else if(h in M)F_.call(this,t,h,o,a);else{if(!(h in t))continue;this.add(t,h,t[h],a,r,i)}x.push(h)}b&&Xd(this)},get:D_,aliases:s_,getSetter:function(t,e,n){var r=s_[e];return r&&r.indexOf(",")<0&&(e=r),e in t_&&e!==E_&&(t._gsap.x||D_(t,"x"))?n&&$d===n?"scale"===e?m_:v_:($d=n||{})&&("scale"===e?y_:b_):t.style&&!Al(t.style[e])?d_:~e.indexOf("-")?__:Id(t,e)},core:{_removeProperty:C_,_getMatrix:G_}};zd.utils.checkPrefix=M_,ev=np("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(tv="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){t_[t]=1})),np(tv,(function(t){dl.units[t]="deg",j_[t]=1})),s_[ev[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+tv,np("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");s_[e[1]]=ev[e[0]]})),np("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){dl.units[t]="px"})),zd.registerPlugin(nv);var rv=zd.registerPlugin(nv)||zd;rv.core.Tween;function iv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ov=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.orbitalControl=null,this.initialised=!1}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.initialised=!0,this.orbitalControl=t}},{key:"tween",value:function(t){var e=this.orbitalControl,n={radius:e.radius.value,rx:e.rx.value,ry:e.ry.value,centerX:e.center[0],centerY:e.center[1],centerZ:e.center[2],offsetX:e.positionOffset[0],offsetY:e.positionOffset[1],offsetZ:e.positionOffset[2]};rv.to(n,t.duration||1,{delay:t.delay||0,radius:t.radius||0,rx:t.rx||0,ry:t.ry||0,centerX:t.centerX||0,centerY:t.centerY||0,centerZ:t.centerZ||0,offsetX:t.offsetX||0,offsetY:t.offsetY||0,offsetZ:t.offsetZ||0,ease:t.ease||"sine.out",onUpdate:function(){void 0!==t.rx&&e.rx.setTo(n.rx),void 0!==t.ry&&e.ry.setTo(n.ry),void 0!==t.radius&&e.radius.setTo(n.radius),void 0!==t.centerX&&(e.center[0]=n.centerX),void 0!==t.centerY&&(e.center[1]=n.centerY),void 0!==t.centerZ&&(e.center[2]=n.centerZ),void 0!==t.offsetX&&(e.positionOffset[0]=n.offsetX),void 0!==t.offsetY&&(e.positionOffset[1]=n.offsetY),void 0!==t.offsetZ&&(e.positionOffset[2]=n.offsetZ)},onComplete:t.onComplete||null})}},{key:"isReady",get:function(){return this.initialised}}])&&iv(e.prototype,n),r&&iv(e,r),t}());var av,sv={},uv=[],cv={},fv=[];sv.init=function(t,e){av=t;var n={};for(var r in uv=e.map((function(t){var e,r,i=function(t){var e=t.split(".");return e[e.length-1]}(t.url),o=(e=t.id,av.find((function(t){return t.id===e})).file);switch(i){case"jpg":case"png":return r=new fc(o),fv.push(r),{id:t.id,file:r};case"hdr":var a=t.id.split("_")[0];r=Nh.HDRLoader.parse(o);var s={id:t.id,file:r};return n[a]||(n[a]=[]),n[a].push(s),s;case"dds":return r=ku.parseDDS(o),{id:t.id,file:r};case"obj":var u=df.parse(o);return{id:t.id,file:u};case"json":if(o.frames){var c=o.meta.size;for(var f in o.frames){var h=o.frames[f].frame;cv[f.split(".")[0]]={frame:{x:Math.floor(h.x)/c.w,y:1-Math.floor(h.y)/c.h-Math.floor(h.h)/c.h,w:Math.floor(h.w)/c.w,h:Math.floor(h.h)/c.h},texture:{name:o.meta.image.split(".")[0],size:o.meta.size}}}}return{id:"".concat(t.id,"_json"),file:o}}})),cv)uv.push({id:r,file:cv[r]});for(var i in n)if(6==n[i].length){var o=[sv.get("".concat(i,"_posx")),sv.get("".concat(i,"_negx")),sv.get("".concat(i,"_posy")),sv.get("".concat(i,"_negy")),sv.get("".concat(i,"_posz")),sv.get("".concat(i,"_negz"))],a=new Nh.GLCubeTexture(o);uv.push({id:i,file:a})}uv.length},sv.destroy=function(t){for(var e=0;e<fv.length;e++)t.deleteTexture(fv[e]._texture);fv.length=0},sv.get=function(t){return uv.find((function(e){return e.id===t})).file};var hv=sv;function lv(t){return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dv(t,e){return(dv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mv(t);if(e){var i=mv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vv(this,n)}}function vv(t,e){return!e||"object"!==lv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mv(t){return(mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dv(t,e)}(o,t);var e,n,r,i=_v(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).uvOffset=vec2.create(),e.uvScale=vec2.create(),e.alpha=1,t&&e.setTexture(t),e}return e=o,(n=[{key:"setTexture",value:function(t){var e=hv.get(t);vec2.set(this.uvScale,1,1),this.rotation=0,e.frame?(this.texture=hv.get(e.texture.name),vec2.set(this.uvOffset,e.frame.x,e.frame.y),vec2.set(this.uvScale,e.frame.w,e.frame.h)):this.texture=e,this.ratio=this.uvScale[0]/this.uvScale[1]}},{key:"updateShader",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.texture&&(t.uniform("uAlpha","float",this.alpha),t.uniform("uScale","vec2",[this.scaleX,this.scaleY]),t.uniform("uPosition","vec2",[this.x,this.y]),t.uniform("uUVOffset","vec2",this.uvOffset),t.uniform("uUVScale","vec2",this.uvScale),e&&this.texture.bind(0))}}])&&pv(e.prototype,n),r&&pv(e,r),o}(Nh.Object3D);function bv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gv=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=null}var e,n,r;return e=t,(n=[{key:"begin",value:function(){}},{key:"update",value:function(){}},{key:"end",value:function(){}}])&&bv(e.prototype,n),r&&bv(e,r),t}();function Ev(t){return(Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xv(t,e){return(xv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wv(t);if(e){var i=wv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Av(this,n)}}function Av(t,e){return!e||"object"!==Ev(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xv(t,e)}(o,t);var e,n,r,i=Mv(o);function o(){return Tv(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"begin",value:function(){var t=this;this.scene.buttonAR.hide(),this.tick=0,this.product=this.scene._vProduct,this.product.darkness=1,this.controls=this.scene.orbitalControl,this.controls.rx.value=.3,this.controls.ry.value=-.05,this.radius=5.1,this.controls.lock(!0),_a.isMobile&&(this.radius=kf(window.innerWidth,kh.x*Uh,kh.z*Uh*(_a.isMobile?.8:.5),this.scene.camera,this.controls)),this.controls.radius.setTo(this.radius);var e=Df(this.scene.camera,this.controls,1,1,0).scaleY;this.rotX=.1,this.rotZ=.05,this.y=e/6,rv.delayedCall(1,(function(){t.product.toggleScreen(!0,1.5*1.2,null,"circ.inout"),rv.to(t,1.5,{y:0,rotX:.46,rotZ:.27,ease:"circ.inout",onComplete:function(){var e=Dh?.5:2;rv.delayedCall(e,(function(){t.scene.statesSystem.set("introToHome")}))}})}))}},{key:"update",value:function(){this.tick+=1,this.controls.rx.value=.3+.005*Math.cos(this.tick/100),this.controls.ry.value=.005*Math.sin(this.tick/120)-.05,this.controls.radius.value=this.radius+.1*Math.cos(this.tick/100),this.product.y=this.y+.08*Math.cos(this.tick/60),this.product.rotationX=this.rotX+.03*Math.cos(this.tick/40),this.product.rotationZ=this.rotZ+.03*Math.cos(this.tick/40)}}])&&Rv(e.prototype,n),r&&Rv(e,r),o}(gv);function Ov(t){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dv(t);if(e){var i=Dv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nv(this,n)}}function Nv(t,e){return!e||"object"!==Ov(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(o,t);var e,n,r,i=Lv(o);function o(){return Pv(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"begin",value:function(){var t=this;this.product=this.scene._vProduct,this.controls=this.scene.orbitalControl;var e=Dh?1:2;rv.to(this.product,e,{rotationX:0,rotationZ:0,darkness:0,ease:"sine.inout",y:0}),this.controls.lockZoom(!1);var n=_a.isMobile,r=n?window.innerWidth:window.innerWidth/2.8,i=kf(r,kh.x*Uh,kh.z*Uh*(n?1:0),this.scene.camera,this.controls),o=Df(this.scene.camera,this.controls,1,1,0,i),a=o.scaleX,s=o.scaleY,u=n?0:-a/8,c=n?-s/12:s/6;ov.tween({duration:e,centerX:u,centerY:c,centerZ:0,offsetX:u,offsetY:c,offsetZ:0,rx:0,ry:0,radius:i,ease:"sine.inout",onComplete:function(){t.scene.statesSystem.set("home")}}),n&&ov.tween({orbital:this.scene.controlsProduct,duration:e,rx:.088,ease:"sine.inout"})}},{key:"update",value:function(){}},{key:"end",value:function(){}}])&&Cv(e.prototype,n),r&&Cv(e,r),o}(gv);function kv(t){return(kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xv(t,e){return(Xv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hv(t);if(e){var i=Hv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vv(this,n)}}function Vv(t,e){return!e||"object"!==kv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hv(t){return(Hv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xv(t,e)}(o,t);var e,n,r,i=jv(o);function o(){return Uv(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"begin",value:function(){_a.isMobile&&this.scene.buttonAR.show(),this.scene._vHotSpots.reset(),this.scene._vHotSpots.start(),this.scene.orbitalControl.disconnect(),this.scene.controlsProduct.connect()}},{key:"update",value:function(){}}])&&Bv(e.prototype,n),r&&Bv(e,r),o}(gv);function zv(t){return(zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wv(t,e){return(Wv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qv(t);if(e){var i=Qv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zv(this,n)}}function Zv(t,e){return!e||"object"!==zv(e)&&"function"!=typeof e?Kv(t):e}function Kv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qv(t){return(Qv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wv(t,e)}(o,t);var e,n,r,i=qv(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t))._onDown=e.onDown.bind(Kv(e)),e._onMove=e.onMove.bind(Kv(e)),e._onUp=e.onUp.bind(Kv(e)),e}return e=o,(n=[{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.down=!1,this.currentSpot=t.currentSpot,this.scene._vHotSpots.stop(),this.radius=this.scene.orbitalControl.radius.value,ov.tween({centerX:this.currentSpot.center[0],centerY:this.currentSpot.center[1],centerZ:this.currentSpot.center[2],offsetX:this.currentSpot.offset[0],offsetY:this.currentSpot.offset[1],offsetZ:this.currentSpot.offset[2],rx:this.currentSpot.rx,ry:this.currentSpot.ry,radius:this.currentSpot.zoom,ease:"sine.out",duration:.8}),v.dispatch(this.currentSpot),this.addListeners()}},{key:"removeListeners",value:function(){this.scene.containerHTML.removeEventListener("touchstart",this._onDown,{passive:!1}),this.scene.containerHTML.removeEventListener("mousedown",this._onDown),this.scene.containerHTML.removeEventListener("mouseup",this._onUp),this.scene.containerHTML.removeEventListener("touchmove",this._onMove,{passive:!1}),this.scene.containerHTML.removeEventListener("mousemove",this._onMove)}},{key:"addListeners",value:function(){this.scene.containerHTML.addEventListener("touchstart",this._onDown,{passive:!1}),this.scene.containerHTML.addEventListener("mousedown",this._onDown),this.scene.containerHTML.addEventListener("mouseup",this._onUp),this.scene.containerHTML.addEventListener("touchmove",this._onMove,{passive:!1}),this.scene.containerHTML.addEventListener("mousemove",this._onMove)}},{key:"onDown",value:function(t){this.down=!0,this.pos=Uf(t)}},{key:"onMove",value:function(t){if(this.down){var e=Uf(t);zf(this.pos[0],this.pos[1],e[0],e[1])>400&&this.scene.statesSystem.set("home")}}},{key:"onUp",value:function(t){this.down=!1}},{key:"end",value:function(t){t.to,this.down=!1,this.removeListeners(),ov.tween({offsetX:0,offsetY:0,offsetZ:0,radius:this.radius,centerX:0,centerY:0,centerZ:0,ease:"sine.out",duration:.75})}},{key:"render",value:function(){}}])&&Yv(e.prototype,n),r&&Yv(e,r),o}(gv);function Jv(t){return(Jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function em(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nm(t,e){return(nm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=om(t);if(e){var i=om(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return im(this,n)}}function im(t,e){return!e||"object"!==Jv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function om(t){return(om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var am=vec3.create(),sm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nm(t,e)}(o,t);var e,n,r,i=rm(o);function o(){return tm(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"begin",value:function(){this.webXRSystem=this.scene.webXRSystem,this.reticle=this.scene._vReticle,this.product=this.scene._vProduct,this.product.lightOverlay=1,this._onARDown=this.onARDown.bind(this),this.webXRSystem.on("onDown",this._onARDown),this.scene._vHud.start(),this.scene._vHud.setState(0)}},{key:"onARDown",value:function(){this.product.place(),this.scene.statesSystem.set("ARMain")}},{key:"end",value:function(){this.webXRSystem.off("onDown",this._onARDown),this.reticle.stop()}},{key:"update",value:function(){if(this.webXRSystem.hasView){var t=this.webXRSystem.reticleMatrix;t?(this.reticle.setReticleMatrix(t),this.reticle.start(),vec3.set(am,0,0,0),$f(am,this.reticle.getMatrix()),this.product.setPosition(am[0],am[1],am[2]),this.product.parentAR.y+=.1*(kh.y-this.product.parentAR.y),this.product.parentAR.rotationX+=.1*(.6-this.product.parentAR.rotationX),this.product.parentAR.rotationY+=.1*(-.6-this.product.parentAR.rotationY),this.product.parentAR.rotationZ+=.1*(-.2-this.product.parentAR.rotationZ),this.product.screenObj.rotationX=-.2):(this.reticle.stop(),vec3.set(am,0,0,-2),$f(am,this.scene.viewMatrix),this.product.setPosition(am[0],am[1],am[2]),this.product.parentAR.y+=.1*(0-this.product.parentAR.y),this.product.parentAR.rotationX+=.1*(0-this.product.parentAR.rotationX),this.product.parentAR.rotationY+=.1*(0-this.product.parentAR.rotationY),this.product.parentAR.rotationZ+=.1*(0-this.product.parentAR.rotationZ)),this.scene.touchSystem.generateRayAR(0,0);var e=Math.atan2(this.scene.touchSystem.ray.direction[2],this.scene.touchSystem.ray.direction[0]);this.product.rotationY=-e-Math.PI/2-Math.PI/10}}}])&&em(e.prototype,n),r&&em(e,r),o}(gv);function um(t){return(um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hm(t,e){return(hm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dm(t);if(e){var i=dm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pm(this,n)}}function pm(t,e){return!e||"object"!==um(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dm(t){return(dm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hm(t,e)}(o,t);var e,n,r,i=lm(o);function o(){return cm(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"begin",value:function(t){var e=this,n=t.from;this.scene._vReticle.stop(),this.product=this.scene._vProduct,this.hotspots=this.scene._vHotSpots,this.webXRSystem=this.scene.webXRSystem,this.reticle=this.scene._vReticle,this.scene._vHud.setState(99999),"ARScan"===n&&this.product.animateIn((function(){e.hotspots.updateMatrices(e.product._matrix),e.scene._vHud.setState(1),rv.delayedCall(3,(function(){e.hotspots.start(),e.scene._vHud.setState(2),rv.delayedCall(5,(function(){e.scene._vHud.setState(9999)}))}))})),this.webXRSystem.on("onDown",this.onARDown.bind(this))}},{key:"onARDown",value:function(t){var e=this.scene.touchSystem.hit(t);e&&e[0]&&this.scene.statesSystem.set("ARDetail",{hotspot:this.scene._vHotSpots.spots[e[0].index]})}},{key:"end",value:function(){this.scene._vHud.setState(9999),this.webXRSystem.off("onDown",this.onARDown.bind(this))}}])&&fm(e.prototype,n),r&&fm(e,r),o}(gv);function vm(t){return(vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ym(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bm(t,e){return(bm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tm(t);if(e){var i=Tm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Em(this,n)}}function Em(t,e){return!e||"object"!==vm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tm(t){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bm(t,e)}(o,t);var e,n,r,i=gm(o);function o(){return mm(this,o),i.apply(this,arguments)}return e=o,(n=[{key:"begin",value:function(t){var e=t.hotspot;this.scene._vHud.stop(),this.product=this.scene._vProduct,this.hotspots=this.scene._vHotSpots,this.product.darkOverlay=1,this.hotspots.select(e),this.closePos=[window.innerWidth-20,20],this.details=this.scene._vARDetail,this.details.setData(e),this.details.start(),this._onARDown=this.onARDown.bind(this),this.webXRSystem=this.scene.webXRSystem,this.webXRSystem.on("onDown",this._onARDown)}},{key:"onARDown",value:function(t){var e=this,n=window.innerHeight-window.innerHeight*Fh.white.height;t[1]<n&&this.details.animateOut().then((function(){e.hotspots.unselect(),e.scene.statesSystem.set("ARMain")}))}},{key:"end",value:function(){this.scene._vHud.start(),this.details.stop(),this.webXRSystem.off("onDown",this._onARDown),this.product.darkOverlay=0}}])&&ym(e.prototype,n),r&&ym(e,r),o}(gv);function xm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mm=function(){},Am=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.states={},this.currentStateId="empty",this.transitionMap={},this.add("empty",{end:Mm,begin:Mm,update:Mm,render:Mm}),this.add("intro",new Sv),this.add("home",new Gv),this.add("ARScan",new sm),this.add("ARMain",new _m),this.add("ARDetail",new Rm),this.add("detail",new $v),this.add("introToHome",new Fv),this.addTransition("intro","introToHome"),this.addTransition("introToHome","home"),this.addTransition("home","ARScan",!0),this.addTransition("ARScan","ARMain"),this.addTransition("ARMain","ARDetail",!0)}var e,n,r;return e=t,(n=[{key:"addTransition",value:function(t,e,n){return this.transitionMap[t][e]=!0,n&&(this.transitionMap[e][t]=!0),this}},{key:"add",value:function(t,e){return this.states[t]=e,e.scene=this.scene,e.empty||(e.empty=Mm),e.begin||(e.begin=Mm),e.update||(e.update=Mm),e.render||(e.render=Mm),e.end||(e.end=Mm),this.transitionMap[t]={},this.addTransition("empty",t,!0),this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.from=this.currentStateId,e.to=t,(n||this.transitionMap[this.currentStateId][t])&&(this.states[this.currentStateId].end(e),this.currentStateId=t,this.states[this.currentStateId].begin(e))}},{key:"update",value:function(){this.states[this.currentStateId].update()}},{key:"id",get:function(){return this.currentStateId}}])&&xm(e.prototype,n),r&&xm(e,r),t}(),wm=n(2);function Sm(t){return(Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Om(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pm(t,e){return(Pm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nm(t);if(e){var i=Nm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Im(this,n)}}function Im(t,e){return!e||"object"!==Sm(e)&&"function"!=typeof e?Lm(t):e}function Lm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nm(t){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dm=vec3.create(),Fm=vec3.create(),km=mat4.create(),Um=mat4.create(),Bm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pm(t,e)}(o,t);var e,n,r,i=Cm(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).listeners={onDown:null},n.mouse=vec2.create(),n.camera=t,n.cameraAR=e,n.positionCamera=vec3.create(),n.dirCamera=vec3.create(),n.dirCameraDebug=vec3.create(),n.listeners={onDown:null,onMove:null,onUp:null},n.targets=[],n.hits=[],n.ray=new ou([0,0,0],[0,0,-1]),n._onDown=n.onDown.bind(Lm(n)),n._onMove=n.onMove.bind(Lm(n)),n}return e=o,(n=[{key:"connect",value:function(){this.connected=!0,window.addEventListener("mousedown",this._onDown),window.addEventListener("touchstart",this._onDown),window.addEventListener("mousemove",this._onMove)}},{key:"disconnect",value:function(){this.connected=!1,window.removeEventListener("mousedown",this._onDown),window.removeEventListener("touchstart",this._onDown),window.removeEventListener("mousemove",this._onMove)}},{key:"generateRay",value:function(t,e){var n=t/window.innerWidth*2-1,r=-e/window.innerHeight*2+1;this.camera.generateRay([n,r,0],this.ray)}},{key:"onDown",value:function(t){this.onMove(t,!0)}},{key:"onMove",value:function(t,e){if(!_a.isMobile||e){var n=Uf(t,this.mouse),r=null;this.generateRay(n[0],n[1]);for(var i=0;i<this.targets.length;i++){var o=this.targets[i],a=o.getMatrix?o.getMatrix():o.matrix||o._matrix,s=o.parentMatrices;if(s){mat4.identity(Um);for(var u=0;u<s.length;u++)mat4.multiply(Um,s[u],Um);mat4.multiply(Um,Um,a)}if(r=Gf(this.ray,o.vertices,s?Um:a))return void(e?this.emit("onDown",{hit:r,target:o,index:i}):this.emit("onHover",{hit:r,target:o,index:i}))}this.emit("onOut")}}},{key:"setTargets",value:function(t){this.targets=t}},{key:"generateRayAR",value:function(t,e){var n=[t/window.innerWidth*2-1,-e/window.innerHeight*2+1,0],r=this.cameraAR.transform,i=r.inverse.matrix,o=r.matrix;this.positionCamera[0]=o[12],this.positionCamera[1]=o[13],this.positionCamera[2]=o[14];var a=this.cameraAR.projectionMatrix;mat4.multiply(km,a,i),mat4.invert(km,km),vec3.transformMat4(this.dirCamera,n,km),vec3.sub(this.dirCamera,this.dirCamera,this.positionCamera),vec3.normalize(this.dirCamera,this.dirCamera);var s=Dm,u=Fm;vec3.copy(s,this.positionCamera),vec3.copy(u,this.dirCamera),vec3.scale(u,this.dirCamera,1.5),vec3.add(s,s,u),vec3.copy(this.dirCameraDebug,s),this.ray.origin=this.positionCamera,this.ray.direction=this.dirCamera}},{key:"hit",value:function(t,e){this.generateRayAR(t[0],t[1]),this.hits.length=0;for(var n=null,r=0;r<this.targets.length;r++){var i=this.targets[r],o=i.getMatrix?i.getMatrix():i.matrix||i._matrix,a=i.parentMatrixAR;if(a&&mat4.multiply(Um,a,o),n=Gf(this.ray,i.vertices,a?Um:o),n&&(this.hits.push({target:i,position:n,index:r}),!e))return this.hits}return this.hits}},{key:"start",value:function(){}},{key:"stop",value:function(){}}])&&Om(e.prototype,n),r&&Om(e,r),o}(wm.EventEmitter);function Xm(t){return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vm(t,e){return(Vm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zm(t);if(e){var i=zm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gm(this,n)}}function Gm(t,e){return!e||"object"!==Xm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zm(t){return(zm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vec3.create();var Ym=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vm(t,e)}(o,t);var e,n,r,i=Hm(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,"// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    // gl_Position = uProjectionMatrix * (uModelMatrix * uViewMatrix * vec4(0., 0., 0.0, 1.0) + vec4(aVertexPosition.x, aVertexPosition.y, 0.0, 0.0));\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_FragColor = vec4(0., 0., 0., 0.65);\n}")).scene=t,e.mesh=Nh.Geom.sphere(50,10,!0),e}return e=o,(n=[{key:"render",value:function(){this.shader.bind(),_a.draw(this.mesh)}}])&&jm(e.prototype,n),r&&jm(e,r),o}(Nh.View),Wm="// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uUVOffset;\nuniform vec2 uUVScale;\nuniform float uAlpha;\n\nvoid main(void) {\n    vec2 uv = vTextureCoord * uUVScale + uUVOffset;\n    gl_FragColor = texture2D(texture, uv);\n    gl_FragColor.a *= uAlpha;\n    // gl_FragColor = vec4(1.);\n}",qm="// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uScale;\nuniform vec2 uPosition;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    // billboarding\n    // vec3 cameraRight = vec3(\n    //   uViewMatrix[0].x, uViewMatrix[1].x, uViewMatrix[2].x\n    // );\n    // vec3 cameraUp = vec3(\n    //   uViewMatrix[0].y, uViewMatrix[1].y, uViewMatrix[2].y\n    // );\n\n    // float size = 1.;\n    // vec3 pos = (cameraRight * aVertexPosition.x * size) + (cameraUp * aVertexPosition.y * size);\n\n    vec3 pos = aVertexPosition;\n    pos.xy *= uScale;\n    pos.xy += uPosition;\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n    // gl_Position = uModelMatrix * vec4(aVertexPosition, 1.0);\n    // gl_Position = uProjectionMatrix * (uModelMatrix * uViewMatrix * vec4(0., 0., 0.0, 1.0) + vec4(aVertexPosition.x * uScale.x + uPosition.x, aVertexPosition.y * uScale.y + uPosition.y, 0.0, 0.0));\n\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}";function Zm(t){return(Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Km(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qm(t,e){return(Qm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ty(t);if(e){var i=ty(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jm(this,n)}}function Jm(t,e){return!e||"object"!==Zm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ty(t){return(ty=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vec3.create();var ey=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qm(t,e)}(o,t);var e,n,r,i=$m(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,qm,Wm)).scene=t,e.mainTexture=hv.get("hotspots_img"),e.mainTexture.texture.minFilter=_a.gl.NEAREST,e.mainTexture.texture.magFilter=_a.gl.NEAREST,e.active=!1,e.shader.bind(),e.shader.uniform("texture","uniform1i",0),e.imgBg=new yv("pixel-white"),e.closeIcon=new yv("close-icon"),e.imgHotspot=new yv,e.imgText=new yv,e.mesh=Nh.Geom.plane(1,1,1),e}return e=o,(n=[{key:"start",value:function(){this.active=!0,this.imgText.alpha=0,this.imgText.x=-this.width/4;var t=this.height*Fh.white.height,e=-this.height/2+t/2;this.imgBg.y=e-t,this.imgHotspot.y=this.imgBg.y,rv.to([this.imgBg,this.imgHotspot],.5,{y:e,ease:"sine.out"}),rv.to(this.imgText,.3,{delay:.2,x:0,alpha:1,ease:"sine.out"})}},{key:"stop",value:function(){this.active=!1}},{key:"animateOut",value:function(){return new Promise((function(t){t()}))}},{key:"setData",value:function(t){var e=t.data;this.imgHotspot.setTexture("".concat(e.indexImg,"-laptop")),this.imgText.setTexture("".concat(e.indexImg,"-copy")),this.fitWidth=e.fitWidth,this.resize(window.innerWidth,window.innerHeight)}},{key:"render",value:function(){_a.disable(_a.DEPTH_TEST),this.shader.bind(),this.mainTexture.bind(0),this.imgBg.updateShader(this.shader),_a.draw(this.mesh),this.imgHotspot.updateShader(this.shader),_a.draw(this.mesh),this.imgText.updateShader(this.shader),_a.draw(this.mesh),this.closeIcon.updateShader(this.shader),_a.draw(this.mesh),_a.enable(_a.DEPTH_TEST)}},{key:"resize",value:function(t,e){this.width=t,this.height=e;var n=e*Fh.white.height;this.imgBg.setScale(window.innerWidth,n,1),this.imgBg.setPosition(0,-e/2+n/2,0),this.closeIcon.setScale(40,40,1),this.closeIcon.setPosition(window.innerWidth/2-40,window.innerHeight/2-60,0);var r=this.imgHotspot.ratio*n;this.fitWidth&&(n=(r=window.innerWidth)/this.imgHotspot.ratio),this.imgHotspot.setScale(r,n,1),this.imgHotspot.setPosition(0,this.imgBg.y,0),t>e?(n=e/6,r=this.imgText.ratio*n):(r=.9*t,n=t/this.imgText.ratio),this.imgText.setScale(r,n,1);var i=this.fitWidth?this.imgText.scaleY/1.2:this.imgText.scaleY/3*2;this.imgText.setPosition(0,this.imgBg.y+this.imgBg.scaleY/2+i,0)}}])&&Km(e.prototype,n),r&&Km(e,r),o}(Nh.View3D);function ny(t){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ry(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iy(t,e){return(iy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sy(t);if(e){var i=sy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ay(this,n)}}function ay(t,e){return!e||"object"!==ny(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sy(t){return(sy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iy(t,e)}(o,t);var e,n,r,i=oy(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,"// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform sampler2D gradient;\nuniform float uTime;\n\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n// Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients\n// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n#define NUM_OCTAVES 5\n\nfloat fbm(vec3 x) {\n\tfloat v = 0.0;\n\tfloat a = 0.5;\n\tvec3 shift = vec3(100);\n\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\tv += a * snoise(x);\n\t\tx = x * 2.0 + shift;\n\t\ta *= 0.5;\n\t}\n\treturn v;\n}\n\nfloat getClouds() {\n    vec2 uv = vTextureCoord;\n    float anim = (fbm(vec3(2.0 * vTextureCoord.x, 2.0 * vTextureCoord.y, uTime)));\n\n    vec3 color = texture2D(texture, vTextureCoord).xyz;\n\n    color *= (anim+ 0.95) + 0.2 * anim*anim;\n\n    return color.x + color.x * color.y + color.z + color.y;\n}\n\nvoid main(void) {\n    float clouds = getClouds();\n    gl_FragColor.xyz = vec3(clouds) * texture2D(gradient, vec2(0.5, vTextureCoord.y)).xyz;\n    gl_FragColor.w = clouds;\n}")).mesh=Nh.Geom.plane(6,6,1),t.setPosition(.2,1,-2),t.shader.bind(),t.shader.uniform("gradient","uniform1i",1),t._texture=hv.get("cloud"),t._gradientTexture=hv.get("cloudlut"),t._texture.wrapS=_a.REPEAT,t._texture.wrapT=_a.REPEAT,t}return e=o,(n=[{key:"render",value:function(){this.shader.bind(),this._texture.bind(0),this._gradientTexture.bind(1),this.shader.uniform("uTime","float",performance.now()/1e4),_a.rotate(this._matrix),_a.draw(this.mesh)}}])&&ry(e.prototype,n),r&&ry(e,r),o}(Nh.View3D);function cy(t){return(cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fy(t){return function(t){if(Array.isArray(t))return hy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return hy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hy(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ly(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function py(t,e){return(py=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=my(t);if(e){var i=my(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _y(this,n)}}function _y(t,e){return!e||"object"!==cy(e)&&"function"!=typeof e?vy(t):e}function vy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function my(t){return(my=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yy=vec3.create(),by=vec3.create(),gy=mat4.create(),Ey=mat4.create(),Ty=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&py(t,e)}(o,t);var e,n,r,i=dy(o);function o(t,e,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,"// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uAR;\nuniform float uScale;\nuniform vec3 uPosOffset;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void) {\n    // vec3 pos = aPosOffset + aVertexPosition * uScale;\n    vec3 pos = uPosOffset;\n    vec3 cameraRight;\n    vec3 cameraUp; \n\n    if (uAR > 0.) {\n        cameraRight = vec3(\n            uViewMatrix[0].x, uViewMatrix[1].x, uViewMatrix[2].x\n        );\n        cameraUp = vec3(\n            uViewMatrix[0].y, uViewMatrix[1].y, uViewMatrix[2].y\n        );\n    } else {\n        cameraRight = vec3(\n            uModelMatrix[0].x, uModelMatrix[1].x, uModelMatrix[2].x\n        );\n        cameraUp = vec3(\n            uModelMatrix[0].y, uModelMatrix[1].y, uModelMatrix[2].y\n        );\n    }\n\n    pos += (cameraRight * uScale * aVertexPosition.x) + (cameraUp * uScale * aVertexPosition.y);\n\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n\n    // gl_Position /= gl_Position.w;\n    \n    vPosition = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nvarying vec4 vPosition;\nuniform float uSelected;\n// uniform sampler2D textureDepth;\nuniform float uTime;\nuniform float uDelay;\nuniform float uAnimating;\n\nfloat cubicOut(float t) {\n  float f = t - 1.0;\n  return f * f * f + 1.0;\n}\n\nfloat circularOut(float t) {\n  return sqrt((2.0 - t) * t);\n}\n\nvoid main(void) {\n    if (uAnimating > 0. && uSelected < 1.) {\n        discard;\n    }\n\n    float time = uTime + uDelay;\n    float distCenter = distance(vTextureCoord.xy, vec2(0.5));\n\n    float fraction = mod(time, 100.) / 100. * uAnimating;\n    float core = step(distCenter, 0.1 + fraction * (0.3)) * 0.5 * (1. - fraction) * uAnimating;\n    float middle = step(distCenter,  0.15 + cubicOut(fraction) * 0.25) * 0.35 * (1. - fraction) * uAnimating;\n    // float outer = step(distCenter,  0.3 + circularOut(fraction) * 0.2) * 0.2 * (1. - fraction);\n\n    float outerEdge = 0.2 + 0.1 * (1. - uAnimating) + cos(time / 20.) * (1. - uAnimating) * 0.05;\n    // float outerEdge = 0.2 + \n    float outer = step(distCenter,  outerEdge + circularOut(fraction) * 0.2) * (0.2 + 0.8 * (1. - uAnimating)) * (1. - fraction);\n\n    float widthCore = abs(cos(time / 25.));\n    float widthCoreCenter = 0.05 + 0.015 * widthCore * uAnimating;\n    float coreCenter = step(distCenter, widthCoreCenter);\n\n    float limitOrange = widthCoreCenter + 0.02;\n    float orangeRing = step(widthCoreCenter, distCenter) - step(limitOrange, distCenter);\n\n    float alpha = mix(0., clamp(core + middle + outer, 0., 1.), 1. - coreCenter) * uAnimating;\n    float alphaOuter = smoothstep(0., outer, distCenter / 0.5) * outer * (1. - uAnimating);\n    \n    vec3 c = mix(vec3(alphaOuter + alpha), vec3(0.), coreCenter);\n    vec3 c2 = mix(c, vec3(241./255., 101./255., 34./255.), orangeRing);\n    gl_FragColor = vec4(c2, orangeRing + alphaOuter + alpha + coreCenter * 0.5);\n}")).ray=new ou([0,0,0],[0,0,-1]),r.time=0,r.popupHotspot=null,r.selectedId=null,r.animating=0,r.shaderPlane=new Nh.GLShader("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(1., 0., 0., 0.2);\n}"),r.parent=e,r.mParent=e._matrix;return r.cube=ja.cube(.125,.125,.125),r.mesh=hv.get("disk"),r.scene=t,r.active=!1,r.orbitalControl=t.orbitalControl,r.dataSpots=[],r.spots=[],r.spotsAR=null,r.spotsDefault=null,n&&r.addSpots(n),m.add(r.onARStart.bind(vy(r))),y.add(r.onAREnd.bind(vy(r))),r}return e=o,(n=[{key:"start",value:function(){this.active=!0}},{key:"stop",value:function(){this.active=!1}},{key:"updateMatrices",value:function(t){mat4.getTranslation(yy,t),this.setPosition(yy[0],yy[1],yy[2]),this.setRotationEulerFromMatrix(t)}},{key:"getSpots",value:function(t){for(var e=(t?Bh:Uh)/.04,n=[],r=0;r<this.dataSpots.length;r++){var i=this.dataSpots[r],o=i.zoom*e,a=fy(i.offset),s=fy(i.target),u=fy(i.center);a[0]*=e,a[1]*=e,a[2]*=e,s[0]*=e,s[1]*=e,s[2]*=e,u[0]*=e,u[1]*=e,u[2]*=e,n.push({zoom:o,offset:a,target:s,center:u,label:i.label,rx:i.rx,ry:i.ry,indexImg:i.indexImg,fitWidth:i.fitWidth})}return n}},{key:"addSpots",value:function(t){t.length&&(this.dataSpots=t,this.createSpots(!1))}},{key:"createSpots",value:function(t){t&&!this.spotsAR?this.spotsAR=this.getSpots(!0):t||this.spotsDefault||(this.spotsDefault=this.getSpots(!1));for(var e=t?this.spotsAR:this.spotsDefault,n=[],r=[],i=0;i<e.length;i++){var o=this.spots[i],a=e[i],s=a.name||"Annotation ".concat(i+1),u=this.orbitalControl.getPosition(a.rx,a.ry,a.zoom),c=o?o.matrix:mat4.create();if(u[0]+=a.offset[0],u[1]+=a.offset[1],u[2]+=a.offset[2],n.push(a.target),o&&mat4.identity(c),mat4.translate(c,c,a.target),o)o.target=a.target,o.pos=u,o.matrix=c,o.data=a;else{var f=ja.cube(.0625,.0625,.0625);r.push([i]),this.spots.push({delay:500*Math.random(),id:i,target:a.target,pos:u,name:s,vertices:this.cube.vertices,matrix:c,parentMatrixAR:this._matrix,parentMatrices:[this._matrix,this.mParent],mesh:f,data:a})}}this.object3DPlane=new Nh.Object3D;var h=t?Bh:Uh,l=kh.x*h;kh.y,this.plane||(this.plane=Nh.Geom.cube(1.01,1,.2)),this.object3DPlane.rotationX=Math.PI/2-Math.PI/1.8+Math.PI,this.object3DPlane.y=.67*h/Uh,this.object3DPlane.z=-.16*h/Uh,this.object3DPlane.scaleX=l,this.object3DPlane.scaleY=1.44*h/Uh,this.object3DPlane.scaleZ=.03*h/Uh}},{key:"select",value:function(t){this.selectedId=t.id,this.animating=1}},{key:"unselect",value:function(){this.popupHotspot=null,this.selectedId=null,this.animating=0}},{key:"reset",value:function(){this.popupHotspot=null,this.setRotationEuler(0,0,0),this.setPosition(0,0,0),this._update(),this.stop(),this.createSpots()}},{key:"onARStart",value:function(){this.popupHotspot=null,this.isAR=!0,this.stop(),this.createSpots(!0)}},{key:"onAREnd",value:function(){this.isAR=!1,this.reset()}},{key:"isVisible",value:function(t,e,n){vec3.transformMat4(yy,t.target,e),vec3.copy(by,yy,e);var r=this.scene.camera.position;if(this.isAR){var i=this.scene.cameraAR.transform.matrix;r[0]=i[12],r[1]=i[13],r[2]=i[14]}this.ray.origin=r,vec3.subtract(yy,yy,r),vec3.normalize(yy,yy),this.ray.direction=yy;var o=Gf(this.ray,this.plane.vertices,n);return!o||vec3.distance(r,by)<=vec3.distance(r,o)}},{key:"showInfos",value:function(t){this.popupHotspot=t}},{key:"render",value:function(){if(this.active&&this.mesh){this.isAR?mat4.copy(gy,this._matrix):mat4.multiply(gy,this._matrix,this.mParent),mat4.multiply(Ey,gy,this.object3DPlane._matrix),this.time++,this.shader.bind(),_a.disable(_a.DEPTH_TEST),_a.disable(_a.CULL_FACE),this.shader.uniform("uAnimating","float",this.animating),this.shader.uniform("uTime","float",this.time),this.shader.uniform("uScale","float",this.scene.webXRSystem&&this.scene.webXRSystem.active?.06:.2),_a.rotate(gy);for(var t=0;t<this.spots.length;t++){var e=this.spots[t];if(this.isVisible(e,gy,Ey)){if(this.popupHotspot&&this.popupHotspot.id===e.id){vec3.transformMat4(yy,e.target,gy);var n=qf(yy);b.dispatch(e.data,n)}this.shader.uniform("uAR","float",this.scene.webXRSystem&&this.scene.webXRSystem.active?1:0),this.shader.uniform("uSelected","float",this.selectedId===e.id?1:0),this.shader.uniform("uPosOffset","vec3",e.target),this.shader.uniform("uDelay","float",e.delay),_a.draw(this.mesh)}}_a.enable(_a.CULL_FACE),_a.enable(_a.DEPTH_TEST)}}}])&&ly(e.prototype,n),r&&ly(e,r),o}(Nh.View3D);function Ry(t){return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function My(t,e){return(My=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ay(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oy(t);if(e){var i=Oy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wy(this,n)}}function wy(t,e){return!e||"object"!==Ry(e)&&"function"!=typeof e?Sy(t):e}function Sy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oy(t){return(Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vec3.create();var Py=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&My(t,e)}(o,t);var e,n,r,i=Ay(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,qm,Wm)).scene=t,e.mainTexture=hv.get("hotspots_img"),e.mainTexture.texture.minFilter=_a.gl.NEAREST,e.mainTexture.texture.magFilter=_a.gl.NEAREST,e.active=!1,e.shader.bind(),e.shader.uniform("texture","uniform1i",0),e.backIcon=new yv("back-icon"),e.imgText=new yv,e.mesh=Nh.Geom.plane(1,1,1),e.imageSteps=["tutorial-1","tutorial-2","tutorial-3"],e.currentStep=0,m.add(e.onARStart.bind(Sy(e))),y.add(e.onAREnd.bind(Sy(e))),e._onARDown=e.onARDown.bind(Sy(e)),e}return e=o,(n=[{key:"onARStart",value:function(){this.scene.webXRSystem.on("onDown",this._onARDown)}},{key:"onAREnd",value:function(){this.scene.webXRSystem.off("onDown",this._onARDown)}},{key:"onARDown",value:function(t){this.active&&zf(t[0],t[1],40,40)<400&&this.scene.webXRSystem.stop()}},{key:"start",value:function(){this.active=!0}},{key:"stop",value:function(){this.active=!1}},{key:"setState",value:function(t){if(this.currentStep=t,this.imageSteps[this.currentStep]){this.imgText.setTexture("tutorial-".concat(this.currentStep+1));var e=.5*this.width,n=e/this.imgText.ratio;this.imgText.setScale(e,n,1),this.message=!0}else this.message=!1}},{key:"render",value:function(){_a.disable(_a.DEPTH_TEST),this.shader.bind(),this.mainTexture.bind(0),this.message&&(this.imgText.updateShader(this.shader),_a.draw(this.mesh)),this.backIcon.updateShader(this.shader),_a.draw(this.mesh),_a.enable(_a.DEPTH_TEST)}},{key:"resize",value:function(t,e){this.width=t,this.height=e,Fh.white.height,this.backIcon.setScale(40,40,1),this.backIcon.setPosition(-window.innerWidth/2+40,window.innerHeight/2-60,0),this.imgText.setPosition(0,-window.innerHeight/5,0)}}])&&xy(e.prototype,n),r&&xy(e,r),o}(Nh.View3D),Cy="#define SHADER_NAME pbr_frag\n\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D \tuBRDFMap;\nuniform sampler2D \tuRoughnessMap;\nuniform sampler2D \tuMetallicMap;\nuniform samplerCube uRadianceMap;\nuniform samplerCube uIrradianceMap;\nuniform float uDarkness;\nuniform float uLightOverlay;\nuniform float uDarkOverlay;\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D uColorMap;\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D uAoMap;\nuniform float uOcclusionStrength;\n#endif\n\n#ifdef HAS_NORMALMAP\nuniform sampler2D uNormalMap;\nuniform float uNormalScale;\n#endif\n\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D uEmissiveMap;\nuniform vec3 uEmissiveFactor;\n#endif\n\nuniform vec3 uCameraPos;\n\n// uniform float uRoughness;\n// uniform float uMetallic;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nconst vec3 uLightDirection = vec3(0.5);\nconst vec3 uLightColor = vec3(0.);\n\nconst vec4 uScaleDiffBaseMR = vec4(0., 0.0, 0., 0.0);\nconst vec4 uScaleFGDSpec = vec4(0.);\nconst vec4 uScaleIBLAmbient = vec4(1.);\nconst vec3 uBaseColor = vec3(0.);\n\n//\tFrom GLTF WebGL PBR :\n//\thttps://github.com/KhronosGroup/glTF-WebGL-PBR\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n\tfloat NdotL;                  // cos angle between normal and light direction\n\tfloat NdotV;                  // cos angle between normal and view direction\n\tfloat NdotH;                  // cos angle between normal and half vector\n\tfloat LdotH;                  // cos angle between light direction and half vector\n\tfloat VdotH;                  // cos angle between view direction and half vector\n\tfloat perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n\tfloat metalness;              // metallic value at the surface\n\tvec3 reflectance0;            // full reflectance color (normal incidence angle)\n\tvec3 reflectance90;           // reflectance color at grazing angle\n\tfloat alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n\tvec3 diffuseColor;            // color contribution from diffuse lighting\n\tvec3 specularColor;           // color contribution from specular lighting\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n\t#ifdef MANUAL_SRGB\n\t#ifdef SRGB_FAST_APPROXIMATION\n\tvec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n\t#else //SRGB_FAST_APPROXIMATION\n\tvec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n\tvec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n\t#endif //SRGB_FAST_APPROXIMATION\n\treturn vec4(linOut,srgbIn.w);;\n\t#else //MANUAL_SRGB\n\treturn srgbIn;\n\t#endif //MANUAL_SRGB\n}\n\nvec3 getNormal() {\n\tvec3 pos_dx = dFdx(vPosition);\n\tvec3 pos_dy = dFdy(vPosition);\n\tvec3 tex_dx = dFdx(vec3(vTextureCoord, 0.0));\n\tvec3 tex_dy = dFdy(vec3(vTextureCoord, 0.0));\n\tvec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n\tvec3 ng = normalize(vNormal);\n\n\tt = normalize(t - ng * dot(ng, t));\n\tvec3 b = normalize(cross(ng, t));\n\tmat3 tbn = mat3(t, b, ng);\n\n#ifdef HAS_NORMALMAP\n\tvec3 n = texture2D(uNormalMap, vTextureCoord).rgb;\n\tn = normalize(tbn * ((2.0 * n - 1.0) * vec3(uNormalScale, uNormalScale, 1.0)));\n#else\n\t// The tbn matrix is linearly interpolated, so we need to re-normalize\n\tvec3 n = normalize(tbn[2].xyz);\n#endif\n\n\treturn n;\n}\n\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n\tfloat mipCount = 7.0; // resolution of 512x512\n\tfloat lod = (pbrInputs.perceptualRoughness * mipCount);\n\t// retrieve a scale and bias to F0. See [1], Figure 3\n\tvec3 brdf = SRGBtoLINEAR(texture2D(uBRDFMap, vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n\tvec3 diffuseLight = SRGBtoLINEAR(textureCube(uIrradianceMap, n)).rgb;\n\n\t\n\t#ifdef USE_TEX_LOD\n\t\tvec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(uRadianceMap, reflection, lod)).rgb;\n\t    // vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n\t#else\n\t\tvec3 specularLight = SRGBtoLINEAR(textureCube(uRadianceMap, reflection)).rgb;\n\t    // vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n\t#endif\n\n\tvec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n\tvec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n\t// For presentation, this allows us to disable IBL terms\n\tdiffuse *= uScaleIBLAmbient.x;\n\tspecular *= uScaleIBLAmbient.y;\n\n\treturn diffuse + specular;\n}\n\n// float diffuse(vec3 n, vec3 l) {\n//   float d = dot(normalize(n), normalize(l));\n//   return max(d, 0.0);\n// }\n\n// float diffuse(vec3 n, vec3 l, float t) {\n//   float d = dot(normalize(n), normalize(l));\n//   return mix(1.0, max(d, 0.0), t);\n// }\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  // float d = diffuse(vNormal, vec3(2., 0, -2.), .5);\n\treturn pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n\treturn pbrInputs.reflectance0 + (pbrInputs.reflectance90 - pbrInputs.reflectance0) * pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n\tfloat NdotL = pbrInputs.NdotL;\n\tfloat NdotV = pbrInputs.NdotV;\n\tfloat r = pbrInputs.alphaRoughness;\n\n\tfloat attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n\tfloat attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n\treturn attenuationL * attenuationV;\n}\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n\tfloat roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n\tfloat f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n\treturn roughnessSq / (M_PI * f * f);\n}\n\nfloat diffuse(vec3 n, vec3 l) {\n  float d = dot(normalize(n), normalize(l));\n  return max(d, 0.0);\n}\n\nfloat diffuse(vec3 n, vec3 l, float t) {\n  float d = dot(normalize(n), normalize(l));\n  return mix(1.0, max(d, 0.0), t);\n}\n\nvoid main() {\n\n\tfloat perceptualRoughness   = texture2D(uRoughnessMap, vTextureCoord).r;\n\tfloat metallic              = texture2D(uMetallicMap, vTextureCoord).r;\n\tperceptualRoughness         = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n\tmetallic                    = clamp(metallic, 0.0, 1.0);\n\tfloat alphaRoughness        = perceptualRoughness * perceptualRoughness;\n\n#ifdef HAS_BASECOLORMAP\t\n\tvec4 baseColor = SRGBtoLINEAR(texture2D(uColorMap, vTextureCoord));\n#else\n\tvec4 baseColor              = vec4(uBaseColor, 1.0);\n#endif\t\n\t\n\tvec3 f0                     = vec3(0.04);\n\tvec3 diffuseColor           = baseColor.rgb * (vec3(1.0) - f0);\n\tdiffuseColor                *= 1.0 - metallic * 0.2;\n\tvec3 specularColor          = mix(f0, baseColor.rgb, metallic);\n\t\n\t// Compute reflectance.\n\tfloat reflectance           = max(max(specularColor.r, specularColor.g), specularColor.b);\n\t\n\t// For typical incident reflectance range (between 4% to 100%) set the grazing reflectance to 100% for typical fresnel effect.\n\t// For very low reflectance range on highly diffuse objects (below 4%), incrementally reduce grazing reflecance to 0%.\n\tfloat reflectance90         = clamp(reflectance * 25.0, 0.0, 1.0);\n\tvec3 specularEnvironmentR0  = specularColor.rgb;\n\tvec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\t\n\tvec3 n                      = getNormal();                             // normal at surface point\n\tvec3 v                      = normalize(uCameraPos - vPosition);        // Vector from surface point to camera\n\tvec3 l                      = normalize(uLightDirection);             // Vector from surface point to light\n\tvec3 h                      = normalize(l+v);                          // Half vector between both l and v\n\tvec3 reflection             = -normalize(reflect(v, n));\n\t\n\tfloat NdotL                 = clamp(dot(n, l), 0.001, 1.0);\n\tfloat NdotV                 = abs(dot(n, v)) + 0.001;\n\tfloat NdotH                 = clamp(dot(n, h), 0.0, 1.0);\n\tfloat LdotH                 = clamp(dot(l, h), 0.0, 1.0);\n\tfloat VdotH                 = clamp(dot(v, h), 0.0, 1.0);\n\n\tPBRInfo pbrInputs = PBRInfo(\n\t\tNdotL,\n\t\tNdotV,\n\t\tNdotH,\n\t\tLdotH,\n\t\tVdotH,\n\t\tperceptualRoughness,\n\t\tmetallic,\n\t\tspecularEnvironmentR0,\n\t\tspecularEnvironmentR90,\n\t\talphaRoughness,\n\t\tdiffuseColor,\n\t\tspecularColor\n\t);\n\n\t// Calculate the shading terms for the microfacet specular shading model\n\tvec3 F              = specularReflection(pbrInputs);\n\tfloat G             = geometricOcclusion(pbrInputs);\n\tfloat D             = microfacetDistribution(pbrInputs);\n\t\n\t// Calculation of analytical lighting contribution\n\tvec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n\tvec3 specContrib    = F * G * D / (4.0 * NdotL * NdotV);\n\t// Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n\t// vec3 color          = NdotL * uLightColor * (diffuseContrib + specContrib);\n\tvec3 color          = NdotL * uLightColor * (diffuseContrib);\n\t\n#ifdef USE_IBL\n\tcolor += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\t\n\tfloat ao            = texture2D(uAoMap, vTextureCoord).r;\n\tcolor               = mix(color, color * ao, uOcclusionStrength);\n#endif\t\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(uEmissiveMap, vTextureCoord)).rgb * uEmissiveFactor;\n    color += emissive;\n#endif\n\t\n\t// This section uses mix to override final color for reference app visualization\n\t// of various parameters in the lighting equation.\n\tcolor               = mix(color, F, uScaleFGDSpec.x);\n\tcolor               = mix(color, vec3(G), uScaleFGDSpec.y);\n\tcolor               = mix(color, vec3(D), uScaleFGDSpec.z);\n\tcolor               = mix(color, specContrib, uScaleFGDSpec.w);\n\t\n\tcolor               = mix(color, diffuseContrib, uScaleDiffBaseMR.x);\n\tcolor               = mix(color, baseColor.rgb, uScaleDiffBaseMR.y);\n\tcolor               = mix(color, vec3(metallic), uScaleDiffBaseMR.z);\n\tcolor               = mix(color, vec3(perceptualRoughness), uScaleDiffBaseMR.w);\n\n\tcolor \t\t\t\t\t\t\t= pow(color,vec3(1.0/2.2));\n\tcolor               = mix(color, vec3(0.), 0.35 * uDarkOverlay);\n\tcolor               = mix(color, vec3(1.), 0.75 * uLightOverlay);\n\n\t\n  // float diffBlack = \n\t\n\t// output the fragment color\n\t// gl_FragColor        = vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n\tgl_FragColor        = vec4(color, baseColor.a);\n\t// gl_FragColor        = vec4(vec3(uDarkness), baseColor.a);\n\tgl_FragColor.rgb        -= 0.65 * uDarkness;\n\t// gl_FragColor.rgb        -= 0.4;\n\t// gl_FragColor        = vec4(vNormal, baseColor.a);\n\n}\n\n// copy.frag\n\n// #define SHADER_NAME SIMPLE_TEXTURE\n\n// precision highp float;\n// uniform float uAlpha;\n\n// varying vec2 vTextureCoord;\n// varying vec3 vNormal;\n\n// float diffuse(vec3 n, vec3 l) {\n//   float d = dot(normalize(n), normalize(l));\n//   return max(d, 0.0);\n// }\n\n// float diffuse(vec3 n, vec3 l, float t) {\n//   float d = dot(normalize(n), normalize(l));\n//   return mix(1.0, max(d, 0.0), t);\n// }\n \n\n// void main(void) {\n//     float d = diffuse(vNormal, vec3(2., 0, -2.), .5);\n\n//     // gl_FragColor = vec4(uColor, 1.);\n//     gl_FragColor = vec4(vec3(0.85, 0.85, 0.85), uAlpha);\n//     gl_FragColor.rgb *= d;\n// }",Iy="// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvoid main(void) {\n\n    vec4 position = uModelMatrix * vec4(aVertexPosition, 1.0);\n\tvPosition     = position.xyz / position.w;\n\n    vNormal = aNormal * uNormalMatrix;\n\n    gl_Position   = uProjectionMatrix * uViewMatrix * position;\n    vTextureCoord = aTextureCoord;\n    // vNormal = aNormal;\n}";function Ly(t){return(Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ny(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fy(t,e){return(Fy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ky(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xy(t);if(e){var i=Xy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Uy(this,n)}}function Uy(t,e){return!e||"object"!==Ly(e)&&"function"!=typeof e?By(t):e}function By(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xy(t){return(Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jy=function(t){var e="";for(var n in t)t[n]&&(e+="#define ".concat(n," ").concat(t[n],"\n"));return e},Vy=mat4.create(),Hy=vec3.create(),Gy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fy(t,e)}(o,t);var e,n,r,i=ky(o);function o(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ny(this,o);var a={USE_TEX_LOD:_a.getExtension("EXT_shader_texture_lod")?1:0,USE_IBL:1,HAS_BASECOLORMAP:1,HAS_NORMALMAP:0,HAS_EMISSIVEMAP:0,HAS_OCCLUSIONMAP:0},s=jy(a),u="".concat(s,"\n").concat(Iy),c="".concat(s,"\n").concat(Cy);return(n=i.call(this,u,c,r)).darkness=0,n.darkOverlay=0,n.lightOverlay=0,n.scene=t,n.mParent=e._matrix,n.parentAR=new Nh.Object3D,n.m=mat4.create(),n.screenObj=new Nh.Object3D,n.ready=!1,n.setScale(Uh),e.anchorY=kh.y*Uh/2,e.anchorZ=kh.z*Uh/4,n.posCamera=vec3.create(),n.posCamera[0]=-2.4,n.posCamera[1]=1.5,n.posCamera[2]=-3.8,m.add(n.onARStart.bind(By(n))),y.add(n.onAREnd.bind(By(n))),n}return e=o,(n=[{key:"_init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.alpha=1,this.cube3d=new Nh.Object3D,this.cube=Nh.Geom.cube(1,1,1);var e=t.version||"a3";this.studioRadiance=hv.get("studio_radiance"),this.irr=hv.get("irr"),this.screenMetallicmap=hv.get("".concat(e,"_screen_metallic")),this.screenColormap=hv.get("".concat(e,"_screen_basecolor")),this.screenRoughnessmap=hv.get("".concat(e,"_screen_roughness")),this.bodyMetallicmap=hv.get("".concat(e,"_body_metallic")),this.bodyColormap=hv.get("".concat(e,"_body_basecolor")),this.bodyRoughnessmap=hv.get("".concat(e,"_body_roughness")),this.bottom=hv.get("xiaomi_".concat(e,"_bottom_piece")),this.top=hv.get("xiaomi_".concat(e,"_screen")),this.baseColor=[1,1,1],this.shader.bind()}},{key:"onARStart",value:function(){this.isAR=!0,this.screenObj.rotationX=0,this.setScale(Bh),mat4.translate(this.m,this.m,[0,.02,0]),this.updateMatrix(this.m)}},{key:"reset",value:function(){this.setRotationEuler(0,0,0),this.setPosition(0,0,0)}},{key:"onAREnd",value:function(){this.isAR=!1,this.reset(),this.setScale(Uh),mat4.identity(this.m),this.updateMatrix(this.m)}},{key:"toggleScreen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sine.out";rv.to(this.screenObj,e,{rotationX:t?-Math.PI/1.8:0,ease:r,onComplete:n?n():null})}},{key:"animateIn",value:function(t){this.toggleScreen(!0,1),rv.to(this,1,{alpha:1,ease:"sine.out",onComplete:t?t():null})}},{key:"place",value:function(){this.ready=!0,rv.to(this.parentAR,1,{rotationX:0,rotationY:0,rotationZ:0,y:0,ease:"sine.out"}),rv.to(this,1,{lightOverlay:0,ease:"sine.out"})}},{key:"render",value:function(){if(this.shader.bind(),this.shader.uniform("uLightOverlay","float",this.lightOverlay),this.shader.uniform("uDarkOverlay","float",this.darkOverlay),this.shader.uniform("uDarkness","float",this.darkness),this.shader.uniform("uMetallicMap","uniform1i",0),this.bodyMetallicmap.bind(0),this.shader.uniform("uBRDFMap","uniform1i",1),hv.get("brdfLUT").bind(1),this.shader.uniform("uRadianceMap","uniform1i",3),this.shader.uniform("uIrradianceMap","uniform1i",2),this.studioRadiance.bind(3),this.irr.bind(2),this.shader.uniform("uColorMap","uniform1i",4),this.bodyColormap.bind(4),this.shader.uniform("uRoughnessMap","uniform1i",5),this.bodyRoughnessmap.bind(5),this.isAR){var t=this.scene.cameraAR.transform.matrix;Hy[0]=t[12],Hy[1]=t[13],Hy[2]=t[14],mat4.copy(Vy,this._matrix),mat4.multiply(Vy,Vy,this.parentAR._matrix)}else vec3.add(Hy,this.scene.controlsProduct.position,this.posCamera),mat4.multiply(Vy,this.mParent,this._matrix),mat4.multiply(Vy,Vy,this.parentAR._matrix);this.shader.uniform("uCameraPos","vec3",Hy),_a.rotate(Vy),_a.draw(this.bottom),this.screenMetallicmap.bind(0),this.screenColormap.bind(4),this.screenRoughnessmap.bind(5),mat4.multiply(Vy,Vy,this.screenObj._matrix),_a.rotate(Vy),_a.draw(this.top)}}])&&Dy(e.prototype,n),r&&Dy(e,r),o}(Nh.View3D);function zy(t){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wy(t,e){return(Wy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ky(t);if(e){var i=Ky(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zy(this,n)}}function Zy(t,e){return!e||"object"!==zy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ky(t){return(Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qy=mat4.create(),$y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wy(t,e)}(o,t);var e,n,r,i=qy(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,"// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nuniform sampler2D texture;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}")).active=!1,t.mesh=Nh.Geom.plane(.5,.5,1,"xz"),t.texture=hv.get("reticle"),t.m=mat4.create(),t}return e=o,(n=[{key:"start",value:function(){this.active=!0}},{key:"stop",value:function(){this.active=!1}},{key:"getMatrix",value:function(){return mat4.multiply(Qy,this.m,this._matrix),this.m}},{key:"setReticleMatrix",value:function(t){mat4.copy(this.m,t)}},{key:"render",value:function(){this.active&&(this.shader.bind(),this.shader.uniform("texture","uniform1i",0),this.texture.bind(0),mat4.multiply(Qy,this.m,this._matrix),_a.rotate(Qy),_a.draw(this.mesh))}}])&&Yy(e.prototype,n),r&&Yy(e,r),o}(Nh.View3D);function Jy(t){return(Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tb(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return eb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eb(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function eb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rb(t,e){return(rb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ib(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sb(t);if(e){var i=sb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ob(this,n)}}function ob(t,e){return!e||"object"!==Jy(e)&&"function"!=typeof e?ab(t):e}function ab(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sb(t){return(sb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ub=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rb(t,e)}(o,t);var e,n,r,i=ib(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).width=0,t.height=0,t.hasView=!1,t.listeners={onMove:null,onRender:null},t.mousePos=vec2.create(),t._onDown=t.onDown.bind(ab(t)),t._onUp=t.onUp.bind(ab(t)),t._onSessionEnd=t.onSessionEnd.bind(ab(t)),t.reset(),t}return e=o,(n=[{key:"reset",value:function(){this.currentSession&&(this.clearSignals(this.currentSession),this.emit("onAREnd")),_a.gl.bindFramebuffer(_a.gl.FRAMEBUFFER,null),this.currentSession=null,vec3.set(this.mousePos,0,0,0),this.down=!1,this.hasView=!1,this.xrImmersiveRefSpace=null,this.xrInlineRefSpace=null,this.hitTestSource=!1,this.inputSource=null,this.reticleMatrix=null,this.active=!1,this.hitTestSource=null}},{key:"addSession",value:function(t){var e=this;t.addEventListener("selectstart",this._onDown),t.addEventListener("selectend",this._onUp),t.addEventListener("end",this._onSessionEnd),t.updateRenderState({baseLayer:new XRWebGLLayer(t,_a.gl)}),t.requestReferenceSpace("viewer").then((function(n){t.requestHitTestSource({space:n}).then((function(t){e.hitTestSource=t}))})),t.requestReferenceSpace("local").then((function(n){e.xrImmersiveRefSpace=n,e.active=!0,e.emit("onARStart"),e.refId=t.requestAnimationFrame(e.onXRFrame.bind(e))})),this.currentSession=t}},{key:"onSessionEnd",value:function(){this.refId=this.currentSession.cancelAnimationFrame(this.refId),this.reset()}},{key:"clearSignals",value:function(t){t.removeEventListener("selectstart",this._onDown),t.removeEventListener("selectend",this._onUp),t.addEventListener("end",this._onSessionEnd)}},{key:"stop",value:function(){this.currentSession&&this.currentSession.end()}},{key:"onDown",value:function(t){this.down=!0,this.inputSource=t.inputSource,this.processMouse(),this.emit("onDown",this.mousePos)}},{key:"onUp",value:function(){this.down=!1,this.inputSource=null,this.emit("onUp",this.mousePos)}},{key:"onMove",value:function(){this.listeners.onMove&&this.listeners.onMove(this.mousePos)}},{key:"processMouse",value:function(){if(this.inputSource){var t=this.inputSource.gamepad.axes;this.mousePos[0]=Zf(t[0],-1,1,0,window.innerWidth),this.mousePos[1]=Zf(t[1],-1,1,0,window.innerHeight)}}},{key:"onXRFrame",value:function(t,e){this.hasView=!1,this.down&&this.listeners.onMove&&(this.processMouse(),this.onMove());var n=e.session,r=e.getViewerPose(this.xrImmersiveRefSpace),i=n.renderState.baseLayer;if(_a.gl.bindFramebuffer(_a.gl.FRAMEBUFFER,i.framebuffer),n.requestAnimationFrame(this.onXRFrame.bind(this)),r){if(this.hitTestSource){if(this.hits=e.getHitTestResults(this.hitTestSource),this.hits.length){var o=this.hits[0].getPose(this.xrImmersiveRefSpace);this.reticleMatrix=o.transform.matrix}}else this.reticleMatrix=null;var a,s=tb(r.views);try{for(s.s();!(a=s.n()).done;){var u=a.value;this.hasView=!0;var c=i.getViewport(u),f=c.width,h=c.height;f===this.width&&h===this.height||this.emit("onResize",{width:f,height:h}),this.listeners.onRender&&this.listeners.onRender(u,n)}}catch(t){s.e(t)}finally{s.f()}}}},{key:"resize",value:function(t,e){this.width=t,this.height=e}}])&&nb(e.prototype,n),r&&nb(e,r),o}(wm.EventEmitter);function cb(t){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lb(t,e,n){return(lb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function pb(t,e){return(pb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function db(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mb(t);if(e){var i=mb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _b(this,n)}}function _b(t,e){return!e||"object"!==cb(e)&&"function"!=typeof e?vb(t):e}function vb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mb(t){return(mb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pb(t,e)}(o,t);var e,n,r,i=db(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fb(this,o),_a.enableAlphaBlending(),bf(e),t=i.call(this,e),window.scene=vb(t),t}return e=o,(n=[{key:"_init",value:function(t){lb(mb(o.prototype),"_init",this).call(this,t),this.buttonAR=Nf(this,t.containerButtonAR),this.active=!0,this.previousState={},this.positionDebug=vec3.create(),this.positionCenterDebug=vec3.create(),this.cameraAR=new Nh.CameraPerspective,this.cameraAR.setPerspective(45*Math.PI/180,_a.aspectRatio,.1,100),this.cameraOrtho.ortho(-window.innerWidth/2,window.innerWidth/2,window.innerHeight/2,-window.innerHeight/2,0,30),this.product3D=new Nh.Object3D,this.controlsProduct=new Nh.OrbitalControl(this.product3D,window,5),this.controlsProduct.rx.limit(0,Math.PI/8),this.controlsProduct.lockZoom(),ov.init(this.orbitalControl),this.statesSystem=new Am(this),this.containerHTML=t.container,this.hotSpots=[],this.tick=0}},{key:"_initViews",value:function(t){this._bCopy=new Nh.BatchCopy,this._bAxis=new Nh.BatchAxis,this._bDots=new Nh.BatchDotsPlane,this._bBall=new Nh.BatchBall,this._bBall2=new Nh.BatchBall,this._bSky=new Nh.BatchSky(50,10),this._vReticle=new $y,this._vProduct=new Gy(this,this.product3D,t),this._vARDetail=new ey(this),this._vARBlackBG=new Ym(this),this._vHotSpots=new Ty(this,this.product3D,Xh.points),this._vHud=new Py(this),this._vClouds=new uy,this._vHotSpots.setParentMatrix(this._vProduct._matrix),this._onSpotHover=this.onSpotHover.bind(this),this._onSpotOut=this.onSpotOut.bind(this),this.touchSystem=new Bm(this.camera,this.cameraAR),this.touchSystem.on("onDown",this.onSpotClicked.bind(this)),this.touchSystem.on("onHover",this._onSpotHover),this.touchSystem.connect(),this.touchSystem.setTargets(this._vHotSpots.spots),this.resize(),this.statesSystem.set("intro")}},{key:"addSession",value:function(t){this.webXRSystem?this.webXRSystem.reset():(this.webXRSystem=new ub,this.webXRSystem.listeners.onRender=this.renderScene.bind(this),this.webXRSystem.on("onResize",(function(t){var e=t.width,n=t.height;return Bf(e,n,null,null,!0)})),this.webXRSystem.on("onARStart",this.onARStart.bind(this)),this.webXRSystem.on("onAREnd",this.onAREnd.bind(this))),this.webXRSystem.addSession(t)}},{key:"onARStart",value:function(){m.dispatch(),this.statesSystem.set("ARScan",{},!0)}},{key:"onAREnd",value:function(){y.dispatch(),this.statesSystem.set("home",{},!0),this.resize()}},{key:"onSpotClicked",value:function(t){var e=t.target;v.dispatch(e.data)}},{key:"onSpotHover",value:function(t){var e=t.target;this._vHotSpots.active&&(this._vHotSpots.showInfos(e),this.touchSystem.off("onHover",this._onSpotHover),this.touchSystem.on("onOut",this._onSpotOut))}},{key:"onSpotOut",value:function(){g.dispatch(),this.touchSystem.on("onHover",this._onSpotHover),this.touchSystem.off("onOut",this._onSpotOut),this._vHotSpots.showInfos(null)}},{key:"renderScene",value:function(t,e){if(t){_a.setMatrices(this.cameraAR);var n=t.transform,r=n.inverse.matrix,i=t.projectionMatrix;this.cameraAR.setFromViewProj(r,i),this.cameraAR.transform=n}_a.clear(0,0,0,0),this.statesSystem.update(),this._vReticle.render(),this.isAR&&this._vARDetail.active?this._vARBlackBG.render():this.isAR||this._vClouds.render(),this._vProduct.render(),this._vHotSpots.render(),this.isAR&&(_a.setMatrices(this.cameraOrtho),this._vHud.active?this._vHud.render():this._vARDetail.active&&this._vARDetail.render(),_a.setMatrices(this.cameraAR))}},{key:"render",value:function(){(!this.webXRSystem||this.webXRSystem&&!this.webXRSystem.active)&&this.renderScene()}},{key:"resize",value:function(t,e){Bf(null,null,this.containerHTML.clientWidth,this.containerHTML.clientHeight),this.camera.setAspectRatio(_a.aspectRatio),this.cameraAR.setAspectRatio(_a.aspectRatio),this.webXRSystem&&this.webXRSystem.resize(t,e),this._vHud.resize(window.innerWidth,window.innerHeight),this._vARDetail.resize(window.innerWidth,window.innerHeight)}},{key:"stop",value:function(){lb(mb(o.prototype),"stop",this).call(this),this.pause(),this.active=!1}},{key:"start",value:function(){lb(mb(o.prototype),"start",this).call(this),this.resume(),this.active=!0}},{key:"pause",value:function(){this.paused||(this.paused=!0,this.previousState={orbitalControlConnected:this.orbitalControl.connected,controlsProductConnected:this.controlsProduct.connected,touchSystemConnected:this.touchSystem.connected},this.touchSystem.disconnect(),this.orbitalControl.disconnect(),this.controlsProduct.disconnect())}},{key:"resume",value:function(){this.paused=!1,this.previousState.touchSystemConnected&&this.touchSystem.connect(),this.previousState.orbitalControlConnected&&this.orbitalControl.connect(),this.previousState.controlsProductConnected&&this.controlsProduct.connect()}},{key:"updateBallCenter",value:function(t){this.positionCenterDebug=t}},{key:"updateBallPos",value:function(t){this.positionDebug=t}},{key:"isAR",get:function(){return this.webXRSystem&&this.webXRSystem.active}},{key:"viewMatrix",get:function(){var t=this.cameraAR.transform;return t?t.matrix:null}}])&&hb(e.prototype,n),r&&hb(e,r),o}(lh),bb=[{id:"disk",url:"assets/obj/disk.obj",type:"text"},{id:"xiaomi_a1r_bottom_piece",url:"assets/obj/xiaomi_a1r_bottom_piece.obj",type:"text"},{id:"xiaomi_a1r_screen",url:"assets/obj/xiaomi_a1r_screen.obj",type:"text"},{id:"xiaomi_a3_bottom_piece",url:"assets/obj/xiaomi_a3_bottom_piece.obj",type:"text"},{id:"xiaomi_a3_screen",url:"assets/obj/xiaomi_a3_screen.obj",type:"text"},{id:"brdfLUT",url:"assets/img/brdfLUT.png",type:"png"},{id:"cloud",url:"assets/img/cloud.jpg",type:"jpg"},{id:"cloudlut",url:"assets/img/cloudlut.jpg",type:"jpg"},{id:"hotspots",url:"assets/img/hotspots.json"},{id:"hotspots_img",url:"assets/img/hotspots_img.png",type:"png"},{id:"irr_negx",url:"assets/img/irr_negx.hdr",type:"binary"},{id:"irr_negy",url:"assets/img/irr_negy.hdr",type:"binary"},{id:"irr_negz",url:"assets/img/irr_negz.hdr",type:"binary"},{id:"irr_posx",url:"assets/img/irr_posx.hdr",type:"binary"},{id:"irr_posy",url:"assets/img/irr_posy.hdr",type:"binary"},{id:"irr_posz",url:"assets/img/irr_posz.hdr",type:"binary"},{id:"lutMap",url:"assets/img/lutMap.png",type:"png"},{id:"reticle",url:"assets/img/reticle.png",type:"png"},{id:"studio_radiance",url:"assets/img/studio_radiance.dds",type:"binary"},{id:"a1r_body_basecolor",url:"assets/img/material/a1r/a1r_body_basecolor.png",type:"png"},{id:"a1r_body_metallic",url:"assets/img/material/a1r/a1r_body_metallic.png",type:"png"},{id:"a1r_body_roughness",url:"assets/img/material/a1r/a1r_body_roughness.png",type:"png"},{id:"a1r_screen_basecolor",url:"assets/img/material/a1r/a1r_screen_basecolor.png",type:"png"},{id:"a1r_screen_metallic",url:"assets/img/material/a1r/a1r_screen_metallic.png",type:"png"},{id:"a1r_screen_roughness",url:"assets/img/material/a1r/a1r_screen_roughness.png",type:"png"},{id:"a3_body_basecolor",url:"assets/img/material/a3/a3_body_basecolor.png",type:"png"},{id:"a3_body_metallic",url:"assets/img/material/a3/a3_body_metallic.png",type:"png"},{id:"a3_body_roughness",url:"assets/img/material/a3/a3_body_roughness.png",type:"png"},{id:"a3_screen_basecolor",url:"assets/img/material/a3/a3_screen_basecolor.png",type:"png"},{id:"a3_screen_metallic",url:"assets/img/material/a3/a3_screen_metallic.png",type:"png"},{id:"a3_screen_roughness",url:"assets/img/material/a3/a3_screen_roughness.png",type:"png"}],gb=n(4),Eb=n.n(gb);String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};window.addEventListener("keydown",(function(t){if(83===t.keyCode&&t.metaKey){t.preventDefault();var e=new Date,n="".concat(e.getFullYear(),".")+"".concat(e.getMonth()+1,".")+"".concat(e.getDate(),"-")+"".concat(e.getHours(),".")+"".concat(e.getMinutes(),".")+"".concat(e.getSeconds());yf(_a.canvas,n)}})),n(17);function Tb(t){return function(t){if(Array.isArray(t))return Rb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Rb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rb(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xb=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,n){var r=document.createElement("canvas");r.className="Main-Canvas",(t.container||document.body.querySelector(".container")).appendChild(r),_a.init(r,{ignoreWebgl2:!1,preserveDrawingBuffer:!0,xrCompatible:!0}),e()}))},Mb=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,n){if(t.assets.length>0){document.body.classList.add("isLoading");Tb(t.assets);var r=t.assets.map((function(e){return e.url=(t.assetsPath||"")+e.url,e}));new Eb.a({assets:r}).on("error",(function(t){})).on("progress",(function(e){t.onProgress&&t.onProgress(e)})).on("complete",(function(n){t.onComplete&&t.onComplete(n),e(n)})).start()}else e([])}))},Ab=function(t,e){return new Promise((function(n,r){hv.init(e,t),n()}))},wb=function(t){return new Promise((function(e,n){xb(t).then(Mb.bind(null,t)).then(Ab.bind(null,t.assets)).then((function(){e()})).catch((function(t){}))}))};function Sb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ob=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=null,this.onSpotClicked=new _.a,this.onSpotHover=new _.a,this.onSpotOut=new _.a,v.add(this._onSpotClicked.bind(this)),b.add(this._onSpotHover.bind(this)),g.add(this._onSpotOut.bind(this))}var e,n,r;return e=t,(n=[{key:"_onSpotClicked",value:function(t){this.onSpotClicked.dispatch(t)}},{key:"_onSpotHover",value:function(t,e){this.onSpotHover.dispatch(t,e)}},{key:"_onSpotOut",value:function(){this.onSpotOut.dispatch()}},{key:"startControls",value:function(){this.scene&&this.scene.resume()}},{key:"stopControls",value:function(){this.scene&&this.scene.pause()}},{key:"start",value:function(){this.scene&&this.scene.start()}},{key:"stop",value:function(){this.scene&&this.scene.stop()}},{key:"init",value:function(t){var e=this;t.assets=bb,wb(t).then((function(){e.scene=new yb(t,e)}),(function(t){}))}}])&&Sb(e.prototype,n),r&&Sb(e,r),t}()}])}));
//# sourceMappingURL=webgl-build.js.map