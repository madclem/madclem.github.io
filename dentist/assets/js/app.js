!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=26)}([function(t,e){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},function(t,e){t.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,RED:6403,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0,R8:33321}},function(t,e,n){"use strict";function r(){this._protocol=null,this._href="",this._port=-1,this._query=null,this.auth=null,this.slashes=null,this.host=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null,this._prependSlash=!1}var i=n(13);r.queryString=i,r.prototype.parse=function(t,e,n,i){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);for(var s=0,o=t.length-1;t.charCodeAt(s)<=32;)s++;for(;t.charCodeAt(o)<=32;)o--;if(s=this._parseProtocol(t,s,o),"javascript"!==this._protocol){s=this._parseHost(t,s,o,n);var a=this._protocol;!this.hostname&&(this.slashes||a&&!m[a])&&(this.hostname=this.host="")}if(s<=o){var u=t.charCodeAt(s);47===u||92===u?this._parsePath(t,s,o,i):63===u?this._parseQuery(t,s,o,i):35===u?this._parseHash(t,s,o,i):"javascript"!==this._protocol?this._parsePath(t,s,o,i):this.pathname=t.slice(s,o+1)}if(!this.pathname&&this.hostname&&this._slashProtocols[this._protocol]&&(this.pathname="/"),e){var h=this.search;null==h&&(h=this.search=""),63===h.charCodeAt(0)&&(h=h.slice(1)),this.query=r.queryString.parse(h)}},r.prototype.resolve=function(t){return this.resolveObject(r.parse(t,!1,!0)).format()},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",s=this.search||"",u="",h=this.hostname||"",c=this.port||"",l=!1,f="",_=this.query;if(_&&"object"==typeof _&&(u=r.queryString.stringify(_)),s||(s=u?"?"+u:""),e&&58!==e.charCodeAt(e.length-1)&&(e+=":"),this.host)l=t+this.host;else if(h){h.indexOf(":")>-1&&(h="["+h+"]"),l=t+h+(c?":"+c:"")}var d=this.slashes||(!e||m[e])&&!1!==l;return e?f=e+(d?"//":""):d&&(f="//"),d&&n&&47!==n.charCodeAt(0)&&(n="/"+n),s&&63!==s.charCodeAt(0)&&(s="?"+s),i&&35!==i.charCodeAt(0)&&(i="#"+i),f+(!1===l?"":l)+(n=o(n))+(s=a(s))+i},r.prototype.resolveObject=function(t){"string"==typeof t&&(t=r.parse(t,!1,!0));var e=this._clone();if(e.hash=t.hash,!t.href)return e._href="",e;if(t.slashes&&!t._protocol)return t._copyPropsTo(e,!0),m[e._protocol]&&e.hostname&&!e.pathname&&(e.pathname="/"),e._href="",e;if(t._protocol&&t._protocol!==e._protocol){if(!m[t._protocol])return t._copyPropsTo(e,!1),e._href="",e;if(e._protocol=t._protocol,t.host||"javascript"===t._protocol)e.pathname=t.pathname;else{for(var n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),e.pathname=n.join("/")}return e.search=t.search,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e._port=t._port,e.slashes=e.slashes||t.slashes,e._href="",e}var i=e.pathname&&47===e.pathname.charCodeAt(0),s=t.host||t.pathname&&47===t.pathname.charCodeAt(0),o=s||i||e.host&&t.pathname,a=o,u=e.pathname&&e.pathname.split("/")||[],h=(n=t.pathname&&t.pathname.split("/")||[],e._protocol&&!m[e._protocol]);if(h&&(e.hostname="",e._port=-1,e.host&&(""===u[0]?u[0]=e.host:u.unshift(e.host)),e.host="",t._protocol&&(t.hostname="",t._port=-1,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=""),o=o&&(""===n[0]||""===u[0])),s)e.host=t.host?t.host:e.host,e.hostname=t.hostname?t.hostname:e.hostname,e.search=t.search,u=n;else if(n.length)u||(u=[]),u.pop(),u=u.concat(n),e.search=t.search;else if(t.search){if(h)e.hostname=e.host=u.shift(),(d=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=d.shift(),e.host=e.hostname=d.shift());return e.search=t.search,e._href="",e}if(!u.length)return e.pathname=null,e._href="",e;for(var c=u.slice(-1)[0],l=(e.host||t.host)&&("."===c||".."===c)||""===c,f=0,_=u.length;_>=0;_--)"."===(c=u[_])?u.splice(_,1):".."===c?(u.splice(_,1),f++):f&&(u.splice(_,1),f--);if(!o&&!a)for(;f--;f)u.unshift("..");!o||""===u[0]||u[0]&&47===u[0].charCodeAt(0)||u.unshift(""),l&&"/"!==u.join("/").substr(-1)&&u.push("");var d,p=""===u[0]||u[0]&&47===u[0].charCodeAt(0);h&&(e.hostname=e.host=p?"":u.length?u.shift():"",(d=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=d.shift(),e.host=e.hostname=d.shift()));return(o=o||e.host&&u.length)&&!p&&u.unshift(""),e.pathname=0===u.length?null:u.join("/"),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e._href="",e};var s=n(16);r.prototype._hostIdna=function(t){return s.toASCII(t)};var o=r.prototype._escapePathName=function(t){return u(t,35,63)?function(t){return t.replace(/[?#]/g,(function(t){return encodeURIComponent(t)}))}(t):t},a=r.prototype._escapeSearch=function(t){return u(t,35,-1)?function(t){return t.replace(/#/g,(function(t){return encodeURIComponent(t)}))}(t):t};function u(t,e,n){for(var r=0,i=t.length;r<i;++r){var s=t.charCodeAt(r);if(s===e||s===n)return!0}return!1}function h(t){var e=new Uint8Array(128);return t.forEach((function(t){if("number"==typeof t)e[t]=1;else for(var n=t[0],r=t[1],i=n;i<=r;++i)e[i]=1})),e}r.prototype._parseProtocol=function(t,e,n){for(var r=!1,i=this._protocolCharacters,s=e;s<=n;++s){var o=t.charCodeAt(s);if(58===o){var a=t.slice(e,s);return r&&(a=a.toLowerCase()),this._protocol=a,s+1}if(1!==i[o])return e;o<97&&(r=!0)}return e},r.prototype._parseAuth=function(t,e,n,r){var i=t.slice(e,n+1);r&&(i=decodeURIComponent(i)),this.auth=i},r.prototype._parsePort=function(t,e,n){for(var r=0,i=!1,s=!0,o=e;o<=n;++o){var a=t.charCodeAt(o);if(!(48<=a&&a<=57)){s=!1,92!==a&&47!==a||(s=!0);break}r=10*r+(a-48),i=!0}return 0===r&&!i||!s?(s||(this._port=-2),0):(this._port=r,o-e)},r.prototype._parseHost=function(t,e,n,r){var i=this._hostEndingCharacters,s=t.charCodeAt(e),o=t.charCodeAt(e+1);if(47!==s&&92!==s||47!==o&&92!==o){if(!this._protocol||m[this._protocol])return e}else{if(this.slashes=!0,0===e){if(n<2)return e;if(!function(t,e,n,r){for(var i=t.length,s=n;s<i;++s){var o=t.charCodeAt(s);if(o===e)return!0;if(1===r[o])return!1}return!1}(t,64,2,i)&&!r)return this.slashes=null,e}e+=2}for(var a=!1,u=!1,h=e,c=n,l=0,f=0,_=!1,d=-1,p=e;p<=n;++p){if(64===(T=t.charCodeAt(p)))d=p;else if(37===T)_=!0;else if(1===i[T])break}if(d>-1&&(this._parseAuth(t,e,d-1,_),e=h=d+1),91===t.charCodeAt(e)){for(p=e+1;p<=n;++p){if(93===(T=t.charCodeAt(p))){58===t.charCodeAt(p+1)&&(l=this._parsePort(t,p+2,n)+1);var E=t.slice(e+1,p).toLowerCase();return this.hostname=E,this.host=this._port>0?"["+E+"]:"+this._port:"["+E+"]",this.pathname="/",p+l+1}}return e}for(p=e;p<=n;++p){if(f>62)return this.hostname=this.host=t.slice(e,p),p;var T;if(58===(T=t.charCodeAt(p))){l=this._parsePort(t,p+1,n)+1,c=p-1;break}if(T<97){if(46===T)f=-1;else if(65<=T&&T<=90)a=!0;else if(!(45===T||95===T||43===T||48<=T&&T<=57)){0===i[T]&&0===this._noPrependSlashHostEnders[T]&&(this._prependSlash=!0),c=p-1;break}}else if(T>=123){if(T<=126){0===this._noPrependSlashHostEnders[T]&&(this._prependSlash=!0),c=p-1;break}u=!0}T,f++}if(c+1!==e&&c-h<=256){E=t.slice(h,c+1);a&&(E=E.toLowerCase()),u&&(E=this._hostIdna(E)),this.hostname=E,this.host=this._port>0?E+":"+this._port:E}return c+1+l},r.prototype._copyPropsTo=function(t,e){e||(t._protocol=this._protocol),t._href=this._href,t._port=this._port,t._prependSlash=this._prependSlash,t.auth=this.auth,t.slashes=this.slashes,t.host=this.host,t.hostname=this.hostname,t.hash=this.hash,t.search=this.search,t.pathname=this.pathname},r.prototype._clone=function(){var t=new r;return t._protocol=this._protocol,t._href=this._href,t._port=this._port,t._prependSlash=this._prependSlash,t.auth=this.auth,t.slashes=this.slashes,t.host=this.host,t.hostname=this.hostname,t.hash=this.hash,t.search=this.search,t.pathname=this.pathname,t},r.prototype._getComponentEscaped=function(t,e,n,r){for(var i=e,s=e,o="",a=r?this._afterQueryAutoEscapeMap:this._autoEscapeMap;s<=n;++s){var u=a[t.charCodeAt(s)];""!==u&&void 0!==u&&(i<s&&(o+=t.slice(i,s)),o+=u,i=s+1)}return i<s+1&&(o+=t.slice(i,s)),o},r.prototype._parsePath=function(t,e,n,r){for(var i,s=e,o=n,a=!1,u=this._autoEscapeCharacters,h=-2===this._port?"/:":"",c=e;c<=n;++c){var l=t.charCodeAt(c);if(35===l){this._parseHash(t,c,n,r),o=c-1;break}if(63===l){this._parseQuery(t,c,n,r),o=c-1;break}r||a||1!==u[l]||(a=!0)}s>o?this.pathname=""===h?"/":h:(i=a?this._getComponentEscaped(t,s,o,!1):t.slice(s,o+1),this.pathname=""===h?this._prependSlash?"/"+i:i:h+i)},r.prototype._parseQuery=function(t,e,n,r){for(var i,s=e,o=n,a=!1,u=this._autoEscapeCharacters,h=e;h<=n;++h){var c=t.charCodeAt(h);if(35===c){this._parseHash(t,h,n,r),o=h-1;break}r||a||1!==u[c]||(a=!0)}s>o?this.search="":(i=a?this._getComponentEscaped(t,s,o,!0):t.slice(s,o+1),this.search=i)},r.prototype._parseHash=function(t,e,n,r){this.hash=e>n?"":r?t.slice(e,n+1):this._getComponentEscaped(t,e,n,!0)},Object.defineProperty(r.prototype,"port",{get:function(){return this._port>=0?""+this._port:null},set:function(t){this._port=null==t?-1:parseInt(t,10)}}),Object.defineProperty(r.prototype,"query",{get:function(){var t=this._query;if(null!=t)return t;var e=this.search;return e&&(63===e.charCodeAt(0)&&(e=e.slice(1)),""!==e)?(this._query=e,e):e},set:function(t){this._query=t}}),Object.defineProperty(r.prototype,"path",{get:function(){var t=this.pathname||"",e=this.search||"";return t||e?t+e:null==t&&e?"/"+e:null},set:function(){}}),Object.defineProperty(r.prototype,"protocol",{get:function(){var t=this._protocol;return t?t+":":t},set:function(t){if("string"==typeof t){var e=t.length-1;58===t.charCodeAt(e)?this._protocol=t.slice(0,e):this._protocol=t}else null==t&&(this._protocol=null)}}),Object.defineProperty(r.prototype,"href",{get:function(){var t=this._href;return t||(t=this._href=this.format()),t},set:function(t){this._href=t}}),r.parse=function(t,e,n,i){if(t instanceof r)return t;var s=new r;return s.parse(t,!!e,!!n,!!i),s},r.format=function(t){return"string"==typeof t&&(t=r.parse(t)),t instanceof r?t.format():r.prototype.format.call(t)},r.resolve=function(t,e){return r.parse(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?r.parse(t,!1,!0).resolveObject(e):e};for(var c=["<",">",'"',"`"," ","\r","\n","\t","{","}","|","\\","^","`","'"],l=new Array(128),f=0,_=l.length;f<_;++f)l[f]="";for(f=0,_=c.length;f<_;++f){var d=c[f],p=encodeURIComponent(d);p===d&&(p=escape(d)),l[d.charCodeAt(0)]=p}var E=l.slice();l[92]="/";var m=r.prototype._slashProtocols={http:!0,https:!0,gopher:!0,file:!0,ftp:!0,"http:":!0,"https:":!0,"gopher:":!0,"file:":!0,"ftp:":!0};r.prototype._protocolCharacters=h([[97,122],[65,90],46,43,45]),r.prototype._hostEndingCharacters=h([35,63,47,92]),r.prototype._autoEscapeCharacters=h(c.map((function(t){return t.charCodeAt(0)}))),r.prototype._noPrependSlashHostEnders=h(["<",">","'","`"," ","\r","\n","\t","{","}","|","^","`",'"',"%",";"].map((function(t){return t.charCodeAt(0)}))),r.prototype._autoEscapeMap=l,r.prototype._afterQueryAutoEscapeMap=E,t.exports=r,r.replace=function(){n.c.url={exports:r}}},function(t,e,n){"use strict";var r=n(23).EventEmitter;function i(){r.call(this),this.setMaxListeners(20)}i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.off=function(t,e){return e?this.removeListener(t,e):t?this.removeAllListeners(t):this.removeAllListeners()},t.exports=i},function(t,e,n){"use strict";t.exports={mbs:0,secs:0,update:function(t,e,n,r){var i,s=t.getAllResponseHeaders();if(s){var o=s.match(/content-length: (\d+)/i);o&&o.length&&(i=o[1])}if(i){var a=(i=parseInt(i,10))/1024/1024,u=(Date.now()-e)/1e3;this.secs+=u,this.mbs+=a,r&&this.log(n,a,u)}else r&&console.warn.call(console,"Can't get Content-Length:",n)},log:function(t,e,n){if(t){var r="File loaded: "+t.substr(t.lastIndexOf("/")+1)+" size:"+e.toFixed(2)+"mb time:"+n.toFixed(2)+"s speed:"+(e/n).toFixed(2)+"mbps";console.log.call(console,r)}var i="Total loaded: "+this.mbs.toFixed(2)+"mb time:"+this.secs.toFixed(2)+"s speed:"+this.getMbps().toFixed(2)+"mbps";console.log.call(console,i)},getMbps:function(){return this.mbs/this.secs}}},function(t,e){var n=o("DXT1"),r=o("DXT3"),i=o("DXT5"),s=o("DX10");function o(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}t.exports=function(t){var e,o,a=new Int32Array(t,0,31);if(542327876!==a[0])throw new Error("Invalid magic number in DDS header");if(4&!a[20])throw new Error("Unsupported format, must contain a FourCC code");var u=a[21];switch(u){case n:e=8,o="dxt1";break;case r:e=16,o="dxt3";break;case i:e=16,o="dxt5";break;case 116:o="rgba32f";break;case s:var h=new Uint32Array(t.slice(128,148));o=h[0];var c=h[1];h[2],h[3],h[4];if(3!==c||2!==o)throw new Error("Unsupported DX10 texture format "+o);o="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+(l=u,String.fromCharCode(255&l,l>>8&255,l>>16&255,l>>24&255)))}var l;var f=a[2],_=1;131072&f&&(_=Math.max(1,a[7]));var d=!1;512&a[28]&&(d=!0);var p,E=a[4],m=a[3],T=a[1]+4,v=E,g=m,R=[];u===s&&(T+=20);if(d)for(var A=0;A<6;A++){if("rgba32f"!==o)throw new Error("Only RGBA32f cubemaps are supported");E=v,m=g;for(var x=Math.log(E)/Math.log(2)+1,M=0;M<x;M++)p=E*m*16,R.push({offset:T,length:p,shape:[E,m]}),M<_&&(T+=p),E=Math.floor(E/2),m=Math.floor(m/2)}else for(M=0;M<_;M++)p=Math.max(4,E)/4*Math.max(4,m)/4*e,R.push({offset:T,length:p,shape:[E,m]}),T+=p,E=Math.floor(E/2),m=Math.floor(m/2);return{shape:[v,g],images:R,format:o,flags:f,cubemap:d}}},function(t,e,n){"use strict";var r=n(22);r.stats=n(4),t.exports=r},function(t,e,n){var r=n(8);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"html,body{width:100%;height:100%;margin:0;padding:0;overflow:hidden;position:fixed;background:#fff;background:-moz-radial-gradient(center, ellipse cover, #fff 0%, #915F58 100%);background:-webkit-radial-gradient(center, ellipse cover, #fff 0%, #915F58 100%);background:radial-gradient(ellipse at center, #fff 0%, #915F58 100%)}html{-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none}h1,h2,h3,h4,text,p{-webkit-font-smoothing:antialiased;-moz-osx-webkit-font-smoothing:antialiased;font-family:'Open Sans', sans-serif}.Main-Canvas{user-select:none;opacity:1;transition:opacity .5s ease-out .25s}.isLoading .Main-Canvas{opacity:0}.container{width:100%;height:100%;position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center}.Message{position:absolute;z-index:999;width:100%;top:calc(50% - 50px);text-align:center;letter-spacing:11px;color:white;opacity:0;transition:opacity .5s ease-out, letter-spacing .5s ease-out}.isLoading .Message{letter-spacing:10px;opacity:1}.Loading-Bar{position:absolute;z-index:998;width:0%;height:1px;top:50%;background:rgba(255,255,255,0.5);opacity:0;transition:width .5s ease-out, opacity .5s ease-out}.isLoading .Loading-Bar{opacity:1}.env{position:fixed;width:100%;z-index:9999;color:white;top:100px;font-size:24px;padding:20px}\n",""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(o=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),s=r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}));return[n].concat(s).concat([i]).join("\n")}var o;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(i=0;i<t.length;i++){var o=t[i];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){var r,i,s={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=function(t,e){return e?e.querySelector(t):document.querySelector(t)},u=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=a.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),h=null,c=0,l=[],f=n(11);function _(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=s[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(v(r.parts[o],e))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(v(r.parts[o],e));s[r.id]={id:r.id,refs:1,parts:a}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var s=t[i],o=e.base?s[0]+e.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};r[o]?r[o].parts.push(a):n.push(r[o]={id:o,parts:[a]})}return n}function p(t,e){var n=u(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(t.insertAt.before,n);n.insertBefore(e,i)}}function E(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return T(e,t.attrs),p(t,e),e}function T(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function v(t,e){var n,r,i,s;if(e.transform&&t.css){if(!(s="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=s}if(e.singleton){var o=c++;n=h||(h=m(e)),r=A.bind(null,n,o,!1),i=A.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",T(e,t.attrs),p(t,e),e}(e),r=M.bind(null,n,e),i=function(){E(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=x.bind(null,n),i=function(){E(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return _(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var o=n[i];(a=s[o.id]).refs--,r.push(a)}t&&_(d(t,e),e);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete s[a.id]}}}};var g,R=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function A(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=R(e,i);else{var s=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function x(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function M(t,e,n){var r=n.css,i=n.sourceMap,s=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||s)&&(r=f(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,s=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(i=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:r+s.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e){t.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),n=[],r=0;r<t.length-1;r++)n.push(t[r],e[r]||"");return n.push(t[r]),n.join("")}},function(t,e,n){"use strict";e.decode=e.parse=n(14),e.encode=e.stringify=n(15)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,s){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var c=0;c<h;++c){var l,f,_,d,p=t[c].replace(a,"%20"),E=p.indexOf(n);E>=0?(l=p.substr(0,E),f=p.substr(E+1)):(l=p,f=""),_=decodeURIComponent(l),d=decodeURIComponent(f),r(o,_)?i(o[_])?o[_].push(d):o[_]=[o[_],d]:o[_]=d}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?s(o(t),(function(o){var a=encodeURIComponent(r(o))+n;return i(t[o])?s(t[o],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[o]))})).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var a,u=2147483647,h=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=Math.floor,d=String.fromCharCode;function p(t){throw new RangeError(f[t])}function E(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+E((t=t.replace(l,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function v(t){return E(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function g(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function R(t,e,n){var r=0;for(t=n?_(t/700):t>>1,t+=_(t/e);t>455;r+=36)t=_(t/35);return _(r+36*t/(t+38))}function A(t){var e,n,r,i,s,o,a,h,c,l,f,d=[],E=t.length,m=0,T=128,g=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&p("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<E;){for(s=m,o=1,a=36;i>=E&&p("invalid-input"),((h=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||h>_((u-m)/o))&&p("overflow"),m+=h*o,!(h<(c=a<=g?1:a>=g+26?26:a-g));a+=36)o>_(u/(l=36-c))&&p("overflow"),o*=l;g=R(m-s,e=d.length+1,0==s),_(m/e)>u-T&&p("overflow"),T+=_(m/e),m%=e,d.splice(m++,0,T)}return v(d)}function x(t){var e,n,r,i,s,o,a,h,c,l,f,E,m,v,A,x=[];for(E=(t=T(t)).length,e=128,n=0,s=72,o=0;o<E;++o)(f=t[o])<128&&x.push(d(f));for(r=i=x.length,i&&x.push("-");r<E;){for(a=u,o=0;o<E;++o)(f=t[o])>=e&&f<a&&(a=f);for(a-e>_((u-n)/(m=r+1))&&p("overflow"),n+=(a-e)*m,e=a,o=0;o<E;++o)if((f=t[o])<e&&++n>u&&p("overflow"),f==e){for(h=n,c=36;!(h<(l=c<=s?1:c>=s+26?26:c-s));c+=36)A=h-l,v=36-l,x.push(d(g(l+A%v,0))),h=_(A/v);x.push(d(g(h,0))),s=R(n,m,r==i),n=0,++r}++n,++e}return x.join("")}a={version:"1.4.1",ucs2:{decode:T,encode:v},decode:A,encode:x,toASCII:function(t){return m(t,(function(t){return c.test(t)?"xn--"+x(t):t}))},toUnicode:function(t){return m(t,(function(t){return h.test(t)?A(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(17)(t),n(18))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(20);t.exports=u;var i=/\+/g,s=/^[0-9]+$/,o=Array.isArray,a={}.hasOwnProperty;function u(){this.containsSparse=!1,this.cacheKey="",this.cacheVal=null}u.maxLength=32768,u.maxDepth=4,u.maxKeys=256,u.parse=function(t){if("string"==typeof t){var e=u.maxLength;if(t.length>e)throw new RangeError("str is too large (QueryStringParser.maxLength="+e+")");return(new u).parseString(t,!1)}return null!==t&&"object"==typeof t?(new u).parseObject(t):{}},u.stringify=function(t){return(new r).serialize(t)},u.prototype.decode=function(t,e,n){if(!1===e)return t;!0===n&&(t=t.replace(i," "));try{return decodeURIComponent(t)}catch(e){return t}},u.prototype.maybeArrayIndex=function(t,e){var n=t.length;if(0===n)return e;var r=t.charCodeAt(0);if(48===r)return n>1?-1:0;if(48<=r&&r<=57){if(1===n)return r-48;if(s.test(t)){var i=parseInt(t,10);if(0<i&&i<=1073741822)return i}}return-1},u.prototype.getSlot=function(t,e,n){var r;a.call(t,e)?r=t[e]:(r=this.maybeArrayIndex(n,0)>-1?[]:{},t[e]=r);return r},u.prototype.placeNestedValue=function(t,e,n,r,i,s){var a=this.getSlot(t,i,s),h=-1;o(a)&&(h=this.maybeArrayIndex(s,a.length));for(var c=e.length,l=2,f=u.maxDepth,_=-1;r<c;++r){var d=e.charCodeAt(r);if(91===d)_=r+1;else if(93===d&&_>-1){if(i=s,s=_===r?"":e.substring(_,r),_=-1,++l>f)throw new RangeError("Nesting depth of keys is too large (QueryStringParser.maxDepth="+f+")");a=this.getSlot(a,i,s),h=o(a)?this.maybeArrayIndex(s,a.length):-1}}h>-1?""!==n&&(h===a.length?a.push(n):(this.containsSparse=!0,a[h]=n)):this.insert(a,s,n)},u.prototype.insert=function(t,e,n){var r=null;if(a.call(t,e)){var i=t[e];o(i)?(i.push(n),r=i):(r=[i,n],t[e]=r)}else t[e]=n;return r},u.prototype.push=function(t,e,n){var r=null;if(a.call(t,e)){var i=t[e];i.push(n),r=i}else r=[n],t[e]=r;return r},u.prototype.maybePlaceNestedValue=function(t,e,n){var r=e.length;if(93===e.charCodeAt(r-1)){for(var i,s,o=-1,a=0;a<r;++a){var u=e.charCodeAt(a);if(91===u)o=a+1,s=e.slice(0,a);else if(93===u){if(o<0)return void this.placeValue(t,e,n,!1);i=o===a?"":e.slice(o,a),a++;break}}void 0!==i?""===i&&""!==n&&a===r?e===this.cacheKey?this.cacheVal.push(n):(this.cacheKey=e,this.cacheVal=this.push(t,s,n)):this.placeNestedValue(t,e,n,a,s,i):this.placeValue(t,e,n,!1)}else this.placeValue(t,e,n,!1)},u.prototype.placeValue=function(t,e,n,r){if(!0!==r)if(e!==this.cacheKey){var i=this.insert(t,e,n);null!==i&&(this.cacheKey=e,this.cacheVal=i)}else this.cacheVal.push(n);else this.maybePlaceNestedValue(t,e,n)},u.prototype.compact=function(t){if(o(t)){for(var e=[],n=0,r=(i=Object.keys(t)).length;n<r;++n)e.push(t[i[n]]);return e}if("object"!=typeof t)return t;var i;for(n=0,r=(i=Object.keys(t)).length;n<r;++n){var s=i[n];t[s]=this.compact(t[s])}},u.prototype.parseObject=function(t){var e=Object.keys(t),n=e.length;if(0===n)return{};n--;for(var r,i="",s=0;s<n;++s)i+=(r=e[s])+"="+t[r]+"&";return i+=(r=e[s])+"="+t[r],this.parseString(i,!0)},u.prototype.parseString=function(t,e){for(var n=u.maxKeys,r=0,i=!1,s=!1,o=!1,a=t.length,h=0,c={},l=0,f=0,_=0,d=0,p=0,E=a-1,m=!1;h<a;++h){var T=t.charCodeAt(h);if(91===T)p++;else if(p>0&&93===T)o=!0,p--;else if(0===p&&61===T){var v=h+1;f=h-1,d=_=v;var g=t.slice(l,f+1);for(g=this.decode(g,i,m),i=!1;v<a;++v)if(43!==(T=t.charCodeAt(v))&&37!==T||e||(43===T&&(m=!0),s=!0),38===T||v===E){d=v,h=v,38===T&&d--;var R=t.slice(_,d+1);if(R=this.decode(R,s,m),this.placeValue(c,g,R,o),m=s=!1,o=!1,l=v+1,++r>n)throw new RangeError("Amount of keys is too large (QueryStringParser.maxKeys="+n+")");break}}else 43!==T&&37!==T||e||(43===T&&(m=!0),i=!0)}if(l!==a){R="",g=t.slice(l,a);g=this.decode(g,i,m),this.placeValue(c,g,R,o)}return this.containsSparse&&this.compact(c),c}},function(t,e,n){"use strict";t.exports=h;var r=encodeURIComponent,i=[],s=Array.isArray,o=Object.getPrototypeOf,a=o({});function u(t){if(s(t))return!0;if(null===t||"object"!=typeof t)return!1;var e=o(t);return e===a||null===e}function h(){}h.prototype.serialize=function(t){if(null===t||"object"!=typeof t)throw new TypeError("the obj to stringify must be an object");for(var e=Object.keys(t),n=e.length,o=i,a=[],h=[],c=t,l="",f=0;f<n;++f){var _=e===o?f:e[f],d=c[_];if(u(d))a.push(l,c,e,n,f),l=""===l?_:l+"["+r(_)+"]",s(d)?(e=o,n=d.length):n=(e=Object.keys(d)).length,f=-1,c=d;else{"string"!=typeof d&&(d=""+d);var p=""===l?r(_):l+"["+r(_)+"]";h.push(p+"="+r(d))}f===n-1&&a.length>0&&(f=a.pop(),n=a.pop(),e=a.pop(),c=a.pop(),l=a.pop())}return h.join("&")}},function(t,e){window.gui={add:()=>{}}},function(t,e,n){"use strict";var r=n(3),i=n(24),s=0;t.exports=function t(e){var n,o={},a=[],u=[],h=0,c=0,l={},f=function(r){return Array.isArray(r)?(r.forEach(f),n):((s=!!r.assets&&Array.isArray(r.assets)?t(d(r,e)):i(d(r,e))).once("destroy",T),u.push(s),l[s.id]=s,n);var s},_=function(t){return arguments.length?o[t]?o[t]:l[t]:a},d=function(t,e){"string"==typeof t&&(t={url:t});return void 0===t.isTouchLocked&&(t.isTouchLocked=e.isTouchLocked),void 0===t.blob&&(t.blob=e.blob),void 0===t.basePath&&(t.basePath=e.basePath),t.id=t.id||t.url||String(++s),t.type=t.type||function(t){return t&&t.split("?")[0].split(".").pop().toLowerCase()}(t.url),t.crossOrigin=t.crossOrigin||e.crossOrigin,t.webAudioContext=t.webAudioContext||e.webAudioContext,t.log=e.log,t},p=function(t){var e=h+t;n.emit("progress",e/c)},E=function(t,e,r){Array.isArray(t)&&(t={id:e,file:t,type:r}),h++,n.emit("progress",h/c),o[t.id]=t.file,a.push(t),n.emit("childcomplete",t),v()},m=function(t){c--,n.listeners("error").length?n.emit("error",t):console.error(t),v()},T=function(t){l[t]=null,delete l[t],o[t]=null,delete o[t],a.some((function(e,n){if(e.id===t)return a.splice(n,1),!0}))},v=function(){h>=c&&n.emit("complete",a,o,e.id,"group")};return n=Object.create(r.prototype,{_events:{value:{}},id:{get:function(){return e.id}},add:{value:f},start:{value:function(){return c=u.length,u.forEach((function(t){t.on("progress",p).once("complete",E).once("error",m).start()})),u=[],n}},get:{value:_},find:{value:function(t){if(_(t))return _(t);var e=null;return Object.keys(l).some((function(n){return!!(e=l[n].find&&l[n].find(t))})),e}},getLoader:{value:function(t){return l[t]}},loaded:{get:function(){return h>=c}},file:{get:function(){return a}},destroy:{value:function(){for(;u.length;)u.pop().destroy();return n.off("error"),n.off("progress"),n.off("complete"),a=[],o={},e.webAudioContext=null,c=0,h=0,Object.keys(l).forEach((function(t){l[t].destroy()})),l={},n.emit("destroy",n.id),n}}}),e=d(e||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(e.assets)&&f(e.assets),n}},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var i,s,o,a;if(h(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,a=u,console&&console.warn&&console.warn(a)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):E(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function E(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)s(u,this,e);else{var h=u.length,c=E(u,h);for(n=0;n<h;++n)s(c[n],this,e)}return!0},a.prototype.addListener=function(t,e){return l(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return l(this,t,e,!0)},a.prototype.once=function(t,e){return h(e),this.on(t,_(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,_(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,s,o;if(h(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return d(this,t,!0)},a.prototype.rawListeners=function(t){return d(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";var r=n(3),i=n(25),s=n(4);t.exports=function(t){var e,n,o,a,u,h,c=t.id,l=t.basePath||"",f=t.url,_=t.type,d=t.crossOrigin,p=t.isTouchLocked,E=t.blob&&i,m=t.webAudioContext,T=t.log,v=function(t){t&&(h={id:c,file:t,type:_},e.emit("progress",1),e.emit("complete",h,c,_),U())},g=function(t,e){n=e||A,(o=new XMLHttpRequest).open("GET",l+f,!0),o.responseType=t,o.addEventListener("progress",R),o.addEventListener("load",n),o.addEventListener("error",F),o.send()},R=function(t){t.lengthComputable&&e.emit("progress",t.loaded/t.total)},A=function(){x()&&v(o.response)},x=function(){return o&&o.status<400?(s.update(o,a,f,T),!0):(F(o&&o.statusText),!1)},M=function(){g("json",(function(){if(x()){var t=o.response;"string"==typeof t&&(t=JSON.parse(t)),v(t)}}))},b=function(){E?I():y()},y=function(){o=new Image,d&&(o.crossOrigin="anonymous"),o.addEventListener("error",F,!1),o.addEventListener("load",L,!1),o.src=l+f},L=function(t){window.clearTimeout(u),t||!o.error&&o.readyState?v(o):F()},I=function(){g("blob",(function(){x()&&((o=new Image).addEventListener("error",F,!1),o.addEventListener("load",S,!1),o.src=window.URL.createObjectURL(o.response))}))},S=function(){window.URL.revokeObjectURL(o.src),v(o)},N=function(){m?P():C("audio")},w=function(){E?g("blob"):C("video")},P=function(){g("arraybuffer",(function(){x()&&m.decodeAudioData(o.response,(function(t){o=null,v(t)}),(function(t){F(t)}))}))},C=function(t){o=document.createElement(t),p||(window.clearTimeout(u),u=window.setTimeout(L,2e3),o.addEventListener("canplaythrough",L,!1)),o.addEventListener("error",F,!1),o.preload="auto",o.src=l+f,o.load(),p&&v(o)},F=function(t){window.clearTimeout(u);var n=t;if(o&&o.tagName&&o.error){n="MediaError: "+["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"][o.error.code]+" "+o.src}else o&&o.statusText?n=o.statusText:t&&t.message?n=t.message:t&&t.type&&(n=t.type);e.emit("error",'Error loading "'+l+f+'" '+n),O()},U=function(){e.off("error"),e.off("progress"),e.off("complete"),o&&(o.removeEventListener("progress",R),o.removeEventListener("load",n),o.removeEventListener("error",F),o.removeEventListener("load",L),o.removeEventListener("canplaythrough",L),o.removeEventListener("load",S))},O=function(){U(),o&&o.abort&&o.readyState<4&&o.abort(),o=null,m=null,h=null,window.clearTimeout(u),e.emit("destroy",c)};return e=Object.create(r.prototype,{_events:{value:{}},id:{value:t.id},start:{value:function(){switch(a=Date.now(),_){case"json":M();break;case"jpg":case"png":case"gif":case"webp":case"svg":b();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":N();break;case"ogv":case"mp4":case"webm":case"hls":w();break;case"bin":case"binary":g("arraybuffer");break;case"txt":case"text":g("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+l+f+" ("+_+")"}}},loaded:{get:function(){return!!h}},file:{get:function(){return h}},destroy:{value:O}})}},function(t,e,n){"use strict";t.exports=function(){try{return!!new Blob}catch(t){return!1}}()},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"EPSILON",(function(){return d})),n.d(r,"ARRAY_TYPE",(function(){return p})),n.d(r,"RANDOM",(function(){return E})),n.d(r,"setMatrixArrayType",(function(){return m})),n.d(r,"toRadian",(function(){return v})),n.d(r,"equals",(function(){return g}));var i={};n.r(i),n.d(i,"create",(function(){return R})),n.d(i,"clone",(function(){return A})),n.d(i,"copy",(function(){return x})),n.d(i,"identity",(function(){return M})),n.d(i,"fromValues",(function(){return b})),n.d(i,"set",(function(){return y})),n.d(i,"transpose",(function(){return L})),n.d(i,"invert",(function(){return I})),n.d(i,"adjoint",(function(){return S})),n.d(i,"determinant",(function(){return N})),n.d(i,"multiply",(function(){return w})),n.d(i,"rotate",(function(){return P})),n.d(i,"scale",(function(){return C})),n.d(i,"fromRotation",(function(){return F})),n.d(i,"fromScaling",(function(){return U})),n.d(i,"str",(function(){return O})),n.d(i,"frob",(function(){return D})),n.d(i,"LDU",(function(){return B})),n.d(i,"add",(function(){return X})),n.d(i,"subtract",(function(){return V})),n.d(i,"exactEquals",(function(){return G})),n.d(i,"equals",(function(){return H})),n.d(i,"multiplyScalar",(function(){return z})),n.d(i,"multiplyScalarAndAdd",(function(){return k})),n.d(i,"mul",(function(){return Y})),n.d(i,"sub",(function(){return j}));var s={};n.r(s),n.d(s,"create",(function(){return W})),n.d(s,"clone",(function(){return q})),n.d(s,"copy",(function(){return Z})),n.d(s,"identity",(function(){return K})),n.d(s,"fromValues",(function(){return Q})),n.d(s,"set",(function(){return $})),n.d(s,"invert",(function(){return J})),n.d(s,"determinant",(function(){return tt})),n.d(s,"multiply",(function(){return et})),n.d(s,"rotate",(function(){return nt})),n.d(s,"scale",(function(){return rt})),n.d(s,"translate",(function(){return it})),n.d(s,"fromRotation",(function(){return st})),n.d(s,"fromScaling",(function(){return ot})),n.d(s,"fromTranslation",(function(){return at})),n.d(s,"str",(function(){return ut})),n.d(s,"frob",(function(){return ht})),n.d(s,"add",(function(){return ct})),n.d(s,"subtract",(function(){return lt})),n.d(s,"multiplyScalar",(function(){return ft})),n.d(s,"multiplyScalarAndAdd",(function(){return _t})),n.d(s,"exactEquals",(function(){return dt})),n.d(s,"equals",(function(){return pt})),n.d(s,"mul",(function(){return Et})),n.d(s,"sub",(function(){return mt}));var o={};n.r(o),n.d(o,"create",(function(){return Tt})),n.d(o,"fromMat4",(function(){return vt})),n.d(o,"clone",(function(){return gt})),n.d(o,"copy",(function(){return Rt})),n.d(o,"fromValues",(function(){return At})),n.d(o,"set",(function(){return xt})),n.d(o,"identity",(function(){return Mt})),n.d(o,"transpose",(function(){return bt})),n.d(o,"invert",(function(){return yt})),n.d(o,"adjoint",(function(){return Lt})),n.d(o,"determinant",(function(){return It})),n.d(o,"multiply",(function(){return St})),n.d(o,"translate",(function(){return Nt})),n.d(o,"rotate",(function(){return wt})),n.d(o,"scale",(function(){return Pt})),n.d(o,"fromTranslation",(function(){return Ct})),n.d(o,"fromRotation",(function(){return Ft})),n.d(o,"fromScaling",(function(){return Ut})),n.d(o,"fromMat2d",(function(){return Ot})),n.d(o,"fromQuat",(function(){return Dt})),n.d(o,"normalFromMat4",(function(){return Bt})),n.d(o,"projection",(function(){return Xt})),n.d(o,"str",(function(){return Vt})),n.d(o,"frob",(function(){return Gt})),n.d(o,"add",(function(){return Ht})),n.d(o,"subtract",(function(){return zt})),n.d(o,"multiplyScalar",(function(){return kt})),n.d(o,"multiplyScalarAndAdd",(function(){return Yt})),n.d(o,"exactEquals",(function(){return jt})),n.d(o,"equals",(function(){return Wt})),n.d(o,"mul",(function(){return qt})),n.d(o,"sub",(function(){return Zt}));var a={};n.r(a),n.d(a,"create",(function(){return Kt})),n.d(a,"clone",(function(){return Qt})),n.d(a,"copy",(function(){return $t})),n.d(a,"fromValues",(function(){return Jt})),n.d(a,"set",(function(){return te})),n.d(a,"identity",(function(){return ee})),n.d(a,"transpose",(function(){return ne})),n.d(a,"invert",(function(){return re})),n.d(a,"adjoint",(function(){return ie})),n.d(a,"determinant",(function(){return se})),n.d(a,"multiply",(function(){return oe})),n.d(a,"translate",(function(){return ae})),n.d(a,"scale",(function(){return ue})),n.d(a,"rotate",(function(){return he})),n.d(a,"rotateX",(function(){return ce})),n.d(a,"rotateY",(function(){return le})),n.d(a,"rotateZ",(function(){return fe})),n.d(a,"fromTranslation",(function(){return _e})),n.d(a,"fromScaling",(function(){return de})),n.d(a,"fromRotation",(function(){return pe})),n.d(a,"fromXRotation",(function(){return Ee})),n.d(a,"fromYRotation",(function(){return me})),n.d(a,"fromZRotation",(function(){return Te})),n.d(a,"fromRotationTranslation",(function(){return ve})),n.d(a,"fromQuat2",(function(){return ge})),n.d(a,"getTranslation",(function(){return Re})),n.d(a,"getScaling",(function(){return Ae})),n.d(a,"getRotation",(function(){return xe})),n.d(a,"fromRotationTranslationScale",(function(){return Me})),n.d(a,"fromRotationTranslationScaleOrigin",(function(){return be})),n.d(a,"fromQuat",(function(){return ye})),n.d(a,"frustum",(function(){return Le})),n.d(a,"perspective",(function(){return Ie})),n.d(a,"perspectiveFromFieldOfView",(function(){return Se})),n.d(a,"ortho",(function(){return Ne})),n.d(a,"lookAt",(function(){return we})),n.d(a,"targetTo",(function(){return Pe})),n.d(a,"str",(function(){return Ce})),n.d(a,"frob",(function(){return Fe})),n.d(a,"add",(function(){return Ue})),n.d(a,"subtract",(function(){return Oe})),n.d(a,"multiplyScalar",(function(){return De})),n.d(a,"multiplyScalarAndAdd",(function(){return Be})),n.d(a,"exactEquals",(function(){return Xe})),n.d(a,"equals",(function(){return Ve})),n.d(a,"mul",(function(){return Ge})),n.d(a,"sub",(function(){return He}));var u={};n.r(u),n.d(u,"create",(function(){return ze})),n.d(u,"clone",(function(){return ke})),n.d(u,"length",(function(){return Ye})),n.d(u,"fromValues",(function(){return je})),n.d(u,"copy",(function(){return We})),n.d(u,"set",(function(){return qe})),n.d(u,"add",(function(){return Ze})),n.d(u,"subtract",(function(){return Ke})),n.d(u,"multiply",(function(){return Qe})),n.d(u,"divide",(function(){return $e})),n.d(u,"ceil",(function(){return Je})),n.d(u,"floor",(function(){return tn})),n.d(u,"min",(function(){return en})),n.d(u,"max",(function(){return nn})),n.d(u,"round",(function(){return rn})),n.d(u,"scale",(function(){return sn})),n.d(u,"scaleAndAdd",(function(){return on})),n.d(u,"distance",(function(){return an})),n.d(u,"squaredDistance",(function(){return un})),n.d(u,"squaredLength",(function(){return hn})),n.d(u,"negate",(function(){return cn})),n.d(u,"inverse",(function(){return ln})),n.d(u,"normalize",(function(){return fn})),n.d(u,"dot",(function(){return _n})),n.d(u,"cross",(function(){return dn})),n.d(u,"lerp",(function(){return pn})),n.d(u,"hermite",(function(){return En})),n.d(u,"bezier",(function(){return mn})),n.d(u,"random",(function(){return Tn})),n.d(u,"transformMat4",(function(){return vn})),n.d(u,"transformMat3",(function(){return gn})),n.d(u,"transformQuat",(function(){return Rn})),n.d(u,"rotateX",(function(){return An})),n.d(u,"rotateY",(function(){return xn})),n.d(u,"rotateZ",(function(){return Mn})),n.d(u,"angle",(function(){return bn})),n.d(u,"zero",(function(){return yn})),n.d(u,"str",(function(){return Ln})),n.d(u,"exactEquals",(function(){return In})),n.d(u,"equals",(function(){return Sn})),n.d(u,"sub",(function(){return wn})),n.d(u,"mul",(function(){return Pn})),n.d(u,"div",(function(){return Cn})),n.d(u,"dist",(function(){return Fn})),n.d(u,"sqrDist",(function(){return Un})),n.d(u,"len",(function(){return On})),n.d(u,"sqrLen",(function(){return Dn})),n.d(u,"forEach",(function(){return Bn}));var h={};n.r(h),n.d(h,"create",(function(){return Xn})),n.d(h,"clone",(function(){return Vn})),n.d(h,"fromValues",(function(){return Gn})),n.d(h,"copy",(function(){return Hn})),n.d(h,"set",(function(){return zn})),n.d(h,"add",(function(){return kn})),n.d(h,"subtract",(function(){return Yn})),n.d(h,"multiply",(function(){return jn})),n.d(h,"divide",(function(){return Wn})),n.d(h,"ceil",(function(){return qn})),n.d(h,"floor",(function(){return Zn})),n.d(h,"min",(function(){return Kn})),n.d(h,"max",(function(){return Qn})),n.d(h,"round",(function(){return $n})),n.d(h,"scale",(function(){return Jn})),n.d(h,"scaleAndAdd",(function(){return tr})),n.d(h,"distance",(function(){return er})),n.d(h,"squaredDistance",(function(){return nr})),n.d(h,"length",(function(){return rr})),n.d(h,"squaredLength",(function(){return ir})),n.d(h,"negate",(function(){return sr})),n.d(h,"inverse",(function(){return or})),n.d(h,"normalize",(function(){return ar})),n.d(h,"dot",(function(){return ur})),n.d(h,"cross",(function(){return hr})),n.d(h,"lerp",(function(){return cr})),n.d(h,"random",(function(){return lr})),n.d(h,"transformMat4",(function(){return fr})),n.d(h,"transformQuat",(function(){return _r})),n.d(h,"zero",(function(){return dr})),n.d(h,"str",(function(){return pr})),n.d(h,"exactEquals",(function(){return Er})),n.d(h,"equals",(function(){return mr})),n.d(h,"sub",(function(){return Tr})),n.d(h,"mul",(function(){return vr})),n.d(h,"div",(function(){return gr})),n.d(h,"dist",(function(){return Rr})),n.d(h,"sqrDist",(function(){return Ar})),n.d(h,"len",(function(){return xr})),n.d(h,"sqrLen",(function(){return Mr})),n.d(h,"forEach",(function(){return br}));var c={};n.r(c),n.d(c,"create",(function(){return yr})),n.d(c,"identity",(function(){return Lr})),n.d(c,"setAxisAngle",(function(){return Ir})),n.d(c,"getAxisAngle",(function(){return Sr})),n.d(c,"getAngle",(function(){return Nr})),n.d(c,"multiply",(function(){return wr})),n.d(c,"rotateX",(function(){return Pr})),n.d(c,"rotateY",(function(){return Cr})),n.d(c,"rotateZ",(function(){return Fr})),n.d(c,"calculateW",(function(){return Ur})),n.d(c,"exp",(function(){return Or})),n.d(c,"ln",(function(){return Dr})),n.d(c,"pow",(function(){return Br})),n.d(c,"slerp",(function(){return Xr})),n.d(c,"random",(function(){return Vr})),n.d(c,"invert",(function(){return Gr})),n.d(c,"conjugate",(function(){return Hr})),n.d(c,"fromMat3",(function(){return zr})),n.d(c,"fromEuler",(function(){return kr})),n.d(c,"str",(function(){return Yr})),n.d(c,"clone",(function(){return $r})),n.d(c,"fromValues",(function(){return Jr})),n.d(c,"copy",(function(){return ti})),n.d(c,"set",(function(){return ei})),n.d(c,"add",(function(){return ni})),n.d(c,"mul",(function(){return ri})),n.d(c,"scale",(function(){return ii})),n.d(c,"dot",(function(){return si})),n.d(c,"lerp",(function(){return oi})),n.d(c,"length",(function(){return ai})),n.d(c,"len",(function(){return ui})),n.d(c,"squaredLength",(function(){return hi})),n.d(c,"sqrLen",(function(){return ci})),n.d(c,"normalize",(function(){return li})),n.d(c,"exactEquals",(function(){return fi})),n.d(c,"equals",(function(){return _i})),n.d(c,"rotationTo",(function(){return di})),n.d(c,"sqlerp",(function(){return pi})),n.d(c,"setAxes",(function(){return Ei}));var l={};n.r(l),n.d(l,"create",(function(){return mi})),n.d(l,"clone",(function(){return Ti})),n.d(l,"fromValues",(function(){return vi})),n.d(l,"fromRotationTranslationValues",(function(){return gi})),n.d(l,"fromRotationTranslation",(function(){return Ri})),n.d(l,"fromTranslation",(function(){return Ai})),n.d(l,"fromRotation",(function(){return xi})),n.d(l,"fromMat4",(function(){return Mi})),n.d(l,"copy",(function(){return bi})),n.d(l,"identity",(function(){return yi})),n.d(l,"set",(function(){return Li})),n.d(l,"getReal",(function(){return Ii})),n.d(l,"getDual",(function(){return Si})),n.d(l,"setReal",(function(){return Ni})),n.d(l,"setDual",(function(){return wi})),n.d(l,"getTranslation",(function(){return Pi})),n.d(l,"translate",(function(){return Ci})),n.d(l,"rotateX",(function(){return Fi})),n.d(l,"rotateY",(function(){return Ui})),n.d(l,"rotateZ",(function(){return Oi})),n.d(l,"rotateByQuatAppend",(function(){return Di})),n.d(l,"rotateByQuatPrepend",(function(){return Bi})),n.d(l,"rotateAroundAxis",(function(){return Xi})),n.d(l,"add",(function(){return Vi})),n.d(l,"multiply",(function(){return Gi})),n.d(l,"mul",(function(){return Hi})),n.d(l,"scale",(function(){return zi})),n.d(l,"dot",(function(){return ki})),n.d(l,"lerp",(function(){return Yi})),n.d(l,"invert",(function(){return ji})),n.d(l,"conjugate",(function(){return Wi})),n.d(l,"length",(function(){return qi})),n.d(l,"len",(function(){return Zi})),n.d(l,"squaredLength",(function(){return Ki})),n.d(l,"sqrLen",(function(){return Qi})),n.d(l,"normalize",(function(){return $i})),n.d(l,"str",(function(){return Ji})),n.d(l,"exactEquals",(function(){return ts})),n.d(l,"equals",(function(){return es}));var f={};n.r(f),n.d(f,"create",(function(){return ns})),n.d(f,"clone",(function(){return rs})),n.d(f,"fromValues",(function(){return is})),n.d(f,"copy",(function(){return ss})),n.d(f,"set",(function(){return os})),n.d(f,"add",(function(){return as})),n.d(f,"subtract",(function(){return us})),n.d(f,"multiply",(function(){return hs})),n.d(f,"divide",(function(){return cs})),n.d(f,"ceil",(function(){return ls})),n.d(f,"floor",(function(){return fs})),n.d(f,"min",(function(){return _s})),n.d(f,"max",(function(){return ds})),n.d(f,"round",(function(){return ps})),n.d(f,"scale",(function(){return Es})),n.d(f,"scaleAndAdd",(function(){return ms})),n.d(f,"distance",(function(){return Ts})),n.d(f,"squaredDistance",(function(){return vs})),n.d(f,"length",(function(){return gs})),n.d(f,"squaredLength",(function(){return Rs})),n.d(f,"negate",(function(){return As})),n.d(f,"inverse",(function(){return xs})),n.d(f,"normalize",(function(){return Ms})),n.d(f,"dot",(function(){return bs})),n.d(f,"cross",(function(){return ys})),n.d(f,"lerp",(function(){return Ls})),n.d(f,"random",(function(){return Is})),n.d(f,"transformMat2",(function(){return Ss})),n.d(f,"transformMat2d",(function(){return Ns})),n.d(f,"transformMat3",(function(){return ws})),n.d(f,"transformMat4",(function(){return Ps})),n.d(f,"rotate",(function(){return Cs})),n.d(f,"angle",(function(){return Fs})),n.d(f,"zero",(function(){return Us})),n.d(f,"str",(function(){return Os})),n.d(f,"exactEquals",(function(){return Ds})),n.d(f,"equals",(function(){return Bs})),n.d(f,"len",(function(){return Xs})),n.d(f,"sub",(function(){return Vs})),n.d(f,"mul",(function(){return Gs})),n.d(f,"div",(function(){return Hs})),n.d(f,"dist",(function(){return zs})),n.d(f,"sqrDist",(function(){return ks})),n.d(f,"sqrLen",(function(){return Ys})),n.d(f,"forEach",(function(){return js}));var _={};n.r(_),n.d(_,"glMatrix",(function(){return r})),n.d(_,"mat2",(function(){return i})),n.d(_,"mat2d",(function(){return s})),n.d(_,"mat3",(function(){return o})),n.d(_,"mat4",(function(){return a})),n.d(_,"quat",(function(){return c})),n.d(_,"quat2",(function(){return l})),n.d(_,"vec2",(function(){return f})),n.d(_,"vec3",(function(){return u})),n.d(_,"vec4",(function(){return h}));n(7);var d=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,E=Math.random;function m(t){p=t}var T=Math.PI/180;function v(t){return t*T}function g(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function R(){var t=new p(4);return p!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function A(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function M(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function b(t,e,n,r){var i=new p(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function y(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function L(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function I(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*s-i*r;return o?(o=1/o,t[0]=s*o,t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t):null}function S(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function N(t){return t[0]*t[3]-t[2]*t[1]}function w(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[0],u=n[1],h=n[2],c=n[3];return t[0]=r*a+s*u,t[1]=i*a+o*u,t[2]=r*h+s*c,t[3]=i*h+o*c,t}function P(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*a,t[1]=i*u+o*a,t[2]=r*-a+s*u,t[3]=i*-a+o*u,t}function C(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[0],u=n[1];return t[0]=r*a,t[1]=i*a,t[2]=s*u,t[3]=o*u,t}function F(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function U(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function O(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.hypot(t[0],t[1],t[2],t[3])}function B(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function X(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function V(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function H(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=e[0],a=e[1],u=e[2],h=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=d*Math.max(1,Math.abs(s),Math.abs(h))}function z(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function k(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Y=w,j=V;function W(){var t=new p(6);return p!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function q(t){var e=new p(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Z(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,n,r,i,s){var o=new p(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function $(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function J(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=n*s-r*i;return u?(u=1/u,t[0]=s*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*a-s*o)*u,t[5]=(r*o-n*a)*u,t):null}function tt(t){return t[0]*t[3]-t[1]*t[2]}function et(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=n[0],c=n[1],l=n[2],f=n[3],_=n[4],d=n[5];return t[0]=r*h+s*c,t[1]=i*h+o*c,t[2]=r*l+s*f,t[3]=i*l+o*f,t[4]=r*_+s*d+a,t[5]=i*_+o*d+u,t}function nt(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=Math.sin(n),c=Math.cos(n);return t[0]=r*c+s*h,t[1]=i*c+o*h,t[2]=r*-h+s*c,t[3]=i*-h+o*c,t[4]=a,t[5]=u,t}function rt(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=n[0],c=n[1];return t[0]=r*h,t[1]=i*h,t[2]=s*c,t[3]=o*c,t[4]=a,t[5]=u,t}function it(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=r*h+s*c+a,t[5]=i*h+o*c+u,t}function st(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ht(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function _t(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pt(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],u=e[0],h=e[1],c=e[2],l=e[3],f=e[4],_=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(s-l)<=d*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(o-f)<=d*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-_)<=d*Math.max(1,Math.abs(a),Math.abs(_))}var Et=et,mt=lt;function Tt(){var t=new p(9);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new p(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Rt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function At(t,e,n,r,i,s,o,a,u){var h=new p(9);return h[0]=t,h[1]=e,h[2]=n,h[3]=r,h[4]=i,h[5]=s,h[6]=o,h[7]=a,h[8]=u,h}function xt(t,e,n,r,i,s,o,a,u,h){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=h,t}function Mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function bt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function yt(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8],l=c*o-a*h,f=-c*s+a*u,_=h*s-o*u,d=n*l+r*f+i*_;return d?(d=1/d,t[0]=l*d,t[1]=(-c*r+i*h)*d,t[2]=(a*r-i*o)*d,t[3]=f*d,t[4]=(c*n-i*u)*d,t[5]=(-a*n+i*s)*d,t[6]=_*d,t[7]=(-h*n+r*u)*d,t[8]=(o*n-r*s)*d,t):null}function Lt(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8];return t[0]=o*c-a*h,t[1]=i*h-r*c,t[2]=r*a-i*o,t[3]=a*u-s*c,t[4]=n*c-i*u,t[5]=i*s-n*a,t[6]=s*h-o*u,t[7]=r*u-n*h,t[8]=n*o-r*s,t}function It(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],u=t[7],h=t[8];return e*(h*s-o*u)+n*(-h*i+o*a)+r*(u*i-s*a)}function St(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=n[0],_=n[1],d=n[2],p=n[3],E=n[4],m=n[5],T=n[6],v=n[7],g=n[8];return t[0]=f*r+_*o+d*h,t[1]=f*i+_*a+d*c,t[2]=f*s+_*u+d*l,t[3]=p*r+E*o+m*h,t[4]=p*i+E*a+m*c,t[5]=p*s+E*u+m*l,t[6]=T*r+v*o+g*h,t[7]=T*i+v*a+g*c,t[8]=T*s+v*u+g*l,t}function Nt(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=n[0],_=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=u,t[6]=f*r+_*o+h,t[7]=f*i+_*a+c,t[8]=f*s+_*u+l,t}function wt(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=Math.sin(n),_=Math.cos(n);return t[0]=_*r+f*o,t[1]=_*i+f*a,t[2]=_*s+f*u,t[3]=_*o-f*r,t[4]=_*a-f*i,t[5]=_*u-f*s,t[6]=h,t[7]=c,t[8]=l,t}function Pt(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ct(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Ft(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ut(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Dt(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,u=i+i,h=n*o,c=r*o,l=r*a,f=i*o,_=i*a,d=i*u,p=s*o,E=s*a,m=s*u;return t[0]=1-l-d,t[3]=c-m,t[6]=f+E,t[1]=c+m,t[4]=1-h-d,t[7]=_-p,t[2]=f-E,t[5]=_+p,t[8]=1-h-l,t}function Bt(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8],l=e[9],f=e[10],_=e[11],d=e[12],p=e[13],E=e[14],m=e[15],T=n*a-r*o,v=n*u-i*o,g=n*h-s*o,R=r*u-i*a,A=r*h-s*a,x=i*h-s*u,M=c*p-l*d,b=c*E-f*d,y=c*m-_*d,L=l*E-f*p,I=l*m-_*p,S=f*m-_*E,N=T*S-v*I+g*L+R*y-A*b+x*M;return N?(N=1/N,t[0]=(a*S-u*I+h*L)*N,t[1]=(u*y-o*S-h*b)*N,t[2]=(o*I-a*y+h*M)*N,t[3]=(i*I-r*S-s*L)*N,t[4]=(n*S-i*y+s*b)*N,t[5]=(r*y-n*I-s*M)*N,t[6]=(p*x-E*A+m*R)*N,t[7]=(E*g-d*x-m*v)*N,t[8]=(d*A-p*g+m*T)*N,t):null}function Xt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Vt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Gt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Ht(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function zt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function kt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Yt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function jt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],c=t[8],l=e[0],f=e[1],_=e[2],p=e[3],E=e[4],m=e[5],T=e[6],v=e[7],g=e[8];return Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-_)<=d*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-E)<=d*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(u-T)<=d*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-v)<=d*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))}var qt=St,Zt=zt;function Kt(){var t=new p(16);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){var e=new p(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,r,i,s,o,a,u,h,c,l,f,_,d,E){var m=new p(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=s,m[6]=o,m[7]=a,m[8]=u,m[9]=h,m[10]=c,m[11]=l,m[12]=f,m[13]=_,m[14]=d,m[15]=E,m}function te(t,e,n,r,i,s,o,a,u,h,c,l,f,_,d,p,E){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=h,t[9]=c,t[10]=l,t[11]=f,t[12]=_,t[13]=d,t[14]=p,t[15]=E,t}function ee(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ne(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8],l=e[9],f=e[10],_=e[11],d=e[12],p=e[13],E=e[14],m=e[15],T=n*a-r*o,v=n*u-i*o,g=n*h-s*o,R=r*u-i*a,A=r*h-s*a,x=i*h-s*u,M=c*p-l*d,b=c*E-f*d,y=c*m-_*d,L=l*E-f*p,I=l*m-_*p,S=f*m-_*E,N=T*S-v*I+g*L+R*y-A*b+x*M;return N?(N=1/N,t[0]=(a*S-u*I+h*L)*N,t[1]=(i*I-r*S-s*L)*N,t[2]=(p*x-E*A+m*R)*N,t[3]=(f*A-l*x-_*R)*N,t[4]=(u*y-o*S-h*b)*N,t[5]=(n*S-i*y+s*b)*N,t[6]=(E*g-d*x-m*v)*N,t[7]=(c*x-f*g+_*v)*N,t[8]=(o*I-a*y+h*M)*N,t[9]=(r*y-n*I-s*M)*N,t[10]=(d*A-p*g+m*T)*N,t[11]=(l*g-c*A-_*T)*N,t[12]=(a*b-o*L-u*M)*N,t[13]=(n*L-r*b+i*M)*N,t[14]=(p*v-d*R-E*T)*N,t[15]=(c*R-l*v+f*T)*N,t):null}function ie(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8],l=e[9],f=e[10],_=e[11],d=e[12],p=e[13],E=e[14],m=e[15];return t[0]=a*(f*m-_*E)-l*(u*m-h*E)+p*(u*_-h*f),t[1]=-(r*(f*m-_*E)-l*(i*m-s*E)+p*(i*_-s*f)),t[2]=r*(u*m-h*E)-a*(i*m-s*E)+p*(i*h-s*u),t[3]=-(r*(u*_-h*f)-a*(i*_-s*f)+l*(i*h-s*u)),t[4]=-(o*(f*m-_*E)-c*(u*m-h*E)+d*(u*_-h*f)),t[5]=n*(f*m-_*E)-c*(i*m-s*E)+d*(i*_-s*f),t[6]=-(n*(u*m-h*E)-o*(i*m-s*E)+d*(i*h-s*u)),t[7]=n*(u*_-h*f)-o*(i*_-s*f)+c*(i*h-s*u),t[8]=o*(l*m-_*p)-c*(a*m-h*p)+d*(a*_-h*l),t[9]=-(n*(l*m-_*p)-c*(r*m-s*p)+d*(r*_-s*l)),t[10]=n*(a*m-h*p)-o*(r*m-s*p)+d*(r*h-s*a),t[11]=-(n*(a*_-h*l)-o*(r*_-s*l)+c*(r*h-s*a)),t[12]=-(o*(l*E-f*p)-c*(a*E-u*p)+d*(a*f-u*l)),t[13]=n*(l*E-f*p)-c*(r*E-i*p)+d*(r*f-i*l),t[14]=-(n*(a*E-u*p)-o*(r*E-i*p)+d*(r*u-i*a)),t[15]=n*(a*f-u*l)-o*(r*f-i*l)+c*(r*u-i*a),t}function se(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],u=t[7],h=t[8],c=t[9],l=t[10],f=t[11],_=t[12],d=t[13],p=t[14],E=t[15];return(e*o-n*s)*(l*E-f*p)-(e*a-r*s)*(c*E-f*d)+(e*u-i*s)*(c*p-l*d)+(n*a-r*o)*(h*E-f*_)-(n*u-i*o)*(h*p-l*_)+(r*u-i*a)*(h*d-c*_)}function oe(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=e[9],_=e[10],d=e[11],p=e[12],E=e[13],m=e[14],T=e[15],v=n[0],g=n[1],R=n[2],A=n[3];return t[0]=v*r+g*a+R*l+A*p,t[1]=v*i+g*u+R*f+A*E,t[2]=v*s+g*h+R*_+A*m,t[3]=v*o+g*c+R*d+A*T,v=n[4],g=n[5],R=n[6],A=n[7],t[4]=v*r+g*a+R*l+A*p,t[5]=v*i+g*u+R*f+A*E,t[6]=v*s+g*h+R*_+A*m,t[7]=v*o+g*c+R*d+A*T,v=n[8],g=n[9],R=n[10],A=n[11],t[8]=v*r+g*a+R*l+A*p,t[9]=v*i+g*u+R*f+A*E,t[10]=v*s+g*h+R*_+A*m,t[11]=v*o+g*c+R*d+A*T,v=n[12],g=n[13],R=n[14],A=n[15],t[12]=v*r+g*a+R*l+A*p,t[13]=v*i+g*u+R*f+A*E,t[14]=v*s+g*h+R*_+A*m,t[15]=v*o+g*c+R*d+A*T,t}function ae(t,e,n){var r,i,s,o,a,u,h,c,l,f,_,d,p=n[0],E=n[1],m=n[2];return e===t?(t[12]=e[0]*p+e[4]*E+e[8]*m+e[12],t[13]=e[1]*p+e[5]*E+e[9]*m+e[13],t[14]=e[2]*p+e[6]*E+e[10]*m+e[14],t[15]=e[3]*p+e[7]*E+e[11]*m+e[15]):(r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=e[8],f=e[9],_=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=u,t[6]=h,t[7]=c,t[8]=l,t[9]=f,t[10]=_,t[11]=d,t[12]=r*p+a*E+l*m+e[12],t[13]=i*p+u*E+f*m+e[13],t[14]=s*p+h*E+_*m+e[14],t[15]=o*p+c*E+d*m+e[15]),t}function ue(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function he(t,e,n,r){var i,s,o,a,u,h,c,l,f,_,p,E,m,T,v,g,R,A,x,M,b,y,L,I,S=r[0],N=r[1],w=r[2],P=Math.hypot(S,N,w);return P<d?null:(S*=P=1/P,N*=P,w*=P,i=Math.sin(n),o=1-(s=Math.cos(n)),a=e[0],u=e[1],h=e[2],c=e[3],l=e[4],f=e[5],_=e[6],p=e[7],E=e[8],m=e[9],T=e[10],v=e[11],g=S*S*o+s,R=N*S*o+w*i,A=w*S*o-N*i,x=S*N*o-w*i,M=N*N*o+s,b=w*N*o+S*i,y=S*w*o+N*i,L=N*w*o-S*i,I=w*w*o+s,t[0]=a*g+l*R+E*A,t[1]=u*g+f*R+m*A,t[2]=h*g+_*R+T*A,t[3]=c*g+p*R+v*A,t[4]=a*x+l*M+E*b,t[5]=u*x+f*M+m*b,t[6]=h*x+_*M+T*b,t[7]=c*x+p*M+v*b,t[8]=a*y+l*L+E*I,t[9]=u*y+f*L+m*I,t[10]=h*y+_*L+T*I,t[11]=c*y+p*L+v*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],u=e[7],h=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+h*r,t[5]=o*i+c*r,t[6]=a*i+l*r,t[7]=u*i+f*r,t[8]=h*i-s*r,t[9]=c*i-o*r,t[10]=l*i-a*r,t[11]=f*i-u*r,t}function le(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],h=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-h*r,t[1]=o*i-c*r,t[2]=a*i-l*r,t[3]=u*i-f*r,t[8]=s*r+h*i,t[9]=o*r+c*i,t[10]=a*r+l*i,t[11]=u*r+f*i,t}function fe(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],h=e[4],c=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+h*r,t[1]=o*i+c*r,t[2]=a*i+l*r,t[3]=u*i+f*r,t[4]=h*i-s*r,t[5]=c*i-o*r,t[6]=l*i-a*r,t[7]=f*i-u*r,t}function _e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,n){var r,i,s,o=n[0],a=n[1],u=n[2],h=Math.hypot(o,a,u);return h<d?null:(o*=h=1/h,a*=h,u*=h,r=Math.sin(e),s=1-(i=Math.cos(e)),t[0]=o*o*s+i,t[1]=a*o*s+u*r,t[2]=u*o*s-a*r,t[3]=0,t[4]=o*a*s-u*r,t[5]=a*a*s+i,t[6]=u*a*s+o*r,t[7]=0,t[8]=o*u*s+a*r,t[9]=a*u*s-o*r,t[10]=u*u*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Ee(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Te(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,u=i+i,h=s+s,c=r*a,l=r*u,f=r*h,_=i*u,d=i*h,p=s*h,E=o*a,m=o*u,T=o*h;return t[0]=1-(_+p),t[1]=l+T,t[2]=f-m,t[3]=0,t[4]=l-T,t[5]=1-(c+p),t[6]=d+E,t[7]=0,t[8]=f+m,t[9]=d-E,t[10]=1-(c+_),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ge(t,e){var n=new p(3),r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=r*r+i*i+s*s+o*o;return l>0?(n[0]=2*(a*o+c*r+u*s-h*i)/l,n[1]=2*(u*o+c*i+h*r-a*s)/l,n[2]=2*(h*o+c*s+a*i-u*r)/l):(n[0]=2*(a*o+c*r+u*s-h*i),n[1]=2*(u*o+c*i+h*r-a*s),n[2]=2*(h*o+c*s+a*i-u*r)),ve(t,e,n),t}function Re(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Ae(t,e){var n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],u=e[8],h=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(u,h,c),t}function xe(t,e){var n=new p(3);Ae(n,e);var r=1/n[0],i=1/n[1],s=1/n[2],o=e[0]*r,a=e[1]*i,u=e[2]*s,h=e[4]*r,c=e[5]*i,l=e[6]*s,f=e[8]*r,_=e[9]*i,d=e[10]*s,E=o+c+d,m=0;return E>0?(m=2*Math.sqrt(E+1),t[3]=.25*m,t[0]=(l-_)/m,t[1]=(f-u)/m,t[2]=(a-h)/m):o>c&&o>d?(m=2*Math.sqrt(1+o-c-d),t[3]=(l-_)/m,t[0]=.25*m,t[1]=(a+h)/m,t[2]=(f+u)/m):c>d?(m=2*Math.sqrt(1+c-o-d),t[3]=(f-u)/m,t[0]=(a+h)/m,t[1]=.25*m,t[2]=(l+_)/m):(m=2*Math.sqrt(1+d-o-c),t[3]=(a-h)/m,t[0]=(f+u)/m,t[1]=(l+_)/m,t[2]=.25*m),t}function Me(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3],u=i+i,h=s+s,c=o+o,l=i*u,f=i*h,_=i*c,d=s*h,p=s*c,E=o*c,m=a*u,T=a*h,v=a*c,g=r[0],R=r[1],A=r[2];return t[0]=(1-(d+E))*g,t[1]=(f+v)*g,t[2]=(_-T)*g,t[3]=0,t[4]=(f-v)*R,t[5]=(1-(l+E))*R,t[6]=(p+m)*R,t[7]=0,t[8]=(_+T)*A,t[9]=(p-m)*A,t[10]=(1-(l+d))*A,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function be(t,e,n,r,i){var s=e[0],o=e[1],a=e[2],u=e[3],h=s+s,c=o+o,l=a+a,f=s*h,_=s*c,d=s*l,p=o*c,E=o*l,m=a*l,T=u*h,v=u*c,g=u*l,R=r[0],A=r[1],x=r[2],M=i[0],b=i[1],y=i[2],L=(1-(p+m))*R,I=(_+g)*R,S=(d-v)*R,N=(_-g)*A,w=(1-(f+m))*A,P=(E+T)*A,C=(d+v)*x,F=(E-T)*x,U=(1-(f+p))*x;return t[0]=L,t[1]=I,t[2]=S,t[3]=0,t[4]=N,t[5]=w,t[6]=P,t[7]=0,t[8]=C,t[9]=F,t[10]=U,t[11]=0,t[12]=n[0]+M-(L*M+N*b+C*y),t[13]=n[1]+b-(I*M+w*b+F*y),t[14]=n[2]+y-(S*M+P*b+U*y),t[15]=1,t}function ye(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,u=i+i,h=n*o,c=r*o,l=r*a,f=i*o,_=i*a,d=i*u,p=s*o,E=s*a,m=s*u;return t[0]=1-l-d,t[1]=c+m,t[2]=f-E,t[3]=0,t[4]=c-m,t[5]=1-h-d,t[6]=_+p,t[7]=0,t[8]=f+E,t[9]=_-p,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Le(t,e,n,r,i,s,o){var a=1/(n-e),u=1/(i-r),h=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(o+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*h,t[15]=0,t}function Ie(t,e,n,r,i){var s,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(s=1/(r-i),t[10]=(i+r)*s,t[14]=2*i*r*s):(t[10]=-1,t[14]=-2*r),t}function Se(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+a),h=2/(i+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(o-a)*u*.5,t[9]=(i-s)*h*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ne(t,e,n,r,i,s,o){var a=1/(e-n),u=1/(r-i),h=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(o+s)*h,t[15]=1,t}function we(t,e,n,r){var i,s,o,a,u,h,c,l,f,_,p=e[0],E=e[1],m=e[2],T=r[0],v=r[1],g=r[2],R=n[0],A=n[1],x=n[2];return Math.abs(p-R)<d&&Math.abs(E-A)<d&&Math.abs(m-x)<d?ee(t):(c=p-R,l=E-A,f=m-x,i=v*(f*=_=1/Math.hypot(c,l,f))-g*(l*=_),s=g*(c*=_)-T*f,o=T*l-v*c,(_=Math.hypot(i,s,o))?(i*=_=1/_,s*=_,o*=_):(i=0,s=0,o=0),a=l*o-f*s,u=f*i-c*o,h=c*s-l*i,(_=Math.hypot(a,u,h))?(a*=_=1/_,u*=_,h*=_):(a=0,u=0,h=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=s,t[5]=u,t[6]=l,t[7]=0,t[8]=o,t[9]=h,t[10]=f,t[11]=0,t[12]=-(i*p+s*E+o*m),t[13]=-(a*p+u*E+h*m),t[14]=-(c*p+l*E+f*m),t[15]=1,t)}function Pe(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=r[0],u=r[1],h=r[2],c=i-n[0],l=s-n[1],f=o-n[2],_=c*c+l*l+f*f;_>0&&(c*=_=1/Math.sqrt(_),l*=_,f*=_);var d=u*f-h*l,p=h*c-a*f,E=a*l-u*c;return(_=d*d+p*p+E*E)>0&&(d*=_=1/Math.sqrt(_),p*=_,E*=_),t[0]=d,t[1]=p,t[2]=E,t[3]=0,t[4]=l*E-f*p,t[5]=f*d-c*E,t[6]=c*p-l*d,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t}function Ce(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Fe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ue(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Oe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function De(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Be(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Xe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ve(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],c=t[8],l=t[9],f=t[10],_=t[11],p=t[12],E=t[13],m=t[14],T=t[15],v=e[0],g=e[1],R=e[2],A=e[3],x=e[4],M=e[5],b=e[6],y=e[7],L=e[8],I=e[9],S=e[10],N=e[11],w=e[12],P=e[13],C=e[14],F=e[15];return Math.abs(n-v)<=d*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-g)<=d*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(i-R)<=d*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(s-A)<=d*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(o-x)<=d*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-M)<=d*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-b)<=d*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(h-y)<=d*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(c-L)<=d*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(l-I)<=d*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(f-S)<=d*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(_-N)<=d*Math.max(1,Math.abs(_),Math.abs(N))&&Math.abs(p-w)<=d*Math.max(1,Math.abs(p),Math.abs(w))&&Math.abs(E-P)<=d*Math.max(1,Math.abs(E),Math.abs(P))&&Math.abs(m-C)<=d*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(T-F)<=d*Math.max(1,Math.abs(T),Math.abs(F))}var Ge=oe,He=Oe;function ze(){var t=new p(3);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ke(t){var e=new p(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function je(t,e,n){var r=new p(3);return r[0]=t,r[1]=e,r[2]=n,r}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function qe(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ze(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ke(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Qe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function $e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function tn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function en(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function nn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function rn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function sn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function on(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function an(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function un(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function hn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ln(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function fn(t,e){var n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function _n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dn(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],u=n[2];return t[0]=i*u-s*a,t[1]=s*o-r*u,t[2]=r*a-i*o,t}function pn(t,e,n,r){var i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function En(t,e,n,r,i,s){var o=s*s,a=o*(2*s-3)+1,u=o*(s-2)+s,h=o*(s-1),c=o*(3-2*s);return t[0]=e[0]*a+n[0]*u+r[0]*h+i[0]*c,t[1]=e[1]*a+n[1]*u+r[1]*h+i[1]*c,t[2]=e[2]*a+n[2]*u+r[2]*h+i[2]*c,t}function mn(t,e,n,r,i,s){var o=1-s,a=o*o,u=s*s,h=a*o,c=3*s*a,l=3*u*o,f=u*s;return t[0]=e[0]*h+n[0]*c+r[0]*l+i[0]*f,t[1]=e[1]*h+n[1]*c+r[1]*l+i[1]*f,t[2]=e[2]*h+n[2]*c+r[2]*l+i[2]*f,t}function Tn(t,e){e=e||1;var n=2*E()*Math.PI,r=2*E()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function vn(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function gn(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function Rn(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],u=e[1],h=e[2],c=i*h-s*u,l=s*a-r*h,f=r*u-i*a,_=i*f-s*l,d=s*c-r*f,p=r*l-i*c,E=2*o;return c*=E,l*=E,f*=E,_*=2,d*=2,p*=2,t[0]=a+c+_,t[1]=u+l+d,t[2]=h+f+p,t}function An(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function xn(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Mn(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function bn(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(s*s+o*o+a*a),h=u&&_n(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function yn(t){return t[0]=0,t[1]=0,t[2]=0,t}function Ln(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function In(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Sn(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(n-s)<=d*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=d*Math.max(1,Math.abs(i),Math.abs(a))}var Nn,wn=Ke,Pn=Qe,Cn=$e,Fn=an,Un=un,On=Ye,Dn=hn,Bn=(Nn=ze(),function(t,e,n,r,i,s){var o,a;for(e||(e=3),n||(n=0),a=r?Math.min(r*e+n,t.length):t.length,o=n;o<a;o+=e)Nn[0]=t[o],Nn[1]=t[o+1],Nn[2]=t[o+2],i(Nn,Nn,s),t[o]=Nn[0],t[o+1]=Nn[1],t[o+2]=Nn[2];return t});function Xn(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Vn(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Gn(t,e,n,r){var i=new p(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Hn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function zn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function kn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Yn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function jn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function qn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Zn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Kn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Qn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function $n(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Jn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function tr(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return Math.hypot(n,r,i,s)}function nr(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return n*n+r*r+i*i+s*s}function rr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function ir(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function sr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function or(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ar(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=s*o,t}function ur(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hr(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],s=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],a=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],h=n[2]*r[3]-n[3]*r[2],c=e[0],l=e[1],f=e[2],_=e[3];return t[0]=l*h-f*u+_*a,t[1]=-c*h+f*o-_*s,t[2]=c*u-l*o+_*i,t[3]=-c*a+l*s-f*i,t}function cr(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t[3]=a+r*(n[3]-a),t}function lr(t,e){var n,r,i,s,o,a;e=e||1;do{o=(n=2*E()-1)*n+(r=2*E()-1)*r}while(o>=1);do{a=(i=2*E()-1)*i+(s=2*E()-1)*s}while(a>=1);var u=Math.sqrt((1-o)/a);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*s*u,t}function fr(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}function _r(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],u=n[2],h=n[3],c=h*r+a*s-u*i,l=h*i+u*r-o*s,f=h*s+o*i-a*r,_=-o*r-a*i-u*s;return t[0]=c*h+_*-o+l*-u-f*-a,t[1]=l*h+_*-a+f*-o-c*-u,t[2]=f*h+_*-u+c*-a-l*-o,t[3]=e[3],t}function dr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Er(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mr(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=e[0],a=e[1],u=e[2],h=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=d*Math.max(1,Math.abs(s),Math.abs(h))}var Tr=Yn,vr=jn,gr=Wn,Rr=er,Ar=nr,xr=rr,Mr=ir,br=function(){var t=Xn();return function(e,n,r,i,s,o){var a,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function yr(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Lr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ir(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Sr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Nr(t,e){var n=si(t,e);return Math.acos(2*n*n-1)}function wr(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[0],u=n[1],h=n[2],c=n[3];return t[0]=r*c+o*a+i*h-s*u,t[1]=i*c+o*u+s*a-r*h,t[2]=s*c+o*h+r*u-i*a,t[3]=o*c-r*a-i*u-s*h,t}function Pr(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*a,t[1]=i*u+s*a,t[2]=s*u-i*a,t[3]=o*u-r*a,t}function Cr(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u-s*a,t[1]=i*u+o*a,t[2]=s*u+r*a,t[3]=o*u-i*a,t}function Fr(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*a,t[1]=i*u-r*a,t[2]=s*u+o*a,t[3]=o*u-s*a,t}function Ur(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Or(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=Math.sqrt(n*n+r*r+i*i),a=Math.exp(s),u=o>0?a*Math.sin(o)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=a*Math.cos(o),t}function Dr(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=Math.sqrt(n*n+r*r+i*i),a=o>0?Math.atan2(o,s)/o:0;return t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=.5*Math.log(n*n+r*r+i*i+s*s),t}function Br(t,e,n){return Dr(t,e),ii(t,t,n),Or(t,t),t}function Xr(t,e,n,r){var i,s,o,a,u,h=e[0],c=e[1],l=e[2],f=e[3],_=n[0],p=n[1],E=n[2],m=n[3];return(s=h*_+c*p+l*E+f*m)<0&&(s=-s,_=-_,p=-p,E=-E,m=-m),1-s>d?(i=Math.acos(s),o=Math.sin(i),a=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(a=1-r,u=r),t[0]=a*h+u*_,t[1]=a*c+u*p,t[2]=a*l+u*E,t[3]=a*f+u*m,t}function Vr(t){var e=E(),n=E(),r=E(),i=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=s*Math.sin(2*Math.PI*r),t[3]=s*Math.cos(2*Math.PI*r),t}function Gr(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=s*a,t}function Hr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function zr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*s+s]-e[3*o+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*s+o]-e[3*o+s])*n,t[s]=(e[3*s+i]+e[3*i+s])*n,t[o]=(e[3*o+i]+e[3*i+o])*n}return t}function kr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var s=Math.sin(e),o=Math.cos(e),a=Math.sin(n),u=Math.cos(n),h=Math.sin(r),c=Math.cos(r);return t[0]=s*u*c-o*a*h,t[1]=o*a*c+s*u*h,t[2]=o*u*h-s*a*c,t[3]=o*u*c+s*a*h,t}function Yr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var jr,Wr,qr,Zr,Kr,Qr,$r=Vn,Jr=Gn,ti=Hn,ei=zn,ni=kn,ri=wr,ii=Jn,si=ur,oi=cr,ai=rr,ui=ai,hi=ir,ci=hi,li=ar,fi=Er,_i=mr,di=(jr=ze(),Wr=je(1,0,0),qr=je(0,1,0),function(t,e,n){var r=_n(e,n);return r<-.999999?(dn(jr,Wr,e),On(jr)<1e-6&&dn(jr,qr,e),fn(jr,jr),Ir(t,jr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dn(jr,e,n),t[0]=jr[0],t[1]=jr[1],t[2]=jr[2],t[3]=1+r,li(t,t))}),pi=(Zr=yr(),Kr=yr(),function(t,e,n,r,i,s){return Xr(Zr,e,i,s),Xr(Kr,n,r,s),Xr(t,Zr,Kr,2*s*(1-s)),t}),Ei=(Qr=Tt(),function(t,e,n,r){return Qr[0]=n[0],Qr[3]=n[1],Qr[6]=n[2],Qr[1]=r[0],Qr[4]=r[1],Qr[7]=r[2],Qr[2]=-e[0],Qr[5]=-e[1],Qr[8]=-e[2],li(t,zr(t,Qr))});function mi(){var t=new p(8);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ti(t){var e=new p(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function vi(t,e,n,r,i,s,o,a){var u=new p(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=s,u[6]=o,u[7]=a,u}function gi(t,e,n,r,i,s,o){var a=new p(8);a[0]=t,a[1]=e,a[2]=n,a[3]=r;var u=.5*i,h=.5*s,c=.5*o;return a[4]=u*r+h*n-c*e,a[5]=h*r+c*t-u*n,a[6]=c*r+u*e-h*t,a[7]=-u*t-h*e-c*n,a}function Ri(t,e,n){var r=.5*n[0],i=.5*n[1],s=.5*n[2],o=e[0],a=e[1],u=e[2],h=e[3];return t[0]=o,t[1]=a,t[2]=u,t[3]=h,t[4]=r*h+i*u-s*a,t[5]=i*h+s*o-r*u,t[6]=s*h+r*a-i*o,t[7]=-r*o-i*a-s*u,t}function Ai(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function xi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Mi(t,e){var n=yr();xe(n,e);var r=new p(3);return Re(r,e),Ri(t,n,r),t}function bi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function yi(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Li(t,e,n,r,i,s,o,a,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t}var Ii=ti;function Si(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ni=ti;function wi(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Pi(t,e){var n=e[4],r=e[5],i=e[6],s=e[7],o=-e[0],a=-e[1],u=-e[2],h=e[3];return t[0]=2*(n*h+s*o+r*u-i*a),t[1]=2*(r*h+s*a+i*o-n*u),t[2]=2*(i*h+s*u+n*a-r*o),t}function Ci(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=.5*n[0],u=.5*n[1],h=.5*n[2],c=e[4],l=e[5],f=e[6],_=e[7];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=o*a+i*h-s*u+c,t[5]=o*u+s*a-r*h+l,t[6]=o*h+r*u-i*a+f,t[7]=-r*a-i*u-s*h+_,t}function Fi(t,e,n){var r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=a*o+c*r+u*s-h*i,f=u*o+c*i+h*r-a*s,_=h*o+c*s+a*i-u*r,d=c*o-a*r-u*i-h*s;return Pr(t,e,n),r=t[0],i=t[1],s=t[2],o=t[3],t[4]=l*o+d*r+f*s-_*i,t[5]=f*o+d*i+_*r-l*s,t[6]=_*o+d*s+l*i-f*r,t[7]=d*o-l*r-f*i-_*s,t}function Ui(t,e,n){var r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=a*o+c*r+u*s-h*i,f=u*o+c*i+h*r-a*s,_=h*o+c*s+a*i-u*r,d=c*o-a*r-u*i-h*s;return Cr(t,e,n),r=t[0],i=t[1],s=t[2],o=t[3],t[4]=l*o+d*r+f*s-_*i,t[5]=f*o+d*i+_*r-l*s,t[6]=_*o+d*s+l*i-f*r,t[7]=d*o-l*r-f*i-_*s,t}function Oi(t,e,n){var r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],l=a*o+c*r+u*s-h*i,f=u*o+c*i+h*r-a*s,_=h*o+c*s+a*i-u*r,d=c*o-a*r-u*i-h*s;return Fr(t,e,n),r=t[0],i=t[1],s=t[2],o=t[3],t[4]=l*o+d*r+f*s-_*i,t[5]=f*o+d*i+_*r-l*s,t[6]=_*o+d*s+l*i-f*r,t[7]=d*o-l*r-f*i-_*s,t}function Di(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],u=e[1],h=e[2],c=e[3];return t[0]=a*o+c*r+u*s-h*i,t[1]=u*o+c*i+h*r-a*s,t[2]=h*o+c*s+a*i-u*r,t[3]=c*o-a*r-u*i-h*s,a=e[4],u=e[5],h=e[6],c=e[7],t[4]=a*o+c*r+u*s-h*i,t[5]=u*o+c*i+h*r-a*s,t[6]=h*o+c*s+a*i-u*r,t[7]=c*o-a*r-u*i-h*s,t}function Bi(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[0],u=n[1],h=n[2],c=n[3];return t[0]=r*c+o*a+i*h-s*u,t[1]=i*c+o*u+s*a-r*h,t[2]=s*c+o*h+r*u-i*a,t[3]=o*c-r*a-i*u-s*h,a=n[4],u=n[5],h=n[6],c=n[7],t[4]=r*c+o*a+i*h-s*u,t[5]=i*c+o*u+s*a-r*h,t[6]=s*c+o*h+r*u-i*a,t[7]=o*c-r*a-i*u-s*h,t}function Xi(t,e,n,r){if(Math.abs(r)<d)return bi(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var s=Math.sin(r),o=s*n[0]/i,a=s*n[1]/i,u=s*n[2]/i,h=Math.cos(r),c=e[0],l=e[1],f=e[2],_=e[3];t[0]=c*h+_*o+l*u-f*a,t[1]=l*h+_*a+f*o-c*u,t[2]=f*h+_*u+c*a-l*o,t[3]=_*h-c*o-l*a-f*u;var p=e[4],E=e[5],m=e[6],T=e[7];return t[4]=p*h+T*o+E*u-m*a,t[5]=E*h+T*a+m*o-p*u,t[6]=m*h+T*u+p*a-E*o,t[7]=T*h-p*o-E*a-m*u,t}function Vi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Gi(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[4],u=n[5],h=n[6],c=n[7],l=e[4],f=e[5],_=e[6],d=e[7],p=n[0],E=n[1],m=n[2],T=n[3];return t[0]=r*T+o*p+i*m-s*E,t[1]=i*T+o*E+s*p-r*m,t[2]=s*T+o*m+r*E-i*p,t[3]=o*T-r*p-i*E-s*m,t[4]=r*c+o*a+i*h-s*u+l*T+d*p+f*m-_*E,t[5]=i*c+o*u+s*a-r*h+f*T+d*E+_*p-l*m,t[6]=s*c+o*h+r*u-i*a+_*T+d*m+l*E-f*p,t[7]=o*c-r*a-i*u-s*h+d*T-l*p-f*E-_*m,t}var Hi=Gi;function zi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var ki=si;function Yi(t,e,n,r){var i=1-r;return ki(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function ji(t,e){var n=Ki(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Wi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var qi=ai,Zi=qi,Ki=hi,Qi=Ki;function $i(t,e){var n=Ki(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,s=e[2]/n,o=e[3]/n,a=e[4],u=e[5],h=e[6],c=e[7],l=r*a+i*u+s*h+o*c;t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=(a-r*l)/n,t[5]=(u-i*l)/n,t[6]=(h-s*l)/n,t[7]=(c-o*l)/n}return t}function Ji(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ts(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function es(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],c=e[0],l=e[1],f=e[2],_=e[3],p=e[4],E=e[5],m=e[6],T=e[7];return Math.abs(n-c)<=d*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-f)<=d*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-_)<=d*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-E)<=d*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(u-m)<=d*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(h-T)<=d*Math.max(1,Math.abs(h),Math.abs(T))}function ns(){var t=new p(2);return p!=Float32Array&&(t[0]=0,t[1]=0),t}function rs(t){var e=new p(2);return e[0]=t[0],e[1]=t[1],e}function is(t,e){var n=new p(2);return n[0]=t,n[1]=e,n}function ss(t,e){return t[0]=e[0],t[1]=e[1],t}function os(t,e,n){return t[0]=e,t[1]=n,t}function as(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function us(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function hs(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function cs(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function ls(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function fs(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function _s(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function ds(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function ps(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Es(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function ms(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Ts(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function vs(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function gs(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Rs(t){var e=t[0],n=t[1];return e*e+n*n}function As(t,e){return t[0]=-e[0],t[1]=-e[1],t}function xs(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Ms(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function bs(t,e){return t[0]*e[0]+t[1]*e[1]}function ys(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ls(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function Is(t,e){e=e||1;var n=2*E()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Ss(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function Ns(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function ws(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Ps(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function Cs(t,e,n,r){var i=e[0]-n[0],s=e[1]-n[1],o=Math.sin(r),a=Math.cos(r);return t[0]=i*a-s*o+n[0],t[1]=i*o+s*a+n[1],t}function Fs(t,e){var n=t[0],r=t[1],i=e[0],s=e[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+s*s),a=o&&(n*i+r*s)/o;return Math.acos(Math.min(Math.max(a,-1),1))}function Us(t){return t[0]=0,t[1]=0,t}function Os(t){return"vec2("+t[0]+", "+t[1]+")"}function Ds(t,e){return t[0]===e[0]&&t[1]===e[1]}function Bs(t,e){var n=t[0],r=t[1],i=e[0],s=e[1];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))}var Xs=gs,Vs=us,Gs=hs,Hs=cs,zs=Ts,ks=vs,Ys=Rs,js=function(){var t=ns();return function(e,n,r,i,s,o){var a,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}(),Ws=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","OES_vertex_array_object","ANGLE_instanced_arrays","WEBGL_draw_buffers"],qs=n(1),Zs=n.n(qs);var Ks=function(){for(const t in Zs.a)oo[t]||(oo[t]=Zs.a[t])};function Qs(t,e){const n=t.getExtension(e);if(!n)return!1;const r=e.split("_")[0],i=new RegExp(r+"$");for(const e in n){if("function"==typeof n[e]){const r=e.replace(i,"");e.substring&&(t[r]=n[e].bind(n))}}return!0}var $s=function(t,e,n){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[n]&&(e.cacheAttribLoc[n]=t.getAttribLocation(e,n)),e.cacheAttribLoc[n]};let Js,to=!1;var eo=function(){return to||(Js=oo.webgl2||oo.getExtension("OES_texture_float")?oo.gl.FLOAT:(console.warn("USING FLOAT BUT OES_texture_float NOT SUPPORTED"),oo.gl.UNSIGNED_BYTE)),Js};let no,ro=!1;var io=function(){return ro||(no=function(){if(oo.webgl2)return oo.gl.HALF_FLOAT;{const t=oo.getExtension("OES_texture_half_float");return t?t.HALF_FLOAT_OES:(console.warn("USING HALF FLOAT BUT OES_texture_half_float NOT SUPPORTED"),oo.gl.UNSIGNED_BYTE)}}()),no};let so;var oo=new class{constructor(){this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=a.create(),this._normalMatrix=o.create(),this._inverseModelViewMatrix=o.create(),this._modelMatrix=a.create(),this._matrix=a.create(),this._matrixStacks=[],this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance=!1,this._extArrayInstance=!1,this._hasCheckedExt=!1,a.identity(this.identityMatrix,this.identityMatrix),this.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}init(t,e={}){if(null==t)return void console.error("Canvas not exist");let n;void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=t,this.setSize(window.innerWidth,window.innerHeight),e.useWebgl2=e.useWebgl2||!1,e.useWebgl2?(n=this.canvas.getContext("experimental-webgl2",e)||this.canvas.getContext("webgl2",e),n?(this._useWebGL2=!0,console.log("Using WebGL 2 : ",n)):(n=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e),this._useWebGL2=!1)):(n=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e),this._useWebGL2=!1),this.initWithGL(n)}initWithGL(t){this.canvas||(this.canvas=t.canvas),so=this.gl=t,this.extensions={};for(let t=0;t<Ws.length;t++)this.extensions[Ws[t]]=so.getExtension(Ws[t]);Ks(),Qs(so,"OES_vertex_array_object"),Qs(so,"ANGLE_instanced_arrays"),Qs(so,"WEBGL_draw_buffers"),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.enable(this.BLEND),this.enableAlphaBlending()}setViewport(t,e,n,r){let i=!1;t!==this._viewport[0]&&(i=!0),e!==this._viewport[1]&&(i=!0),n!==this._viewport[2]&&(i=!0),r!==this._viewport[3]&&(i=!0),i&&(so.viewport(t,e,n,r),this._viewport=[t,e,n,r])}scissor(t,e,n,r){this.gl.scissor(t,e,n,r)}clear(t,e,n,r){this.gl.clearColor(t,e,n,r),this.gl.clear(so.COLOR_BUFFER_BIT|so.DEPTH_BUFFER_BIT)}cullFace(t){this.gl.cullFace(t)}setMatrices(t){this.camera=t,this.rotate(this.identityMatrix)}useShader(t){this.shader=t,this.shaderProgram=this.shader.shaderProgram}rotate(t){a.copy(this._modelMatrix,t),a.multiply(this._matrix,this.camera.matrix,this._modelMatrix),o.fromMat4(this._normalMatrix,this._matrix),o.invert(this._normalMatrix,this._normalMatrix),o.transpose(this._normalMatrix,this._normalMatrix),o.fromMat4(this._inverseModelViewMatrix,this._matrix),o.invert(this._inverseModelViewMatrix,this._inverseModelViewMatrix)}draw(t,e){const n=this.gl;if(t.length){for(let e=0;e<t.length;e++)this.draw(t[e]);return}t.bind(this.shaderProgram),void 0!==this.camera&&(this.shader.uniform("uProjectionMatrix","mat4",this.camera.projection),this.shader.uniform("uViewMatrix","mat4",this.camera.matrix)),this.shader.uniform("uModelMatrix","mat4",this._modelMatrix),this.shader.uniform("uNormalMatrix","mat3",this._normalMatrix),this.shader.uniform("uModelViewMatrixInverse","mat3",this._inverseModelViewMatrix);let r=t.drawType;void 0!==e&&(r=e),t.isInstanced?n.drawElementsInstanced(t.drawType,t.iBuffer.numItems,n.UNSIGNED_SHORT,0,t.numInstance):r===n.POINTS?n.drawArrays(r,0,t.vertexSize):n.drawElements(r,t.iBuffer.numItems,n.UNSIGNED_SHORT,0),t.unbind()}drawTransformFeedback(t){const e=this.gl,{meshSource:n,meshDestination:r,numPoints:i,transformFeedback:s}=t;n.bind(this.shaderProgram),r.generateBuffers(this.shaderProgram),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s),r.attributes.forEach((t,n)=>{e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,t.buffer)}),e.enable(e.RASTERIZER_DISCARD),e.beginTransformFeedback(e.POINTS),e.drawArrays(e.POINTS,0,i),e.endTransformFeedback(),e.disable(e.RASTERIZER_DISCARD),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),r.attributes.forEach((t,n)=>{e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,null)}),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),n.unbind()}setSize(t,e){const n=this.gl;this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,n&&this.viewport(0,0,this._width,this._height)}showExtensions(){console.log("Extensions : ",this.extensions);for(const t in this.extensions)this.extensions[t]&&console.log(t,":",this.extensions[t])}checkExtension(t){return!!this.extensions[t]}getExtension(t){return this.extensions[t]}enableAlphaBlending(){const t=this.gl;t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}enableAdditiveBlending(){const t=this.gl;t.blendFunc(t.ONE,t.ONE)}pushMatrix(){const t=a.clone(this._modelMatrix);this._matrixStacks.push(t)}popMatrix(){if(0==this._matrixStacks.length)return null;const t=this._matrixStacks.pop();this.rotate(t)}enable(t){this.gl.enable(t)}disable(t){this.gl.disable(t)}viewport(t,e,n,r){this.setViewport(t,e,n,r)}get FLOAT(){return eo()}get HALF_FLOAT(){return io()}get width(){return this._width}get height(){return this._height}get aspectRatio(){return this._aspectRatio}get webgl2(){return this._useWebGL2}destroy(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(t){console.log("Error : ",t)}this.canvas=null}};var ao=class{constructor(t,e){this._mesh=t,this._shader=e}draw(){this._shader.bind(),oo.draw(this.mesh)}get mesh(){return this._mesh}get shader(){return this._shader}destroy(){this.mesh.destroy();const t=oo.gl;t.useProgram(null),t.deleteProgram(this._shader.shaderProgram)}};const uo=function(t,e){let n;return void 0!==t.buffer?n=t.buffer:(n=e.createBuffer(),t.buffer=n),n};var ho=class{constructor(t=4,e=!0){this.gl=oo.gl,this.drawType=t,this._attributes=[],this._numInstance=-1,this._enabledVertexAttribute=[],this._indices=[],this._faces=[],this._bufferChanged=[],this._hasIndexBufferChanged=!1,this._hasVAO=!1,this._isInstanced=!1,this._extVAO=!!oo.gl.createVertexArray,this._useVAO=!!this._extVAO&&e}bufferVertex(t,e=35044){return this.bufferData(t,"aVertexPosition",3,e),this.normals.length<this.vertices.length&&this.bufferNormal(t,e),this}bufferTexCoord(t,e=35044){return this.bufferData(t,"aTextureCoord",2,e),this}bufferNormal(t,e=35044){return this.bufferData(t,"aNormal",3,e),this}bufferIndex(t,e=!1){const n=this.gl;return this._drawType=e?n.DYNAMIC_DRAW:n.STATIC_DRAW,this._indices=new Uint16Array(t),this._numItems=this._indices.length,this}bufferFlattenData(t,e,n,r=35044,i=!1){const s=function(t,e){const n=[];for(let r=0;r<t.length;r+=e){const i=[];for(let n=0;n<e;n++)i.push(t[r+n]);n.push(i)}return n}(t,n);return this.bufferData(s,e,n,35044,!1),this}bufferData(t,e,n,r=35044,i=!1){let s=0;const o=r,a=[];for(n||(n=t[0].length),this._isInstanced=i||this._isInstanced,s=0;s<t.length;s++)for(let e=0;e<t[s].length;e++)a.push(t[s][e]);const u=new Float32Array(a),h=this.getAttribute(e);return h?(h.itemSize=n,h.dataArray=u,h.source=t):this._attributes.push({name:e,source:t,itemSize:n,drawType:o,dataArray:u,isInstanced:i}),this._bufferChanged.push(e),this}bufferInstance(t,e){if(!oo.gl.vertexAttribDivisor)return void console.error("Extension : ANGLE_instanced_arrays is not supported with this device !");const n=t[0].length;this._numInstance=t.length,this.bufferData(t,e,n,35044,!0)}bind(t){const e=this.gl;this.generateBuffers(t),this.hasVAO?e.bindVertexArray(this.vao):(this.attributes.forEach(t=>{e.bindBuffer(e.ARRAY_BUFFER,t.buffer);const n=t.attrPosition;e.vertexAttribPointer(n,t.itemSize,e.FLOAT,!1,0,0),t.isInstanced&&e.vertexAttribDivisor(n,1)}),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.iBuffer))}generateBuffers(t){const e=this.gl;0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=e.createVertexArray()),e.bindVertexArray(this._vao),this._attributes.forEach(n=>{if(-1!==this._bufferChanged.indexOf(n.name)){const r=uo(n,this.gl);e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n.dataArray,n.drawType);const i=$s(e,t,n.name);e.enableVertexAttribArray(i),e.vertexAttribPointer(i,n.itemSize,e.FLOAT,!1,0,0),n.attrPosition=i,n.isInstanced&&e.vertexAttribDivisor(i,1)}}),this._updateIndexBuffer(),e.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach(n=>{if(-1!==this._bufferChanged.indexOf(n.name)){const r=uo(n,this.gl);e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n.dataArray,n.drawType);const i=$s(e,t,n.name);e.enableVertexAttribArray(i),e.vertexAttribPointer(i,n.itemSize,e.FLOAT,!1,0,0),n.attrPosition=i,n.isInstanced&&e.vertexAttribDivisor(i,1)}}),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}unbind(){const t=this.gl;this._useVAO&&t.bindVertexArray(null),this._attributes.forEach(e=>{e.isInstanced&&t.vertexAttribDivisor(e.attrPosition,0)})}_updateIndexBuffer(){const t=this.gl;this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}computeNormals(t=!1){this.generateFaces(),t?this._computeFaceNormals():this._computeVertexNormals()}_computeFaceNormals(){let t,e;const n=[];for(let r=0;r<this._indices.length;r+=3){t=r/3,e=this._faces[t];const i=e.normal;n[e.indices[0]]=i,n[e.indices[1]]=i,n[e.indices[2]]=i}this.bufferNormal(n)}_computeVertexNormals(){let t;const e=u.create(),n=[],{vertices:r}=this;for(let i=0;i<r.length;i++){u.set(e,0,0,0);for(let n=0;n<this._faces.length;n++)t=this._faces[n],t.indices.indexOf(i)>=0&&(e[0]+=t.normal[0],e[1]+=t.normal[1],e[2]+=t.normal[2]);u.normalize(e,e),n.push([e[0],e[1],e[2]])}this.bufferNormal(n)}generateFaces(){let t,e,n,r,i,s;u.create(),u.create(),u.create();const{vertices:o}=this;for(let a=0;a<this._indices.length;a+=3){t=this._indices[a],e=this._indices[a+1],n=this._indices[a+2],r=o[t],i=o[e],s=o[n];const u={indices:[t,e,n],vertices:[r,i,s]};this._faces.push(u)}}getAttribute(t){return this._attributes.find(e=>e.name===t)}getSource(t){const e=this.getAttribute(t);return e?e.source:[]}destroy(){const t=this.gl;this._attributes.forEach(e=>{const n=uo(e,this.gl);t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(n),e.buffer=null}),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.iBuffer),this.hasVAO&&t.deleteVertexArray(this._vao),this.iBuffer=null,this._vao=null}get vertices(){return this.getSource("aVertexPosition")}get normals(){return this.getSource("aNormal")}get coords(){return this.getSource("aTextureCoord")}get indices(){return this._indices}get vertexSize(){return this.vertices.length}get faces(){return this._faces}get attributes(){return this._attributes}get hasVAO(){return this._hasVAO}get vao(){return this._vao}get numInstance(){return this._numInstance}get isInstanced(){return this._isInstanced}},co="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}";n(12);const lo=(t,e)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},fo=t=>t.slice?t.slice(0):new Float32Array(t);const _o={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"};class po{constructor(t=co,e="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}",n){this.gl=oo.gl,this.parameters=[],this.uniformTextures=[],this._varyings=n,t||(t=co),e||(e=co);const r=this._createShaderProgram(t,!0),i=this._createShaderProgram(e,!1);this._attachShaderProgram(r,i)}bind(){oo.shader!==this&&(this.gl.useProgram(this.shaderProgram),oo.useShader(this),this.uniformTextures=[])}uniform(t,e,n){if("object"==typeof t)return void this.uniformObject(t);const r=_o[e]||e;let i,s=!1,o=-1;for(let e=0;e<this.parameters.length;e++)if(i=this.parameters[e],i.name===t){s=!0,o=e;break}let a=!1;if(s?(this.shaderProgram[t]=i.uniformLoc,a=i.isNumber):(a="uniform1i"===r||"uniform1f"===r,this.shaderProgram[t]=this.gl.getUniformLocation(this.shaderProgram,t),a?this.parameters.push({name:t,type:r,value:n,uniformLoc:this.shaderProgram[t],isNumber:a}):this.parameters.push({name:t,type:r,value:fo(n),uniformLoc:this.shaderProgram[t],isNumber:a}),o=this.parameters.length-1),this.parameters[o].uniformLoc)if(-1===r.indexOf("Matrix"))if(a){(this.parameters[o].value!==n||!s)&&(this.gl[r](this.shaderProgram[t],n),this.parameters[o].value=n)}else lo(this.parameters[o].value,n)&&s||(this.gl[r](this.shaderProgram[t],n),this.parameters[o].value=fo(n));else lo(this.parameters[o].value,n)&&s||(this.gl[r](this.shaderProgram[t],!1,n),this.parameters[o].value=fo(n))}uniformObject(t){for(const e in t){let n=t[e];const r=po.getUniformType(n);if(n.concat&&n[0].concat){let t=[];for(let e=0;e<n.length;e++)t=t.concat(n[e]);n=t}this.uniform(e,r,n)}}_createShaderProgram(t,e){const n=this.gl,r=e?oo.VERTEX_SHADER:oo.FRAGMENT_SHADER,i=n.createShader(r);return n.shaderSource(i,t),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)?i:(console.warn("Error in Shader : ",n.getShaderInfoLog(i)),console.log((t=>{const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=`${t+1}: ${e[t]}`;return e.join("\n")})(t)),null)}_attachShaderProgram(t,e){const n=this.gl;this.shaderProgram=n.createProgram(),n.attachShader(this.shaderProgram,t),n.attachShader(this.shaderProgram,e),n.deleteShader(t),n.deleteShader(e),this._varyings&&(console.log("Transform feedback setup : ",this._varyings),n.transformFeedbackVaryings(this.shaderProgram,this._varyings,n.SEPARATE_ATTRIBS)),n.linkProgram(this.shaderProgram)}destroy(){const t=oo.gl;t.useProgram(null),t.deleteProgram(this.shaderProgram)}}po.getUniformType=function(t){const e=function(t){return 9===t.length?"uniformMatrix3fv":16===t.length?"uniformMatrix4fv":"vec"+t.length};return!!t.concat?t[0].concat?e(t[0]):e(t):"float"};var Eo=po;var mo=class extends ao{constructor(){const t=[],e=[],n=9999;t.push([-n,0,0]),t.push([n,0,0]),t.push([0,-n,0]),t.push([0,n,0]),t.push([0,0,-n]),t.push([0,0,n]),e.push([1,0,0]),e.push([1,0,0]),e.push([0,1,0]),e.push([0,1,0]),e.push([0,0,1]),e.push([0,0,1]);const r=new ho(oo.LINES);r.bufferVertex(t),r.bufferIndex([0,1,2,3,4,5]),r.bufferData(e,"aColor",3),super(r,new Eo("// axis.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vColor = aColor;\n    vNormal = aNormal;\n}","// axis.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\t// vec3 color = vNormal;\n\tvec3 color = vColor + vNormal * 0.0001;\n    gl_FragColor = vec4(color, 1.0);\n}"))}};const To={};let vo;To.plane=function(t,e,n,r="xy",i=4){const s=[],o=[],a=[],u=[],h=t/n,c=e/n,l=1/n,f=.5*-t,_=.5*-e;let d=0;for(let t=0;t<n;t++)for(let e=0;e<n;e++){const i=h*t+f,p=c*e+_,E=t/n,m=e/n;"xz"===r?(s.push([i,0,p+c]),s.push([i+h,0,p+c]),s.push([i+h,0,p]),s.push([i,0,p]),o.push([E,1-(m+l)]),o.push([E+l,1-(m+l)]),o.push([E+l,1-m]),o.push([E,1-m]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0])):"yz"===r?(s.push([0,p,i]),s.push([0,p,i+h]),s.push([0,p+c,i+h]),s.push([0,p+c,i]),o.push([E,m]),o.push([E+l,m]),o.push([E+l,m+l]),o.push([E,m+l]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0])):(s.push([i,p,0]),s.push([i+h,p,0]),s.push([i+h,p+c,0]),s.push([i,p+c,0]),o.push([E,m]),o.push([E+l,m]),o.push([E+l,m+l]),o.push([E,m+l]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1])),a.push(4*d+0),a.push(4*d+1),a.push(4*d+2),a.push(4*d+0),a.push(4*d+2),a.push(4*d+3),d++}const p=new ho(i);return p.bufferVertex(s),p.bufferTexCoord(o),p.bufferIndex(a),p.bufferNormal(u),p},To.sphere=function(t,e,n=!1,r=4){const i=[],s=[],o=[],a=[],u=1/e;let h=0;function c(n,r,i=!1){const s=n/e*Math.PI-.5*Math.PI,o=r/e*Math.PI*2,a=i?1:t,u=[];u[1]=Math.sin(s)*a;const h=Math.cos(s)*a;u[0]=Math.cos(o)*h,u[2]=Math.sin(o)*h;return u[0]=Math.floor(1e4*u[0])/1e4,u[1]=Math.floor(1e4*u[1])/1e4,u[2]=Math.floor(1e4*u[2])/1e4,u}for(let t=0;t<e;t++)for(let n=0;n<e;n++){i.push(c(t,n)),i.push(c(t+1,n)),i.push(c(t+1,n+1)),i.push(c(t,n+1)),a.push(c(t,n,!0)),a.push(c(t+1,n,!0)),a.push(c(t+1,n+1,!0)),a.push(c(t,n+1,!0));const r=n/e,l=t/e;s.push([1-r,l]),s.push([1-r,l+u]),s.push([1-r-u,l+u]),s.push([1-r-u,l]),o.push(4*h+0),o.push(4*h+1),o.push(4*h+2),o.push(4*h+0),o.push(4*h+2),o.push(4*h+3),h++}n&&o.reverse();const l=new ho(r);return l.bufferVertex(i),l.bufferTexCoord(s),l.bufferIndex(o),l.bufferNormal(a),l},To.cube=function(t,e,n,r=4){const i=t/2,s=(e=e||t)/2,o=(n=n||t)/2,a=[],u=[],h=[],c=[];let l=0;a.push([-i,s,-o]),a.push([i,s,-o]),a.push([i,-s,-o]),a.push([-i,-s,-o]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*l+0),h.push(4*l+1),h.push(4*l+2),h.push(4*l+0),h.push(4*l+2),h.push(4*l+3),l++,a.push([i,s,-o]),a.push([i,s,o]),a.push([i,-s,o]),a.push([i,-s,-o]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*l+0),h.push(4*l+1),h.push(4*l+2),h.push(4*l+0),h.push(4*l+2),h.push(4*l+3),l++,a.push([i,s,o]),a.push([-i,s,o]),a.push([-i,-s,o]),a.push([i,-s,o]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*l+0),h.push(4*l+1),h.push(4*l+2),h.push(4*l+0),h.push(4*l+2),h.push(4*l+3),l++,a.push([-i,s,o]),a.push([-i,s,-o]),a.push([-i,-s,-o]),a.push([-i,-s,o]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*l+0),h.push(4*l+1),h.push(4*l+2),h.push(4*l+0),h.push(4*l+2),h.push(4*l+3),l++,a.push([i,s,-o]),a.push([-i,s,-o]),a.push([-i,s,o]),a.push([i,s,o]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*l+0),h.push(4*l+1),h.push(4*l+2),h.push(4*l+0),h.push(4*l+2),h.push(4*l+3),l++,a.push([i,-s,o]),a.push([-i,-s,o]),a.push([-i,-s,-o]),a.push([i,-s,-o]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*l+0),h.push(4*l+1),h.push(4*l+2),h.push(4*l+0),h.push(4*l+2),h.push(4*l+3),l++;const f=new ho(r);return f.bufferVertex(a),f.bufferTexCoord(u),f.bufferIndex(h),f.bufferNormal(c),f},To.skybox=function(t,e=4){const n=[],r=[],i=[],s=[];let o=0;n.push([t,t,-t]),n.push([-t,t,-t]),n.push([-t,-t,-t]),n.push([t,-t,-t]),s.push([0,0,-1]),s.push([0,0,-1]),s.push([0,0,-1]),s.push([0,0,-1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*o+0),i.push(4*o+1),i.push(4*o+2),i.push(4*o+0),i.push(4*o+2),i.push(4*o+3),o++,n.push([t,-t,-t]),n.push([t,-t,t]),n.push([t,t,t]),n.push([t,t,-t]),s.push([1,0,0]),s.push([1,0,0]),s.push([1,0,0]),s.push([1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*o+0),i.push(4*o+1),i.push(4*o+2),i.push(4*o+0),i.push(4*o+2),i.push(4*o+3),o++,n.push([-t,t,t]),n.push([t,t,t]),n.push([t,-t,t]),n.push([-t,-t,t]),s.push([0,0,1]),s.push([0,0,1]),s.push([0,0,1]),s.push([0,0,1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*o+0),i.push(4*o+1),i.push(4*o+2),i.push(4*o+0),i.push(4*o+2),i.push(4*o+3),o++,n.push([-t,-t,t]),n.push([-t,-t,-t]),n.push([-t,t,-t]),n.push([-t,t,t]),s.push([-1,0,0]),s.push([-1,0,0]),s.push([-1,0,0]),s.push([-1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*o+0),i.push(4*o+1),i.push(4*o+2),i.push(4*o+0),i.push(4*o+2),i.push(4*o+3),o++,n.push([t,t,t]),n.push([-t,t,t]),n.push([-t,t,-t]),n.push([t,t,-t]),s.push([0,1,0]),s.push([0,1,0]),s.push([0,1,0]),s.push([0,1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*o+0),i.push(4*o+1),i.push(4*o+2),i.push(4*o+0),i.push(4*o+2),i.push(4*o+3),o++,n.push([t,-t,-t]),n.push([-t,-t,-t]),n.push([-t,-t,t]),n.push([t,-t,t]),s.push([0,-1,0]),s.push([0,-1,0]),s.push([0,-1,0]),s.push([0,-1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*o+0),i.push(4*o+1),i.push(4*o+2),i.push(4*o+0),i.push(4*o+2),i.push(4*o+3);const a=new ho(e);return a.bufferVertex(n),a.bufferTexCoord(r),a.bufferIndex(i),a.bufferNormal(s),a},To.bigTriangle=function(){return vo=new ho,vo.bufferData([[-1,-1],[-1,4],[4,-1]],"aPosition",2),vo.bufferIndex([2,1,0]),vo};var go=To,Ro="// generalWithNormal.vert\n\n#define SHADER_NAME GENERAL_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec3 position;\nuniform vec3 scale;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tvec3 pos      = aVertexPosition * scale;\n\tpos           += position;\n\tgl_Position   = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n\t\n\tvTextureCoord = aTextureCoord;\n\tvNormal       = normalize(uNormalMatrix * aNormal);\n}",Ao="// simpleColor.frag\n\n#define SHADER_NAME SIMPLE_COLOR\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(color, opacity);\n}";var xo=class extends ao{constructor(){super(go.sphere(1,24),new Eo(Ro,Ao))}draw(t=[0,0,0],e=[1,1,1],n=[1,1,1],r=1){this.shader.bind(),this.shader.uniform("position","uniform3fv",t),this.shader.uniform("scale","uniform3fv",e),this.shader.uniform("color","uniform3fv",n),this.shader.uniform("opacity","uniform1f",r),super.draw()}},Mo="// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}",bo="// copy.frag\n\n#define SHADER_NAME COPY_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}";var yo=class extends ao{constructor(){const t=go.bigTriangle(),e=new Eo(Mo,bo);super(t,e),e.bind(),e.uniform("texture","uniform1i",0)}draw(t){this.shader.bind(),t.bind(0),super.draw()}};var Lo=class extends ao{constructor(){const t=[],e=[];let n=0;let r,i;for(r=-100;r<100;r+=1)for(i=-100;i<100;i+=1)t.push([r,i,0]),e.push(n),n++,t.push([r,0,i]),e.push(n),n++;const s=new ho(oo.POINTS);s.bufferVertex(t),s.bufferIndex(e),super(s,new Eo("// basic.vert\n\n#define SHADER_NAME DOTS_PLANE_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 viewport;\n\nvarying vec3 vNormal;\n\nconst float radius = 0.008;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition + aNormal * 0.000001, 1.0);\n    // gl_PointSize = 1.0;\n    vNormal = aNormal;\n\n\tfloat distOffset = viewport.y * uProjectionMatrix[1][1] * radius / gl_Position.w;\n    gl_PointSize = distOffset;\n}","// dotsPlane.frag\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n\tif(distance(gl_PointCoord, vec2(.5)) > .5) {\n\t\tdiscard;\n\t}\n    gl_FragColor = vec4(color, opacity);\n}")),this.color=[1,1,1],this.opacity=.65}draw(){this.shader.bind(),this.shader.uniform("color","uniform3fv",this.color),this.shader.uniform("opacity","uniform1f",this.opacity),this.shader.uniform("viewport","vec2",[oo.width,oo.height]),super.draw()}};var Io=class extends ao{constructor(){const t=[];t.push([0,0,0]),t.push([0,0,0]);const e=new ho(oo.LINES);e.bufferVertex(t),e.bufferTexCoord([[0,0],[1,1]]),e.bufferIndex([0,1]),super(e,new Eo(co,Ao))}draw(t,e,n=[1,1,1],r=1){this._mesh.bufferVertex([t,e]),this._shader.bind(),this._shader.uniform("color","vec3",n),this._shader.uniform("opacity","float",r),super.draw()}};var So=class extends ao{constructor(t=50,e=24){super(go.sphere(t,e,!0),new Eo("// sky.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n    gl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}",bo))}draw(t){this.shader.bind(),t.bind(0),super.draw()}},No="// basic.frag\n\n#define SHADER_NAME SKYBOX_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\nuniform samplerCube texture;\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\n\nvoid main(void) {\n    gl_FragColor = textureCube(texture, vVertex);\n}",wo="// basic.vert\n\n#define SHADER_NAME SKYBOX_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n\tgl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n\tvTextureCoord = aTextureCoord;\n\t\n\tvVertex = aVertexPosition;\n\tvNormal = aNormal;\n}";var Po=class extends ao{constructor(t=20){super(go.skybox(t),new Eo(wo,No))}draw(t){this.shader.bind(),t.bind(0),super.draw()}};var Co=class{constructor(t=!1){this._req=new XMLHttpRequest,this._req.addEventListener("load",t=>this._onLoaded(t)),this._req.addEventListener("progress",t=>this._onProgress(t)),t&&(this._req.responseType="arraybuffer")}load(t,e){console.log("Loading : ",t),this._callback=e,this._req.open("GET",t),this._req.send()}_onLoaded(){this._callback(this._req.response)}_onProgress(){}};var Fo=class{constructor(){this._matrix=a.create(),this._quat=c.create(),this._orientation=a.create(),this._projection=a.create(),this.position=vec3.create()}lookAt(t,e,n=[0,1,0]){this._eye=vec3.clone(t),this._center=vec3.clone(e),vec3.copy(this.position,t),a.identity(this._matrix),a.lookAt(this._matrix,t,e,n)}setFromOrientation(t,e,n,r){c.set(this._quat,t,e,n,r),a.fromQuat(this._orientation,this._quat),a.translate(this._matrix,this._orientation,this.positionOffset)}setProjection(t){this._projection=a.clone(t)}setView(t){this._matrix=a.clone(t)}setFromViewProj(t,e){this.setView(t),this.setProjection(e)}get matrix(){return this._matrix}get viewMatrix(){return this._matrix}get projection(){return this._projection}get projectionMatrix(){return this._projection}get eye(){return this._eye}get center(){return this._center}};const Uo=u.create(),Oo=u.create(),Do=u.create(),Bo=u.create(),Xo=u.create(),Vo=u.create(),Go=u.create(),Ho=u.create();var zo=class{constructor(t,e){this.origin=u.clone(t),this.direction=u.clone(e)}at(t){return u.copy(Bo,this.direction),u.scale(Bo,Bo,t),u.add(Bo,Bo,this.origin),Bo}lookAt(t){u.sub(this.direction,t,this.origin),u.normalize(this.origin,this.origin)}closestPointToPoint(t){const e=u.create();u.sub(t,this.origin);const n=u.dot(e,this.direction);return n<0?u.clone(this.origin):(u.copy(e,this.direction),u.scale(e,e,n),u.add(e,e,this.origin),e)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=u.create();u.sub(e,t,this.origin);const n=u.dot(e,this.direction);return n<0?u.squaredDistance(this.origin,t):(u.copy(e,this.direction),u.scale(e,e,n),u.add(e,e,this.origin),u.squaredDistance(e,t))}intersectsSphere(t,e){return this.distanceToPoint(t)<=e}intersectSphere(t,e){const n=u.create();u.sub(n,t,this.origin);const r=u.dot(n,this.direction),i=u.dot(n,n)-r*r,s=e*e;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,h=r+o;return a<0&&h<0?null:a<0?this.at(h):this.at(a)}distanceToPlane(t,e){u.dot(e,this.direction)}intersectTriangle(t,e,n,r=!0){u.copy(Uo,t),u.copy(Oo,e),u.copy(Do,n),u.sub(Xo,Oo,Uo),u.sub(Vo,Do,Uo),u.cross(Go,Xo,Vo);let i,s=u.dot(this.direction,Go);if(s>0){if(r)return null;i=1}else{if(!(s<0))return null;i=-1,s=-s}u.sub(Ho,this.origin,Uo),u.cross(Vo,Ho,Vo);const o=i*u.dot(this.direction,Vo);if(o<0)return null;u.cross(Xo,Xo,Ho);const a=i*u.dot(this.direction,Xo);if(a<0)return null;if(o+a>s)return null;const h=-i*u.dot(Ho,Go);return h<0?null:this.at(h/s)}};const ko=a.create(),Yo=u.create();var jo=class extends Fo{constructor(t,e,n,r){super(),t&&this.setPerspective(t,e,n,r)}setPerspective(t,e,n,r){this._fov=t,this._near=n,this._far=r,this._aspectRatio=e,a.perspective(this._projection,t,e,n,r)}setAspectRatio(t){this._aspectRatio=t,a.perspective(this.projection,this._fov,t,this._near,this._far)}generateRay(t,e){const n=this.projectionMatrix,r=this.viewMatrix;return a.multiply(ko,n,r),a.invert(ko,ko),u.transformMat4(Yo,t,ko),u.sub(Yo,Yo,this.position),u.normalize(Yo,Yo),e?(e.origin=this.position,e.direction=Yo):e=new zo(this.position,Yo),e}};const Wo=[[u.fromValues(0,0,0),u.fromValues(1,0,0),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(-1,0,0),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(0,1,0),u.fromValues(0,0,1)],[u.fromValues(0,0,0),u.fromValues(0,-1,0),u.fromValues(0,0,-1)],[u.fromValues(0,0,0),u.fromValues(0,0,1),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(0,0,-1),u.fromValues(0,-1,0)]];var qo=class extends jo{constructor(){super(),this.setPerspective(Math.PI/2,1,.1,1e3)}face(t){const e=Wo[t];this.lookAt(e[0],e[1],e[2])}};var Zo=class extends Fo{constructor(){super();const t=u.clone([0,0,5]),e=u.create(),n=u.clone([0,1,0]);this.lookAt(t,e,n),this.ortho(-1,1,1,-1)}setBoundary(t,e,n,r,i=.1,s=100){this.ortho(t,e,n,r,i,s)}ortho(t,e,n,r,i=.1,s=100){this.left=t,this.right=e,this.top=n,this.bottom=r,mat4.ortho(this._projection,t,e,r,n,i,s)}},Ko=n(5),Qo=n.n(Ko);let $o;class Jo{constructor(t,e={},n=!1){if($o=oo.gl,n)return void(this.texture=t);let r=t.length>6;t[0].mipmapCount&&(r=t[0].mipmapCount>1),this.texture=$o.createTexture(),this.magFilter=e.magFilter||$o.LINEAR,this.minFilter=e.minFilter||$o.LINEAR_MIPMAP_LINEAR,this.wrapS=e.wrapS||$o.CLAMP_TO_EDGE,this.wrapT=e.wrapT||$o.CLAMP_TO_EDGE,r||this.minFilter!=$o.LINEAR_MIPMAP_LINEAR||(this.minFilter=$o.LINEAR),$o.bindTexture($o.TEXTURE_CUBE_MAP,this.texture);const i=[$o.TEXTURE_CUBE_MAP_POSITIVE_X,$o.TEXTURE_CUBE_MAP_NEGATIVE_X,$o.TEXTURE_CUBE_MAP_POSITIVE_Y,$o.TEXTURE_CUBE_MAP_NEGATIVE_Y,$o.TEXTURE_CUBE_MAP_POSITIVE_Z,$o.TEXTURE_CUBE_MAP_NEGATIVE_Z];let s=1,o=0;if(s=t.length/6,this.numLevels=s,r)for(let e=0;e<6;e++)for(let n=0;n<s;n++)$o.pixelStorei($o.UNPACK_FLIP_Y_WEBGL,!1),o=e*s+n,t[o].shape?$o.texImage2D(i[e],n,$o.RGBA,t[o].shape[0],t[o].shape[1],0,$o.RGBA,$o.FLOAT,t[o].data):$o.texImage2D(i[e],n,$o.RGBA,$o.RGBA,$o.UNSIGNED_BYTE,t[o]),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_WRAP_S,this.wrapS),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_WRAP_T,this.wrapT),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_MAG_FILTER,this.magFilter),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_MIN_FILTER,this.minFilter);else{let e=0;for(let n=0;n<6;n++)e=n*s,$o.pixelStorei($o.UNPACK_FLIP_Y_WEBGL,!1),t[e].shape?$o.texImage2D(i[n],0,$o.RGBA,t[e].shape[0],t[e].shape[1],0,$o.RGBA,$o.FLOAT,t[e].data):$o.texImage2D(i[n],0,$o.RGBA,$o.RGBA,$o.UNSIGNED_BYTE,t[e]),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_WRAP_S,this.wrapS),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_WRAP_T,this.wrapT),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_MAG_FILTER,this.magFilter),$o.texParameteri($o.TEXTURE_CUBE_MAP,$o.TEXTURE_MIN_FILTER,this.minFilter);$o.generateMipmap($o.TEXTURE_CUBE_MAP)}$o.bindTexture($o.TEXTURE_CUBE_MAP,null)}bind(t=0){oo.shader&&($o.activeTexture($o.TEXTURE0+t),$o.bindTexture($o.TEXTURE_CUBE_MAP,this.texture),$o.uniform1i(oo.shader.uniformTextures[t],t),this._bindIndex=t)}unbind(){$o.bindTexture($o.TEXTURE_CUBE_MAP,null)}}Jo.parseDDS=function(t){const e=Qo()(t),{flags:n}=e,r=new Int32Array(t,0,31);let i=1;131072&n&&(i=Math.max(1,r[7]));const s=e.images.map(e=>({data:new Float32Array(t.slice(e.offset,e.offset+e.length)),shape:e.shape,mipmapCount:i}));return new Jo(s)};var ta=Jo;let ea;var na=class{constructor(t,e={}){ea=oo.gl,this._size=t,this.magFilter=e.magFilter||ea.LINEAR,this.minFilter=e.minFilter||ea.LINEAR,this.wrapS=e.wrapS||ea.CLAMP_TO_EDGE,this.wrapT=e.wrapT||ea.CLAMP_TO_EDGE,this._init()}_init(){this.texture=ea.createTexture(),this.glTexture=new ta(this.texture,{},!0),ea.bindTexture(ea.TEXTURE_CUBE_MAP,this.texture),ea.texParameteri(ea.TEXTURE_CUBE_MAP,ea.TEXTURE_MAG_FILTER,this.magFilter),ea.texParameteri(ea.TEXTURE_CUBE_MAP,ea.TEXTURE_MIN_FILTER,this.minFilter),ea.texParameteri(ea.TEXTURE_CUBE_MAP,ea.TEXTURE_WRAP_S,this.wrapS),ea.texParameteri(ea.TEXTURE_CUBE_MAP,ea.TEXTURE_WRAP_T,this.wrapT);const t=[ea.TEXTURE_CUBE_MAP_POSITIVE_X,ea.TEXTURE_CUBE_MAP_NEGATIVE_X,ea.TEXTURE_CUBE_MAP_POSITIVE_Y,ea.TEXTURE_CUBE_MAP_NEGATIVE_Y,ea.TEXTURE_CUBE_MAP_POSITIVE_Z,ea.TEXTURE_CUBE_MAP_NEGATIVE_Z];for(let e=0;e<t.length;e++)ea.pixelStorei(ea.UNPACK_FLIP_Y_WEBGL,!1),ea.texImage2D(t[e],0,ea.RGBA,this.width,this.height,0,ea.RGBA,ea.FLOAT,null);this._frameBuffers=[];for(let e=0;e<t.length;e++){const n=ea.createFramebuffer();ea.bindFramebuffer(ea.FRAMEBUFFER,n),ea.framebufferTexture2D(ea.FRAMEBUFFER,ea.COLOR_ATTACHMENT0,t[e],this.texture,0);const r=ea.checkFramebufferStatus(ea.FRAMEBUFFER);r!==ea.FRAMEBUFFER_COMPLETE&&console.log("'gl.checkFramebufferStatus() returned '"+r),this._frameBuffers.push(n)}ea.bindFramebuffer(ea.FRAMEBUFFER,null),ea.bindRenderbuffer(ea.RENDERBUFFER,null),ea.bindTexture(ea.TEXTURE_CUBE_MAP,null)}bind(t){oo.viewport(0,0,this.width,this.height),ea.bindFramebuffer(ea.FRAMEBUFFER,this._frameBuffers[t])}unbind(){ea.bindFramebuffer(ea.FRAMEBUFFER,null),oo.viewport(0,0,oo.width,oo.height)}getTexture(){return this.glTexture}get width(){return this._size}get height(){return this._size}};var ra=class{constructor(){return this._uniforms={},this._uniformTextures=[],this._fbo,this._clearColor={r:0,g:0,b:0,a:0},this}setClearColor(t=0,e=0,n=0,r=0){return this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=n,this._clearColor.a=r,this}useProgram(t,e){return this._shader=t instanceof Eo?t:new Eo(t,e),this}setMesh(t){return this._mesh=t,this}createMesh(t){return this._mesh=new ho(t),this}bufferVertex(t){return this._mesh||(this._mesh=new ho),this._mesh.bufferVertex(t),this}bufferTexCoord(t){return this._mesh||(this._mesh=new ho),this._mesh.bufferTexCoord(t),this}bufferNormal(t){return this._mesh||(this._mesh=new ho),this._mesh.bufferNormal(t),this}bufferIndex(t){return this._mesh||(this._mesh=new ho),this._mesh.bufferIndex(t),this}bufferInstance(t,e){return this._mesh?(this._mesh.bufferInstance(t,e),this):(console.warn("Need to create mesh first"),this)}bufferData(t,e){return this._mesh||(this._mesh=new ho),this._mesh.bufferData(t,e),this}uniform(t,e,n){return this._uniforms[t]={type:e,value:n},this}uniformTexture(t,e,n){return void 0!==n?this._uniformTextures[n]={name:t,texture:e}:this._uniformTextures.push({name:t,texture:e}),this}bindFrameBuffer(t){return this._fbo=t,this}draw(){if(this._shader&&this._mesh){if(this._fbo){const{r:t,g:e,b:n,a:r}=this._clearColor;this._fbo.bind(),oo.clear(t,e,n,r)}this._shader.bind();for(const t in this._uniforms){const e=this._uniforms[t];this._shader.uniform(t,e.type,e.value)}return this._uniformTextures.forEach((t,e)=>{void 0!==t&&(this._shader.uniform(t.name,"uniform1i",e),t.texture.bind(e))}),oo.draw(this._mesh),this._fbo&&this._fbo.unbind(),this}}get shader(){return this._shader}get framebuffer(){return this._fbo}};var ia=new class{constructor(){this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._startTime=(new Date).getTime(),this._deltaTime=0,this._internalTime=0,this._isPaused=!1,this._loop()}addEF(t,e){e=e||[];const n=this._idTable;return this._enterframeTasks[n]={func:t,params:e},this._idTable++,n}removeEF(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1}delay(t,e,n){const r={func:t,params:e,delay:n,time:(new Date).getTime()};this._delayTasks.push(r)}defer(t,e){const n={func:t,params:e};this._deferTasks.push(n)}next(t,e){const n={func:t,params:e};this._nextTasks.push(n)}usurp(t,e){const n={func:t,params:e};this._usurpTask.push(n)}pause(){this._isPaused=!0}advance(){this._internalTime+=1/60}resume(){this._isPaused=!1}_process(){let t,e,n,r=0;for(r=0;r<this._enterframeTasks.length;r++)t=this._enterframeTasks[r],null!=t&&t.func(t.params);for(;this._highTasks.length>0;)t=this._highTasks.pop(),t.func(t.params);let i=(new Date).getTime(),s=this._deltaTime;for(this._deltaTime=(i-this._startTime)/1e3,r=0;r<this._delayTasks.length;r++)t=this._delayTasks[r],i-t.time>t.delay&&(t.func(t.params),this._delayTasks.splice(r,1));for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/60;this._deferTasks.length>0;){if(t=this._deferTasks.shift(),n=(new Date).getTime(),!(n-i<e)){this._deferTasks.unshift(t);break}t.func(t.params)}for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/60;this._usurpTask.length>0;)t=this._usurpTask.shift(),n=(new Date).getTime(),n-i<e&&t.func(t.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[],this._isPaused||(this._internalTime+=this._deltaTime-s)}_loop(){this._process(),window.requestAnimationFrame(()=>this._loop())}get intervalTime(){return this._internalTime}get deltaTime(){return this._deltaTime}};var sa=class{constructor(t,e=.1){this.easing=e,this._value=t,this._targetValue=t,this._efIndex=ia.addEF(()=>this._update())}_update(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}setTo(t){this._targetValue=this._value=t}add(t){this._targetValue+=t}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){ia.removeEF(this._efIndex)}set value(t){this._targetValue=t}get value(){return this._value}get targetValue(){return this._targetValue}};let oa=!0;try{let t=document.createEvent("CustomEvent");t=null}catch(t){oa=!1}var aa=class{constructor(){this._eventListeners={}}addEventListener(t,e){return null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={}),this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e),this}on(t,e){return this.addEventListener(t,e)}removeEventListener(t,e){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});const n=this._eventListeners[t];if(void 0===n)return this;let r=n.length;for(let t=0;t<r;t++)n[t]===e&&(n.splice(t,1),t--,r--);return this}off(t,e){return this.removeEventListener(t,e)}dispatchEvent(t){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});const e=t.type;try{null===t.target&&(t.target=this),t.currentTarget=this}catch(n){const r={type:e,detail:t.detail,dispatcher:this};return this.dispatchEvent(r)}const n=this._eventListeners[e];if(null!=n){const e=this._copyArray(n),r=e.length;for(let n=0;n<r;n++){e[n].call(this,t)}}return this}dispatchCustomEvent(t,e){let n;return oa?(n=document.createEvent("CustomEvent"),n.dispatcher=this,n.initCustomEvent(t,!1,!1,e)):n={type:t,detail:e,dispatcher:this},this.dispatchEvent(n)}trigger(t,e){return this.dispatchCustomEvent(t,e)}_destroy(){if(null!==this._eventListeners){for(const t in this._eventListeners)if(this._eventListeners.hasOwnProperty(t)){const e=this._eventListeners[t],n=e.length;for(let t=0;t<n;t++)e[t]=null;delete this._eventListeners[t]}this._eventListeners=null}}_copyArray(t){const e=new Array(t.length),n=e.length;for(let r=0;r<n;r++)e[r]=t[r];return e}};function ua(t){return 0!==t&&!(t&t-1)}var ha=function(t,e,n,r){if(!t.minFilter){let e=oo.LINEAR;n&&n&&ua(n)&&ua(r)&&(e=oo.NEAREST_MIPMAP_LINEAR),t.minFilter=e}return t.mipmap=void 0===t.mipmap||t.mipmap,t.magFilter=t.magFilter||oo.LINEAR,t.wrapS=t.wrapS||oo.CLAMP_TO_EDGE,t.wrapT=t.wrapT||oo.CLAMP_TO_EDGE,t.internalFormat=t.internalFormat||oo.RGBA,t.format=t.format||oo.RGBA,t.premultiplyAlpha=void 0!==t.premultiplyAlpha&&t.premultiplyAlpha,t.level=t.level||0,t},ca=n(0),la=n.n(ca);let fa,_a,da,pa;class Ea{constructor(t,e={},n=0,r=0){fa=oo.gl,this._source=t,this._getDimension(t,n,r),this._sourceType=e.type||function(t){let e=oo.UNSIGNED_BYTE;t instanceof Array||t instanceof Uint8Array?e=oo.UNSIGNED_BYTE:t instanceof Float32Array?e=oo.FLOAT:t instanceof HTMLImageElement?e="image":t instanceof HTMLCanvasElement?e="canvas":t instanceof HTMLVideoElement&&(e="video");return e}(t),this._checkSource(),this._texelType=this._getTexelType(),this._isTextureReady=!0,this._params=ha(e,t,this._width,this._height),this._checkMipmap(),this._checkWrapping(),this._texture=fa.createTexture(),"video"===this._sourceType?(this._isTextureReady=!1,ia.addEF(()=>this._loop())):this._uploadTexture()}_loop(){4===this._source.readyState&&(this._isTextureReady=!0,this._uploadTexture())}_uploadTexture(){fa.bindTexture(fa.TEXTURE_2D,this._texture),fa.pixelStorei(fa.UNPACK_FLIP_Y_WEBGL,!0),this._isSourceHtmlElement()?fa.texImage2D(fa.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._texelType,this._source):fa.texImage2D(fa.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._texelType,this._source),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MAG_FILTER,this._params.magFilter),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MIN_FILTER,this._params.minFilter),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_WRAP_S,this._params.wrapS),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_WRAP_T,this._params.wrapT),fa.pixelStorei(fa.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._generateMipmap&&fa.generateMipmap(fa.TEXTURE_2D),fa.bindTexture(fa.TEXTURE_2D,null)}bind(t){void 0===t&&(t=0),oo.shader&&(fa.activeTexture(fa.TEXTURE0+t),this._isTextureReady?fa.bindTexture(fa.TEXTURE_2D,this._texture):fa.bindTexture(fa.TEXTURE_2D,Ea.blackTexture().texture),this._bindIndex=t)}updateTexture(t){this._source=t,this._checkSource(),this._uploadTexture()}generateMipmap(){this._generateMipmap&&(fa.bindTexture(fa.TEXTURE_2D,this._texture),fa.generateMipmap(fa.TEXTURE_2D),fa.bindTexture(fa.TEXTURE_2D,null))}showParameters(){console.log("Source type : ",la.a[this._sourceType]||this._sourceType),console.log("Texel type:",la.a[this.texelType]),console.log("Dimension :",this._width,this._height);for(const t in this._params)console.log(t,la.a[this._params[t]]||this._params[t]);console.log("Mipmapping :",this._generateMipmap)}_getDimension(t,e,n){t?(this._width=t.width||t.videoWidth,this._height=t.height||t.videoWidth,this._width=this._width||e,this._height=this._height||n,this._width&&this._height||(this._width=this._height=Math.sqrt(t.length/4))):(this._width=e,this._height=n)}_checkSource(){this._source&&(this._sourceType===oo.UNSIGNED_BYTE?this._source instanceof Uint8Array||(this._source=new Uint8Array(this._source)):this._sourceType===oo.FLOAT&&(this._source instanceof Float32Array||(this._source=new Float32Array(this._source))))}_getTexelType(){return this._isSourceHtmlElement()?oo.UNSIGNED_BYTE:oo[la.a[this._sourceType]]}_checkMipmap(){this._generateMipmap=this._params.mipmap,ma(this._width)&&ma(this._height)||(this._generateMipmap=!1),-1===la.a[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}_checkWrapping(){this._generateMipmap||(this._params.wrapS=oo.CLAMP_TO_EDGE,this._params.wrapT=oo.CLAMP_TO_EDGE)}_isSourceHtmlElement(){return"image"===this._sourceType||"video"===this._sourceType||"canvas"===this._sourceType}get minFilter(){return this._params.minFilter}set minFilter(t){this._params.minFilter=t,this._checkMipmap(),fa.bindTexture(fa.TEXTURE_2D,this._texture),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MIN_FILTER,this._params.minFilter),fa.bindTexture(fa.TEXTURE_2D,null),this.generateMipmap()}get magFilter(){return this._params.minFilter}set magFilter(t){this._params.magFilter=t,fa.bindTexture(fa.TEXTURE_2D,this._texture),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MAG_FILTER,this._params.magFilter),fa.bindTexture(fa.TEXTURE_2D,null)}get wrapS(){return this._params.wrapS}set wrapS(t){this._params.wrapS=t,this._checkWrapping(),fa.bindTexture(fa.TEXTURE_2D,this._texture),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_WRAP_S,this._params.wrapS),fa.bindTexture(fa.TEXTURE_2D,null)}get wrapT(){return this._params.wrapT}set wrapT(t){this._params.wrapT=t,this._checkWrapping(),fa.bindTexture(fa.TEXTURE_2D,this._texture),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_WRAP_T,this._params.wrapT),fa.bindTexture(fa.TEXTURE_2D,null)}get texelType(){return this._texelType}get width(){return this._width}get height(){return this._height}get texture(){return this._texture}get isTextureReady(){return this._isTextureReady}}function ma(t){return 0!==t&&!(t&t-1)}Ea.whiteTexture=function(){if(void 0===_a){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,2,2),_a=new Ea(t)}return _a},Ea.greyTexture=function(){if(void 0===da){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,2,2),da=new Ea(t)}return da},Ea.blackTexture=function(){if(void 0===pa){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,2,2),pa=new Ea(t)}return pa};var Ta=Ea;let va,ga,Ra=!1;var Aa=class{constructor(t,e,n={},r=1){this.gl=oo.gl,va=oo.checkExtension("WEBGL_depth_texture")||oo.webgl2,this.width=t,this.height=e,this._numTargets=r,this._multipleTargets=r>1,this._parameters=n,Ra||oo.webgl2||(ga=oo.getExtension("WEBGL_draw_buffers")),this._multipleTargets&&this._checkMaxNumRenderTarget(),this._init()}_init(){const t=this.gl;if(this._initTextures(),this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),oo.webgl2){const e=[];for(let n=0;n<this._numTargets;n++)t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.TEXTURE_2D,this._textures[n].texture,0),e.push(t["COLOR_ATTACHMENT"+n]);t.drawBuffers(e),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.glDepthTexture.texture,0)}else{for(let e=0;e<this._numTargets;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,this._textures[e].texture,0);if(this._multipleTargets){const t=[];for(let e=0;e<this._numTargets;e++)t.push(ga[`COLOR_ATTACHMENT${e}_WEBGL`]);ga.drawBuffersWEBGL(t)}va&&t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.glDepthTexture.texture,0)}const e=t.checkFramebufferStatus(t.FRAMEBUFFER);e!=t.FRAMEBUFFER_COMPLETE&&(console.error("FBOstatus",e),console.error("GL_FRAMEBUFFER_COMPLETE failed, CANNOT use Framebuffer")),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.clear()}_checkMaxNumRenderTarget(){const t=oo.gl.getParameter(ga.MAX_DRAW_BUFFERS_WEBGL);this._numTargets>t&&(console.error("Over max number of draw buffers supported : ",t),this._numTargets=t)}_initTextures(){const t=this.gl;this._textures=[];for(let t=0;t<this._numTargets;t++){const t=this._createTexture();this._textures.push(t)}oo.webgl2?this.glDepthTexture=this._createTexture(t.DEPTH_COMPONENT16,t.UNSIGNED_SHORT,t.DEPTH_COMPONENT,{minFilter:oo.NEAREST,magFilter:oo.NEAREST,mipmap:!1}):this.glDepthTexture=this._createTexture(t.DEPTH_COMPONENT,t.UNSIGNED_SHORT,t.DEPTH_COMPONENT,{minFilter:oo.LINEAR})}_createTexture(t,e,n,r={}){const i=this.gl,s=Object.assign({},this._parameters);n||(n=t),s.internalFormat=t||i.RGBA,s.format=n,s.type=s.type||e||oo.UNSIGNED_BYTE,e===i.UNSIGNED_SHORT&&(s.type=e);for(const t in r)s[t]=r[t];return new Ta(null,s,this.width,this.height)}bind(t=!0){const e=this.gl;t&&oo.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer)}unbind(t=!0){const e=this.gl;t&&oo.viewport(0,0,oo.width,oo.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this._textures.forEach(t=>{t.generateMipmap()})}clear(t=0,e=0,n=0,r=0){this.bind(),oo.clear(t,e,n,r),this.unbind()}getTexture(t=0){return this._textures[t]}getDepthTexture(){return this.glDepthTexture}destroy(){const t=this.gl;t.deleteFramebuffer(this.framebuffer),this._textures.forEach(e=>{t.deleteTexture(e._texture)}),t.deleteTexture(this.glDepthTexture._texture)}get texture(){return this._textures[0]}get depthTexture(){return this.glDepthTexture}get minFilter(){return this._textures[0].minFilter}set minFilter(t){this._textures.forEach(e=>{e.minFilter=t})}get magFilter(){return this._textures[0].magFilter}set magFilter(t){this._textures.forEach(e=>{e.magFilter=t})}get wrapS(){return this._textures[0].wrapS}set wrapS(t){this._textures.forEach(e=>{e.wrapS=t})}get wrapT(){return this._textures[0].wrapT}set wrapT(t){this._textures.forEach(e=>{e.wrapT=t})}showParameters(){this._textures[0].showParameters()}get numTargets(){return this._numTargets}};var xa=class{constructor(t,e,n,r={},i=1){this._fbos=[];for(let s=0;s<t;s++){const t=new Aa(e,n,r,i);this._fbos.push(t)}}swap(){const t=this._fbos.shift();this._fbos.push(t)}get read(){return this._fbos[this._fbos.length-1]}get write(){return this._fbos[0]}get all(){return this._fbos}};var Ma=class extends xa{constructor(t,e,n={},r=1){super(2,t,e,n,r)}};const ba={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ya={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},La={NORMAL:"aNormal",POSITION:"aVertexPosition",TEXCOORD_0:"aTextureCoord",WEIGHTS_0:"aWeight",JOINTS_0:"aJoint",COLOR:"aColor"},Ia=(t,e)=>new Promise((n,r)=>{const{bufferViews:i,buffers:s}=t;i.forEach((t,n)=>{const r=e;t.data=r.slice(t.byteOffset||0,(t.byteOffset||0)+(t.byteLength||0))}),n(t)}),Sa=t=>new Promise((e,n)=>{const{meshes:r}=t;t.geometries=[],r.forEach((e,n)=>{const{primitives:r}=e,i={};r.forEach((e,n)=>{const r=Object.keys(e.attributes);let s={};if(r.forEach((n,r)=>{const o=e.attributes[n],a=t.accessors[o],u=La[n];if(!u)return;"NORMAL"===n&&(s.HAS_NORMALS=1),n.indexOf("TEXCOORD")>-1&&(s.HAS_UV=1);const h=ya[a.type];let c=Na(t,o);c instanceof Uint32Array&&(c=new Float32Array(c)),"TEXCOORD_1"===n&&console.log(h,c),i[u]={value:c,size:h}}),null!=e.indices){const n=Na(t,e.indices,!0);i.indices={value:n,size:1}}const o=new ho;for(const t in i){const e=i[t];"indices"!==t?o.bufferFlattenData(e.value,t,e.size):o.bufferIndex(e.value)}if(t.output.meshes.push(o),e.material){console.log("gltf.output",t.output,e.material);const n=t.output.materials[e.material];o.material=n,s=objectAssign(s,o.material.defines),o.defines=s;const r=Shaders.get(ShaderLibs.gltfVert,ShaderLibs.gltfFrag,s),{emissiveFacotr:i,normalTexture:a,occlusionTexture:u,pbrMetallicRoughness:h}=n,{baseColorTexture:c,metallicRoughnessTexture:l}=h,f={uEmissiveFactor:i||[0,0,0],uBaseColor:h.baseColorFactor||[1,1,1,1],uRoughness:h.roughnessFactor||1,uMetallic:h.metallicFactor||1,uScaleDiffBaseMR:[0,0,0,0],uScaleFGDSpec:[0,0,0,0],uScaleIBLAmbient:[1,1,1,1],uLightDirection:[1,1,1],uLightColor:[1,1,1],uGamma:1};c&&(f.uColorMap=c.glTexture),l&&(f.uMetallicRoughnessMap=l.glTexture),a&&(f.uNormalScale=a.scale||1,f.uNormalMap=a.glTexture),u&&(f.uAoMap=u.glTexture,f.uOcclusionStrength=u.strength||1),r.bind(),r.uniform(f),o.material.shader=r,o.material.uniforms=f}t.geometries.push(i)})}),e(t)}),Na=(t,e,n=!1)=>{const r=t.accessors[e],i=t.bufferViews[r.bufferView].data,s=r.byteOffset||0,o=ba[r.componentType]||Float32Array;let a=ya[r.type];null==a&&n&&(a=1);let u=new o(i,s,a*r.count);const h=r.extensions&&r.extensions.WEB3D_quantized_attributes;if(h){const t=new Float32Array(a*r.count),e=h.decodeMatrix,n=new Array(a),i=new Array(a);for(let t=0;t<a;t++)n[t]=e[a*(a+1)+t],i[t]=e[t*(a+1)+t];for(let e=0;e<r.count;e++)for(let r=0;r<a;r++)t[e*a+r]=u[e*a+r]*i[r]+n[r];u=t}return u};var wa={parse:(t,e)=>new Promise((n,r)=>{t.output={meshes:[],scenes:[],textures:[]},Ia(t,e).then(Sa).then(t=>{n(t)}).catch(t=>{console.log("Error:",t)})})};var Pa=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e=0;const n=t.length;function r(){let r="";do{const n=t[e];if(10===n){++e;break}r+=String.fromCharCode(n)}while(++e<n);return r}let i=0,s=0,o=1,a=!1;for(let t=0;t<20;t++){const t=r();let e;if(e=t.match("#\\?RADIANCE"));else if(e=t.match("FORMAT=32-bit_rle_rgbe"))a=!0;else if(e=t.match("EXPOSURE=\\s*([0-9]*[.][0-9]*)"))o=Number(e[1]);else if(e=t.match("#.*"));else if(e=t.match("-Y ([0-9]+) \\+X ([0-9]+)")){s=Number(e[1]),i=Number(e[2]);break}}if(!a)throw new Error("File is not run length encoded!");const u=new Uint8Array(i*s*4);!function(t,e,n,r,i,s){const o=new Array(4);let a,u,h,c=null;const l=new Array(2),f=t.length;function _(e){let n=0;do{e[n++]=t[r]}while(++r<f&&n<e.length);return n}function d(e,n,i){let s=0;do{e[n+s++]=t[r]}while(++r<f&&s<i);return s}function p(t,e,n,r){const i=4*r,s=d(e,n,i);if(s<i)throw new Error(`Error reading raw pixels: got ${s} bytes, expected ${i}`)}for(;s>0;){if(_(o)<o.length)throw new Error("Error reading bytes: expected "+o.length);if(2!==o[0]||2!==o[1]||0!=(128&o[2]))return e[n++]=o[0],e[n++]=o[1],e[n++]=o[2],e[n++]=o[3],void p(0,e,n,i*s-1);if(((255&o[2])<<8|255&o[3])!==i)throw new Error(`Wrong scanline width ${(255&o[2])<<8|255&o[3]}, expected ${i}`);null===c&&(c=new Array(4*i)),a=0;for(let t=0;t<4;t++)for(u=(t+1)*i;a<u;){if(_(l)<l.length)throw new Error("Error reading 2-byte buffer");if((255&l[0])>128){if(h=(255&l[0])-128,0===h||h>u-a)throw new Error("Bad scanline data");for(;h-- >0;)c[a++]=l[1]}else{if(h=255&l[0],0===h||h>u-a)throw new Error("Bad scanline data");if(c[a++]=l[1],--h>0){if(d(c,a,h)<h)throw new Error("Error reading non-run data");a+=h}}}for(let t=0;t<i;t++)e[n+0]=c[t],e[n+1]=c[t+i],e[n+2]=c[t+2*i],e[n+3]=c[t+3*i],n+=4;s--}}(t,u,0,e,i,s);const h=new Float32Array(i*s*4);for(let t=0;t<u.length;t+=4){let e=u[t+0]/255,n=u[t+1]/255,r=u[t+2]/255;const i=u[t+3],s=Math.pow(2,i-128);e*=s,n*=s,r*=s;const o=t;h[o+0]=e,h[o+1]=n,h[o+2]=r,h[o+3]=1}return{shape:[i,s],exposure:o,gamma:1,data:h}};class Ca extends Co{constructor(){super(!0)}parse(t){return Pa(t)}_onLoaded(){const t=this.parse(this._req.response);this._callback&&this._callback(t)}}Ca.parse=function(t){return Pa(t)};var Fa=Ca;function Ua(t){return 0!==t&&!(t&t-1)}let Oa,Da,Ba,Xa;class Va{constructor(t,e=!1,n={}){if(Oa=oo.gl,e)this._texture=t;else{this._mSource=t,this._texture=Oa.createTexture(),this._isVideo="VIDEO"===t.tagName,this._premultiplyAlpha=!0,this._magFilter=n.magFilter||Oa.LINEAR,this._minFilter=n.minFilter||Oa.NEAREST_MIPMAP_LINEAR,this._wrapS=n.wrapS||Oa.MIRRORED_REPEAT,this._wrapT=n.wrapT||Oa.MIRRORED_REPEAT,(t.width||t.videoWidth)&&function(t){const e=t.width||t.videoWidth,n=t.height||t.videoHeight;return!(!e||!n)&&(Ua(e)&&Ua(n))}(t)||(this._wrapS=this._wrapT=Oa.CLAMP_TO_EDGE,this._minFilter===Oa.NEAREST_MIPMAP_LINEAR&&(this._minFilter=Oa.LINEAR)),Oa.bindTexture(Oa.TEXTURE_2D,this._texture),Oa.pixelStorei(Oa.UNPACK_FLIP_Y_WEBGL,!0),t.exposure?Oa.texImage2D(Oa.TEXTURE_2D,0,Oa.RGBA,t.shape[0],t.shape[1],0,Oa.RGBA,Oa.FLOAT,t.data):Oa.texImage2D(Oa.TEXTURE_2D,0,Oa.RGBA,Oa.RGBA,Oa.UNSIGNED_BYTE,t),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_MAG_FILTER,this._magFilter),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_MIN_FILTER,this._minFilter),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_WRAP_S,this._wrapS),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_WRAP_T,this._wrapT);const e=oo.getExtension("EXT_texture_filter_anisotropic");if(e){const t=Oa.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);Oa.texParameterf(Oa.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,t)}this._canGenerateMipmap()&&Oa.generateMipmap(Oa.TEXTURE_2D),Oa.bindTexture(Oa.TEXTURE_2D,null)}}generateMipmap(){this._canGenerateMipmap()&&(Oa.bindTexture(Oa.TEXTURE_2D,this._texture),Oa.generateMipmap(Oa.TEXTURE_2D),Oa.bindTexture(Oa.TEXTURE_2D,null))}set minFilter(t){if(t!==Oa.LINEAR&&t!==Oa.NEAREST&&t!==Oa.NEAREST_MIPMAP_LINEAR&&t!==Oa.NEAREST_MIPMAP_LINEAR&&t!==Oa.LINEAR_MIPMAP_LINEAR&&t!==Oa.NEAREST_MIPMAP_NEAREST)return this;this._minFilter=t,Oa.bindTexture(Oa.TEXTURE_2D,this._texture),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_MIN_FILTER,this._minFilter),Oa.bindTexture(Oa.TEXTURE_2D,null)}get minFilter(){return this._minFilter}set magFilter(t){if(t!==Oa.LINEAR&&t!==Oa.NEAREST)return this;this._magFilter=t,Oa.bindTexture(Oa.TEXTURE_2D,this._texture),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_MAG_FILTER,this._magFilter),Oa.bindTexture(Oa.TEXTURE_2D,null)}get magFilter(){return this._magFilter}set wrapS(t){if(t!==Oa.CLAMP_TO_EDGE&&t!==Oa.REPEAT&&t!==Oa.MIRRORED_REPEAT)return this;this._wrapS=t,Oa.bindTexture(Oa.TEXTURE_2D,this._texture),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_WRAP_S,this._wrapS),Oa.bindTexture(Oa.TEXTURE_2D,null)}get wrapS(){return this._wrapS}set wrapT(t){if(t!==Oa.CLAMP_TO_EDGE&&t!==Oa.REPEAT&&t!==Oa.MIRRORED_REPEAT)return this;this._wrapT=t,Oa.bindTexture(Oa.TEXTURE_2D,this._texture),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_WRAP_T,this._wrapT),Oa.bindTexture(Oa.TEXTURE_2D,null)}get wrapT(){return this._wrapT}set premultiplyAlpha(t){this._premultiplyAlpha=t,Oa.bindTexture(Oa.TEXTURE_2D,this._texture),console.log("premultiplyAlpha:",t),Oa.pixelStorei(Oa.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),Oa.bindTexture(Oa.TEXTURE_2D,null)}get premultiplyAlpha(){return this._premultiplyAlpha}updateTexture(t){t&&(this._mSource=t),Oa.bindTexture(Oa.TEXTURE_2D,this._texture),Oa.pixelStorei(Oa.UNPACK_FLIP_Y_WEBGL,!0),Oa.texImage2D(Oa.TEXTURE_2D,0,Oa.RGBA,Oa.RGBA,Oa.UNSIGNED_BYTE,this._mSource),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_MAG_FILTER,this._magFilter),Oa.texParameteri(Oa.TEXTURE_2D,Oa.TEXTURE_MIN_FILTER,this._minFilter),this._canGenerateMipmap()&&Oa.generateMipmap(Oa.TEXTURE_2D),Oa.bindTexture(Oa.TEXTURE_2D,null)}bind(t){void 0===t&&(t=0),oo.shader&&(Oa.activeTexture(Oa.TEXTURE0+t),Oa.bindTexture(Oa.TEXTURE_2D,this._texture),this._bindIndex=t)}_canGenerateMipmap(){return this._minFilter===Oa.LINEAR_MIPMAP_NEAREST||this._minFilter===Oa.NEAREST_MIPMAP_LINEAR||this._minFilter===Oa.LINEAR_MIPMAP_LINEAR||this._minFilter===Oa.NEAREST_MIPMAP_NEAREST}get texture(){return this._texture}}Va.whiteTexture=function(){if(void 0===Da){const t=document.createElement("canvas");t.width=t.height=4;const e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,4,4),Da=new Va(t)}return Da},Va.greyTexture=function(){if(void 0===Ba){const t=document.createElement("canvas");t.width=t.height=4;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),Ba=new Va(t)}return Ba},Va.blackTexture=function(){if(void 0===Xa){const t=document.createElement("canvas");t.width=t.height=4;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),Xa=new Va(t)}return Xa};var Ga=Va;let Ha;function za(t){return 0!==t&&!(t&t-1)}var ka=class{constructor(t,e,n={}){Ha=oo.gl,this.width=t,this.height=e,this.magFilter=n.magFilter||Ha.LINEAR,this.minFilter=n.minFilter||Ha.LINEAR,this.wrapS=n.wrapS||Ha.CLAMP_TO_EDGE,this.wrapT=n.wrapT||Ha.CLAMP_TO_EDGE,this.useDepth=n.useDepth||!0,this.useStencil=n.useStencil||!1,this.texelType=n.type,this._numSample=n.numSample||8,za(this.width)&&za(this.height)||(this.wrapS=this.wrapT=Ha.CLAMP_TO_EDGE,this.minFilter===Ha.LINEAR_MIPMAP_NEAREST&&(this.minFilter=Ha.LINEAR)),this._init()}_init(){let t=Ha.UNSIGNED_BYTE;this.texelType&&(t=this.texelType),this.texelType=t,this.frameBuffer=Ha.createFramebuffer(),this.frameBufferColor=Ha.createFramebuffer(),this.renderBufferColor=Ha.createRenderbuffer(),this.renderBufferDepth=Ha.createRenderbuffer(),this.glTexture=this._createTexture(),this.glDepthTexture=this._createTexture(Ha.DEPTH_COMPONENT16,Ha.UNSIGNED_SHORT,Ha.DEPTH_COMPONENT,!0),Ha.bindRenderbuffer(Ha.RENDERBUFFER,this.renderBufferColor),Ha.renderbufferStorageMultisample(Ha.RENDERBUFFER,this._numSample,Ha.RGBA8,this.width,this.height),Ha.bindRenderbuffer(Ha.RENDERBUFFER,this.renderBufferDepth),Ha.renderbufferStorageMultisample(Ha.RENDERBUFFER,this._numSample,Ha.DEPTH_COMPONENT16,this.width,this.height),Ha.bindFramebuffer(Ha.FRAMEBUFFER,this.frameBuffer),Ha.framebufferRenderbuffer(Ha.FRAMEBUFFER,Ha.COLOR_ATTACHMENT0,Ha.RENDERBUFFER,this.renderBufferColor),Ha.framebufferRenderbuffer(Ha.FRAMEBUFFER,Ha.DEPTH_ATTACHMENT,Ha.RENDERBUFFER,this.renderBufferDepth),Ha.bindFramebuffer(Ha.FRAMEBUFFER,null),Ha.bindFramebuffer(Ha.FRAMEBUFFER,this.frameBufferColor),Ha.framebufferTexture2D(Ha.FRAMEBUFFER,Ha.COLOR_ATTACHMENT0,Ha.TEXTURE_2D,this.glTexture.texture,0),Ha.bindFramebuffer(Ha.FRAMEBUFFER,null)}_createTexture(t,e,n,r=!1){void 0===t&&(t=Ha.RGBA),void 0===e&&(e=this.texelType),n||(n=t);const i=Ha.createTexture(),s=new Ga(i,!0),o=r?oo.NEAREST:this.magFilter,a=r?oo.NEAREST:this.minFilter;return Ha.bindTexture(Ha.TEXTURE_2D,i),Ha.texParameteri(Ha.TEXTURE_2D,Ha.TEXTURE_MAG_FILTER,o),Ha.texParameteri(Ha.TEXTURE_2D,Ha.TEXTURE_MIN_FILTER,a),Ha.texParameteri(Ha.TEXTURE_2D,Ha.TEXTURE_WRAP_S,this.wrapS),Ha.texParameteri(Ha.TEXTURE_2D,Ha.TEXTURE_WRAP_T,this.wrapT),Ha.texImage2D(Ha.TEXTURE_2D,0,t,this.width,this.height,0,n,e,null),Ha.bindTexture(Ha.TEXTURE_2D,null),s}bind(t=!0){t&&oo.viewport(0,0,this.width,this.height),Ha.bindFramebuffer(Ha.FRAMEBUFFER,this.frameBuffer)}unbind(t=!0){t&&oo.viewport(0,0,oo.width,oo.height);const{width:e,height:n}=this;Ha.bindFramebuffer(Ha.FRAMEBUFFER,null),Ha.bindFramebuffer(Ha.READ_FRAMEBUFFER,this.frameBuffer),Ha.bindFramebuffer(Ha.DRAW_FRAMEBUFFER,this.frameBufferColor),Ha.clearBufferfv(Ha.COLOR,0,[0,0,0,0]),Ha.blitFramebuffer(0,0,e,n,0,0,e,n,Ha.COLOR_BUFFER_BIT,oo.NEAREST),Ha.bindFramebuffer(Ha.FRAMEBUFFER,null)}getTexture(t=0){return this.glTexture}getDepthTexture(){return this.glDepthTexture}};class Ya extends Co{load(t,e,n=4){this._drawType=n,super.load(t,e)}_onLoaded(){this.parseObj(this._req.response)}parseObj(t){const e=t.split("\n"),n=[],r=[],i=[],s=[],o=[],a=[],u=[];let h,c=0;const l=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,f=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,_=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,d=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,p=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,E=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,m=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function T(t){const e=parseInt(t);return 3*(e>=0?e-1:e+s.length/3)}function v(t){const e=parseInt(t);return 3*(e>=0?e-1:e+o.length/3)}function g(t){const e=parseInt(t);return 2*(e>=0?e-1:e+a.length/2)}function R(t,e,r){n.push([s[t],s[t+1],s[t+2]]),n.push([s[e],s[e+1],s[e+2]]),n.push([s[r],s[r+1],s[r+2]]),u.push(3*c+0),u.push(3*c+1),u.push(3*c+2),c++}function A(t,e,n){r.push([a[t],a[t+1]]),r.push([a[e],a[e+1]]),r.push([a[n],a[n+1]])}function x(t,e,n){i.push([o[t],o[t+1],o[t+2]]),i.push([o[e],o[e+1],o[e+2]]),i.push([o[n],o[n+1],o[n+2]])}function M(t,e,n,r,i,s,o,a,u,h,c,l){let f,_=T(t),d=T(e),p=T(n);void 0===r?R(_,d,p):(f=T(r),R(_,d,f),R(d,p,f)),void 0!==i&&(_=g(i),d=g(s),p=g(o),void 0===r?A(_,d,p):(f=g(a),A(_,d,f),A(d,p,f))),void 0!==u&&(_=v(u),d=v(h),p=v(c),void 0===r?x(_,d,p):(f=v(l),x(_,d,f),x(d,p,f)))}for(let t=0;t<e.length;t++){let n=e[t];n=n.trim(),0!==n.length&&"#"!==n.charAt(0)&&(null!==(h=l.exec(n))?s.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):null!==(h=f.exec(n))?o.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):null!==(h=_.exec(n))?a.push(parseFloat(h[1]),parseFloat(h[2])):null!==(h=d.exec(n))?M(h[1],h[2],h[3],h[4]):null!==(h=p.exec(n))?M(h[2],h[5],h[8],h[11],h[3],h[6],h[9],h[12]):null!==(h=E.exec(n))?M(h[2],h[6],h[10],h[14],h[3],h[7],h[11],h[15],h[4],h[8],h[12],h[16]):null!==(h=m.exec(n))&&M(h[2],h[5],h[8],h[11],void 0,void 0,void 0,void 0,h[3],h[6],h[9],h[12]))}return this._generateMeshes({positions:n,coords:r,normals:i,indices:u})}_generateMeshes(t){const e=t.normals.length>0,n=t.coords.length>0;let r;if(t.positions.length>65535){const i=[];let s=0;const o={};for(o.positions=t.positions.concat(),o.coords=t.coords.concat(),o.indices=t.indices.concat(),o.normals=t.normals.concat();t.indices.length>0;){const a=Math.min(65535,t.positions.length),u=t.indices.splice(0,a),h=[],c=[],l=[];let f,_=0;for(let t=0;t<u.length;t++)u[t]>_&&(_=u[t]),f=u[t],h.push(o.positions[f]),n&&c.push(o.coords[f]),e&&l.push(o.normals[f]),u[t]-=s;s=_+1,r=new ho(this._drawType),r.bufferVertex(h),n&&r.bufferTexCoord(c),r.bufferIndex(u),e&&r.bufferNormal(l),i.push(r)}return this._callback&&this._callback(i,o),i}return r=new ho(this._drawType),r.bufferVertex(t.positions),n&&r.bufferTexCoord(t.coords),r.bufferIndex(t.indices),e&&r.bufferNormal(t.normals),this._callback&&this._callback(r,t),r}}Ya.parse=function(t){return(new Ya).parseObj(t)};var ja=Ya;const Wa=c.create();var qa=class{constructor(){this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._ax=0,this._ay=0,this._az=0,this._position=u.create(),this._scale=u.fromValues(1,1,1),this._rotation=u.create(),this._anchor=u.create(),this._anchorNegative=u.create(),this._matrix=a.create(),this._matrixParent=a.create(),this._matrixRotation=a.create(),this._matrixScale=a.create(),this._matrixTranslation=a.create(),this._matrixQuaternion=a.create(),this._quat=c.create(),this._children=[]}addChild(t){this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);-1!=e?this._children.splice(e,1):console.warn("Child no exist")}_update(){this._needUpdate&&(u.set(this._scale,this._sx,this._sy,this._sz),u.set(this._rotation,this._rx,this._ry,this._rz),u.set(this._position,this._x,this._y,this._z),u.set(this._anchor,this._ax,this._ay,this._az),u.set(this._anchorNegative,-this._ax,-this._ay,-this._az),a.identity(this._matrixTranslation,this._matrixTranslation),a.identity(this._matrixScale,this._matrixScale),a.identity(this._matrixRotation,this._matrixRotation),a.translate(this._matrixRotation,this._matrixRotation,this._anchor),a.rotateX(this._matrixRotation,this._matrixRotation,this._rx),a.rotateY(this._matrixRotation,this._matrixRotation,this._ry),a.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),a.translate(this._matrixRotation,this._matrixRotation,this._anchorNegative),a.fromQuat(this._matrixQuaternion,this._quat),a.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),a.scale(this._matrixScale,this._matrixScale,this._scale),a.translate(this._matrixTranslation,this._matrixTranslation,this._position),a.mul(this._matrix,this._matrixTranslation,this._matrixRotation),a.mul(this._matrix,this._matrix,this._matrixScale),a.mul(this._matrix,this._matrixParent,this._matrix),this.updateMatrix(),this._needUpdate=!1)}setParentMatrix(t){t?a.copy(this._matrixParent,t):a.identify(this._matrixParent)}updateMatrix(t){t&&(this._needUpdate=!0,a.copy(this._matrixParent,t)),this._needUpdate&&this._children.forEach(t=>{t.updateMatrix(this._matrix)})}setRotationFromQuaternion(t){c.copy(this._quat,t),this._needUpdate=!0,ia.next(()=>this._update())}getRotationEuler(t,e="XYZ"){a.getRotation(Wa,t)}setMatrix(t,e="XYZ"){a.identity(this._matrix),a.getTranslation(this._position,t),this._x=this._position[0],this._y=this._position[1],this._z=this._position[2],a.getScaling(this._scale,t),this._sx=this._scale[0],this._sy=this._scale[1],this._sz=this._scale[2];const n=this.getRotationEuler(t,e);this._rx=n[0],this._ry=n[1],this._rz=n[2],this._needUpdate=!0}get matrix(){return this._needUpdate&&this._update(),this._matrix}get x(){return this._x}set x(t){this._needUpdate=!0,this._x=t,ia.next(()=>this._update())}get y(){return this._y}set y(t){this._needUpdate=!0,this._y=t,ia.next(()=>this._update())}get z(){return this._z}set z(t){this._needUpdate=!0,this._z=t,ia.next(()=>this._update())}get scaleX(){return this._sx}set scaleX(t){this._needUpdate=!0,this._sx=t,ia.next(()=>this._update())}get scaleY(){return this._sy}set scaleY(t){this._needUpdate=!0,this._sy=t,ia.next(()=>this._update())}get scaleZ(){return this._sz}set scaleZ(t){this._needUpdate=!0,this._sz=t,ia.next(()=>this._update())}get rotationX(){return this._rx}set rotationX(t){this._needUpdate=!0,this._rx=t,ia.next(()=>this._update())}get rotationY(){return this._ry}set rotationY(t){this._needUpdate=!0,this._ry=t,ia.next(()=>this._update())}get rotationZ(){return this._rz}set rotationZ(t){this._needUpdate=!0,this._rz=t,ia.next(()=>this._update())}get anchorX(){return this._ax}set anchorX(t){this._needUpdate=!0,this._ax=t,ia.next(()=>this._update())}get anchorY(){return this._ay}set anchorY(t){this._needUpdate=!0,this._ay=t,ia.next(()=>this._update())}get anchorZ(){return this._az}set anchorZ(t){this._needUpdate=!0,this._az=t,ia.next(()=>this._update())}get children(){return this._children}};const Za=function(t,e){const n=e||{};return t.touches?(n.x=t.touches[0].pageX,n.y=t.touches[0].pageY):(n.x=t.clientX,n.y=t.clientY),n};var Ka=class{constructor(t,e=window,n=500){this.connected=!1,this._target=t,this._listenerTarget=e,this._mouse={},this._preMouse={},this.center=u.create(),this._up=u.fromValues(0,1,0),this.radius=new sa(n),this.position=u.fromValues(0,0,this.radius.value),this.positionOffset=u.create(),this._rx=new sa(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new sa(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._wheelBind=t=>this._onWheel(t),this._downBind=t=>this._onDown(t),this._moveBind=t=>this._onMove(t),this._upBind=()=>this._onUp(),this._efIndex=ia.addEF(()=>this._loop())}connect(t){t&&(this._listenerTarget=t),this.disconnect(),this.connected=!0,this._listenerTarget.addEventListener("mousewheel",this._wheelBind),this._listenerTarget.addEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.addEventListener("mousedown",this._downBind),this._listenerTarget.addEventListener("touchstart",this._downBind),this._listenerTarget.addEventListener("mousemove",this._moveBind),this._listenerTarget.addEventListener("touchmove",this._moveBind),window.addEventListener("touchend",this._upBind),window.addEventListener("mouseup",this._upBind)}disconnect(){this.connected=!1,this._listenerTarget.removeEventListener("mousewheel",this._wheelBind),this._listenerTarget.removeEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.removeEventListener("mousedown",this._downBind),this._listenerTarget.removeEventListener("touchstart",this._downBind),this._listenerTarget.removeEventListener("mousemove",this._moveBind),this._listenerTarget.removeEventListener("touchmove",this._moveBind),window.removeEventListener("touchend",this._upBind),window.removeEventListener("mouseup",this._upBind)}lock(t=!0){this._isLockZoom=t,this._isLockRotation=t,this._isMouseDown=!1}lockZoom(t=!0){this._isLockZoom=t}lockRotation(t=!0){this._isLockRotation=t}inverseControl(t=!0){this._isInvert=t}_onDown(t){this._isLockRotation||(this._isMouseDown=!0,Za(t,this._mouse),Za(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}_onMove(t){if(!this._isLockRotation&&(Za(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){let t=-(this._mouse.x-this._preMouse.x);this._isInvert&&(t*=-1),this._ry.value=this._preRY-.01*t*this.sensitivity;let e=-(this._mouse.y-this._preMouse.y);this._isInvert&&(e*=-1),this._rx.value=this._preRX-.01*e*this.sensitivity}}_onUp(){this._isLockRotation||(this._isMouseDown=!1)}_onWheel(t){if(this._isLockZoom)return;const e=t.wheelDelta,n=t.detail;let r=0;r=n?e?e/n/40*n>0?1:-1:-n/3:e/120,this.radius.add(2*-r)}_loop(){this._updatePosition(),this._target&&this._updateCamera()}_updatePosition(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;const t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t,u.add(this.position,this.position,this.positionOffset)}getPosition(t,e,n){const r=Math.sin(t)*n,i=Math.cos(t)*n;return[Math.cos(e+.5*Math.PI)*i,r,Math.sin(e+.5*Math.PI)*i]}_updateCamera(){this._target.lookAt(this.position,this.center,this._up)}destroy(){this.disconnect(),ia.removeEF(this._efIndex)}get rx(){return this._rx}get ry(){return this._ry}};const Qa=function(t,e){const n=e||{};return t.touches?(n.x=t.touches[0].pageX,n.y=t.touches[0].pageY):(n.x=t.clientX,n.y=t.clientY),n};var $a=class{constructor(t,e=window,n=.1){this._target=t,this._listenerTarget=e,this.matrix=a.create(),this.m=a.create(),this._vZaxis=u.clone([0,0,0]),this._zAxis=u.clone([0,0,1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=c.create(),this.tempRotation=c.create(),this._rotateZMargin=0,this._offset=.004,this._slerp=-1,this._isLocked=!1,this._diffX=new sa(0,n),this._diffY=new sa(0,n),this._listenerTarget.addEventListener("mousedown",t=>this._onDown(t)),this._listenerTarget.addEventListener("touchstart",t=>this._onDown(t)),this._listenerTarget.addEventListener("mousemove",t=>this._onMove(t)),this._listenerTarget.addEventListener("touchmove",t=>this._onMove(t)),window.addEventListener("touchend",()=>this._onUp()),window.addEventListener("mouseup",()=>this._onUp()),ia.addEF(()=>this._loop())}inverseControl(t=!0){this._isInvert=t}lock(t=!0){this._isLocked=t}setCameraPos(t,e=.1){if(this.easing=e,this._slerp>0)return;const n=c.clone(this._rotation);this._updateRotation(n),this._rotation=c.clone(n),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=c.clone(t),this._slerp=1}resetQuat(){this._rotation=c.clone([0,0,1,0]),this.tempRotation=c.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1}_onDown(t){if(this._isLocked)return;const e=Qa(t),n=c.clone(this._rotation);this._updateRotation(n),this._rotation=n,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:e.x,y:e.y},e.y<this._rotateZMargin||e.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(e.x<this._rotateZMargin||e.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._diffX.setTo(0),this._diffY.setTo(0)}_onMove(t){this._isLocked||Qa(t,this.mouse)}_onUp(){this._isLocked||(this._isMouseDown=!1)}_updateRotation(t){let e,n;if(this._isMouseDown&&!this._isLocked&&(this._diffX.value=-(this.mouse.x-this.preMouse.x),this._diffY.value=this.mouse.y-this.preMouse.y,this._isInvert&&(this._diffX.value=-this._diffX.targetValue,this._diffY.value=-this._diffY.targetValue)),this._isRotateZ>0)1===this._isRotateZ?(e=-this._diffX.value*this._offset,e*=this.preMouse.y<this._rotateZMargin?-1:1,n=c.clone([0,0,Math.sin(e),Math.cos(e)]),c.multiply(n,t,n)):(e=-this._diffY.value*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,n=c.clone([0,0,Math.sin(e),Math.cos(e)]),c.multiply(n,t,n));else{const r=u.clone([this._diffX.value,this._diffY.value,0]),i=u.create();u.cross(i,r,this._zAxis),u.normalize(i,i),e=u.length(r)*this._offset,n=c.clone([Math.sin(e)*i[0],Math.sin(e)*i[1],Math.sin(e)*i[2],Math.cos(e)]),c.multiply(t,n,t)}}_loop(){a.identity(this.m),void 0===this._targetQuat?(c.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<5e-4?(c.copy(this._rotation,this._targetQuat),c.copy(this.tempRotation,this._targetQuat),this._targetQuat=void 0,this._diffX.setTo(0),this._diffY.setTo(0),this._slerp=-1):(c.set(this.tempRotation,0,0,0,0),c.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),u.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),a.fromQuat(this.matrix,this.tempRotation)}set easing(t){this._diffX.easing=t,this._diffY.easing=t}get easing(){return this._diffX.easing}};var Ja=class{constructor(t={}){this._children=[],this._matrixIdentity=mat4.create(),oo.enableAlphaBlending(),this._init(t),this._initTextures(t),this._initViews(t),this._efIndex=ia.addEF(()=>this._loop()),this._targetListener=t.container||window,this._resize=this.resize.bind(this),window.addEventListener("resize",this._resize)}update(){}render(){}stop(){-1!==this._efIndex&&(this._efIndex=ia.removeEF(this._efIndex))}start(){-1===this._efIndex&&(this._efIndex=ia.addEF(()=>this._loop()))}resize(t,e){oo.setSize(t||window.innerWidth,e||window.innerHeight),this.camera.setAspectRatio(oo.aspectRatio)}addChild(t){this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);-1!=e?this._children.splice(e,1):console.warn("Child no exist")}_initTextures(){}_initViews(){}_renderChildren(){let t;for(let e=0;e<this._children.length;e++)t=this._children[e],t.toRender();oo.rotate(this._matrixIdentity)}_init(t){this.camera=new jo,this.camera.setPerspective(45*Math.PI/180,oo.aspectRatio,.1,100),this.orbitalControl=new Ka(this.camera,this._targetListener,15),t.noControl||this.orbitalControl.connect(),this.orbitalControl.radius.value=10,this.cameraOrtho=new Zo}_loop(t){oo.viewport(0,0,oo.width,oo.height),oo.setMatrices(this.camera),this.update(),this._renderChildren(),this.render()}destroy(){this.orbitalControl.disconnect(),ia.removeEF(this._efIndex),window.removeEventListener("resize",this._resize)}};var tu={simpleColorFrag:Ao,bigTriangleVert:Mo,generalVert:Ro,copyFrag:bo,basicVert:co,skyboxVert:wo,skyboxFrag:No};var eu=class{constructor(t,e=.1,n=.9){this._value=t,this._targetValue=t,this.speed=e,this.decreaseRate=n,this._velocity=0,this._efIndex=ia.addEF(()=>this._update())}_update(){this._checkLimit(),Math.abs(this._targetValue-this._value)<1e-4?this._value=this._targetValue:(this._velocity+=(this._targetValue-this._value)*this.speed,this._value+=this._velocity,this._velocity*=this.decreaseRate,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue))}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){ia.removeEF(this._efIndex)}set value(t){this._targetValue=t}get value(){return this._value}};let nu;var ru=class{constructor(t,e){nu=oo.gl,this._vs=t,this._fs=e,this._init()}_init(){this._meshCurrent=new ho,this._meshTarget=new ho,this._numPoints=-1,this._varyings=[],this.transformFeedback=nu.createTransformFeedback()}bufferData(t,e,n){const r=!!n;console.log("is Transform feedback ?",e,r),this._meshCurrent.bufferData(t,e,null,nu.STREAM_COPY,!1),this._meshTarget.bufferData(t,e,null,nu.STREAM_COPY,!1),r&&(this._varyings.push(n),this._numPoints<0&&(this._numPoints=t.length))}bufferIndex(t){this._meshCurrent.bufferIndex(t),this._meshTarget.bufferIndex(t)}uniform(t,e,n){this.shader&&this.shader.uniform(t,e,n)}generate(){this.shader=new Eo(this._vs,this._fs,this._varyings)}render(){this.shader||this.generate(),this.shader.bind(),oo.drawTransformFeedback(this),this._swap()}_swap(){const t=this._meshCurrent;this._meshCurrent=this._meshTarget,this._meshTarget=t}get numPoints(){return this._numPoints}get meshCurrent(){return this._meshCurrent}get meshTarget(){return this._meshTarget}get meshSource(){return this._meshCurrent}get meshDestination(){return this._meshTarget}};const iu={Linear:{None:t=>t},Quadratic:{In:t=>t*t,Out:t=>t*(2-t),InOut:t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},Cubic:{In:t=>t*t*t,Out:t=>--t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},Quartic:{In:t=>t*t*t*t,Out:t=>1- --t*t*t*t,InOut:t=>(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},Quintic:{In:t=>t*t*t*t*t,Out:t=>--t*t*t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},Sinusoidal:{In:t=>1-Math.cos(t*Math.PI/2),Out:t=>Math.sin(t*Math.PI/2),InOut:t=>.5*(1-Math.cos(Math.PI*t))},Exponential:{In:t=>0===t?0:Math.pow(1024,t-1),Out:t=>1===t?1:1-Math.pow(2,-10*t),InOut:t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},Circular:{In:t=>1-Math.sqrt(1-t*t),Out:t=>Math.sqrt(1- --t*t),InOut:t=>(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},Elastic:{In(t){let e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},Out(t){let e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut(t){let e,n=.1;const r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)}},Back:{In(t){const e=1.70158;return t*t*((e+1)*t-e)},Out(t){const e=1.70158;return--t*t*((e+1)*t+e)+1},InOut(t){const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{in:t=>1-iu.Bounce.out(1-t),out:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,inOut:t=>t<.5?.5*iu.Bounce.in(2*t):.5*iu.Bounce.out(2*t-1)+.5}};var su=class{constructor(t,e="expOut",n=.01){this._value=t,this._startValue=t,this._targetValue=t,this._counter=1,this.speed=n,this.easing=e,this._needUpdate=!0,this._efIndex=ia.addEF(()=>this._update())}_update(){let t=this._counter+this.speed;t>1&&(t=1),this._counter!==t?(this._counter=t,this._needUpdate=!0):this._needUpdate=!1}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}setTo(t){this._value=t,this._targetValue=t,this._counter=1}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){ia.removeEF(this._efIndex)}set value(t){this._startValue=this._value,this._targetValue=t,this._checkLimit(),this._counter=0}get value(){if(this._needUpdate){const t=function(t){switch(t){default:case"linear":return iu.Linear.None;case"expIn":return iu.Exponential.In;case"expOut":return iu.Exponential.Out;case"expInOut":return iu.Exponential.InOut;case"cubicIn":return iu.Cubic.In;case"cubicOut":return iu.Cubic.Out;case"cubicInOut":return iu.Cubic.InOut;case"quarticIn":return iu.Quartic.In;case"quarticOut":return iu.Quartic.Out;case"quarticInOut":return iu.Quartic.InOut;case"quinticIn":return iu.Quintic.In;case"quinticOut":return iu.Quintic.Out;case"quinticInOut":return iu.Quintic.InOut;case"sinusoidalIn":return iu.Sinusoidal.In;case"sinusoidalOut":return iu.Sinusoidal.Out;case"sinusoidalInOut":return iu.Sinusoidal.InOut;case"circularIn":return iu.Circular.In;case"circularOut":return iu.Circular.Out;case"circularInOut":return iu.Circular.InOut;case"elasticIn":return iu.Elastic.In;case"elasticOut":return iu.Elastic.Out;case"elasticInOut":return iu.Elastic.InOut;case"backIn":return iu.Back.In;case"backOut":return iu.Back.Out;case"backInOut":return iu.Back.InOut;case"bounceIn":return iu.Bounce.in;case"bounceOut":return iu.Bounce.out;case"bounceInOut":return iu.Bounce.inOut}}(this.easing)(this._counter);this._value=this._startValue+t*(this._targetValue-this._startValue),this._needUpdate=!1}return this._value}get targetValue(){return this._targetValue}};var ou=class{constructor(t,e){this.shader=new Eo(t,e),this._init()}_init(){}render(){}destroy(){this.shader.destroy()}};var au=class extends qa{constructor(t,e){super(),this._children=[],this.shader=new Eo(t,e),this._init()}_init(){}render(){}destroy(){this.shader.destroy()}};var uu=new class{constructor(){this.glm=_,this.GL=oo,this.GLTool=oo,this.GLShader=Eo,this.GLTexture=Ta,this.GLCubeTexture=ta,this.Mesh=ho,this.Geom=go,this.Batch=ao,this.FrameBuffer=Aa,this.CubeFrameBuffer=na,this.Scheduler=ia,this.EventDispatcher=aa,this.EaseNumber=sa,this.SpringNumber=eu,this.TweenNumber=su,this.Camera=Fo,this.CameraOrtho=Zo,this.CameraPerspective=jo,this.Ray=zo,this.CameraCube=qo,this.OrbitalControl=Ka,this.QuatRotation=$a,this.BinaryLoader=Co,this.ObjLoader=ja,this.GLTFParser=wa,this.HDRLoader=Fa,this.BatchCopy=yo,this.BatchAxis=mo,this.BatchBall=xo,this.BatchBall=xo,this.BatchLine=Io,this.BatchSkybox=Po,this.BatchSky=So,this.BatchDotsPlane=Lo,this.Scene=Ja,this.View=ou,this.View3D=au,this.Draw=ra,this.Object3D=qa,this.ShaderLibs=tu,this.WebglNumber=la.a,this.FboArray=xa,this.FboPingPong=Ma,this.MultisampleFrameBuffer=ka,this.TransformFeedbackObject=ru;for(const t in _)_[t]&&window&&(window[t]=_[t])}log(){navigator.userAgent.indexOf("Chrome")>-1?console.log("%clib alfrid : VERSION 0.3.9","background: #193441; color: #FCFFF5"):console.log("lib alfrid : VERSION ","0.3.9"),console.log("%cClasses : ","color: #193441");for(const t in this)this[t]&&console.log("%c - "+t,"color: #3E606F")}};var hu=[{id:"matcap",url:"assets/img/matcap.png",type:"png"},{id:"matcap2",url:"assets/img/matcap2.jpg",type:"jpg"},{id:"tooth-texture",url:"assets/img/tooth-texture.jpg",type:"jpg"},{id:"tooth-texture2",url:"assets/img/tooth-texture2.png",type:"png"},{id:"tooth-texture3",url:"assets/img/tooth-texture3.png",type:"png"},{id:"tooth",url:"assets/obj/tooth.obj",type:"text"},{id:"tooth2",url:"assets/obj/tooth2.obj",type:"text"},{id:"tooth3",url:"assets/obj/tooth3.obj",type:"text"}];const cu={};let lu,fu=[];cu.init=function(t){lu=t;let e={};fu=hu.map(t=>{const n=function(t){const e=t.split(".");return e[e.length-1]}(t.url),r=(i=t.id,lu.find(t=>t.id===i).file);var i;let s;switch(n){case"jpg":case"png":return s=new Ta(r),{id:t.id,file:s};case"hdr":let n=t.id.split("_")[0];s=uu.HDRLoader.parse(r);const i={id:t.id,file:s};return e[n]||(e[n]=[]),e[n].push(i),i;case"dds":return s=ta.parseDDS(r),{id:t.id,file:s};case"obj":const o=ja.parse(r);return{id:t.id,file:o}}});for(let t in e)if(6==e[t].length){console.log("Generate Cubemap :",t);const e=[cu.get(t+"_posx"),cu.get(t+"_negx"),cu.get(t+"_posy"),cu.get(t+"_negy"),cu.get(t+"_posz"),cu.get(t+"_negz")],n=new uu.GLCubeTexture(e);fu.push({id:t,file:n})}fu.length>0&&(console.debug("ASSETS:"),console.table(fu))},cu.get=function(t){return fu.find(e=>e.id===t).file};var _u=cu,du={camera:{fov:45},lightWorldPosition:{x:-12.130054189245527,y:-.14992927864214955,z:-61.24469589816125},tooth:{anchor:{x:0,y:1.49,z:0},scale:{x:2.37,y:2.37,z:2.37},position:{x:0,y:1.1300000000000001,z:0},rotation:{x:-.04,y:.5,z:-.04}},interaction:{debug:!0,showPlanes:!1,showLight:!1,showContact:!1,spread:16.25677365568987,amount:1.1230660042583394,transform:{position:{x:0,y:-2.3,z:-17},rotation:{x:0,y:.15,z:0},scale:{x:33,y:19}}},noise:{value:.11,scale:.06},planes:[{label:"Plane - Right",visible:!0,fadeX:1,camera:{x:-9.1,y:4.43,z:-2.06},scale:{x:27.78,z:10.65},rotation:{x:-1.75,y:-2.77,z:-6.28},position:{x:.92,y:11.75,z:-13.15},waves:[{scale:[0,0],speed:0,waveLength:32.14,steepness:1.19,offset:-2.84,directionX:.1,directionY:0},{scale:[0,0],speed:.32,waveLength:5.05,steepness:.37,offset:-4.12,directionX:.1,directionY:.15},{scale:[0,0],speed:-.17,waveLength:2.7600000000000002,steepness:.46,offset:0,directionX:.08,directionY:.2}]},{label:"Plane - Bottom left",visible:!0,camera:{x:-9.28,y:-6.57,z:-9.28},scale:{x:13.35,z:23.81},rotation:{x:3.24,y:5.84,z:3.24},position:{x:-5.57,y:.92,z:-1.6},waves:[{scale:[0,0],speed:0,waveLength:33.37,steepness:2.07,offset:-2.6,directionX:.04,directionY:.14},{scale:[0,0],speed:-.11,waveLength:2.25,steepness:.37,offset:-1.5,directionX:.33,directionY:.01},{scale:[0,0],speed:.3,waveLength:2.7600000000000002,steepness:.46,offset:-5.22,directionX:.21,directionY:.08}]},{label:"Plane - Top Right",visible:!0,fadeZ:1,camera:{x:-6.140000000000001,y:4.51,z:-.63},scale:{x:14.07,z:18.76},rotation:{x:-2.32,y:-5.04,z:-4.24},position:{x:-.16,y:5.25,z:11.86},waves:[{scale:[0,0],speed:0,waveLength:29.68,steepness:1.1,offset:-2.74,directionX:.09,directionY:.39},{scale:[0,0],speed:-.24,waveLength:3.61,steepness:.54,offset:-.08,directionX:.22,directionY:.04},{scale:[0,0],speed:-.24,waveLength:2.25,steepness:.54,offset:0,directionX:.23,directionY:.06}]}]};class pu extends uu.View3D{constructor(t){super("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\n// basic.vert\n\nuniform vec4 uSpeed;\nuniform vec4 uOffset;\nuniform float uTime;\nuniform float uSpread;\nuniform float uAmount;\nuniform vec4 uWave1;\nuniform vec4 uWave2;\nuniform vec4 uWave3;\nuniform vec2 uNoise;\nuniform vec2 uFadeEdge;\nuniform vec3 uCameraPos;\n\nuniform vec3 uLightWorldPosition;\nuniform vec3 uIntersection;\nuniform vec2 uScale;\nvarying vec3 vNormal;\nvarying vec3 pEye;\nvarying vec3 vSurfaceToLight;\nvarying float vColor;\nvarying float vEdge;\nvarying float vLightStrength;\n\nvec3 mod289(vec3 x)\n{\n  return x-floor(x*(1./289.))*289.;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x-floor(x*(1./289.))*289.;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.)+1.)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159-.85373472095314*r;\n}\n\nvec3 fade(vec3 t){\n  return t*t*t*(t*(t*6.-15.)+10.);\n}\n\nfloat snoise(vec3 v){\n  const vec2 C=vec2(1./6.,1./3.);\n  const vec4 D=vec4(0.,.5,1.,2.);\n  \n  vec3 i=floor(v+dot(v,C.yyy));\n  vec3 x0=v-i+dot(i,C.xxx);\n  \n  vec3 g=step(x0.yzx,x0.xyz);\n  vec3 l=1.-g;\n  vec3 i1=min(g.xyz,l.zxy);\n  vec3 i2=max(g.xyz,l.zxy);\n  \n  vec3 x1=x0-i1+1.*C.xxx;\n  vec3 x2=x0-i2+2.*C.xxx;\n  vec3 x3=x0-1.+3.*C.xxx;\n  \n  i=mod(i,289.);\n  vec4 p=permute(permute(permute(i.z+vec4(0.,i1.z,i2.z,1.))+i.y+vec4(0.,i1.y,i2.y,1.))+i.x+vec4(0.,i1.x,i2.x,1.));\n  \n  float n_=1./7.;\n  vec3 ns=n_*D.wyz-D.xzx;\n  \n  vec4 j=p-49.*floor(p*ns.z*ns.z);\n  \n  vec4 x_=floor(j*ns.z);\n  vec4 y_=floor(j-7.*x_);\n  \n  vec4 x=x_*ns.x+ns.yyyy;\n  vec4 y=y_*ns.x+ns.yyyy;\n  vec4 h=1.-abs(x)-abs(y);\n  \n  vec4 b0=vec4(x.xy,y.xy);\n  vec4 b1=vec4(x.zw,y.zw);\n  \n  vec4 s0=floor(b0)*2.+1.;\n  vec4 s1=floor(b1)*2.+1.;\n  vec4 sh=-step(h,vec4(0.));\n  \n  vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;\n  vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;\n  \n  vec3 p0=vec3(a0.xy,h.x);\n  vec3 p1=vec3(a0.zw,h.y);\n  vec3 p2=vec3(a1.xy,h.z);\n  vec3 p3=vec3(a1.zw,h.w);\n  \n  vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));\n  p0*=norm.x;\n  p1*=norm.y;\n  p2*=norm.z;\n  p3*=norm.w;\n  \n  vec4 m=max(.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.);\n  m=m*m;\n  return 42.*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));\n}\n\nfloat snoise(float x,float y,float z){\n  return snoise(vec3(x,y,z));\n}\n\nfloat getDistance(vec3 center,vec3 position,float radius){\n  // return clamp(smoothstep(0.05 * uScale.x, .4 * uScale.x, distance(position, center)) / uScale.x, 0., 1.);\n  // float totalWidth = uScale.x * 2;\n  \n  // return clamp(distance(position, center) / radius, 0., 1.);\n  return clamp(smoothstep(0.,radius,distance(position,center)),0.,1.);\n}\n\nfloat f(vec3 p,float noiseScale){\n  return snoise(vec3(p))*noiseScale;\n}\n\nvec3 GerstnerWave(vec4 wave,vec3 p,inout vec3 tangent,inout vec3 binormal,float speed,float offset){\n  float steepness=wave.z;\n  float waveLength=wave.w;\n  \n  float k=(2.*3.14)/waveLength;// * (1. - invScale * 0.05);\n  vec2 d=normalize(wave.xy);\n  \n  float f=k*(dot(d,p.xz)-uTime*speed+offset);// + sin(uTime) * invScale * 2.;\n  float a=steepness/k;\n  \n  tangent+=vec3(\n    -d.x*d.x*(steepness*sin(f))*1.,\n    d.x*(steepness*cos(f)),\n    -d.x*d.y*(steepness*sin(f))\n  );\n  \n  binormal+=vec3(\n    -d.x*d.y*(steepness*sin(f))*1.,\n    d.y*(steepness*cos(f)),\n    -d.y*d.y*(steepness*sin(f))\n  );\n  \n  return vec3(\n    d.x*(a*cos(f))*1.,\n    a*sin(f),\n    d.y*(a*cos(f))\n  );\n}\n\nvoid main(void){\n  \n  vec3 posInter=aVertexPosition;\n  posInter.x*=uScale.x;\n  posInter.z*=uScale.y;\n  \n  vEdge=smoothstep(.4,.49,distance(aVertexPosition.z,.0))*uFadeEdge[1];\n  vEdge+=smoothstep(.4,.49,distance(aVertexPosition.x,.0))*uFadeEdge[0];\n  \n  // position.y += sin(position.x / 10. * 3.14 * 2.) * 2.;\n  \n  // float time = uTime * 0.1;\n  // float time = 1.;\n  // float ox = (time) * 0.2;\n  // float oy = (time) * 0.83245789;\n  \n  // vec3 anim = vec3(position.z, 1., 1.) * 1. + vec3(ox, oy, time);\n  // float k =\n  // vec3 anim = position * 4.;\n  \n  vec3 newPosition=aVertexPosition;\n  newPosition.x*=uScale.x;\n  newPosition.z*=uScale.y;\n  \n  vec3 savedPosition=newPosition;\n  \n  vec3 tangent=vec3(1.,0.,0.);\n  vec3 binormal=vec3(0.,0.,1.);\n  \n  // float invScale = (1. - dist);\n  // ((1. + invScale * 0.2))\n  \n  newPosition+=GerstnerWave(uWave1,savedPosition,tangent,binormal,uSpeed.x,uOffset.x);\n  newPosition+=GerstnerWave(uWave2,savedPosition,tangent,binormal,uSpeed.y,uOffset.y);\n  newPosition+=GerstnerWave(uWave3,savedPosition,tangent,binormal,uSpeed.z,uOffset.z);\n  \n  vec3 modifiedNormal=normalize(cross(binormal,tangent));\n  \n  float noise=uNoise.x;\n  float noiseScale=uNoise.y;\n  float time=uTime*.1;\n  float ox=time*.2;\n  float oy=time*.83245789;\n  vec3 anim=vec3(savedPosition)*noise+vec3(ox,oy,time);\n  \n  vec3 posNoise=newPosition;\n  // posNoise.x *= uScale.x;\n  // posNoise.z *= uScale.y;\n  // vec3 modifiedNormal = normal;\n  \n  float f0=f(anim,noiseScale);\n  float fx=1.*f(anim+vec3(1.,0.,0.),noiseScale);\n  float fy=1.*f(anim+vec3(0.,1.,0.),noiseScale);\n  float fz=1.*f(anim+vec3(0.,0.,1.),noiseScale);\n  \n  modifiedNormal=normalize(modifiedNormal-vec3((fx-f0)/1.,(fy-f0)/1.,(fz-f0)/1.));\n  // position *= 1.0 + f0 * 0.1 * 1.;\n  \n  // float f0 =  0.01 * f( aniNormal );\n  \n  // vec3 newPosition = position;\n  // newPosition.z += f0;\n  posNoise+=f0;\n  \n  vec3 posNoiseWorld=vec4(uModelMatrix*vec4(posNoise,1.)).xyz;\n  \n  vec3 direction=normalize(posNoiseWorld-uIntersection);\n  \n  float dist=getDistance(posNoiseWorld,uIntersection,uSpread);\n  vColor=smoothstep(0.,.8,(1.-dist));\n  posNoiseWorld+=smoothstep(0.,.8,(1.-dist))*direction*uAmount;\n  \n  // posNoise.y *= dist;\n  // f2\n  \n  // f0 = getDistance(worldPos.xyz, uIntersection);\n  // fx = 1. * getDistance( worldPos.xyz + vec3( 1., 0.0, 0.0 ), uIntersection);\n  // fy = 1. * getDistance( worldPos.xyz + vec3( 0.0, 1., 0.0 ), uIntersection);\n  // fz = 1. * getDistance( worldPos.xyz + vec3( 0.0, 0.0, 1. ), uIntersection);\n  \n  // modifiedNormal = normalize( modifiedNormal - vec3( (fx - f0) / 1., (fy - f0) / 1., (fz - f0) / 1. ) );\n  \n  // posNoise.y *= f0;\n  \n  // posNoise = position;\n  // posNoise.xz *= uScale;\n  \n  // (1. - scale)\n  // posNoise.y += (1. - dist);\n  \n  // gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n  gl_Position=uProjectionMatrix*uViewMatrix*vec4(posNoiseWorld,1.);\n  // vTextureCoord = aTextureCoord;\n  vNormal=normalize(modifiedNormal*uNormalMatrix);\n  \n  // compute the world position of the surface\n  vec3 surfaceWorldPosition=posNoiseWorld;//(modelMatrix * vec4(posNoise, 1.0)).xyz;\n  vLightStrength=1.-getDistance(surfaceWorldPosition,uLightWorldPosition,10.);\n  \n  pEye=normalize(posNoiseWorld.xyz-uCameraPos);\n  // Transfomr the *directions* of the normal and position-relative-to-eye so\n  // that the matcap stays aligned with the view:\n  // vNormal=mat3(viewMatrix)*vNormal;\n  vNormal=normalize(vec3(uModelMatrix*vec4(vNormal,0.)));\n  \n  pEye=mat3(uViewMatrix)*pEye;\n  vNormal=mat3(uViewMatrix)*vNormal;\n  \n  // compute the vector of the surface to the light\n  // and pass it to the fragment shader\n  \n  // vec3 lightPos = uIntersection;\n  // lightPos.y = posNoise.y;\n  \n  // vSurfaceToLight = lightPos - surfaceWorldPosition;\n  vSurfaceToLight=uLightWorldPosition-surfaceWorldPosition;\n}\n","precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nuniform vec3 uCameraPos;\nuniform float uShowLight;\nuniform float uShowContact;\n\nvarying vec3 pEye;\nvarying vec3 vNormal;\nvarying vec3 vSurfaceToLight;\nvarying float vColor;\nvarying float vEdge;\nvarying float vLightStrength;\n\nfloat diffuse(vec3 n,vec3 l){\n  float d=dot(normalize(n),normalize(l));\n  return max(d,0.);\n}\n\nfloat diffuse(vec3 n,vec3 l,float t){\n  float d=dot(normalize(n),normalize(l));\n  return mix(1.,max(d,0.),t);\n}\n\nvec2 matcap(vec3 eye,vec3 normal){\n  vec3 reflected=reflect(eye,normal);\n  float m=2.8284271247461903*sqrt(reflected.z+1.);\n  return reflected.xy/m+.5;\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendSoftLight(float base, float blend) {\n\treturn (blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend) {\n\treturn vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendSoftLight(base, blend) * opacity + base * (1.0 - opacity));\n}\nvoid main(void){\n  float d = diffuse(vNormal, vec3(-2., 1., 0.), .5);\n  \n  vec3 surfaceToLightDirection=normalize(vSurfaceToLight);\n  \n  float light=dot(vNormal,surfaceToLightDirection)*vLightStrength;\n  \n  vec2 uv=matcap(pEye,normalize(vNormal));\n  // vec2 uv=vec2(normalize(pEye*vNormal))*.5+vec2(.5,.5);\n  \n  // vec2 uv=matcap(uCameraPos,vNormal);\n  \n  // vec3 colorMatcap= texture2D(uTexture,vec2(uv.x,1.-uv.y)).rgb*(1.+abs(light)*1.5);\n  vec3 colorMatcap= texture2D(uTexture,vec2(uv.x,1.-uv.y)).rgb;\n  vec3 colorLight=vec3(abs(light));\n  \n  // vec3 color = colorMatcap;\n  // vec3 color=mix(pow(colorMatcap,vec3(1.25))*1.25,colorLight,uShowLight);\n  vec3 color=mix(colorMatcap,colorLight + d * 0.1,uShowLight);\n  color=mix(color,vec3(vColor),uShowContact);\n\n  color = blendAdd(color, vec3(0.25 + light));\n  \n  gl_FragColor=vec4(color,1.-vEdge);\n  // gl_FragColor += d * 0.75;\n  // gl_FragColor += light;\n  // gl_FragColor=vec4(vec3(vEdge),1.);\n  \n  // gl_FragColor=vec4(1.);\n  \n  // gl_FragColor.rgb*=1.-lightDebug;\n  // gl_FragColor.rgb *= ;\n  // gl_FragColor.rgb*=(1.-light*.8);\n  // gl_FragColor.rgb= vec3(lightDebug);\n}\n"),this.matcapTexture=_u.get("matcap2"),this.time=0,this.mesh=uu.Geom.plane(1,1,80,"xz"),this.visible=!0}_init(){}render(t,e={},n,r={}){this.rotationX=t.rotation.x,this.rotationY=t.rotation.y,this.rotationZ=t.rotation.z,this.x=t.position.x,this.y=t.position.y,this.z=t.position.z,this.shader.bind(),this.shader.uniform("uIntersection","vec3",[void 0!==r.x?r.x:9999,void 0!==r.y?r.y:9999,void 0!==r.z?r.z:9999]),this.time+=.05,this.shader.uniform("uTexture","uniform1i",0),this.matcapTexture.bind(0),this.shader.uniform("uTime","float",this.time),this.shader.uniform("uSpread","float",du.interaction.spread),this.shader.uniform("uShowContact","float",du.interaction.showContact?1:0),this.shader.uniform("uShowLight","float",du.interaction.showLight?1:0),this.shader.uniform("uAmount","float",du.interaction.amount*n),this.shader.uniform("uScale","vec2",[t.scale.x,t.scale.z]),this.shader.uniform("uCameraPos","vec3",[t.camera.x,t.camera.y,t.camera.z]),this.shader.uniform("uLightWorldPosition","vec3",[e.x,e.y,e.z]),this.shader.uniform("uNoise","vec2",[du.noise.value,du.noise.scale]),this.shader.uniform("uFadeEdge","vec2",[t.fadeX||0,t.fadeZ||0]);const i=[0,0,0,0],s=[0,0,0,0];for(let e=0;e<t.waves.length;e++){const n=t.waves[e];i[e]=n.speed,s[e]=n.offset,this.shader.uniform("uWave"+(e+1),"vec4",[n.directionX,n.directionY,n.steepness,n.waveLength])}this.shader.uniform("uSpeed","vec4",i),this.shader.uniform("uOffset","vec4",s),oo.rotate(this._matrix),oo.draw(this.mesh)}}var Eu=pu;const mu=(t,e,n=1,r=1,i=0)=>{const s=t._fov,o=Tu(e)-i,a=2*Math.tan(s/2)*o;return{scaleX:n/(1/(a*oo.aspectRatio)),scaleY:r/(1/a)}},Tu=t=>isNaN(t)?t.radius.targetValue:t;class vu extends uu.View3D{constructor(t){super("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec3 uPosition;\nuniform vec2 uScale;\nuniform vec2 uAspectRatio;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\n    vec3 cameraRight = vec3(\n\n        \n        uViewMatrix[0].x, uViewMatrix[1].x, uViewMatrix[2].x\n    );\n    vec3 cameraUp = vec3(\n        uViewMatrix[0].y, uViewMatrix[1].y, uViewMatrix[2].y\n    );\n\n    vec3 pos = uPosition + (cameraRight * uScale.x * aVertexPosition.x) + (cameraUp * uScale.y * aVertexPosition.y);\n\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4(pos, 1.0);\n\n    // vec3 pos = uPosition;\n    //     gl_Position =  uProjectionMatrix * uViewMatrix * vec4(pos, 1.0);\n    //     gl_Position /= gl_Position.w;\n    //     gl_Position.xy += (aVertexPosition.xy * vec2(1., uAspectRatio) * uScale * 1.);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n\n    float p = distance(vTextureCoord,vec2(0.5));\n\n    vec3 color = mix(vec3(1.), vec3(145./255., 95./255., 88./255.), p);\n\n    gl_FragColor = vec4(color, 1.);\n}"),this.scene=t,this.time=0,this.mesh=uu.Geom.plane(1,1,1),this.scaleX=1,this.scaleY=1,this.z=0}_init(){}render(){this.shader.bind(),this.shader.uniform("uScale","vec2",[this.scaleX,this.scaleY]),this.shader.uniform("uAspectRatio","vec2",[window.innerWidth,window.innerHeight]),this.shader.uniform("uPosition","vec3",[0,0,this.z]),oo.draw(this.mesh)}resize(){Math.max(window.innerWidth,window.innerHeight);const{scaleX:t,scaleY:e}=((t,e,n,r,i)=>{const{scaleX:s,scaleY:o}=mu(r,i,t/window.innerWidth,e/window.innerHeight,n);return{scaleX:s,scaleY:o}})(window.innerWidth,window.innerHeight,this.z,this.scene.camera,this.scene.orbitalControl);this.scaleX=t,this.scaleY=e}}var gu=vu;var Ru=class extends ou{constructor(){super(uu.ShaderLibs.bigTriangleVert,"// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nuniform sampler2D texture;\n\nuniform float uOpacity;\n// uniform vec2 uScreenSize;\nuniform float time;\nvarying vec2 vTextureCoord;\n\n      \n      float blendSoftLight(float base,float blend){\n        return(blend<.5)?(2.*base*blend+base*base*(1.-2.*blend)):(sqrt(base)*(2.*blend-1.)+2.*base*(1.-blend));\n      }\n      \n      vec3 blendSoftLight(vec3 base,vec3 blend){\n        return vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));\n      }\n      \n      vec3 blendSoftLight(vec3 base,vec3 blend,float opacity){\n        return(blendSoftLight(base,blend)*opacity+base*(1.-opacity));\n      }\n      \n      float blendAdd(float base,float blend){\n        return min(base+blend,1.);\n      }\n      \n      vec3 blendAdd(vec3 base,vec3 blend){\n        return min(base+blend,vec3(1.));\n      }\n      \n      vec3 blendAdd(vec3 base,vec3 blend,float opacity){\n        return(blendAdd(base,blend)*opacity+base*(1.-opacity));\n      }\n      \n      float random(vec2 st){\n        return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);\n      }\n      \n      float mapValue(float value,float min1,float max1,float min2,float max2){\n        return min2+(value-min1)*(max2-min2)/(max1-min1);\n      }\n      \n      void main(){\n        \n        // vec2 uv=(vTextureCoord);\n        // // vec2 u= mod(vTextureCoord * 10.);\n        // float division=mapValue(uScale,0.,1.,.00001,.01);\n        // float u=floor(uv.x/division);\n        // u=u*division;\n        \n        // float v=floor(uv.y/division);\n        // v=v*division;\n        // float u=step(uv.x,.5);\n        // float g=random(vec2(u, v)+time);\n        \n        float g=random(vTextureCoord+vec2(time));\n        vec3 colorBase=texture2D(texture,vTextureCoord).rgb;\n        vec3 color=mix(colorBase,blendSoftLight(colorBase,vec3(g)),uOpacity);\n\n        gl_FragColor=vec4(color,1.);\n        // gl_FragColor=vec4(vec3(u),1.);\n      }\n      ")}_init(){this.mesh=uu.Geom.bigTriangle(),this.time=0}render(t){this.time+=.01,this.time%=100,this.shader.bind(),this.shader.uniform("texture","uniform1i",0),t.bind(0),this.shader.uniform("uOpacity","float",.12),this.shader.uniform("time","float",this.time),oo.draw(this.mesh)}};class Au extends uu.View3D{constructor(t){super("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\n\tvec3 smoothNormal = normalize(aVertexPosition.xyz);\n\tfloat percentageSmooth = 1.;\n\t// vNormal       = normalize(vec3(uNormalMatrix * vec4(mix(aNormal, smoothNormal, percentageSmooth), 0.0)));\n\tvNormal       = mix(aNormal, smoothNormal, percentageSmooth);\n\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    // vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nuniform sampler2D texture;\nuniform vec3 uLightPos;\n\nfloat diffuse(vec3 n,vec3 l){\n  float d=dot(normalize(n),normalize(l));\n  return max(d,0.);\n}\n\nfloat diffuse(vec3 n,vec3 l,float t){\n  float d=dot(normalize(n),normalize(l));\n  return mix(1.,max(d,0.),t);\n}\n\nvoid main(void) {\n    float d = diffuse(vNormal, uLightPos, .25);\n\n    gl_FragColor = texture2D(texture, vTextureCoord);\n    gl_FragColor.rgb += 0.1;\n    gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(2.5));\n    gl_FragColor.rgb *= d;\n}"),this.scene=t,this.mouseX=0,this.mouseY=0,this.time=0,this.texture=_u.get("tooth-texture2"),this.mesh=_u.get("tooth2")}_init(){}render(t,e){this.shader.bind(),this.time++,this.mouseX+=.03*(e.x-this.mouseX),this.mouseY+=.03*(e.y-this.mouseY),this.x=du.tooth.position.x,this.y=du.tooth.position.y+.5*Math.cos(this.time/50),this.z=du.tooth.position.z,this.scaleX=du.tooth.scale.x,this.scaleY=du.tooth.scale.y,this.scaleZ=du.tooth.scale.z,this.rotationX=du.tooth.rotation.x+.1*Math.sin(this.time/50)-this.mouseY*Math.PI/6,this.rotationY=du.tooth.rotation.y+this.mouseX*Math.PI/6,this.rotationZ=du.tooth.rotation.z+.1*Math.cos(this.time/100),this.shader.uniform("texture","uniform1i",0),this.shader.uniform("uLightPos","vec3",[t.x,t.y,t.z]),this.texture.bind(0),oo.rotate(this._matrix),oo.draw(this.mesh)}resize(){}}var xu=Au;class Mu extends uu.View3D{constructor(t){super("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n    gl_FragColor=vec4(1.);\n}"),this.time=0,this.mesh=uu.Geom.plane(1,1,1)}_init(){}render(){this.shader.bind(),oo.rotate(this._matrix),oo.draw(this.mesh)}}var bu=Mu;const yu=(t,e)=>{var n=document.createElement("a"),r=(t=>{for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],r=atob(e[1]),i=r.length,s=new Uint8Array(i);i--;)s[i]=r.charCodeAt(i);return new Blob([s],{type:n})})(t.toDataURL({format:"png",multiplier:4})),i=URL.createObjectURL(r);n.download=e+".png",n.href=i,n.click()},Lu=(t,e,n,r,i)=>(t-e)/(n-e)*(i-r)+r;var Iu=class extends Ja{constructor(){super(),oo.enableAlphaBlending(),this.resize()}_initTextures(){console.log("init textures")}_initViews(){console.log("init views"),this.orbitalControl.lock(),this.orbitalControl.rx.setTo(.3),this.orbitalControl.ry.setTo(.3),this.orbitalControl.radius.setTo(20);const t={minFilter:oo.LINEAR,magFilter:oo.LINEAR};this.fboNoise=new uu.FrameBuffer(oo.width,oo.height,t),this.isMoving=!1,this.lastIntersect={x:0,y:0,z:0},this.displacementAmount=0,this.targetDisplacementAmount=0,this.lightPos={x:0,y:0,z:-12},this.targetLightPos={x:0,y:0,z:-12},this.tick=0,this.tickZ=0,this.mouse={x:0,y:0},this.time=0,this.getPlanesFromConfig(),this.interactionPlanes=[],this._bCopy=new uu.BatchCopy,this._bAxis=new uu.BatchAxis,this._bDots=new uu.BatchDotsPlane,this.sphere=new uu.BatchBall,this.sphereLight=new uu.BatchBall,this.intersectionPlane=new bu,this._vNoise=new Ru,this._vTooth=new xu,this._vBackground=new gu(this),this.setPlaneTransforms(),window.addEventListener("mousemove",this.onMouseMove.bind(this),!1),window.addEventListener("touchmove",this.onMouseMove.bind(this),!1)}setPlaneTransforms(){this.intersectionPlane.rotationY=du.interaction.transform.rotation.y,this.intersectionPlane.positionZ=du.interaction.transform.position.z,this.intersectionPlane.y=du.interaction.transform.position.y,this.intersectionPlane.scaleX=du.interaction.transform.scale.x,this.intersectionPlane.scaleY=du.interaction.transform.scale.y}onMouseMove(t){this.isMoving=!0,this.tickZ++,this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-t.clientY/window.innerHeight*2+1;window.innerHeight,window.innerWidth;this.targetLightPos.y=Lu(this.mouse.y,-1,1,Lu(this.mouse.x,-1,1,-10,0),Lu(this.mouse.x,-1,1,10,7.5)),this.targetLightPos.z=Lu(this.mouse.x,-1,1,Lu(this.mouse.y,-1,1,-12,-18),Lu(this.mouse.y,-1,1,12,8)),this.targetLightPos.x=Lu(this.mouse.x,-1,1,-10,Lu(this.mouse.y,-1,1,0,5)),this.targetDisplacementAmount=1}getPlanesFromConfig(t){t=t||du.planes.length,this.planes=[];for(let e=0;e<t;e++){const t=new Eu;this.planes.push(t)}}render(){oo.clear(0,0,0,0),this.orbitalControl.rx.value=.3-.05*this.mouse.y,this.orbitalControl.ry.value=.3+.05*this.mouse.x,this.displacementAmount+=.06*(this.targetDisplacementAmount-this.displacementAmount),this.lightPos.x+=.05*(this.targetLightPos.x-this.lightPos.x),this.lightPos.y+=.05*(this.targetLightPos.y-this.lightPos.y),this.lightPos.z+=.05*(this.targetLightPos.z-this.lightPos.z),this.fboNoise.bind(),oo.clear(0,0,0,1),oo.disable(oo.DEPTH_TEST),this._vBackground.render(),oo.enable(oo.DEPTH_TEST),oo.disable(oo.CULL_FACE),du.interaction.debug&&(this.setPlaneTransforms(),du.interaction.showPlanes&&this.intersectionPlane.render(),du.interaction.showLight&&this.sphereLight.draw([this.lightPos.x,this.lightPos.y,this.lightPos.z],[.1,.1,.1],[1,0,0])),this.intersectionPlane.z=du.interaction.transform.position.z-2+2*Math.cos(this.tick/40),this.tick++;const t={};for(let e=0;e<this.planes.length;e++){const n=this.planes[e],r=du.planes[e];r.visible&&n.render(r,this.lightPos,this.displacementAmount,t)}oo.enable(oo.CULL_FACE),this._vTooth.render(this.lightPos,this.mouse),this.fboNoise.unbind(),this.isMoving||(this.targetDisplacementAmount*=.96),this.isMoving=!1,this._vNoise.render(this.fboNoise.getTexture(0))}resize(t,e){((t,e)=>{const{innerWidth:n,innerHeight:r}=window;t=t||n,e=e||r,oo.setSize(t,e);let i=Math.min(t,n),s=Math.min(e,r);const o=n/t,a=r/e,u=Math.min(o,a);i=t*u,s=e*u,oo.canvas.style.width=i+"px",oo.canvas.style.height=s+"px"})(),this.camera.setAspectRatio(oo.aspectRatio),this._vBackground.resize();const n={minFilter:oo.LINEAR,magFilter:oo.LINEAR};this.fboNoise=new uu.FrameBuffer(oo.width,oo.height,n)}},Su=n(2),Nu=n.n(Su);Nu.a.queryString=n(19);n(21);String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};window.addEventListener("keydown",t=>{if(83===t.keyCode&&t.metaKey){t.preventDefault();const e=new Date;let n=e.getFullYear()+"."+(e.getMonth()+1)+"."+e.getDate()+"-"+e.getHours()+"."+e.getMinutes()+"."+e.getSeconds();yu(oo.canvas,n)}});var wu=n(6),Pu=n.n(wu);const Cu=()=>new Promise((t,e)=>{const n=document.createElement("img");n.onload=()=>{console.log("img loaded",n),t(n)},n.src="assets/css-img/loading.png"}),Fu=()=>new Promise((t,e)=>{console.log("create loading animation"),t()}),Uu=()=>new Promise((t,e)=>{console.log("Load Assets"),hu.length>0?(document.body.classList.add("isLoading"),new Pu.a({assets:hu}).on("error",t=>{console.log("Error :",t)}).on("progress",t=>{const e=document.body.querySelector(".Loading-Bar");e&&(e.style.width=100*t+"%")}).on("complete",e=>{t(e)}).start()):t([])}),Ou=t=>new Promise((e,n)=>{console.log("Init Assets",t),document.body.querySelector(".Loading-Bar").style.width="100%",_u.init(t),e()}),Du=()=>new Promise((t,e)=>{console.log("Close loading animation"),setTimeout(()=>{document.body.classList.remove("isLoading")},250),setTimeout(()=>{t()},500)});var Bu=()=>new Promise((t,e)=>{new Promise((t,e)=>{const n=document.createElement("canvas"),r=document.body.querySelector(".container");n.className="Main-Canvas",r.appendChild(n),oo.init(n,{ignoreWebgl2:!1,preserveDrawingBuffer:!0}),t()}).then(Cu).then(Fu).then(Uu).then(Ou).then(Du).then(()=>{t()}).catch(t=>{console.log("Error",t)})});function Xu(){Bu().then(Gu,Vu)}function Vu(t){console.log("Error",t)}function Gu(){console.log("IS_DEVELOPMENT",!1);new Iu}document.body?Xu():window.addEventListener("DOMContentLoaded",Xu)}]);