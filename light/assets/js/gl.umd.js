(function(Gt,me){typeof exports=="object"&&typeof module!="undefined"?me(exports):typeof define=="function"&&define.amd?define(["exports"],me):(Gt=typeof globalThis!="undefined"?globalThis:Gt||self,me(Gt.WebGLAnimation={}))})(this,function(Gt){"use strict";var IO=Object.defineProperty;var PO=(Gt,me,Sr)=>me in Gt?IO(Gt,me,{enumerable:!0,configurable:!0,writable:!0,value:Sr}):Gt[me]=Sr;var Ft=(Gt,me,Sr)=>(PO(Gt,typeof me!="symbol"?me+"":me,Sr),Sr);function me(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function Sr(t){var e=this;return new e(function(r,i){if(!(t&&typeof t.length!="undefined"))return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(n.length===0)return r([]);var o=n.length;function a(c,f){if(f&&(typeof f=="object"||typeof f=="function")){var d=f.then;if(typeof d=="function"){d.call(f,function(v){a(c,v)},function(v){n[c]={status:"rejected",reason:v},--o===0&&r(n)});return}}n[c]={status:"fulfilled",value:f},--o===0&&r(n)}for(var l=0;l<n.length;l++)a(l,n[l])})}var jm=setTimeout;function Dh(t){return Boolean(t&&typeof t.length!="undefined")}function zm(){}function Wm(t,e){return function(){t.apply(e,arguments)}}function $t(t){if(!(this instanceof $t))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Hh(t,this)}function Vh(t,e){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(e);return}t._handled=!0,$t._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?ws:$i)(e.promise,t._value);return}var i;try{i=r(t._value)}catch(n){$i(e.promise,n);return}ws(e.promise,i)})}function ws(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var r=e.then;if(e instanceof $t){t._state=3,t._value=e,Ts(t);return}else if(typeof r=="function"){Hh(Wm(r,e),t);return}}t._state=1,t._value=e,Ts(t)}catch(i){$i(t,i)}}function $i(t,e){t._state=2,t._value=e,Ts(t)}function Ts(t){t._state===2&&t._deferreds.length===0&&$t._immediateFn(function(){t._handled||$t._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)Vh(t,t._deferreds[e]);t._deferreds=null}function Ym(t,e,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.promise=r}function Hh(t,e){var r=!1;try{t(function(i){r||(r=!0,ws(e,i))},function(i){r||(r=!0,$i(e,i))})}catch(i){if(r)return;r=!0,$i(e,i)}}$t.prototype.catch=function(t){return this.then(null,t)},$t.prototype.then=function(t,e){var r=new this.constructor(zm);return Vh(this,new Ym(t,e,r)),r},$t.prototype.finally=me,$t.all=function(t){return new $t(function(e,r){if(!Dh(t))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return e([]);var n=i.length;function o(l,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var f=c.then;if(typeof f=="function"){f.call(c,function(d){o(l,d)},r);return}}i[l]=c,--n===0&&e(i)}catch(d){r(d)}}for(var a=0;a<i.length;a++)o(a,i[a])})},$t.allSettled=Sr,$t.resolve=function(t){return t&&typeof t=="object"&&t.constructor===$t?t:new $t(function(e){e(t)})},$t.reject=function(t){return new $t(function(e,r){r(t)})},$t.race=function(t){return new $t(function(e,r){if(!Dh(t))return r(new TypeError("Promise.race accepts an array"));for(var i=0,n=t.length;i<n;i++)$t.resolve(t[i]).then(e,r)})},$t._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){jm(t,0)},$t._unhandledRejectionFn=function(e){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Hn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function qm(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),e}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Xh=Object.getOwnPropertySymbols,Km=Object.prototype.hasOwnProperty,Zm=Object.prototype.propertyIsEnumerable;function Jm(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Qm(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var $h=Qm()?Object.assign:function(t,e){for(var r,i=Jm(t),n,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var a in r)Km.call(r,a)&&(i[a]=r[a]);if(Xh){n=Xh(r);for(var l=0;l<n.length;l++)Zm.call(r,n[l])&&(i[n[l]]=r[n[l]])}}return i};/*!
 * @pixi/polyfill - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof global!="undefined"&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=$t),Object.assign||(Object.assign=$h);var tg=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(globalThis.performance&&globalThis.performance.now)){var eg=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-eg}}for(var Es=Date.now(),jh=["ms","moz","webkit","o"],Cs=0;Cs<jh.length&&!globalThis.requestAnimationFrame;++Cs){var Is=jh[Cs];globalThis.requestAnimationFrame=globalThis[Is+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Is+"CancelAnimationFrame"]||globalThis[Is+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var e=Date.now(),r=tg+Es-e;return r<0&&(r=0),Es=e,globalThis.self.setTimeout(function(){Es=Date.now(),t(performance.now())},r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);var Ps=/iPhone/i,zh=/iPod/i,Wh=/iPad/i,Yh=/\biOS-universal(?:.+)Mac\b/i,Rs=/\bAndroid(?:.+)Mobile\b/i,qh=/Android/i,ti=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Xn=/Silk/i,je=/Windows Phone/i,Kh=/\bWindows(?:.+)ARM\b/i,Zh=/BlackBerry/i,Jh=/BB10/i,Qh=/Opera Mini/i,tu=/\b(CriOS|Chrome)(?:.+)Mobile/i,eu=/Mobile(?:.+)Firefox\b/i,ru=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function rg(t){return function(e){return e.test(t)}}function ig(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]!="undefined"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]!="undefined"&&(r=i[0]);var n=rg(r),o={apple:{phone:n(Ps)&&!n(je),ipod:n(zh),tablet:!n(Ps)&&(n(Wh)||ru(e))&&!n(je),universal:n(Yh),device:(n(Ps)||n(zh)||n(Wh)||n(Yh)||ru(e))&&!n(je)},amazon:{phone:n(ti),tablet:!n(ti)&&n(Xn),device:n(ti)||n(Xn)},android:{phone:!n(je)&&n(ti)||!n(je)&&n(Rs),tablet:!n(je)&&!n(ti)&&!n(Rs)&&(n(Xn)||n(qh)),device:!n(je)&&(n(ti)||n(Xn)||n(Rs)||n(qh))||n(/\bokhttp\b/i)},windows:{phone:n(je),tablet:n(Kh),device:n(je)||n(Kh)},other:{blackberry:n(Zh),blackberry10:n(Jh),opera:n(Qh),firefox:n(eu),chrome:n(tu),device:n(Zh)||n(Jh)||n(Qh)||n(eu)||n(tu)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Le=ig(globalThis.navigator);function ng(t){var e=!0;if(Le.tablet||Le.phone){if(Le.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(Le.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}function og(){return!Le.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var iu;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(iu||(iu={}));var nu;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(nu||(nu={}));var ou;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ou||(ou={}));var su;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(su||(su={}));var au;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(au||(au={}));var lu;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(lu||(lu={}));var hu;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(hu||(hu={}));var uu;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(uu||(uu={}));var cu;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(cu||(cu={}));var As;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(As||(As={}));var Ns;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ns||(Ns={}));var Ss;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Ss||(Ss={}));var fu;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(fu||(fu={}));var pu;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(pu||(pu={}));var Os;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Os||(Os={}));var ji;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(ji||(ji={}));var du;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(du||(du={}));var Us;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Us||(Us={}));var vu;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(vu||(vu={}));var Z={MIPMAP_TEXTURES:Ss.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Us.NONE,SPRITE_MAX_TEXTURES:ng(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Os.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Ns.CLAMP,SCALE_MODE:As.LINEAR,PRECISION_VERTEX:ji.HIGH,PRECISION_FRAGMENT:Le.apple.device?ji.HIGH:ji.MEDIUM,CAN_UPLOAD_SAME_BUFFER:og(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},_u={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function n(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function o(c,f,d,v,_){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new n(d,v||c,_),g=r?r+f:f;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function a(c,f){--c._eventsCount===0?c._events=new i:delete c._events[f]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],d,v;if(this._eventsCount===0)return f;for(v in d=this._events)e.call(d,v)&&f.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},l.prototype.listeners=function(f){var d=r?r+f:f,v=this._events[d];if(!v)return[];if(v.fn)return[v.fn];for(var _=0,m=v.length,g=new Array(m);_<m;_++)g[_]=v[_].fn;return g},l.prototype.listenerCount=function(f){var d=r?r+f:f,v=this._events[d];return v?v.fn?1:v.length:0},l.prototype.emit=function(f,d,v,_,m,g){var x=r?r+f:f;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,C,I;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,v),!0;case 4:return b.fn.call(b.context,d,v,_),!0;case 5:return b.fn.call(b.context,d,v,_,m),!0;case 6:return b.fn.call(b.context,d,v,_,m,g),!0}for(I=1,C=new Array(w-1);I<w;I++)C[I-1]=arguments[I];b.fn.apply(b.context,C)}else{var S=b.length,A;for(I=0;I<S;I++)switch(b[I].once&&this.removeListener(f,b[I].fn,void 0,!0),w){case 1:b[I].fn.call(b[I].context);break;case 2:b[I].fn.call(b[I].context,d);break;case 3:b[I].fn.call(b[I].context,d,v);break;case 4:b[I].fn.call(b[I].context,d,v,_);break;default:if(!C)for(A=1,C=new Array(w-1);A<w;A++)C[A-1]=arguments[A];b[I].fn.apply(b[I].context,C)}}return!0},l.prototype.on=function(f,d,v){return o(this,f,d,v,!1)},l.prototype.once=function(f,d,v){return o(this,f,d,v,!0)},l.prototype.removeListener=function(f,d,v,_){var m=r?r+f:f;if(!this._events[m])return this;if(!d)return a(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!_||g.once)&&(!v||g.context===v)&&a(this,m);else{for(var x=0,b=[],w=g.length;x<w;x++)(g[x].fn!==d||_&&!g[x].once||v&&g[x].context!==v)&&b.push(g[x]);b.length?this._events[m]=b.length===1?b[0]:b:a(this,m)}return this},l.prototype.removeAllListeners=function(f){var d;return f?(d=r?r+f:f,this._events[d]&&a(this,d)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(_u);var ei=_u.exports,Ls={exports:{}};Ls.exports=$n,Ls.exports.default=$n;function $n(t,e,r){r=r||2;var i=e&&e.length,n=i?e[0]*r:t.length,o=mu(t,0,n,r,!0),a=[];if(!o||o.next===o.prev)return a;var l,c,f,d,v,_,m;if(i&&(o=ug(t,e,o,r)),t.length>80*r){l=f=t[0],c=d=t[1];for(var g=r;g<n;g+=r)v=t[g],_=t[g+1],v<l&&(l=v),_<c&&(c=_),v>f&&(f=v),_>d&&(d=_);m=Math.max(f-l,d-c),m=m!==0?1/m:0}return zi(o,a,r,l,c,m),a}function mu(t,e,r,i,n){var o,a;if(n===Bs(t,e,r,i)>0)for(o=e;o<r;o+=i)a=bu(o,t[o],t[o+1],a);else for(o=r-i;o>=e;o-=i)a=bu(o,t[o],t[o+1],a);return a&&jn(a,a.next)&&(Yi(a),a=a.next),a}function sr(t,e){if(!t)return t;e||(e=t);var r=t,i;do if(i=!1,!r.steiner&&(jn(r,r.next)||Dt(r.prev,r,r.next)===0)){if(Yi(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function zi(t,e,r,i,n,o,a){if(!!t){!a&&o&&vg(t,i,n,o);for(var l=t,c,f;t.prev!==t.next;){if(c=t.prev,f=t.next,o?ag(t,i,n,o):sg(t)){e.push(c.i/r),e.push(t.i/r),e.push(f.i/r),Yi(t),t=f.next,l=f.next;continue}if(t=f,t===l){a?a===1?(t=lg(sr(t),e,r),zi(t,e,r,i,n,o,2)):a===2&&hg(t,e,r,i,n,o):zi(sr(t),e,r,i,n,o,1);break}}}}function sg(t){var e=t.prev,r=t,i=t.next;if(Dt(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(ri(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Dt(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function ag(t,e,r,i){var n=t.prev,o=t,a=t.next;if(Dt(n,o,a)>=0)return!1;for(var l=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,c=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,f=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,d=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,v=Fs(l,c,e,r,i),_=Fs(f,d,e,r,i),m=t.prevZ,g=t.nextZ;m&&m.z>=v&&g&&g.z<=_;){if(m!==t.prev&&m!==t.next&&ri(n.x,n.y,o.x,o.y,a.x,a.y,m.x,m.y)&&Dt(m.prev,m,m.next)>=0||(m=m.prevZ,g!==t.prev&&g!==t.next&&ri(n.x,n.y,o.x,o.y,a.x,a.y,g.x,g.y)&&Dt(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;m&&m.z>=v;){if(m!==t.prev&&m!==t.next&&ri(n.x,n.y,o.x,o.y,a.x,a.y,m.x,m.y)&&Dt(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=_;){if(g!==t.prev&&g!==t.next&&ri(n.x,n.y,o.x,o.y,a.x,a.y,g.x,g.y)&&Dt(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function lg(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!jn(n,o)&&gu(n,i,i.next,o)&&Wi(n,o)&&Wi(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),Yi(i),Yi(i.next),i=t=o),i=i.next}while(i!==t);return sr(i)}function hg(t,e,r,i,n,o){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&gg(a,l)){var c=yu(a,l);a=sr(a,a.next),c=sr(c,c.next),zi(a,e,r,i,n,o),zi(c,e,r,i,n,o);return}l=l.next}a=a.next}while(a!==t)}function ug(t,e,r,i){var n=[],o,a,l,c,f;for(o=0,a=e.length;o<a;o++)l=e[o]*i,c=o<a-1?e[o+1]*i:t.length,f=mu(t,l,c,i,!1),f===f.next&&(f.steiner=!0),n.push(mg(f));for(n.sort(cg),o=0;o<n.length;o++)r=fg(n[o],r),r=sr(r,r.next);return r}function cg(t,e){return t.x-e.x}function fg(t,e){var r=pg(t,e);if(!r)return e;var i=yu(r,t),n=sr(r,r.next);return sr(i,i.next),e===r?n:e}function pg(t,e){var r=e,i=t.x,n=t.y,o=-1/0,a;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var l=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(l<=i&&l>o){if(o=l,l===i){if(n===r.y)return r;if(n===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!a)return null;if(i===o)return a;var c=a,f=a.x,d=a.y,v=1/0,_;r=a;do i>=r.x&&r.x>=f&&i!==r.x&&ri(n<d?i:o,n,f,d,n<d?o:i,n,r.x,r.y)&&(_=Math.abs(n-r.y)/(i-r.x),Wi(r,t)&&(_<v||_===v&&(r.x>a.x||r.x===a.x&&dg(a,r)))&&(a=r,v=_)),r=r.next;while(r!==c);return a}function dg(t,e){return Dt(t.prev,t,e.prev)<0&&Dt(e.next,t,t.next)<0}function vg(t,e,r,i){var n=t;do n.z===null&&(n.z=Fs(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,_g(n)}function _g(t){var e,r,i,n,o,a,l,c,f=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,i=r,l=0,e=0;e<f&&(l++,i=i.nextZ,!!i);e++);for(c=f;l>0||c>0&&i;)l!==0&&(c===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,l--):(n=i,i=i.nextZ,c--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,f*=2}while(a>1);return t}function Fs(t,e,r,i,n){return t=32767*(t-r)*n,e=32767*(e-i)*n,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function mg(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function ri(t,e,r,i,n,o,a,l){return(n-a)*(e-l)-(t-a)*(o-l)>=0&&(t-a)*(i-l)-(r-a)*(e-l)>=0&&(r-a)*(o-l)-(n-a)*(i-l)>=0}function gg(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!yg(t,e)&&(Wi(t,e)&&Wi(e,t)&&bg(t,e)&&(Dt(t.prev,t,e.prev)||Dt(t,e.prev,e))||jn(t,e)&&Dt(t.prev,t,t.next)>0&&Dt(e.prev,e,e.next)>0)}function Dt(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function jn(t,e){return t.x===e.x&&t.y===e.y}function gu(t,e,r,i){var n=Wn(Dt(t,e,r)),o=Wn(Dt(t,e,i)),a=Wn(Dt(r,i,t)),l=Wn(Dt(r,i,e));return!!(n!==o&&a!==l||n===0&&zn(t,r,e)||o===0&&zn(t,i,e)||a===0&&zn(r,t,i)||l===0&&zn(r,e,i))}function zn(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Wn(t){return t>0?1:t<0?-1:0}function yg(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&gu(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Wi(t,e){return Dt(t.prev,t,t.next)<0?Dt(t,e,t.next)>=0&&Dt(t,t.prev,e)>=0:Dt(t,e,t.prev)<0||Dt(t,t.next,e)<0}function bg(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function yu(t,e){var r=new Gs(t.i,t.x,t.y),i=new Gs(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function bu(t,e,r,i){var n=new Gs(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Yi(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Gs(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}$n.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,a=Math.abs(Bs(t,0,o,r));if(n)for(var l=0,c=e.length;l<c;l++){var f=e[l]*r,d=l<c-1?e[l+1]*r:t.length;a-=Math.abs(Bs(t,f,d,r))}var v=0;for(l=0;l<i.length;l+=3){var _=i[l]*r,m=i[l+1]*r,g=i[l+2]*r;v+=Math.abs((t[_]-t[g])*(t[m+1]-t[_+1])-(t[_]-t[m])*(t[g+1]-t[_+1]))}return a===0&&v===0?0:Math.abs((v-a)/a)};function Bs(t,e,r,i){for(var n=0,o=e,a=r-i;o<r;o+=i)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}$n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[n][o][a]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r};var xu=Ls.exports,Yn={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(r){var i=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,o=typeof Hn=="object"&&Hn;(o.global===o||o.window===o||o.self===o)&&(r=o);var a,l=2147483647,c=36,f=1,d=26,v=38,_=700,m=72,g=128,x="-",b=/^xn--/,w=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=c-f,A=Math.floor,P=String.fromCharCode,O;function D(G){throw RangeError(I[G])}function U(G,Y){for(var ot=G.length,q=[];ot--;)q[ot]=Y(G[ot]);return q}function B(G,Y){var ot=G.split("@"),q="";ot.length>1&&(q=ot[0]+"@",G=ot[1]),G=G.replace(C,".");var nt=G.split("."),St=U(nt,Y).join(".");return q+St}function $(G){for(var Y=[],ot=0,q=G.length,nt,St;ot<q;)nt=G.charCodeAt(ot++),nt>=55296&&nt<=56319&&ot<q?(St=G.charCodeAt(ot++),(St&64512)==56320?Y.push(((nt&1023)<<10)+(St&1023)+65536):(Y.push(nt),ot--)):Y.push(nt);return Y}function j(G){return U(G,function(Y){var ot="";return Y>65535&&(Y-=65536,ot+=P(Y>>>10&1023|55296),Y=56320|Y&1023),ot+=P(Y),ot}).join("")}function W(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:c}function lt(G,Y){return G+22+75*(G<26)-((Y!=0)<<5)}function z(G,Y,ot){var q=0;for(G=ot?A(G/_):G>>1,G+=A(G/Y);G>S*d>>1;q+=c)G=A(G/S);return A(q+(S+1)*G/(G+v))}function k(G){var Y=[],ot=G.length,q,nt=0,St=g,wt=m,Ot,Mt,gt,vt,ft,Rt,at,qt,Xt;for(Ot=G.lastIndexOf(x),Ot<0&&(Ot=0),Mt=0;Mt<Ot;++Mt)G.charCodeAt(Mt)>=128&&D("not-basic"),Y.push(G.charCodeAt(Mt));for(gt=Ot>0?Ot+1:0;gt<ot;){for(vt=nt,ft=1,Rt=c;gt>=ot&&D("invalid-input"),at=W(G.charCodeAt(gt++)),(at>=c||at>A((l-nt)/ft))&&D("overflow"),nt+=at*ft,qt=Rt<=wt?f:Rt>=wt+d?d:Rt-wt,!(at<qt);Rt+=c)Xt=c-qt,ft>A(l/Xt)&&D("overflow"),ft*=Xt;q=Y.length+1,wt=z(nt-vt,q,vt==0),A(nt/q)>l-St&&D("overflow"),St+=A(nt/q),nt%=q,Y.splice(nt++,0,St)}return j(Y)}function V(G){var Y,ot,q,nt,St,wt,Ot,Mt,gt,vt,ft,Rt=[],at,qt,Xt,ut;for(G=$(G),at=G.length,Y=g,ot=0,St=m,wt=0;wt<at;++wt)ft=G[wt],ft<128&&Rt.push(P(ft));for(q=nt=Rt.length,nt&&Rt.push(x);q<at;){for(Ot=l,wt=0;wt<at;++wt)ft=G[wt],ft>=Y&&ft<Ot&&(Ot=ft);for(qt=q+1,Ot-Y>A((l-ot)/qt)&&D("overflow"),ot+=(Ot-Y)*qt,Y=Ot,wt=0;wt<at;++wt)if(ft=G[wt],ft<Y&&++ot>l&&D("overflow"),ft==Y){for(Mt=ot,gt=c;vt=gt<=St?f:gt>=St+d?d:gt-St,!(Mt<vt);gt+=c)ut=Mt-vt,Xt=c-vt,Rt.push(P(lt(vt+ut%Xt,0))),Mt=A(ut/Xt);Rt.push(P(lt(Mt,0))),St=z(ot,qt,q==nt),ot=0,++q}++ot,++Y}return Rt.join("")}function Pt(G){return B(G,function(Y){return b.test(Y)?k(Y.slice(4).toLowerCase()):Y})}function dt(G){return B(G,function(Y){return w.test(Y)?"xn--"+V(Y):Y})}if(a={version:"1.3.2",ucs2:{decode:$,encode:j},decode:k,encode:V,toASCII:dt,toUnicode:Pt},i&&n)if(t.exports==i)n.exports=a;else for(O in a)a.hasOwnProperty(O)&&(i[O]=a[O]);else r.punycode=a})(Hn)})(Yn,Yn.exports);var xg={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},ii={};function wg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Tg=function(t,e,r,i){e=e||"&",r=r||"=";var n={};if(typeof t!="string"||t.length===0)return n;var o=/\+/g;t=t.split(e);var a=1e3;i&&typeof i.maxKeys=="number"&&(a=i.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var c=0;c<l;++c){var f=t[c].replace(o,"%20"),d=f.indexOf(r),v,_,m,g;d>=0?(v=f.substr(0,d),_=f.substr(d+1)):(v=f,_=""),m=decodeURIComponent(v),g=decodeURIComponent(_),wg(n,m)?Array.isArray(n[m])?n[m].push(g):n[m]=[n[m],g]:n[m]=g}return n},qi=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Eg=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(n){var o=encodeURIComponent(qi(n))+r;return Array.isArray(t[n])?t[n].map(function(a){return o+encodeURIComponent(qi(a))}).join(e):o+encodeURIComponent(qi(t[n]))}).join(e):i?encodeURIComponent(qi(i))+r+encodeURIComponent(qi(t)):""};ii.decode=ii.parse=Tg,ii.encode=ii.stringify=Eg;var Cg=Yn.exports,Fe=xg,Ig=qn,Pg=Mg,Rg=Bg;function Te(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Ag=/^([a-z0-9.+-]+:)/i,Ng=/:[0-9]*$/,Sg=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Og=["<",">",'"',"`"," ","\r",`
`,"	"],Ug=["{","}","|","\\","^","`"].concat(Og),Ms=["'"].concat(Ug),wu=["%","/","?",";","#"].concat(Ms),Tu=["/","?","#"],Lg=255,Eu=/^[+a-z0-9A-Z_-]{0,63}$/,Fg=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Gg={javascript:!0,"javascript:":!0},ks={javascript:!0,"javascript:":!0},ni={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ds=ii;function qn(t,e,r){if(t&&Fe.isObject(t)&&t instanceof Te)return t;var i=new Te;return i.parse(t,e,r),i}Te.prototype.parse=function(t,e,r){if(!Fe.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=i!==-1&&i<t.indexOf("#")?"?":"#",o=t.split(n),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(n);var l=t;if(l=l.trim(),!r&&t.split("#").length===1){var c=Sg.exec(l);if(c)return this.path=l,this.href=l,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=Ds.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=Ag.exec(l);if(f){f=f[0];var d=f.toLowerCase();this.protocol=d,l=l.substr(f.length)}if(r||f||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var v=l.substr(0,2)==="//";v&&!(f&&ks[f])&&(l=l.substr(2),this.slashes=!0)}if(!ks[f]&&(v||f&&!ni[f])){for(var _=-1,m=0;m<Tu.length;m++){var g=l.indexOf(Tu[m]);g!==-1&&(_===-1||g<_)&&(_=g)}var x,b;_===-1?b=l.lastIndexOf("@"):b=l.lastIndexOf("@",_),b!==-1&&(x=l.slice(0,b),l=l.slice(b+1),this.auth=decodeURIComponent(x)),_=-1;for(var m=0;m<wu.length;m++){var g=l.indexOf(wu[m]);g!==-1&&(_===-1||g<_)&&(_=g)}_===-1&&(_=l.length),this.host=l.slice(0,_),l=l.slice(_),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var C=this.hostname.split(/\./),m=0,I=C.length;m<I;m++){var S=C[m];if(!!S&&!S.match(Eu)){for(var A="",P=0,O=S.length;P<O;P++)S.charCodeAt(P)>127?A+="x":A+=S[P];if(!A.match(Eu)){var D=C.slice(0,m),U=C.slice(m+1),B=S.match(Fg);B&&(D.push(B[1]),U.unshift(B[2])),U.length&&(l="/"+U.join(".")+l),this.hostname=D.join(".");break}}}this.hostname.length>Lg?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=Cg.toASCII(this.hostname));var $=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+$,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!Gg[d])for(var m=0,I=Ms.length;m<I;m++){var W=Ms[m];if(l.indexOf(W)!==-1){var lt=encodeURIComponent(W);lt===W&&(lt=escape(W)),l=l.split(W).join(lt)}}var z=l.indexOf("#");z!==-1&&(this.hash=l.substr(z),l=l.slice(0,z));var k=l.indexOf("?");if(k!==-1?(this.search=l.substr(k),this.query=l.substr(k+1),e&&(this.query=Ds.parse(this.query)),l=l.slice(0,k)):e&&(this.search="",this.query={}),l&&(this.pathname=l),ni[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",V=this.search||"";this.path=$+V}return this.href=this.format(),this};function Bg(t){return Fe.isString(t)&&(t=qn(t)),t instanceof Te?t.format():Te.prototype.format.call(t)}Te.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,o="";this.host?n=t+this.host:this.hostname&&(n=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Fe.isObject(this.query)&&Object.keys(this.query).length&&(o=Ds.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ni[e])&&n!==!1?(n="//"+(n||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),r=r.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),a=a.replace("#","%23"),e+n+r+a+i};function Mg(t,e){return qn(t,!1,!0).resolve(e)}Te.prototype.resolve=function(t){return this.resolveObject(qn(t,!1,!0)).format()},Te.prototype.resolveObject=function(t){if(Fe.isString(t)){var e=new Te;e.parse(t,!1,!0),t=e}for(var r=new Te,i=Object.keys(this),n=0;n<i.length;n++){var o=i[n];r[o]=this[o]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var c=a[l];c!=="protocol"&&(r[c]=t[c])}return ni[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!ni[t.protocol]){for(var f=Object.keys(t),d=0;d<f.length;d++){var v=f[d];r[v]=t[v]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!ks[t.protocol]){for(var I=(t.pathname||"").split("/");I.length&&!(t.host=I.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),I[0]!==""&&I.unshift(""),I.length<2&&I.unshift(""),r.pathname=I.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var _=r.pathname||"",m=r.search||"";r.path=_+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&r.pathname.charAt(0)==="/",x=t.host||t.pathname&&t.pathname.charAt(0)==="/",b=x||g||r.host&&t.pathname,w=b,C=r.pathname&&r.pathname.split("/")||[],I=t.pathname&&t.pathname.split("/")||[],S=r.protocol&&!ni[r.protocol];if(S&&(r.hostname="",r.port=null,r.host&&(C[0]===""?C[0]=r.host:C.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(I[0]===""?I[0]=t.host:I.unshift(t.host)),t.host=null),b=b&&(I[0]===""||C[0]==="")),x)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,C=I;else if(I.length)C||(C=[]),C.pop(),C=C.concat(I),r.search=t.search,r.query=t.query;else if(!Fe.isNullOrUndefined(t.search)){if(S){r.hostname=r.host=C.shift();var A=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=t.search,r.query=t.query,(!Fe.isNull(r.pathname)||!Fe.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!C.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var P=C.slice(-1)[0],O=(r.host||t.host||C.length>1)&&(P==="."||P==="..")||P==="",D=0,U=C.length;U>=0;U--)P=C[U],P==="."?C.splice(U,1):P===".."?(C.splice(U,1),D++):D&&(C.splice(U,1),D--);if(!b&&!w)for(;D--;D)C.unshift("..");b&&C[0]!==""&&(!C[0]||C[0].charAt(0)!=="/")&&C.unshift(""),O&&C.join("/").substr(-1)!=="/"&&C.push("");var B=C[0]===""||C[0]&&C[0].charAt(0)==="/";if(S){r.hostname=r.host=B?"":C.length?C.shift():"";var A=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return b=b||r.host&&C.length,b&&!B&&C.unshift(""),C.length?r.pathname=C.join("/"):(r.pathname=null,r.path=null),(!Fe.isNull(r.pathname)||!Fe.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Te.prototype.parseHost=function(){var t=this.host,e=Ng.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ze;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(ze||(ze={}));var Ki;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Ki||(Ki={}));var Kn;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Kn||(Kn={}));var tt;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(tt||(tt={}));var Ee;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ee||(Ee={}));var H;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(H||(H={}));var Or;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Or||(Or={}));var Q;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Q||(Q={}));var Zn;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Zn||(Zn={}));var ee;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(ee||(ee={}));var Ce;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ce||(Ce={}));var We;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(We||(We={}));var Ie;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Ie||(Ie={}));var ar;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(ar||(ar={}));var Vs;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Vs||(Vs={}));var Ge;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Ge||(Ge={}));var se;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(se||(se={}));var Kt;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Kt||(Kt={}));var Be;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Be||(Be={}));/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oi={parse:Ig,format:Rg,resolve:Pg};Z.RETINA_PREFIX=/@([0-9\.]+)x/,Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Cu=!1,Iu="6.4.2";function kg(t){var e;if(!Cu){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+Iu+" - \u2730 "+t+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+Iu+" - "+t+" - http://www.pixijs.com/");Cu=!0}}var Hs;function Dg(){return typeof Hs=="undefined"&&(Hs=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),n=!!(i&&i.getContextAttributes().stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,n}catch{return!1}}()),Hs}var Vg="#f0f8ff",Hg="#faebd7",Xg="#00ffff",$g="#7fffd4",jg="#f0ffff",zg="#f5f5dc",Wg="#ffe4c4",Yg="#000000",qg="#ffebcd",Kg="#0000ff",Zg="#8a2be2",Jg="#a52a2a",Qg="#deb887",ty="#5f9ea0",ey="#7fff00",ry="#d2691e",iy="#ff7f50",ny="#6495ed",oy="#fff8dc",sy="#dc143c",ay="#00ffff",ly="#00008b",hy="#008b8b",uy="#b8860b",cy="#a9a9a9",fy="#006400",py="#a9a9a9",dy="#bdb76b",vy="#8b008b",_y="#556b2f",my="#ff8c00",gy="#9932cc",yy="#8b0000",by="#e9967a",xy="#8fbc8f",wy="#483d8b",Ty="#2f4f4f",Ey="#2f4f4f",Cy="#00ced1",Iy="#9400d3",Py="#ff1493",Ry="#00bfff",Ay="#696969",Ny="#696969",Sy="#1e90ff",Oy="#b22222",Uy="#fffaf0",Ly="#228b22",Fy="#ff00ff",Gy="#dcdcdc",By="#f8f8ff",My="#daa520",ky="#ffd700",Dy="#808080",Vy="#008000",Hy="#adff2f",Xy="#808080",$y="#f0fff0",jy="#ff69b4",zy="#cd5c5c",Wy="#4b0082",Yy="#fffff0",qy="#f0e68c",Ky="#fff0f5",Zy="#e6e6fa",Jy="#7cfc00",Qy="#fffacd",t0="#add8e6",e0="#f08080",r0="#e0ffff",i0="#fafad2",n0="#d3d3d3",o0="#90ee90",s0="#d3d3d3",a0="#ffb6c1",l0="#ffa07a",h0="#20b2aa",u0="#87cefa",c0="#778899",f0="#778899",p0="#b0c4de",d0="#ffffe0",v0="#00ff00",_0="#32cd32",m0="#faf0e6",g0="#ff00ff",y0="#800000",b0="#66cdaa",x0="#0000cd",w0="#ba55d3",T0="#9370db",E0="#3cb371",C0="#7b68ee",I0="#00fa9a",P0="#48d1cc",R0="#c71585",A0="#191970",N0="#f5fffa",S0="#ffe4e1",O0="#ffe4b5",U0="#ffdead",L0="#000080",F0="#fdf5e6",G0="#808000",B0="#6b8e23",M0="#ffa500",k0="#ff4500",D0="#da70d6",V0="#eee8aa",H0="#98fb98",X0="#afeeee",$0="#db7093",j0="#ffefd5",z0="#ffdab9",W0="#cd853f",Y0="#ffc0cb",q0="#dda0dd",K0="#b0e0e6",Z0="#800080",J0="#663399",Q0="#ff0000",tb="#bc8f8f",eb="#4169e1",rb="#8b4513",ib="#fa8072",nb="#f4a460",ob="#2e8b57",sb="#fff5ee",ab="#a0522d",lb="#c0c0c0",hb="#87ceeb",ub="#6a5acd",cb="#708090",fb="#708090",pb="#fffafa",db="#00ff7f",vb="#4682b4",_b="#d2b48c",mb="#008080",gb="#d8bfd8",yb="#ff6347",bb="#40e0d0",xb="#ee82ee",wb="#f5deb3",Tb="#ffffff",Eb="#f5f5f5",Cb="#ffff00",Ib="#9acd32",Pb={aliceblue:Vg,antiquewhite:Hg,aqua:Xg,aquamarine:$g,azure:jg,beige:zg,bisque:Wg,black:Yg,blanchedalmond:qg,blue:Kg,blueviolet:Zg,brown:Jg,burlywood:Qg,cadetblue:ty,chartreuse:ey,chocolate:ry,coral:iy,cornflowerblue:ny,cornsilk:oy,crimson:sy,cyan:ay,darkblue:ly,darkcyan:hy,darkgoldenrod:uy,darkgray:cy,darkgreen:fy,darkgrey:py,darkkhaki:dy,darkmagenta:vy,darkolivegreen:_y,darkorange:my,darkorchid:gy,darkred:yy,darksalmon:by,darkseagreen:xy,darkslateblue:wy,darkslategray:Ty,darkslategrey:Ey,darkturquoise:Cy,darkviolet:Iy,deeppink:Py,deepskyblue:Ry,dimgray:Ay,dimgrey:Ny,dodgerblue:Sy,firebrick:Oy,floralwhite:Uy,forestgreen:Ly,fuchsia:Fy,gainsboro:Gy,ghostwhite:By,goldenrod:My,gold:ky,gray:Dy,green:Vy,greenyellow:Hy,grey:Xy,honeydew:$y,hotpink:jy,indianred:zy,indigo:Wy,ivory:Yy,khaki:qy,lavenderblush:Ky,lavender:Zy,lawngreen:Jy,lemonchiffon:Qy,lightblue:t0,lightcoral:e0,lightcyan:r0,lightgoldenrodyellow:i0,lightgray:n0,lightgreen:o0,lightgrey:s0,lightpink:a0,lightsalmon:l0,lightseagreen:h0,lightskyblue:u0,lightslategray:c0,lightslategrey:f0,lightsteelblue:p0,lightyellow:d0,lime:v0,limegreen:_0,linen:m0,magenta:g0,maroon:y0,mediumaquamarine:b0,mediumblue:x0,mediumorchid:w0,mediumpurple:T0,mediumseagreen:E0,mediumslateblue:C0,mediumspringgreen:I0,mediumturquoise:P0,mediumvioletred:R0,midnightblue:A0,mintcream:N0,mistyrose:S0,moccasin:O0,navajowhite:U0,navy:L0,oldlace:F0,olive:G0,olivedrab:B0,orange:M0,orangered:k0,orchid:D0,palegoldenrod:V0,palegreen:H0,paleturquoise:X0,palevioletred:$0,papayawhip:j0,peachpuff:z0,peru:W0,pink:Y0,plum:q0,powderblue:K0,purple:Z0,rebeccapurple:J0,red:Q0,rosybrown:tb,royalblue:eb,saddlebrown:rb,salmon:ib,sandybrown:nb,seagreen:ob,seashell:sb,sienna:ab,silver:lb,skyblue:hb,slateblue:ub,slategray:cb,slategrey:fb,snow:pb,springgreen:db,steelblue:vb,tan:_b,teal:mb,thistle:gb,tomato:yb,turquoise:bb,violet:xb,wheat:wb,white:Tb,whitesmoke:Eb,yellow:Cb,yellowgreen:Ib};function si(t,e){return e===void 0&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function Pu(t){var e=t.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function Ru(t){return typeof t=="string"&&(t=Pb[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1))),parseInt(t,16)}function Rb(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[tt.NORMAL_NPM]=tt.NORMAL,t[tt.ADD_NPM]=tt.ADD,t[tt.SCREEN_NPM]=tt.SCREEN,e[tt.NORMAL]=tt.NORMAL_NPM,e[tt.ADD]=tt.ADD_NPM,e[tt.SCREEN]=tt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}var Au=Rb();function Nu(t,e){return Au[e?1:0][t]}function Ab(t,e,r,i){return r=r||new Float32Array(4),i||i===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function Xs(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;var r=t>>16&255,i=t>>8&255,n=t&255;return r=r*e+.5|0,i=i*e+.5|0,n=n*e+.5|0,(e*255<<24)+(r<<16)+(i<<8)+n}function Su(t,e,r,i){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(i||i===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Nb(t,e){e===void 0&&(e=null);var r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function Ou(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function Jn(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Uu(t){return!(t&t-1)&&!!t}function Lu(t){var e=(t>65535?1:0)<<4;t>>>=e;var r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Ye(t,e,r){var i=t.length,n;if(!(e>=i||r===0)){r=e+r>i?i-e:r;var o=i-r;for(n=e;n<o;++n)t[n]=t[n+r];t.length=o}}function ai(t){return t===0?0:t<0?-1:1}var Sb=0;function Ur(){return++Sb}var Fu={};function Zi(t,e,r){if(r===void 0&&(r=3),!Fu[e]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),Fu[e]=!0}}var Gu={},Me=Object.create(null),lr=Object.create(null),Bu=function(){function t(e,r,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||Z.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t}();function Ob(t){var e=t.width,r=t.height,i=t.getContext("2d"),n=i.getImageData(0,0,e,r),o=n.data,a=o.length,l={top:null,left:null,right:null,bottom:null},c=null,f,d,v;for(f=0;f<a;f+=4)o[f+3]!==0&&(d=f/4%e,v=~~(f/4/e),l.top===null&&(l.top=v),(l.left===null||d<l.left)&&(l.left=d),(l.right===null||l.right<d)&&(l.right=d+1),(l.bottom===null||l.bottom<v)&&(l.bottom=v));return l.top!==null&&(e=l.right-l.left,r=l.bottom-l.top+1,c=i.getImageData(l.left,l.top,e,r)),{height:r,width:e,data:c}}var Qn;function Ub(t,e){if(e===void 0&&(e=globalThis.location),t.indexOf("data:")===0)return"";e=e||globalThis.location,Qn||(Qn=document.createElement("a")),Qn.href=t;var r=oi.parse(Qn.href),i=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!i||r.protocol!==e.protocol?"anonymous":""}function to(t,e){var r=Z.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e!==void 0?e:1}/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var eo=Math.PI*2,Mu=180/Math.PI,ku=Math.PI/180,Vt;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(Vt||(Vt={}));var Bt=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},t.prototype.copyTo=function(e){return e.set(this.x,this.y),e},t.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),ro=[new Bt,new Bt,new Bt,new Bt],ct=function(){function t(e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(n),this.type=Vt.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},t.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},t.prototype.intersects=function(e,r){if(!r){var i=this.x<e.x?e.x:this.x,n=this.right>e.right?e.right:this.right;if(n<=i)return!1;var o=this.y<e.y?e.y:this.y,a=this.bottom>e.bottom?e.bottom:this.bottom;return a>o}var l=this.left,c=this.right,f=this.top,d=this.bottom;if(c<=l||d<=f)return!1;var v=ro[0].set(e.left,e.top),_=ro[1].set(e.left,e.bottom),m=ro[2].set(e.right,e.top),g=ro[3].set(e.right,e.bottom);if(m.x<=v.x||_.y<=v.y)return!1;var x=Math.sign(r.a*r.d-r.b*r.c);if(x===0||(r.apply(v,v),r.apply(_,_),r.apply(m,m),r.apply(g,g),Math.max(v.x,_.x,m.x,g.x)<=l||Math.min(v.x,_.x,m.x,g.x)>=c||Math.max(v.y,_.y,m.y,g.y)<=f||Math.min(v.y,_.y,m.y,g.y)>=d))return!1;var b=x*(_.y-v.y),w=x*(v.x-_.x),C=b*l+w*f,I=b*c+w*f,S=b*l+w*d,A=b*c+w*d;if(Math.max(C,I,S,A)<=b*v.x+w*v.y||Math.min(C,I,S,A)>=b*g.x+w*g.y)return!1;var P=x*(v.y-m.y),O=x*(m.x-v.x),D=P*l+O*f,U=P*c+O*f,B=P*l+O*d,$=P*c+O*d;return!(Math.max(D,U,B,$)<=P*v.x+O*v.y||Math.min(D,U,B,$)>=P*g.x+O*g.y)},t.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},t.prototype.fit=function(e){var r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=n,this.height=Math.max(o-n,0),this},t.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var i=Math.ceil((this.x+this.width-r)*e)/e,n=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=n,this.height=o-n,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Lb=function(){function t(e,r,i){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=r,this.radius=i,this.type=Vt.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(e,r){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-e,o=this.y-r;return n*=n,o*=o,n+o<=i},t.prototype.getBounds=function(){return new ct(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),Fb=function(){function t(e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=e,this.y=r,this.width=i,this.height=n,this.type=Vt.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,n=(r-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new ct(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),io=function(){function t(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var n=Array.isArray(r[0])?r[0]:r;if(typeof n[0]!="number"){for(var o=[],a=0,l=n.length;a<l;a++)o.push(n[a].x,n[a].y);n=o}this.points=n,this.type=Vt.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=this.points.slice(),r=new t(e);return r.closeStroke=this.closeStroke,r},t.prototype.contains=function(e,r){for(var i=!1,n=this.points.length/2,o=0,a=n-1;o<n;a=o++){var l=this.points[o*2],c=this.points[o*2+1],f=this.points[a*2],d=this.points[a*2+1],v=c>r!=d>r&&e<(f-l)*((r-c)/(d-c))+l;v&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},t}(),Gb=function(){function t(e,r,i,n,o){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=20),this.x=e,this.y=r,this.width=i,this.height=n,this.radius=o,this.type=Vt.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;var n=e-(this.x+i),o=r-(this.y+i),a=i*i;if(n*n+o*o<=a||(n=e-(this.x+this.width-i),n*n+o*o<=a)||(o=r-(this.y+this.height-i),n*n+o*o<=a)||(n=e-(this.x+i),n*n+o*o<=a))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),li=function(){function t(e,r,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=e,this.scope=r}return t.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(e){return e.set(this._x,this._y),e},t.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),jt=function(){function t(e,r,i,n,o,a){e===void 0&&(e=1),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),o===void 0&&(o=0),a===void 0&&(a=0),this.array=null,this.a=e,this.b=r,this.c=i,this.d=n,this.tx=o,this.ty=a}return t.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.prototype.set=function(e,r,i,n,o,a){return this.a=e,this.b=r,this.c=i,this.d=n,this.tx=o,this.ty=a,this},t.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(e,r){r=r||new Bt;var i=e.x,n=e.y;return r.x=this.a*i+this.c*n+this.tx,r.y=this.b*i+this.d*n+this.ty,r},t.prototype.applyInverse=function(e,r){r=r||new Bt;var i=1/(this.a*this.d+this.c*-this.b),n=e.x,o=e.y;return r.x=this.d*i*n+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*o+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,r},t.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},t.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},t.prototype.rotate=function(e){var r=Math.cos(e),i=Math.sin(e),n=this.a,o=this.c,a=this.tx;return this.a=n*r-this.b*i,this.b=n*i+this.b*r,this.c=o*r-this.d*i,this.d=o*i+this.d*r,this.tx=a*r-this.ty*i,this.ty=a*i+this.ty*r,this},t.prototype.append=function(e){var r=this.a,i=this.b,n=this.c,o=this.d;return this.a=e.a*r+e.b*n,this.b=e.a*i+e.b*o,this.c=e.c*r+e.d*n,this.d=e.c*i+e.d*o,this.tx=e.tx*r+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*o+this.ty,this},t.prototype.setTransform=function(e,r,i,n,o,a,l,c,f){return this.a=Math.cos(l+f)*o,this.b=Math.sin(l+f)*o,this.c=-Math.sin(l-c)*a,this.d=Math.cos(l-c)*a,this.tx=e-(i*this.a+n*this.c),this.ty=r-(i*this.b+n*this.d),this},t.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},t.prototype.decompose=function(e){var r=this.a,i=this.b,n=this.c,o=this.d,a=e.pivot,l=-Math.atan2(-n,o),c=Math.atan2(i,r),f=Math.abs(l+c);return f<1e-5||Math.abs(eo-f)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=c),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(n*n+o*o),e.position.x=this.tx+(a.x*r+a.y*n),e.position.y=this.ty+(a.x*i+a.y*o),e},t.prototype.invert=function(){var e=this.a,r=this.b,i=this.c,n=this.d,o=this.tx,a=e*n-r*i;return this.a=n/a,this.b=-r/a,this.c=-i/a,this.d=e/a,this.tx=(i*this.ty-n*o)/a,this.ty=-(e*this.ty-r*o)/a,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),Lr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Fr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Gr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Br=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],$s=[],Du=[],no=Math.sign;function Bb(){for(var t=0;t<16;t++){var e=[];$s.push(e);for(var r=0;r<16;r++)for(var i=no(Lr[t]*Lr[r]+Gr[t]*Fr[r]),n=no(Fr[t]*Lr[r]+Br[t]*Fr[r]),o=no(Lr[t]*Gr[r]+Gr[t]*Br[r]),a=no(Fr[t]*Gr[r]+Br[t]*Br[r]),l=0;l<16;l++)if(Lr[l]===i&&Fr[l]===n&&Gr[l]===o&&Br[l]===a){e.push(l);break}}for(var t=0;t<16;t++){var c=new jt;c.set(Lr[t],Fr[t],Gr[t],Br[t],0,0),Du.push(c)}}Bb();var Ht={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Lr[t]},uY:function(t){return Fr[t]},vX:function(t){return Gr[t]},vY:function(t){return Br[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,e){return $s[t][e]},sub:function(t,e){return $s[t][Ht.inv(e)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,e){return Math.abs(t)*2<=Math.abs(e)?e>=0?Ht.S:Ht.N:Math.abs(e)*2<=Math.abs(t)?t>0?Ht.E:Ht.W:e>0?t>0?Ht.SE:Ht.SW:t>0?Ht.NE:Ht.NW},matrixAppendRotationInv:function(t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var n=Du[Ht.inv(e)];n.tx=r,n.ty=i,t.append(n)}},js=function(){function t(){this.worldTransform=new jt,this.localTransform=new jt,this.position=new li(this.onChange,this,0,0),this.scale=new li(this.onChange,this,1,1),this.pivot=new li(this.onChange,this,0,0),this.skew=new li(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,n=this.worldTransform;n.a=r.a*i.a+r.b*i.c,n.b=r.a*i.b+r.b*i.d,n.c=r.c*i.a+r.d*i.c,n.d=r.c*i.b+r.d*i.d,n.tx=r.tx*i.a+r.ty*i.c+i.tx,n.ty=r.tx*i.b+r.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Z.SORTABLE_CHILDREN=!1;var Ji=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ct.EMPTY:(e=e||new ct(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var i=e.a,n=e.b,o=e.c,a=e.d,l=e.tx,c=e.ty,f=i*r.x+o*r.y+l,d=n*r.x+a*r.y+c;this.minX=Math.min(this.minX,f),this.maxX=Math.max(this.maxX,f),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)},t.prototype.addQuad=function(e){var r=this.minX,i=this.minY,n=this.maxX,o=this.maxY,a=e[0],l=e[1];r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,a=e[2],l=e[3],r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,a=e[4],l=e[5],r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,a=e[6],l=e[7],r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,this.minX=r,this.minY=i,this.maxX=n,this.maxY=o},t.prototype.addFrame=function(e,r,i,n,o){this.addFrameMatrix(e.worldTransform,r,i,n,o)},t.prototype.addFrameMatrix=function(e,r,i,n,o){var a=e.a,l=e.b,c=e.c,f=e.d,d=e.tx,v=e.ty,_=this.minX,m=this.minY,g=this.maxX,x=this.maxY,b=a*r+c*i+d,w=l*r+f*i+v;_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,b=a*n+c*i+d,w=l*n+f*i+v,_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,b=a*r+c*o+d,w=l*r+f*o+v,_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,b=a*n+c*o+d,w=l*n+f*o+v,_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,this.minX=_,this.minY=m,this.maxX=g,this.maxY=x},t.prototype.addVertexData=function(e,r,i){for(var n=this.minX,o=this.minY,a=this.maxX,l=this.maxY,c=r;c<i;c+=2){var f=e[c],d=e[c+1];n=f<n?f:n,o=d<o?d:o,a=f>a?f:a,l=d>l?d:l}this.minX=n,this.minY=o,this.maxX=a,this.maxY=l},t.prototype.addVertices=function(e,r,i,n){this.addVerticesMatrix(e.worldTransform,r,i,n)},t.prototype.addVerticesMatrix=function(e,r,i,n,o,a){o===void 0&&(o=0),a===void 0&&(a=o);for(var l=e.a,c=e.b,f=e.c,d=e.d,v=e.tx,_=e.ty,m=this.minX,g=this.minY,x=this.maxX,b=this.maxY,w=i;w<n;w+=2){var C=r[w],I=r[w+1],S=l*C+f*I+v,A=d*I+c*C+_;m=Math.min(m,S-o),x=Math.max(x,S+o),g=Math.min(g,A-a),b=Math.max(b,A+a)}this.minX=m,this.minY=g,this.maxX=x,this.maxY=b},t.prototype.addBounds=function(e){var r=this.minX,i=this.minY,n=this.maxX,o=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>o?e.maxY:o},t.prototype.addBoundsMask=function(e,r){var i=e.minX>r.minX?e.minX:r.minX,n=e.minY>r.minY?e.minY:r.minY,o=e.maxX<r.maxX?e.maxX:r.maxX,a=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=o&&n<=a){var l=this.minX,c=this.minY,f=this.maxX,d=this.maxY;this.minX=i<l?i:l,this.minY=n<c?n:c,this.maxX=o>f?o:f,this.maxY=a>d?a:d}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var i=e.minX>r.x?e.minX:r.x,n=e.minY>r.y?e.minY:r.y,o=e.maxX<r.x+r.width?e.maxX:r.x+r.width,a=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=o&&n<=a){var l=this.minX,c=this.minY,f=this.maxX,d=this.maxY;this.minX=i<l?i:l,this.minY=n<c?n:c,this.maxX=o>f?o:f,this.maxY=a>d?a:d}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,i,n,o,a){e-=o,r-=a,i+=o,n+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>n?this.maxY:n},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var zs=function(t,e){return zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},zs(t,e)};function Ws(t,e){zs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Yt=function(t){Ws(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new js,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new Ji,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var i=Object.keys(r),n=0;n<i.length;++n){var o=i[n];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new ct),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new ct),r=this._localBoundsRect),this._localBounds||(this._localBounds=new Ji);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var l=this.getBounds(!1,r);return this.parent=n,this.transform=i,this._bounds=o,this._bounds.updateID+=this._boundsID-a,l},e.prototype.toGlobal=function(r,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},e.prototype.toLocal=function(r,i,n,o){return i&&(r=i.toGlobal(r,n,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,n)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,i,n,o,a,l,c,f,d){return r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),o===void 0&&(o=1),a===void 0&&(a=0),l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=0),d===void 0&&(d=0),this.position.x=r,this.position.y=i,this.scale.x=n||1,this.scale.y=o||1,this.rotation=a,this.skew.x=l,this.skew.y=c,this.pivot.x=f,this.pivot.y=d,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Vu),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Mu},set:function(r){this.transform.rotation=r*ku},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var i=this._mask.maskObject||this._mask;i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1)}if(this._mask=r,this._mask){var i=this._mask.maskObject||this._mask;i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++}}},enumerable:!1,configurable:!0}),e}(ei),Vu=function(t){Ws(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(Yt);Yt.prototype.displayObjectUpdateTransform=Yt.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Hu;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Hu||(Hu={}));var Xu;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Xu||(Xu={}));var $u;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})($u||($u={}));var ju;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(ju||(ju={}));var zu;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(zu||(zu={}));var Wu;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Wu||(Wu={}));var Yu;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Yu||(Yu={}));var qu;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(qu||(qu={}));var Ku;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Ku||(Ku={}));var Zu;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Zu||(Zu={}));var Ju;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ju||(Ju={}));var Qu;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Qu||(Qu={}));var tc;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(tc||(tc={}));var ec;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(ec||(ec={}));var rc;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(rc||(rc={}));var ic;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(ic||(ic={}));var Ys;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(Ys||(Ys={}));var nc;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(nc||(nc={}));var oc;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(oc||(oc={}));function Mb(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var ce=function(t){Ws(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=Z.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var o=0;o<i.length;o++)this.addChild(i[o]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},e.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},e.prototype.swapChildren=function(r,i){if(r!==i){var n=this.getChildIndex(r),o=this.getChildIndex(i);this.children[n]=i,this.children[o]=r,this.onChildrenChange(n<o?n:o)}},e.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(r);Ye(this.children,n,1),this.children.splice(i,0,r),this.onChildrenChange(i)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var o=0;o<i.length;o++)this.removeChild(i[o]);else{var a=i[0],l=this.children.indexOf(a);if(l===-1)return null;a.parent=null,a.transform._parentID=-1,Ye(this.children,l,1),this._boundsID++,this.onChildrenChange(l),a.emit("removed",this),this.emit("childRemoved",a,this,l)}return i[0]},e.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,Ye(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},e.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var n=r,o=i,a=o-n,l;if(a>0&&a<=o){l=this.children.splice(n,a);for(var c=0;c<l.length;++c)l[c].parent=null,l[c].transform&&(l[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var c=0;c<l.length;++c)l[c].emit("removed",this),this.emit("childRemoved",l[c],this,c);return l}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,i=0,n=this.children.length;i<n;++i){var o=this.children[i];o._lastSortedIndex=i,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(Mb),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var n=t.prototype.getLocalBounds.call(this,r);if(!i)for(var o=0,a=this.children.length;o<a;++o){var l=this.children[o];l.visible&&l.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var i=r.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var n,o;if(this.cullArea?(n=this.cullArea,o=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0)),n&&i.intersects(n,o))this._render(r);else if(this.cullArea)return;for(var a=0,l=this.children.length;a<l;++a){var c=this.children[a],f=c.cullable;c.cullable=f||!this.cullArea,c.render(r),c.cullable=f}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(r)}},e.prototype.renderAdvanced=function(r){var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o])}var a=i&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Ys.NONE));if(a&&r.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),n&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,l=this.children.length;o<l;++o)this.children[o].render(r)}a&&r.batch.flush(),n&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,n=this.removeChildren(0,this.children.length);if(i)for(var o=0;o<n.length;++o)n[o].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(Yt);ce.prototype.containerUpdateTransform=ce.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var kb={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Yt.mixin(kb);var Db=9,oo=100,Vb=0,Hb=0,sc=2,ac=1,Xb=-1e3,$b=-1e3,jb=2,zb=function(){function t(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Le.tablet||Le.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=oo+"px",r.style.height=oo+"px",r.style.position="absolute",r.style.top=Vb+"px",r.style.left=Hb+"px",r.style.zIndex=sc.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var e=this,r=document.createElement("button");r.style.width=ac+"px",r.style.height=ac+"px",r.style.position="absolute",r.style.top=Xb+"px",r.style.left=$b+"px",r.style.zIndex=jb.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},t.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},t.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var r=e.children;if(r)for(var i=0;i<r.length;i++)this.updateAccessibleObjects(r[i])}},t.prototype.update=function(){var e=performance.now();if(!(Le.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),i=r.left,n=r.top,o=r.width,a=r.height,l=this.renderer,c=l.width,f=l.height,d=l.resolution,v=o/c*d,_=a/f*d,m=this.div;m.style.left=i+"px",m.style.top=n+"px",m.style.width=c+"px",m.style.height=f+"px";for(var g=0;g<this.children.length;g++){var x=this.children[g];if(x.renderId!==this.renderId)x._accessibleActive=!1,Ye(this.children,g,1),this.div.removeChild(x._accessibleDiv),this.pool.push(x._accessibleDiv),x._accessibleDiv=null,g--;else{m=x._accessibleDiv;var b=x.hitArea,w=x.worldTransform;x.hitArea?(m.style.left=(w.tx+b.x*w.a)*v+"px",m.style.top=(w.ty+b.y*w.d)*_+"px",m.style.width=b.width*w.a*v+"px",m.style.height=b.height*w.d*_+"px"):(b=x.getBounds(),this.capHitArea(b),m.style.left=b.x*v+"px",m.style.top=b.y*_+"px",m.style.width=b.width*v+"px",m.style.height=b.height*_+"px",m.title!==x.accessibleTitle&&x.accessibleTitle!==null&&(m.title=x.accessibleTitle),m.getAttribute("aria-label")!==x.accessibleHint&&x.accessibleHint!==null&&m.setAttribute("aria-label",x.accessibleHint)),(x.accessibleTitle!==m.title||x.tabIndex!==m.tabIndex)&&(m.title=x.accessibleTitle,m.tabIndex=x.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}},t.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},t.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var r=this.renderer,i=r.width,n=r.height;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>n&&(e.height=n-e.y)},t.prototype.addChild=function(e){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=oo+"px",r.style.height=oo+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=sc.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},t.prototype._onClick=function(e){var r=this.renderer.plugins.interaction,i=e.target.displayObject,n=r.eventData;r.dispatchEvent(i,"click",n),r.dispatchEvent(i,"pointertap",n),r.dispatchEvent(i,"tap",n)},t.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,i=e.target.displayObject,n=r.eventData;r.dispatchEvent(i,"mouseover",n)},t.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,i=e.target.displayObject,n=r.eventData;r.dispatchEvent(i,"mouseout",n)},t.prototype._onKeyDown=function(e){e.keyCode===Db&&this.activate()},t.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Z.TARGET_FPMS=.06;var qe;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(qe||(qe={}));var qs=function(){function t(e,r,i,n){r===void 0&&(r=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=i,this.once=n}return t.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},t.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},t.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},t}(),ne=function(){function t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new qs(null,null,1/0),this.deltaMS=1/Z.TARGET_FPMS,this.elapsedMS=1/Z.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(e,r,i){return i===void 0&&(i=qe.NORMAL),this._addListener(new qs(e,r,i))},t.prototype.addOnce=function(e,r,i){return i===void 0&&(i=qe.NORMAL),this._addListener(new qs(e,r,i,!0))},t.prototype._addListener=function(e){var r=this._head.next,i=this._head;if(!r)e.connect(i);else{for(;r;){if(e.priority>r.priority){e.connect(i);break}i=r,r=r.next}e.previous||e.connect(i)}return this._startIfPossible(),this},t.prototype.remove=function(e,r){for(var i=this._head.next;i;)i.match(e,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Z.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,r)/1e3,Z.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),Wb=function(){function t(){}return t.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,qe.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?ne.shared:new ne,e.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},t}();/*!
 * @pixi/interaction - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var lc=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Bt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(e,r,i){return e.worldTransform.applyInverse(i||this.global,r)},t.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var r="buttons"in e&&e.buttons;this.buttons=Number.isInteger(r)?r:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ks=function(t,e){return Ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ks(t,e)};function Yb(t,e){Ks(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qb=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Zs=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(e,r){r?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),t}(),Kb=function(){function t(){this._tempPoint=new Bt}return t.prototype.recursiveFindHit=function(e,r,i,n,o){if(!r||!r.visible)return!1;var a=e.data.global;o=r.interactive||o;var l=!1,c=o,f=!0;if(r.hitArea?(n&&(r.worldTransform.applyInverse(a,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?l=!0:(n=!1,f=!1)),c=!1):r._mask&&n&&(r._mask.containsPoint&&r._mask.containsPoint(a)||(n=!1)),f&&r.interactiveChildren&&r.children)for(var d=r.children,v=d.length-1;v>=0;v--){var _=d[v],m=this.recursiveFindHit(e,_,i,n,c);if(m){if(!_.parent)continue;c=!1,m&&(e.target&&(n=!1),l=!0)}}return o&&(n&&!e.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(a)&&(l=!0),r.interactive&&(l&&!e.target&&(e.target=r),i&&i(e,r,!!l))),l},t.prototype.findHit=function(e,r,i,n){this.recursiveFindHit(e,r,i,n,!1)},t}(),Zb={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Yt.mixin(Zb);var so=1,ao={target:null,data:{global:null}},Jb=function(t){Yb(e,t);function e(r,i){var n=t.call(this)||this;return i=i||{},n.renderer=r,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new lc,n.mouse.identifier=so,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[so]=n.mouse,n.interactionDataPool=[],n.eventData=new qb,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new Kb,n._tempDisplayObject=new Vu,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(r,i){return ao.target=null,ao.data.global=r,i||(i=this.lastObjectRendered),this.processInteractive(ao,i,null,!0),ao.target},e.prototype.setTargetElement=function(r,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=i,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(ne.system.add(this.tickerUpdate,this,qe.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){!this.tickerAdded||(ne.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var i=this.activeInteractionData[r];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(r){r=r||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var n=this.cursorStyles[r];if(n)switch(typeof n){case"string":i&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(r);break;case"object":i&&Object.assign(this.interactionDOMElement.style,n);break}else i&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},e.prototype.dispatchEvent=function(r,i,n){(!n.stopPropagationHint||r===n.stopsPropagatingAt)&&(n.currentTarget=r,n.type=i,r.emit(i,n),r[i]&&r[i](n))},e.prototype.delayDispatchEvent=function(r,i,n){this.delayedEvents.push({displayObject:r,eventString:i,eventData:n})},e.prototype.mapPositionToPoint=function(r,i,n){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;r.x=(i-o.left)*(this.interactionDOMElement.width/o.width)*a,r.y=(n-o.top)*(this.interactionDOMElement.height/o.height)*a},e.prototype.processInteractive=function(r,i,n,o){var a=this.search.findHit(r,i,n,o),l=this.delayedEvents;if(!l.length)return a;r.stopPropagationHint=!1;var c=l.length;this.delayedEvents=[];for(var f=0;f<c;f++){var d=l[f],v=d.displayObject,_=d.eventString,m=d.eventData;m.stopsPropagatingAt===v&&(m.stopPropagationHint=!0),this.dispatchEvent(v,_,m)}return a},e.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);if(this.autoPreventDefault&&i[0].isNormalized){var n=r.cancelable||!("cancelable"in r);n&&r.preventDefault()}for(var o=i.length,a=0;a<o;a++){var l=i[a],c=this.getInteractionDataForPointerId(l),f=this.configureInteractionEventForDOMEvent(this.eventData,l,c);if(f.data.originalEvent=r,this.processInteractive(f,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",f),l.pointerType==="touch")this.emit("touchstart",f);else if(l.pointerType==="mouse"||l.pointerType==="pen"){var d=l.button===2;this.emit(d?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(r,i,n){var o=r.data,a=r.data.identifier;if(n){if(i.trackedPointers[a]||(i.trackedPointers[a]=new Zs(a)),this.dispatchEvent(i,"pointerdown",r),o.pointerType==="touch")this.dispatchEvent(i,"touchstart",r);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var l=o.button===2;l?i.trackedPointers[a].rightDown=!0:i.trackedPointers[a].leftDown=!0,this.dispatchEvent(i,l?"rightdown":"mousedown",r)}}},e.prototype.onPointerComplete=function(r,i,n){for(var o=this.normalizeToPointerData(r),a=o.length,l=r.target!==this.interactionDOMElement?"outside":"",c=0;c<a;c++){var f=o[c],d=this.getInteractionDataForPointerId(f),v=this.configureInteractionEventForDOMEvent(this.eventData,f,d);if(v.data.originalEvent=r,this.processInteractive(v,this.lastObjectRendered,n,i||!l),this.emit(i?"pointercancel":"pointerup"+l,v),f.pointerType==="mouse"||f.pointerType==="pen"){var _=f.button===2;this.emit(_?"rightup"+l:"mouseup"+l,v)}else f.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+l,v),this.releaseInteractionDataForPointerId(f.pointerId))}},e.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(r,i){var n=r.data,o=r.data.identifier;i.trackedPointers[o]!==void 0&&(delete i.trackedPointers[o],this.dispatchEvent(i,"pointercancel",r),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",r))},e.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},e.prototype.processPointerUp=function(r,i,n){var o=r.data,a=r.data.identifier,l=i.trackedPointers[a],c=o.pointerType==="touch",f=o.pointerType==="mouse"||o.pointerType==="pen",d=!1;if(f){var v=o.button===2,_=Zs.FLAGS,m=v?_.RIGHT_DOWN:_.LEFT_DOWN,g=l!==void 0&&l.flags&m;n?(this.dispatchEvent(i,v?"rightup":"mouseup",r),g&&(this.dispatchEvent(i,v?"rightclick":"click",r),d=!0)):g&&this.dispatchEvent(i,v?"rightupoutside":"mouseupoutside",r),l&&(v?l.rightDown=!1:l.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",r),c&&this.dispatchEvent(i,"touchend",r),l&&((!f||d)&&this.dispatchEvent(i,"pointertap",r),c&&(this.dispatchEvent(i,"tap",r),l.over=!1))):l&&(this.dispatchEvent(i,"pointerupoutside",r),c&&this.dispatchEvent(i,"touchendoutside",r)),l&&l.none&&delete i.trackedPointers[a]},e.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,o=0;o<n;o++){var a=i[o],l=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,l);c.data.originalEvent=r,this.processInteractive(c,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",c),a.pointerType==="touch"&&this.emit("touchmove",c),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",c)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(r,i,n){var o=r.data,a=o.pointerType==="touch",l=o.pointerType==="mouse"||o.pointerType==="pen";l&&this.processPointerOverOut(r,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",r),a&&this.dispatchEvent(i,"touchmove",r),l&&this.dispatchEvent(i,"mousemove",r))},e.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);a.data.originalEvent=n,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(o.identifier)}},e.prototype.processPointerOverOut=function(r,i,n){var o=r.data,a=r.data.identifier,l=o.pointerType==="mouse"||o.pointerType==="pen",c=i.trackedPointers[a];n&&!c&&(c=i.trackedPointers[a]=new Zs(a)),c!==void 0&&(n&&this.mouseOverRenderer?(c.over||(c.over=!0,this.delayDispatchEvent(i,"pointerover",r),l&&this.delayDispatchEvent(i,"mouseover",r)),l&&this.cursor===null&&(this.cursor=i.cursor)):c.over&&(c.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),l&&this.dispatchEvent(i,"mouseout",r),c.none&&delete i.trackedPointers[a]))},e.prototype.onPointerOver=function(r){var i=this.normalizeToPointerData(r),n=i[0],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);a.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",a)},e.prototype.getInteractionDataForPointerId=function(r){var i=r.pointerId,n;return i===so||r.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new lc,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(r),n},e.prototype.releaseInteractionDataForPointerId=function(r){var i=this.activeInteractionData[r];i&&(delete this.activeInteractionData[r],i.reset(),this.interactionDataPool.push(i))},e.prototype.configureInteractionEventForDOMEvent=function(r,i,n){return r.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,r.reset(),r},e.prototype.normalizeToPointerData=function(r){var i=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var n=0,o=r.changedTouches.length;n<o;n++){var a=r.changedTouches[n];typeof a.button=="undefined"&&(a.button=r.touches.length?1:0),typeof a.buttons=="undefined"&&(a.buttons=r.touches.length?1:0),typeof a.isPrimary=="undefined"&&(a.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof a.width=="undefined"&&(a.width=a.radiusX||1),typeof a.height=="undefined"&&(a.height=a.radiusY||1),typeof a.tiltX=="undefined"&&(a.tiltX=0),typeof a.tiltY=="undefined"&&(a.tiltY=0),typeof a.pointerType=="undefined"&&(a.pointerType="touch"),typeof a.pointerId=="undefined"&&(a.pointerId=a.identifier||0),typeof a.pressure=="undefined"&&(a.pressure=a.force||.5),typeof a.twist=="undefined"&&(a.twist=0),typeof a.tangentialPressure=="undefined"&&(a.tangentialPressure=0),typeof a.layerX=="undefined"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY=="undefined"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,i.push(a)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var l=r;typeof l.isPrimary=="undefined"&&(l.isPrimary=!0),typeof l.width=="undefined"&&(l.width=1),typeof l.height=="undefined"&&(l.height=1),typeof l.tiltX=="undefined"&&(l.tiltX=0),typeof l.tiltY=="undefined"&&(l.tiltY=0),typeof l.pointerType=="undefined"&&(l.pointerType="mouse"),typeof l.pointerId=="undefined"&&(l.pointerId=so),typeof l.pressure=="undefined"&&(l.pressure=.5),typeof l.twist=="undefined"&&(l.twist=0),typeof l.tangentialPressure=="undefined"&&(l.tangentialPressure=0),l.isNormalized=!0,i.push(l)}else i.push(r);return i},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(ei);/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ae=function(){function t(e){this.items=[],this._name=e,this._aliasCount=0}return t.prototype.emit=function(e,r,i,n,o,a,l,c){if(arguments.length>8)throw new Error("max arguments reached");var f=this,d=f.name,v=f.items;this._aliasCount++;for(var _=0,m=v.length;_<m;_++)v[_][d](e,r,i,n,o,a,l,c);return v===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},t.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},t.prototype.contains=function(e){return this.items.indexOf(e)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(ae.prototype,{dispatch:{value:ae.prototype.emit},run:{value:ae.prototype.emit}});/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Z.PREFER_ENV=Le.any?ze.WEBGL:ze.WEBGL2,Z.STRICT_TEXTURE_CACHE=!1;var Js=[];function hc(t,e){if(!t)return null;var r="";if(typeof t=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var n=Js.length-1;n>=0;--n){var o=Js[n];if(o.test&&o.test(t,r))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Qs=function(t,e){return Qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Qs(t,e)};function Ut(t,e){Qs(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ta=function(){return ta=Object.assign||function(e){for(var r=arguments,i,n=1,o=arguments.length;n<o;n++){i=r[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ta.apply(this,arguments)};function Qb(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&(r[i[n]]=t[i[n]]);return r}var Qi=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new ae("setRealSize"),this.onUpdate=new ae("update"),this.onError=new ae("onError")}return t.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},t.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(e,r,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(e,r){return!1},t}(),tn=function(t){Ut(e,t);function e(r,i){var n=this,o=i||{},a=o.width,l=o.height;if(!a||!l)throw new Error("BufferResource width or height invalid");return n=t.call(this,a,l)||this,n.data=r,n}return e.prototype.upload=function(r,i,n){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ie.UNPACK);var a=i.realWidth,l=i.realHeight;return n.width===a&&n.height===l?o.texSubImage2D(i.target,0,0,0,a,l,i.format,n.type,this.data):(n.width=a,n.height=l,o.texImage2D(i.target,0,n.internalFormat,a,l,0,i.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(Qi),tx={scaleMode:ee.NEAREST,format:H.RGBA,alphaMode:Ie.NPM},_t=function(t){Ut(e,t);function e(r,i){r===void 0&&(r=null),i===void 0&&(i=null);var n=t.call(this)||this;i=i||{};var o=i.alphaMode,a=i.mipmap,l=i.anisotropicLevel,c=i.scaleMode,f=i.width,d=i.height,v=i.wrapMode,_=i.format,m=i.type,g=i.target,x=i.resolution,b=i.resourceOptions;return r&&!(r instanceof Qi)&&(r=hc(r,b),r.internal=!0),n.resolution=x||Z.RESOLUTION,n.width=Math.round((f||0)*n.resolution)/n.resolution,n.height=Math.round((d||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:Z.MIPMAP_TEXTURES,n.anisotropicLevel=l!==void 0?l:Z.ANISOTROPIC_LEVEL,n._wrapMode=v||Z.WRAP_MODE,n._scaleMode=c!==void 0?c:Z.SCALE_MODE,n.format=_||H.RGBA,n.type=m||Q.UNSIGNED_BYTE,n.target=g||Or.TEXTURE_2D,n.alphaMode=o!==void 0?o:Ie.UNPACK,n.uid=Ur(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=f>0&&d>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(r),n}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,i){var n;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,i,n){return n=n||this.resolution,this.setRealSize(r*n,i*n,n)},e.prototype.setRealSize=function(r,i,n){return this.resolution=n||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Uu(this.realWidth)&&Uu(this.realHeight)},e.prototype.setResolution=function(r){var i=this.resolution;return i===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*i)/r,this.height=Math.round(this.height*i)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete lr[this.cacheId],delete Me[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,i,n){n===void 0&&(n=Z.STRICT_TEXTURE_CACHE);var o=typeof r=="string",a=null;if(o)a=r;else{if(!r._pixiId){var l=i&&i.pixiIdPrefix||"pixiid";r._pixiId=l+"_"+Ur()}a=r._pixiId}var c=lr[a];if(o&&n&&!c)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return c||(c=new e(r,i),c.cacheId=a,e.addToCache(c,a)),c},e.fromBuffer=function(r,i,n,o){r=r||new Float32Array(i*n*4);var a=new tn(r,{width:i,height:n}),l=r instanceof Float32Array?Q.FLOAT:Q.UNSIGNED_BYTE;return new e(a,Object.assign(tx,o||{width:i,height:n,type:l}))},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),lr[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),lr[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=lr[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete lr[r],i}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)delete lr[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(ei),uc=function(t){Ut(e,t);function e(r,i){var n=this,o=i||{},a=o.width,l=o.height;n=t.call(this,a,l)||this,n.items=[],n.itemDirtyIds=[];for(var c=0;c<r;c++){var f=new _t;n.items.push(f),n.itemDirtyIds.push(-2)}return n.length=r,n._load=null,n.baseTexture=null,n}return e.prototype.initFromArray=function(r,i){for(var n=0;n<this.length;n++)!r[n]||(r[n].castToBaseTexture?this.addBaseTextureAt(r[n].castToBaseTexture(),n):r[n]instanceof Qi?this.addResourceAt(r[n],n):this.addResourceAt(hc(r[n],i),n))},e.prototype.dispose=function(){for(var r=0,i=this.length;r<i;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[i].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=r,this.items[i].on("update",r.update,r)},e.prototype.unbind=function(r){t.prototype.unbind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.items.map(function(o){return o.resource}).filter(function(o){return o}),n=i.map(function(o){return o.load()});return this._load=Promise.all(n).then(function(){var o=r.items[0],a=o.realWidth,l=o.realHeight;return r.resize(a,l),Promise.resolve(r)}),this._load},e}(Qi),ex=function(t){Ut(e,t);function e(r,i){var n=this,o=i||{},a=o.width,l=o.height,c,f;return Array.isArray(r)?(c=r,f=r.length):f=r,n=t.call(this,f,{width:a,height:l})||this,c&&n.initFromArray(c,i),n}return e.prototype.addBaseTextureAt=function(r,i){if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=Or.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,i,n){var o=this,a=o.length,l=o.itemDirtyIds,c=o.items,f=r.gl;n.dirtyId<0&&f.texImage3D(f.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var d=0;d<a;d++){var v=c[d];l[d]<v.dirtyId&&(l[d]=v.dirtyId,v.valid&&f.texSubImage3D(f.TEXTURE_2D_ARRAY,0,0,0,d,v.resource.width,v.resource.height,1,i.format,n.type,v.resource.source))}return!0},e}(uc),hr=function(t){Ut(e,t);function e(r){var i=this,n=r,o=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=t.call(this,o,a)||this,i.source=r,i.noSubImage=!1,i}return e.crossOrigin=function(r,i,n){n===void 0&&i.indexOf("data:")!==0?r.crossOrigin=Ub(i):n!==!1&&(r.crossOrigin=typeof n=="string"?n:"anonymous")},e.prototype.upload=function(r,i,n,o){var a=r.gl,l=i.realWidth,c=i.realHeight;if(o=o||this.source,o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ie.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===l&&n.height===c?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,o):(n.width=l,n.height=c,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,o)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,i=r.naturalWidth||r.videoWidth||r.width,n=r.naturalHeight||r.videoHeight||r.height;this.resize(i,n),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Qi),cc=function(t){Ut(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){var i=globalThis.OffscreenCanvas;return i&&r instanceof i?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(hr),rx=function(t){Ut(e,t);function e(r,i){var n=this,o=i||{},a=o.width,l=o.height,c=o.autoLoad,f=o.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");n=t.call(this,6,{width:a,height:l})||this;for(var d=0;d<e.SIDES;d++)n.items[d].target=Or.TEXTURE_CUBE_MAP_POSITIVE_X+d;return n.linkBaseTexture=f!==!1,r&&n.initFromArray(r,i),c!==!1&&n.load(),n}return e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=Or.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,i,n){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=Or.TEXTURE_CUBE_MAP_POSITIVE_X+i,r.parentTextureArray=this.baseTexture,this.items[i]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[i]=r,this},e.prototype.upload=function(r,i,n){for(var o=this.itemDirtyIds,a=0;a<e.SIDES;a++){var l=this.items[a];o[a]<l.dirtyId&&(l.valid&&l.resource?(l.resource.upload(r,l,n),o[a]=l.dirtyId):o[a]<-1&&(r.gl.texImage2D(l.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),o[a]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(uc),fc=function(t){Ut(e,t);function e(r,i){var n=this;if(i=i||{},!(r instanceof HTMLImageElement)){var o=new Image;hr.crossOrigin(o,r,i.crossorigin),o.src=r,r=o}return n=t.call(this,r)||this,!r.complete&&!!n._width&&!!n._height&&(n._width=0,n._height=0),n.url=r.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:Z.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(r){var i=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(n,o){var a=i.source;i.url=a.src;var l=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?l():(a.onload=l,a.onerror=function(c){o(c),i.onError.emit(c)})}),this._load)},e.prototype.process=function(){var r=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,o=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:o?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:r.alphaMode===Ie.UNPACK?"premultiply":"none"})}).then(function(a){return r.destroyed?Promise.reject():(r.bitmap=a,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,r,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,r,i,n,this.bitmap),!this.preserveBitmap){var o=!0,a=i._glTextures;for(var l in a){var c=a[l];if(c!==n&&c.dirtyId!==i.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(hr),ix=function(t){Ut(e,t);function e(r,i){var n=this;return i=i||{},n=t.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=r,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(i){if(r._resolve=function(){r.resize(r.source.width,r.source.height),i(r)},e.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,i=new Image;hr.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){!r._resolve||(i.onerror=null,r.onError.emit(n))},i.onload=function(){if(!!r._resolve){var n=i.width,o=i.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*r.scale,l=o*r.scale;(r._overrideWidth||r._overrideHeight)&&(a=r._overrideWidth||r._overrideHeight/o*n,l=r._overrideHeight||r._overrideWidth/n*o),a=Math.round(a),l=Math.round(l);var c=r.source;c.width=a,c.height=l,c._pixiId="canvas_"+Ur(),c.getContext("2d").drawImage(i,0,0,n,o,0,0,a,l),r._resolve(),r._resolve=null}}},e.getSize=function(r){var i=e.SVG_SIZE.exec(r),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,i){return i==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(hr),nx=function(t){Ut(e,t);function e(r,i){var n=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var a=r[0].src||r[0];hr.crossOrigin(o,a,i.crossorigin);for(var l=0;l<r.length;++l){var c=document.createElement("source"),f=r[l],d=f.src,v=f.mime;d=d||r[l];var _=d.split("?").shift().toLowerCase(),m=_.slice(_.lastIndexOf(".")+1);v=v||e.MIME_TYPES[m]||"video/"+m,c.src=d,c.type=v,o.appendChild(c)}r=o}return n=t.call(this,r)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return e.prototype.update=function(r){if(!this.destroyed){var i=ne.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){r.valid?n(r):(r._resolve=n,i.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ne.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(r.videoWidth,r.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ne.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,i){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(hr),ox=function(t){Ut(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){return!!globalThis.createImageBitmap&&r instanceof ImageBitmap},e}(hr);Js.push(fc,ox,cc,nx,ix,tn,rx,ex);var sx=function(t){Ut(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.upload=function(r,i,n){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ie.UNPACK);var a=i.realWidth,l=i.realHeight;return n.width===a&&n.height===l?o.texSubImage2D(i.target,0,0,0,a,l,i.format,n.type,this.data):(n.width=a,n.height=l,o.texImage2D(i.target,0,n.internalFormat,a,l,0,i.format,n.type,this.data)),!0},e}(tn),ea=function(){function t(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ae("disposeFramebuffer"),this.multisample=Kt.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new _t(null,{scaleMode:ee.NEAREST,resolution:1,mipmap:We.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(e){return this.depthTexture=e||new _t(new sx(null,{width:this.width,height:this.height}),{scaleMode:ee.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:We.OFF,format:H.DEPTH_COMPONENT,type:Q.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],o=n.resolution;n.setSize(e/o,r/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(e/o,r/o)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),pc=function(t){Ut(e,t);function e(r){r===void 0&&(r={});var i=this;if(typeof r=="number"){var n=arguments[0],o=arguments[1],a=arguments[2],l=arguments[3];r={width:n,height:o,scaleMode:a,resolution:l}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Kt.NONE,i=t.call(this,null,r)||this,i.mipmap=We.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new ea(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=r.multisample,i.maskStack=[],i.filterStack=[{}],i}return e.prototype.resize=function(r,i){this.framebuffer.resize(r*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(_t),dc=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(e,r,i){var n=r.width,o=r.height;if(i){var a=e.width/2/n,l=e.height/2/o,c=e.x/n+a,f=e.y/o+l;i=Ht.add(i,Ht.NW),this.x0=c+a*Ht.uX(i),this.y0=f+l*Ht.uY(i),i=Ht.add(i,2),this.x1=c+a*Ht.uX(i),this.y1=f+l*Ht.uY(i),i=Ht.add(i,2),this.x2=c+a*Ht.uX(i),this.y2=f+l*Ht.uY(i),i=Ht.add(i,2),this.x3=c+a*Ht.uX(i),this.y3=f+l*Ht.uY(i)}else this.x0=e.x/n,this.y0=e.y/o,this.x1=(e.x+e.width)/n,this.y1=e.y/o,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/o,this.x3=e.x/n,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),vc=new dc;function lo(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var it=function(t){Ut(e,t);function e(r,i,n,o,a,l){var c=t.call(this)||this;if(c.noFrame=!1,i||(c.noFrame=!0,i=new ct(0,0,1,1)),r instanceof e&&(r=r.baseTexture),c.baseTexture=r,c._frame=i,c.trim=o,c.valid=!1,c._uvs=vc,c.uvMatrix=null,c.orig=n||i,c._rotate=Number(a||0),a===!0)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=l?new Bt(l.x,l.y):new Bt(0,0),c._updateID=0,c.textureCacheIds=[],r.valid?c.noFrame?r.valid&&c.onBaseTextureUpdated(r):c.frame=i:r.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&r.on("update",c.onBaseTextureUpdated,c),c}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var i=this.baseTexture.resource;i&&i.url&&Me[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),i=this._frame===this.orig?r:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&r,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=r),n},e.prototype.updateUvs=function(){this._uvs===vc&&(this._uvs=new dc),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,i,n){i===void 0&&(i={}),n===void 0&&(n=Z.STRICT_TEXTURE_CACHE);var o=typeof r=="string",a=null;if(o)a=r;else if(r instanceof _t){if(!r.cacheId){var l=i&&i.pixiIdPrefix||"pixiid";r.cacheId=l+"-"+Ur(),_t.addToCache(r,r.cacheId)}a=r.cacheId}else{if(!r._pixiId){var l=i&&i.pixiIdPrefix||"pixiid";r._pixiId=l+"_"+Ur()}a=r._pixiId}var c=Me[a];if(o&&n&&!c)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return!c&&!(r instanceof _t)?(i.resolution||(i.resolution=to(r)),c=new e(new _t(r,i)),c.baseTexture.cacheId=a,_t.addToCache(c.baseTexture,a),e.addToCache(c,a)):!c&&r instanceof _t&&(c=new e(r),e.addToCache(c,a)),c},e.fromURL=function(r,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),o=e.from(r,Object.assign({resourceOptions:n},i),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(r,i,n,o){return new e(_t.fromBuffer(r,i,n,o))},e.fromLoader=function(r,i,n,o){var a=new _t(r,Object.assign({scaleMode:Z.SCALE_MODE,resolution:to(i)},o)),l=a.resource;l instanceof fc&&(l.url=i);var c=new e(a);return n||(n=i),_t.addToCache(c.baseTexture,n),e.addToCache(c,n),n!==i&&(_t.addToCache(c.baseTexture,i),e.addToCache(c,i)),c.baseTexture.valid?Promise.resolve(c):new Promise(function(f){c.baseTexture.once("loaded",function(){return f(c)})})},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),Me[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),Me[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=Me[r];if(i){var n=i.textureCacheIds.indexOf(r);return n>-1&&i.textureCacheIds.splice(n,1),delete Me[r],i}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)Me[r.textureCacheIds[o]]===r&&delete Me[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var i=r.x,n=r.y,o=r.width,a=r.height,l=i+o>this.baseTexture.width,c=n+a>this.baseTexture.height;if(l||c){var f=l&&c?"and":"or",d="X: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.width,v="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(d+" "+f+" "+v))}this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new _t),lo(e._EMPTY),lo(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var r=document.createElement("canvas"),i=r.getContext("2d");r.width=16,r.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(new _t(new cc(r))),lo(e._WHITE),lo(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(ei),pe=function(t){Ut(e,t);function e(r,i){var n=t.call(this,r,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i,n){n===void 0&&(n=!0);var o=this.baseTexture.resolution,a=Math.round(r*o)/o,l=Math.round(i*o)/o;this.valid=a>0&&l>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=l,n&&this.baseTexture.resize(a,l),this.updateUvs()},e.prototype.setResolution=function(r){var i=this.baseTexture;i.resolution!==r&&(i.setResolution(r),this.resize(i.width,i.height,!1))},e.create=function(r){for(var i=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=i[o];return typeof r=="number"&&(Zi("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new pc(r))},e}(it),ax=function(){function t(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(e,r,i){i===void 0&&(i=Kt.NONE);var n=new pc(Object.assign({width:e,height:r,resolution:1,multisample:i},this.textureOptions));return new pe(n)},t.prototype.getOptimalTexture=function(e,r,i,n){i===void 0&&(i=1),n===void 0&&(n=Kt.NONE);var o;e=Math.ceil(e*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=Jn(e),r=Jn(r),o=((e&65535)<<16|r&65535)>>>0,n>1&&(o+=n*4294967296)):o=n>1?-n:-1,this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(e,r,n)),a.filterPoolKey=o,a.setResolution(i),a},t.prototype.getFilterTexture=function(e,r,i){var n=this.getOptimalTexture(e.width,e.height,r||e.resolution,i||Kt.NONE);return n.filterFrame=e.filterFrame,n},t.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},t.prototype.returnFilterTexture=function(e){this.returnTexture(e)},t.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var i=this.texturePool[r];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY=-1,t}(),_c=function(){function t(e,r,i,n,o,a,l){r===void 0&&(r=0),i===void 0&&(i=!1),n===void 0&&(n=Q.FLOAT),this.buffer=e,this.size=r,this.normalized=i,this.type=n,this.stride=o,this.start=a,this.instance=l}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,i,n,o){return new t(e,r,i,n,o)},t}(),lx=0,Jt=function(){function t(e,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=lx++,this.disposeRunner=new ae("disposeBuffer")}return t.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===Be.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Be.ELEMENT_ARRAY_BUFFER:Be.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),hx={Float32Array,Uint32Array,Int32Array,Uint8Array};function ux(t,e){for(var r=0,i=0,n={},o=0;o<t.length;o++)i+=e[o],r+=t[o].length;for(var a=new ArrayBuffer(r*4),l=null,c=0,o=0;o<t.length;o++){var f=e[o],d=t[o],v=Ou(d);n[v]||(n[v]=new hx[v](a)),l=n[v];for(var _=0;_<d.length;_++){var m=(_/f|0)*i+c,g=_%f;l[m+g]=d[_]}c+=f}return new Float32Array(a)}var mc={5126:4,5123:2,5121:1},cx=0,fx={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},en=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=cx++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ae("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(e,r,i,n,o,a,l,c){if(i===void 0&&(i=0),n===void 0&&(n=!1),c===void 0&&(c=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Jt||(r instanceof Array&&(r=new Float32Array(r)),r=new Jt(r));var f=e.split("|");if(f.length>1){for(var d=0;d<f.length;d++)this.addAttribute(f[d],r,i,n,o);return this}var v=this.buffers.indexOf(r);return v===-1&&(this.buffers.push(r),v=this.buffers.length-1),this.attributes[e]=new _c(v,i,n,o,a,l,c),this.instanced=this.instanced||c,this},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},t.prototype.addIndex=function(e){return e instanceof Jt||(e instanceof Array&&(e=new Uint16Array(e)),e=new Jt(e)),e.type=Be.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],i=new Jt,n;for(n in this.attributes){var o=this.attributes[n],a=this.buffers[o.buffer];e.push(a.data),r.push(o.size*mc[o.type]/4),o.buffer=0}for(i.data=ux(e,r),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],i=this.buffers[r.buffer];return i.data.length/(r.stride/4||r.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new Jt(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];e.attributes[r]=new _c(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Be.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r=new t,i=[],n=[],o=[],a,l=0;l<e.length;l++){a=e[l];for(var c=0;c<a.buffers.length;c++)n[c]=n[c]||0,n[c]+=a.buffers[c].data.length,o[c]=0}for(var l=0;l<a.buffers.length;l++)i[l]=new fx[Ou(a.buffers[l].data)](n[l]),r.buffers[l]=new Jt(i[l]);for(var l=0;l<e.length;l++){a=e[l];for(var c=0;c<a.buffers.length;c++)i[c].set(a.buffers[c].data,o[c]),o[c]+=a.buffers[c].data.length}if(r.attributes=a.attributes,a.indexBuffer){r.indexBuffer=r.buffers[a.buffers.indexOf(a.indexBuffer)],r.indexBuffer.type=Be.ELEMENT_ARRAY_BUFFER;for(var f=0,d=0,v=0,_=0,l=0;l<a.buffers.length;l++)if(a.buffers[l]!==a.indexBuffer){_=l;break}for(var l in a.attributes){var m=a.attributes[l];(m.buffer|0)===_&&(d+=m.size*mc[m.type]/4)}for(var l=0;l<e.length;l++){for(var g=e[l].indexBuffer.data,c=0;c<g.length;c++)r.indexBuffer.data[c+v]+=f;f+=e[l].buffers[_].data.length/d,v+=g.length}}return r},t}(),px=function(t){Ut(e,t);function e(){var r=t.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(en),gc=function(t){Ut(e,t);function e(){var r=t.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Jt(r.vertices),r.uvBuffer=new Jt(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,i){var n=0,o=0;return this.uvs[0]=n,this.uvs[1]=o,this.uvs[2]=n+i.width/r.width,this.uvs[3]=o,this.uvs[4]=n+i.width/r.width,this.uvs[5]=o+i.height/r.height,this.uvs[6]=n,this.uvs[7]=o+i.height/r.height,n=i.x,o=i.y,this.vertices[0]=n,this.vertices[1]=o,this.vertices[2]=n+i.width,this.vertices[3]=o,this.vertices[4]=n+i.width,this.vertices[5]=o+i.height,this.vertices[6]=n,this.vertices[7]=o+i.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(en),dx=0,Mr=function(){function t(e,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=dx++,this.static=!!r,this.ubo=!!i,e instanceof Jt?(this.buffer=e,this.buffer.type=Be.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Jt(new Float32Array(1)),this.buffer.type=Be.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,i){if(!this.ubo)this.uniforms[e]=new t(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(e,r,i){return new t(e,r,i)},t.uboFrom=function(e,r){return new t(e,r!=null?r:!0,!0)},t}(),vx=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Kt.NONE,this.sourceFrame=new ct,this.destinationFrame=new ct,this.bindingSourceFrame=new ct,this.bindingDestinationFrame=new ct,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),ho=[new Bt,new Bt,new Bt,new Bt],ra=new jt,_x=function(){function t(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new ax,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new px,this.quadUv=new gc,this.tempRect=new ct,this.activeState={},this.globalUniforms=new Mr({outputFrame:new ct,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(e,r){for(var i,n,o=this.renderer,a=this.defaultFilterStack,l=this.statePool.pop()||new vx,c=this.renderer.renderTexture,f=r[0].resolution,d=r[0].multisample,v=r[0].padding,_=r[0].autoFit,m=(i=r[0].legacy)!==null&&i!==void 0?i:!0,g=1;g<r.length;g++){var x=r[g];f=Math.min(f,x.resolution),d=Math.min(d,x.multisample),v=this.useMaxPadding?Math.max(v,x.padding):v+x.padding,_=_&&x.autoFit,m=m||((n=x.legacy)!==null&&n!==void 0?n:!0)}a.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),a.push(l),l.resolution=f,l.multisample=d,l.legacy=m,l.target=e,l.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),l.sourceFrame.pad(v);var b=this.tempRect.copyFrom(c.sourceFrame);o.projection.transform&&this.transformAABB(ra.copyFrom(o.projection.transform).invert(),b),_?(l.sourceFrame.fit(b),(l.sourceFrame.width<=0||l.sourceFrame.height<=0)&&(l.sourceFrame.width=0,l.sourceFrame.height=0)):l.sourceFrame.intersects(b)||(l.sourceFrame.width=0,l.sourceFrame.height=0),this.roundFrame(l.sourceFrame,c.current?c.current.resolution:o.resolution,c.sourceFrame,c.destinationFrame,o.projection.transform),l.renderTexture=this.getOptimalFilterTexture(l.sourceFrame.width,l.sourceFrame.height,f,d),l.filters=r,l.destinationFrame.width=l.renderTexture.width,l.destinationFrame.height=l.renderTexture.height;var w=this.tempRect;w.x=0,w.y=0,w.width=l.sourceFrame.width,w.height=l.sourceFrame.height,l.renderTexture.filterFrame=l.sourceFrame,l.bindingSourceFrame.copyFrom(c.sourceFrame),l.bindingDestinationFrame.copyFrom(c.destinationFrame),l.transform=o.projection.transform,o.projection.transform=null,c.bind(l.renderTexture,l.sourceFrame,w),o.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),i=r.filters;this.activeState=r;var n=this.globalUniforms.uniforms;n.outputFrame=r.sourceFrame,n.resolution=r.resolution;var o=n.inputSize,a=n.inputPixel,l=n.inputClamp;if(o[0]=r.destinationFrame.width,o[1]=r.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*r.resolution),a[1]=Math.round(o[1]*r.resolution),a[2]=1/a[0],a[3]=1/a[1],l[0]=.5*a[2],l[1]=.5*a[3],l[2]=r.sourceFrame.width*o[2]-.5*a[2],l[3]=r.sourceFrame.height*o[3]-.5*a[3],r.legacy){var c=n.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var f=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,f.renderTexture,ar.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var d=r.renderTexture,v=this.getOptimalFilterTexture(d.width,d.height,r.resolution);v.filterFrame=d.filterFrame;var _=0;for(_=0;_<i.length-1;++_){_===1&&r.multisample>1&&(v=this.getOptimalFilterTexture(d.width,d.height,r.resolution),v.filterFrame=d.filterFrame),i[_].apply(this,d,v,ar.CLEAR,r);var m=d;d=v,v=m}i[_].apply(this,d,f.renderTexture,ar.BLEND,r),_>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(d),this.returnFilterTexture(v)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){r===void 0&&(r=ar.CLEAR);var i=this.renderer,n=i.renderTexture,o=i.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,n.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var l=o.stateId&1||this.forceClear;(r===ar.CLEAR||r===ar.BLIT&&l)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(e,r,i,n){var o=this.renderer;o.state.set(e.state),this.bindAndClear(i,n),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Ee.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Ee.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var i=this.activeState,n=i.sourceFrame,o=i.destinationFrame,a=r._texture.orig,l=e.set(o.width,0,0,o.height,n.x,n.y),c=r.worldTransform.copyTo(jt.TEMP_MATRIX);return c.invert(),l.prepend(c),l.scale(1/a.width,1/a.height),l.translate(r.anchor.x,r.anchor.y),l},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,i,n){return i===void 0&&(i=1),n===void 0&&(n=Kt.NONE),this.texturePool.getOptimalTexture(e,r,i,n)},t.prototype.getFilterTexture=function(e,r,i){if(typeof e=="number"){var n=e;e=r,r=n}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,i||Kt.NONE);return o.filterFrame=e.filterFrame,o},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(e,r){var i=ho[0],n=ho[1],o=ho[2],a=ho[3];i.set(r.left,r.top),n.set(r.left,r.bottom),o.set(r.right,r.top),a.set(r.right,r.bottom),e.apply(i,i),e.apply(n,n),e.apply(o,o),e.apply(a,a);var l=Math.min(i.x,n.x,o.x,a.x),c=Math.min(i.y,n.y,o.y,a.y),f=Math.max(i.x,n.x,o.x,a.x),d=Math.max(i.y,n.y,o.y,a.y);r.x=l,r.y=c,r.width=f-l,r.height=d-c},t.prototype.roundFrame=function(e,r,i,n,o){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(o){var a=o.a,l=o.b,c=o.c,f=o.d;if((Math.abs(l)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(f)>1e-4))return}o=o?ra.copyFrom(o):ra.identity(),o.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(o,e),e.ceil(r),this.transformAABB(o.invert(),e)}},t}(),uo=function(){function t(e){this.renderer=e}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(e){},t}(),mx=function(){function t(e){this.renderer=e,this.emptyRenderer=new uo(e),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var i=this.renderer.texture.boundTextures,n=r-1;n>=0;--n)e[n]=i[n]||null,e[n]&&(e[n]._batchLocation=n)},t.prototype.boundArray=function(e,r,i,n){for(var o=e.elements,a=e.ids,l=e.count,c=0,f=0;f<l;f++){var d=o[f],v=d._batchLocation;if(v>=0&&v<n&&r[v]===d){a[f]=v;continue}for(;c<n;){var _=r[c];if(_&&_._batchEnabled===i&&_._batchLocation===c){c++;continue}a[f]=c,d._batchLocation=c,r[c]=d;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),yc=0,gx=function(){function t(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=yc++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=yc++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var i;if(Z.PREFER_ENV>=ze.WEBGL2&&(i=e.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),yx=function(){function t(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Kt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),bx=new ct,xx=function(){function t(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new ea(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ct,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Z.PREFER_ENV===ze.WEBGL_LEGACY&&(r=null,i=null),r?e.drawBuffers=function(n){return r.drawBuffersWEBGL(n)}:(this.hasMRT=!1,e.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r,i){i===void 0&&(i=0);var n=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=i),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var l=e.colorTextures[a];this.renderer.texture.unbind(l.parentTextureArray||l)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var c=r.width>>i,f=r.height>>i,d=c/r.width;this.setViewport(r.x*d,r.y*d,c,f)}else{var c=e.width>>i,f=e.height>>i;this.setViewport(0,0,c,f)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,i,n){var o=this.viewport;e=Math.round(e),r=Math.round(r),i=Math.round(i),n=Math.round(n),(o.width!==i||o.height!==n||o.x!==e||o.y!==r)&&(o.x=e,o.y=r,o.width=i,o.height=n,this.gl.viewport(e,r,i,n))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,i,n,o){o===void 0&&(o=Kn.COLOR|Kn.DEPTH);var a=this.gl;a.clearColor(e,r,i,n),a.clear(o)},t.prototype.initFramebuffer=function(e){var r=this.gl,i=new yx(r.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(e){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height)),i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var n=e.colorTextures,o=n.length;r.drawBuffers||(o=Math.min(o,1));for(var a=0;a<o;a++){var l=n[a],c=l.parentTextureArray||l;this.renderer.texture.bind(c,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e,r){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,a=o.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var l=[],c=0;c<a;c++){var f=o[c],d=f.parentTextureArray||f;this.renderer.texture.bind(d,0),!(c===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+c,f.target,d._glTextures[this.CONTEXT_UID].texture,r),l.push(i.COLOR_ATTACHMENT0+c))}if(l.length>1&&i.drawBuffers(l),e.depthTexture){var v=this.writeDepthTexture;if(v){var _=e.depthTexture;this.renderer.texture.bind(_,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,_._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},t.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},t.prototype.detectSamples=function(e){var r=this.msaaSamples,i=Kt.NONE;if(e<=1||r===null)return i;for(var n=0;n<r.length;n++)if(r[n]<=e){i=r[n];break}return i===1&&(i=Kt.NONE),i},t.prototype.blit=function(e,r,i){var n=this,o=n.current,a=n.renderer,l=n.gl,c=n.CONTEXT_UID;if(a.context.webGLVersion===2&&!!o){var f=o.glFramebuffers[c];if(!!f){if(!e){if(!f.msaaBuffer)return;var d=o.colorTextures[0];if(!d)return;f.blitFramebuffer||(f.blitFramebuffer=new ea(o.width,o.height),f.blitFramebuffer.addColorTexture(0,d)),e=f.blitFramebuffer,e.colorTextures[0]!==d&&(e.colorTextures[0]=d,e.dirtyId++,e.dirtyFormat++),(e.width!==o.width||e.height!==o.height)&&(e.width=o.width,e.height=o.height,e.dirtyId++,e.dirtySize++)}r||(r=bx,r.width=o.width,r.height=o.height),i||(i=r);var v=r.width===i.width&&r.height===i.height;this.bind(e),l.bindFramebuffer(l.READ_FRAMEBUFFER,f.framebuffer),l.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,l.COLOR_BUFFER_BIT,v?l.NEAREST:l.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var i=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!!i){delete e.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),r||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],e)},t.prototype.forceStencil=function(){var e=this.current;if(!!e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var i=e.width,n=e.height,o=this.gl,a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),r.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,r.multisample,o.DEPTH24_STENCIL8,i,n):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i,n),r.stencil=a,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ct},t.prototype.destroy=function(){this.renderer=null},t}(),ia={5126:4,5123:2,5121:1},wx=function(){function t(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;Z.PREFER_ENV===ze.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=function(){return i.createVertexArrayOES()},e.bindVertexArray=function(o){return i.bindVertexArrayOES(o)},e.deleteVertexArray=function(o){return i.deleteVertexArrayOES(o)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=function(o,a){return n.vertexAttribDivisorANGLE(o,a)},e.drawElementsInstanced=function(o,a,l,c,f){return n.drawElementsInstancedANGLE(o,a,l,c,f)},e.drawArraysInstanced=function(o,a,l,c){return n.drawArraysInstancedANGLE(o,a,l,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var i=this.gl,n=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},o=!0);var a=n[r.program.id]||this.initGeometryVao(e,r,o);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,i=0;i<e.buffers.length;i++){var n=e.buffers[i];r.update(n)}},t.prototype.checkCompatibility=function(e,r){var i=e.attributes,n=r.attributeData;for(var o in n)if(!i[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},t.prototype.getSignature=function(e,r){var i=e.attributes,n=r.attributeData,o=["g",e.id];for(var a in i)n[a]&&o.push(a,n[a].location);return o.join("-")},t.prototype.initGeometryVao=function(e,r,i){i===void 0&&(i=!0);var n=this.gl,o=this.CONTEXT_UID,a=this.renderer.buffer,l=r.program;l.glPrograms[o]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,l);var c=this.getSignature(e,l),f=e.glVertexArrayObjects[this.CONTEXT_UID],d=f[c];if(d)return f[l.id]=d,d;var v=e.buffers,_=e.attributes,m={},g={};for(var x in v)m[x]=0,g[x]=0;for(var x in _)!_[x].size&&l.attributeData[x]?_[x].size=l.attributeData[x].size:_[x].size||console.warn("PIXI Geometry attribute '"+x+"' size cannot be determined (likely the bound shader does not have the attribute)"),m[_[x].buffer]+=_[x].size*ia[_[x].type];for(var x in _){var b=_[x],w=b.size;b.stride===void 0&&(m[b.buffer]===w*ia[b.type]?b.stride=0:b.stride=m[b.buffer]),b.start===void 0&&(b.start=g[b.buffer],g[b.buffer]+=w*ia[b.type])}d=n.createVertexArray(),n.bindVertexArray(d);for(var C=0;C<v.length;C++){var I=v[C];a.bind(I),i&&I._glBuffers[o].refCount++}return this.activateVao(e,l),this._activeVao=d,f[l.id]=d,f[c]=d,d},t.prototype.disposeGeometry=function(e,r){var i;if(!!this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=e.buffers,l=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(e.disposeRunner.remove(this),!!n){if(l)for(var c=0;c<a.length;c++){var f=a[c]._glBuffers[this.CONTEXT_UID];f&&(f.refCount--,f.refCount===0&&!r&&l.dispose(a[c],r))}if(!r){for(var d in n)if(d[0]==="g"){var v=n[d];this._activeVao===v&&this.unbind(),o.deleteVertexArray(v)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],e)},t.prototype.activateVao=function(e,r){var i=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.buffers,l=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);var c=null;for(var f in l){var d=l[f],v=a[d.buffer],_=v._glBuffers[n];if(r.attributeData[f]){c!==_&&(o.bind(v),c=_);var m=r.attributeData[f].location;if(i.enableVertexAttribArray(m),i.vertexAttribPointer(m,d.size,d.type||i.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)i.vertexAttribDivisor(m,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,i,n){var o=this.gl,a=this._activeGeometry;if(a.indexBuffer){var l=a.indexBuffer.data.BYTES_PER_ELEMENT,c=l===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(e,r||a.indexBuffer.data.length,c,(i||0)*l,n||1):o.drawElements(e,r||a.indexBuffer.data.length,c,(i||0)*l):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(e,i,r||a.getSize(),n||1):o.drawArrays(e,i,r||a.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),Tx=function(){function t(e){e===void 0&&(e=null),this.type=se.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Z.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=se.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function bc(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function xc(t,e){var r=t.getShaderSource(e).split(`
`).map(function(f,d){return d+": "+f}),i=t.getShaderInfoLog(e),n=i.split(`
`),o={},a=n.map(function(f){return parseFloat(f.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(f){return f&&!o[f]?(o[f]=!0,!0):!1}),l=[""];a.forEach(function(f){r[f-1]="%c"+r[f-1]+"%c",l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var c=r.join(`
`);l[0]=c,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,l),console.groupEnd()}function Ex(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||xc(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||xc(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function na(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function wc(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return na(2*e);case"bvec3":return na(3*e);case"bvec4":return na(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Tc={},rn=Tc;function Cx(){if(rn===Tc||rn&&rn.isContextLost()){var t=document.createElement("canvas"),e=void 0;Z.PREFER_ENV>=ze.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),rn=e}return rn}var co;function Ix(){if(!co){co=Ge.MEDIUM;var t=Cx();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);co=e.precision?Ge.HIGH:Ge.MEDIUM}}return co}function Ec(t,e,r){if(t.substring(0,9)!=="precision"){var i=e;return e===Ge.HIGH&&r!==Ge.HIGH&&(i=Ge.MEDIUM),"precision "+i+` float;
`+t}else if(r!==Ge.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var Px={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Cc(t){return Px[t]}var fo=null,Ic={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Pc(t,e){if(!fo){var r=Object.keys(Ic);fo={};for(var i=0;i<r.length;++i){var n=r[i];fo[t[n]]=Ic[n]}}return fo[e]}var hi=[{test:function(t){return t.type==="float"&&t.size===1},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,e){return t.type==="mat3"&&t.size===1&&e.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,e){return t.type==="vec2"&&t.size===1&&e.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,e){return t.type==="vec4"&&t.size===1&&e.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Rx={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ax={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Nx(t,e){var r,i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var n in t.uniforms){var o=e[n];if(!o){!((r=t.uniforms[n])===null||r===void 0)&&r.group&&(t.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+n+", '"+n+`');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.`+n+`, syncData);
                    `));continue}for(var a=t.uniforms[n],l=!1,c=0;c<hi.length;c++)if(hi[c].test(o,a)){i.push(hi[c].code(n,a)),l=!0;break}if(!l){var f=o.size===1?Rx:Ax,d=f[o.type].replace("location",'ud["'+n+'"].location');i.push(`
            cu = ud["`+n+`"];
            cv = cu.value;
            v = uv["`+n+`"];
            `+d+";")}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var Sx=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ox(t){for(var e="",r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+="if(test == "+r+".0){}");return e}function Ux(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=Sx.replace(/%forloop%/gi,Ox(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}var nn;function Lx(){if(typeof nn=="boolean")return nn;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");nn=t({a:"b"},"a","b")===!0}catch{nn=!1}return nn}var Fx=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Gx=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Bx=0,po={},on=function(){function t(e,r,i){i===void 0&&(i="pixi-shader"),this.id=Bx++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),po[i]?(po[i]++,i+="-"+po[i]):po[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=Ec(this.vertexSrc,Z.PRECISION_VERTEX,Ge.HIGH),this.fragmentSrc=Ec(this.fragmentSrc,Z.PRECISION_FRAGMENT,Ix())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Gx},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Fx},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var n=e+r,o=Gu[n];return o||(Gu[n]=o=new t(e,r,i)),o},t}(),ge=function(){function t(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof Mr?this.uniformGroup=r:this.uniformGroup=new Mr(r):this.uniformGroup=new Mr({})}return t.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var i in r.uniforms){var n=r.uniforms[i];if(n.group&&this.checkUniformExists(e,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var n=on.from(e,r);return new t(n,i)},t}(),oa=0,sa=1,aa=2,la=3,ha=4,ua=5,kr=function(){function t(){this.data=0,this.blendMode=tt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<oa)},set:function(e){!!(this.data&1<<oa)!==e&&(this.data^=1<<oa)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<sa)},set:function(e){!!(this.data&1<<sa)!==e&&(this.data^=1<<sa)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<aa)},set:function(e){!!(this.data&1<<aa)!==e&&(this.data^=1<<aa)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<la)},set:function(e){!!(this.data&1<<la)!==e&&(this.data^=1<<la)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<ua)},set:function(e){!!(this.data&1<<ua)!==e&&(this.data^=1<<ua)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<ha)},set:function(e){!!(this.data&1<<ha)!==e&&(this.data^=1<<ha)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==tt.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Mx=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,kx=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,ur=function(t){Ut(e,t);function e(r,i,n){var o=this,a=on.from(r||e.defaultVertexSrc,i||e.defaultFragmentSrc);return o=t.call(this,a,n)||this,o.padding=0,o.resolution=Z.FILTER_RESOLUTION,o.multisample=Z.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new kr,o}return e.prototype.apply=function(r,i,n,o,a){r.applyFilter(this,i,n,o)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Mx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return kx},enumerable:!1,configurable:!0}),e}(ge),Dx=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Vx=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Rc=new jt,ca=function(){function t(e,r){this._texture=e,this.mapCoord=new jt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r=="undefined"?.5:r,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var i=this.mapCoord,n=0;n<e.length;n+=2){var o=e[n],a=e[n+1];r[n]=o*i.a+a*i.c+i.tx,r[n+1]=o*i.b+a*i.d+i.ty}return r},t.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=r.orig,o=r.trim;o&&(Rc.set(n.width/o.width,0,0,n.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Rc));var a=r.baseTexture,l=this.uClampFrame,c=this.clampMargin/a.resolution,f=this.clampOffset;return l[0]=(r._frame.x+c+f)/a.width,l[1]=(r._frame.y+c+f)/a.height,l[2]=(r._frame.x+r._frame.width-c+f)/a.width,l[3]=(r._frame.y+r._frame.height-c+f)/a.height,this.uClampOffset[0]=f/a.realWidth,this.uClampOffset[1]=f/a.realHeight,this.isSimple=r._frame.width===a.width&&r._frame.height===a.height&&r.rotate===0,!0},t}(),Hx=function(t){Ut(e,t);function e(r,i,n){var o=this,a=null;return typeof r!="string"&&i===void 0&&n===void 0&&(a=r,r=void 0,i=void 0,n=void 0),o=t.call(this,r||Dx,i||Vx,n)||this,o.maskSprite=a,o.maskMatrix=new jt,o}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(r,i,n,o){var a=this._maskSprite,l=a._texture;!l.valid||(l.uvMatrix||(l.uvMatrix=new ca(l,0)),l.uvMatrix.update(),this.uniforms.npmAlpha=l.baseTexture.alphaMode?0:1,this.uniforms.mask=l,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,a).prepend(l.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=l.uvMatrix.uClampFrame,r.applyFilter(this,i,n,o))},e}(ur),Xx=function(){function t(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var i=r;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Tx;n.pooled=!0,n.maskObject=r,i=n}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(o),i.autoDetect&&this.detect(i),i._target=e,i.type!==se.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case se.SCISSOR:this.renderer.scissor.push(i);break;case se.STENCIL:this.renderer.stencil.push(i);break;case se.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break}i.type===se.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case se.SCISSOR:this.renderer.scissor.pop();break;case se.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case se.SPRITE:this.popSpriteMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===se.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(e){var r=e.maskObject;r.isSprite?e.type=se.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=se.SCISSOR:e.type=se.STENCIL},t.prototype.pushSpriteMask=function(e){var r,i,n=e.maskObject,o=e._target,a=e._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex],a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Hx]));var l=this.renderer,c=l.renderTexture,f,d;if(c.current){var v=c.current;f=e.resolution||v.resolution,d=(r=e.multisample)!==null&&r!==void 0?r:v.multisample}else f=e.resolution||l.resolution,d=(i=e.multisample)!==null&&i!==void 0?i:l.multisample;a[0].resolution=f,a[0].multisample=d,a[0].maskSprite=n;var _=o.filterArea;o.filterArea=n.getBounds(!0),l.filter.push(o,a),o.filterArea=_,e._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Ac=function(){function t(e){this.renderer=e,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=e;var n=this.getStackLength();n!==i&&(n===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Nc=new jt,$x=function(t){Ut(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.calcScissorRect=function(r){if(!r._scissorRectLocal){var i=r._scissorRect,n=r.maskObject,o=this.renderer,a=o.renderTexture;n.renderable=!0;var l=n.getBounds();this.roundFrameToPixels(l,a.current?a.current.resolution:o.resolution,a.sourceFrame,a.destinationFrame,o.projection.transform),n.renderable=!1,i&&l.fit(i),r._scissorRectLocal=l}},e.isMatrixRotated=function(r){if(!r)return!1;var i=r.a,n=r.b,o=r.c,a=r.d;return(Math.abs(n)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(a)>1e-4)},e.prototype.testScissor=function(r){var i=r.maskObject;if(!i.isFastRect||!i.isFastRect()||e.isMatrixRotated(i.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var n=r._scissorRectLocal;return n.width>0&&n.height>0},e.prototype.roundFrameToPixels=function(r,i,n,o,a){e.isMatrixRotated(a)||(a=a?Nc.copyFrom(a):Nc.identity(),a.translate(-n.x,-n.y).scale(o.width/n.width,o.height/n.height).translate(o.x,o.y),this.renderer.filter.transformAABB(a,r),r.fit(o),r.x=Math.round(r.x*i),r.y=Math.round(r.y*i),r.width=Math.round(r.width*i),r.height=Math.round(r.height*i))},e.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var i=this.renderer.gl;r._scissorRect||i.enable(i.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,i;this.renderer.renderTexture.current?i=r.y:i=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,i,r.width,r.height)},e}(Ac),jx=function(t){Ut(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var i=r.maskObject,n=this.renderer.gl,o=r._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),r._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,o,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;this.getStackLength()===0?i.disable(i.STENCIL_TEST):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e}(Ac),zx=function(){function t(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new jt,this.transform=null}return t.prototype.update=function(e,r,i,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,i,n){var o=this.projectionMatrix,a=n?-1:1;o.identity(),o.a=1/r.width*2,o.d=a*(1/r.height*2),o.tx=-1-r.x*o.a,o.ty=-a-r.y*o.d},t.prototype.setTransform=function(e){},t.prototype.destroy=function(){this.renderer=null},t}(),Dr=new ct,sn=new ct,Wx=function(){function t(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ct,this.destinationFrame=new ct,this.viewportFrame=new ct}return t.prototype.bind=function(e,r,i){e===void 0&&(e=null);var n=this.renderer;this.current=e;var o,a,l;e?(o=e.baseTexture,l=o.resolution,r||(Dr.width=e.frame.width,Dr.height=e.frame.height,r=Dr),i||(sn.x=e.frame.x,sn.y=e.frame.y,sn.width=r.width,sn.height=r.height,i=sn),a=o.framebuffer):(l=n.resolution,r||(Dr.width=n.screen.width,Dr.height=n.screen.height,r=Dr),i||(i=Dr,i.width=r.width,i.height=r.height));var c=this.viewportFrame;c.x=i.x*l,c.y=i.y*l,c.width=i.width*l,c.height=i.height*l,e||(c.y=n.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(a,c),this.renderer.projection.update(i,r,l,!a),e?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,o=i.width!==n.width||i.height!==n.height;if(o){var a=this.viewportFrame,l=a.x,c=a.y,f=a.width,d=a.height;l=Math.round(l),c=Math.round(c),f=Math.round(f),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,f,d)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),o&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Yx(t,e,r,i,n){r.buffer.update(n)}var qx={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Sc={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Kx(t){for(var e=t.map(function(c){return{data:c,offset:0,dataLen:0,dirty:0}}),r=0,i=0,n=0,o=0;o<e.length;o++){var a=e[o];if(r=Sc[a.data.type],a.data.size>1&&(r=Math.max(r,16)*a.data.size),a.dataLen=r,i%r!==0&&i<16){var l=i%r%16;i+=l,n+=l}i+r>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=r,i=r):(a.offset=n,i+=r,n+=r)}return n=Math.ceil(n/16)*16,{uboElements:e,size:n}}function Zx(t,e){var r=[];for(var i in t)e[i]&&r.push(e[i]);return r.sort(function(n,o){return n.index-o.index}),r}function Jx(t,e){if(!t.autoManage)return{size:0,syncFunc:Yx};for(var r=Zx(t.uniforms,e),i=Kx(r),n=i.uboElements,o=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],l=0;l<n.length;l++){for(var c=n[l],f=t.uniforms[c.data.name],d=c.data.name,v=!1,_=0;_<hi.length;_++){var m=hi[_];if(m.codeUbo&&m.test(c.data,f)){a.push("offset = "+c.offset/4+";",hi[_].codeUbo(c.data.name,f)),v=!0;break}}if(!v)if(c.data.size>1){var g=Cc(c.data.type),x=Math.max(Sc[c.data.type]/16,1),b=g/x,w=(4-b%4)%4;a.push(`
                cv = ud.`+d+`.value;
                v = uv.`+d+`;
                offset = `+c.offset/4+`;

                t = 0;

                for(var i=0; i < `+c.data.size*x+`; i++)
                {
                    for(var j = 0; j < `+b+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+w+`;
                }

                `)}else{var C=qx[c.data.type];a.push(`
                cv = ud.`+d+`.value;
                v = uv.`+d+`;
                offset = `+c.offset/4+`;
                `+C+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var Qx=function(){function t(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function tw(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var o=e.getActiveAttrib(t,n);if(o.name.indexOf("gl_")!==0){var a=Pc(e,o.type),l={type:a,name:o.name,size:Cc(a),location:e.getAttribLocation(t,o.name)};r[o.name]=l}}return r}function ew(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=e.getActiveUniform(t,n),a=o.name.replace(/\[.*?\]$/,""),l=!!o.name.match(/\[.*?\]$/),c=Pc(e,o.type);r[a]={name:a,index:n,type:c,size:o.size,isArray:l,value:wc(c,o.size)}}return r}function rw(t,e){var r=bc(t,t.VERTEX_SHADER,e.vertexSrc),i=bc(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();if(t.attachShader(n,r),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||Ex(t,n,r,i),e.attributeData=tw(n,t),e.uniformData=ew(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort(function(d,v){return d>v?1:-1});for(var a=0;a<o.length;a++)e.attributeData[o[a]].location=a,t.bindAttribLocation(n,a,o[a]);t.linkProgram(n)}t.deleteShader(r),t.deleteShader(i);var l={};for(var a in e.uniformData){var c=e.uniformData[a];l[a]={location:t.getUniformLocation(n,a),value:wc(c.type,c.size)}}var f=new Qx(n,l);return f}var iw=0,vo={textureCount:0,uboCount:0},nw=function(){function t(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=iw++}return t.prototype.systemCheck=function(){if(!Lx())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),r||(vo.textureCount=0,vo.uboCount=0,this.syncUniformGroup(e.uniformGroup,vo)),n},t.prototype.setUniforms=function(e){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,r))},t.prototype.syncUniforms=function(e,r,i){var n=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);n(r.uniformData,e.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=Nx(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(e,r){var i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;var n=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,r);e.buffer.update(),n(i.uniformData,e.uniforms,this.renderer,vo,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[r])},t.prototype.createSyncBufferGroup=function(e,r,i){var n=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var o=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(r.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(e,this.shader.program.uniformData,"ubo"),l=this._uboCache[a];if(l||(l=this._uboCache[a]=Jx(e,this.shader.program.uniformData)),e.autoManage){var c=new Float32Array(l.size/4);e.buffer.update(c)}return r.uniformGroups[e.id]=l.syncFunc,r.uniformGroups[e.id]},t.prototype.getSignature=function(e,r,i){var n=e.uniforms,o=[i+"-"];for(var a in n)o.push(a),r[a]&&o.push(r[a].type);return o.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(e){var r=this.gl,i=e.program,n=rw(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function ow(t,e){return e===void 0&&(e=[]),e[tt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.ADD]=[t.ONE,t.ONE],e[tt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.NONE]=[0,0],e[tt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[tt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[tt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[tt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[tt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[tt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[tt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[tt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[tt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[tt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[tt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var sw=0,aw=1,lw=2,hw=3,uw=4,cw=5,fw=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=tt.NONE,this._blendEq=!1,this.map=[],this.map[sw]=this.setBlend,this.map[aw]=this.setOffset,this.map[lw]=this.setCullFace,this.map[hw]=this.setDepthTest,this.map[uw]=this.setFrontFace,this.map[cw]=this.setDepthMask,this.checks=[],this.defaultState=new kr,this.defaultState.blend=!0}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=ow(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,i=0;r;)r&1&&this.map[i].call(this,!!(e.data&1<<i)),r=r>>1,i++;this.stateId=e.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(e){this.gl.depthMask(e)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var i=this.checks.indexOf(e);r&&i===-1?this.checks.push(e):!r&&i!==-1&&this.checks.splice(i,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),pw=function(){function t(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Z.GC_MAX_IDLE,this.checkCountMax=Z.GC_MAX_CHECK_COUNT,this.mode=Z.GC_MODE}return t.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==Vs.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,i=!1,n=0;n<r.length;n++){var o=r[n];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),r[n]=null,i=!0)}if(i){for(var a=0,n=0;n<r.length;n++)r[n]!==null&&(r[a++]=r[n]);r.length=a}},t.prototype.unload=function(e){var r=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var n=e.children.length-1;n>=0;n--)this.unload(e.children[n])},t.prototype.destroy=function(){this.renderer=null},t}();function dw(t){var e,r,i,n,o,a,l,c,f,d,v,_,m,g,x,b,w,C,I,S,A,P,O;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?O=(e={},e[Q.UNSIGNED_BYTE]=(r={},r[H.RGBA]=t.RGBA8,r[H.RGB]=t.RGB8,r[H.RG]=t.RG8,r[H.RED]=t.R8,r[H.RGBA_INTEGER]=t.RGBA8UI,r[H.RGB_INTEGER]=t.RGB8UI,r[H.RG_INTEGER]=t.RG8UI,r[H.RED_INTEGER]=t.R8UI,r[H.ALPHA]=t.ALPHA,r[H.LUMINANCE]=t.LUMINANCE,r[H.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[Q.BYTE]=(i={},i[H.RGBA]=t.RGBA8_SNORM,i[H.RGB]=t.RGB8_SNORM,i[H.RG]=t.RG8_SNORM,i[H.RED]=t.R8_SNORM,i[H.RGBA_INTEGER]=t.RGBA8I,i[H.RGB_INTEGER]=t.RGB8I,i[H.RG_INTEGER]=t.RG8I,i[H.RED_INTEGER]=t.R8I,i),e[Q.UNSIGNED_SHORT]=(n={},n[H.RGBA_INTEGER]=t.RGBA16UI,n[H.RGB_INTEGER]=t.RGB16UI,n[H.RG_INTEGER]=t.RG16UI,n[H.RED_INTEGER]=t.R16UI,n[H.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,n),e[Q.SHORT]=(o={},o[H.RGBA_INTEGER]=t.RGBA16I,o[H.RGB_INTEGER]=t.RGB16I,o[H.RG_INTEGER]=t.RG16I,o[H.RED_INTEGER]=t.R16I,o),e[Q.UNSIGNED_INT]=(a={},a[H.RGBA_INTEGER]=t.RGBA32UI,a[H.RGB_INTEGER]=t.RGB32UI,a[H.RG_INTEGER]=t.RG32UI,a[H.RED_INTEGER]=t.R32UI,a[H.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[Q.INT]=(l={},l[H.RGBA_INTEGER]=t.RGBA32I,l[H.RGB_INTEGER]=t.RGB32I,l[H.RG_INTEGER]=t.RG32I,l[H.RED_INTEGER]=t.R32I,l),e[Q.FLOAT]=(c={},c[H.RGBA]=t.RGBA32F,c[H.RGB]=t.RGB32F,c[H.RG]=t.RG32F,c[H.RED]=t.R32F,c[H.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,c),e[Q.HALF_FLOAT]=(f={},f[H.RGBA]=t.RGBA16F,f[H.RGB]=t.RGB16F,f[H.RG]=t.RG16F,f[H.RED]=t.R16F,f),e[Q.UNSIGNED_SHORT_5_6_5]=(d={},d[H.RGB]=t.RGB565,d),e[Q.UNSIGNED_SHORT_4_4_4_4]=(v={},v[H.RGBA]=t.RGBA4,v),e[Q.UNSIGNED_SHORT_5_5_5_1]=(_={},_[H.RGBA]=t.RGB5_A1,_),e[Q.UNSIGNED_INT_2_10_10_10_REV]=(m={},m[H.RGBA]=t.RGB10_A2,m[H.RGBA_INTEGER]=t.RGB10_A2UI,m),e[Q.UNSIGNED_INT_10F_11F_11F_REV]=(g={},g[H.RGB]=t.R11F_G11F_B10F,g),e[Q.UNSIGNED_INT_5_9_9_9_REV]=(x={},x[H.RGB]=t.RGB9_E5,x),e[Q.UNSIGNED_INT_24_8]=(b={},b[H.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,b),e[Q.FLOAT_32_UNSIGNED_INT_24_8_REV]=(w={},w[H.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,w),e):O=(C={},C[Q.UNSIGNED_BYTE]=(I={},I[H.RGBA]=t.RGBA,I[H.RGB]=t.RGB,I[H.ALPHA]=t.ALPHA,I[H.LUMINANCE]=t.LUMINANCE,I[H.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,I),C[Q.UNSIGNED_SHORT_5_6_5]=(S={},S[H.RGB]=t.RGB,S),C[Q.UNSIGNED_SHORT_4_4_4_4]=(A={},A[H.RGBA]=t.RGBA,A),C[Q.UNSIGNED_SHORT_5_5_5_1]=(P={},P[H.RGBA]=t.RGBA,P),C),O}var fa=function(){function t(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Q.UNSIGNED_BYTE,this.internalFormat=H.RGBA,this.samplerType=0}return t}(),vw=function(){function t(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new _t,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=dw(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new fa(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new fa(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var i=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,i=r.gl,n=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<n.length;o++)n[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<n.length;o++)n[o]===e&&(this.currentLocation!==o&&(i.activeTexture(i.TEXTURE0+o),this.currentLocation=o),i.bindTexture(e.target,this.emptyTextures[e.target].texture),n[o]=null)},t.prototype.ensureSamplerType=function(e){var r=this,i=r.boundTextures,n=r.hasIntegerTextures,o=r.CONTEXT_UID;if(!!n)for(var a=e-1;a>=0;--a){var l=i[a];if(l){var c=l._glTextures[o];c.samplerType!==Zn.FLOAT&&this.renderer.texture.unbind(l)}}},t.prototype.initTexture=function(e){var r=new fa(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){var i,n;r.internalFormat=(n=(i=this.internalFormats[e.type])===null||i===void 0?void 0:i[e.format])!==null&&n!==void 0?n:e.format,this.webGLVersion===2&&e.type===Q.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(!!r){var i=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(i,e,r))r.samplerType!==Zn.FLOAT&&(this.hasIntegerTextures=!0);else{var n=e.realWidth,o=e.realHeight,a=i.gl;(r.width!==n||r.height!==o||r.dirtyId<0)&&(r.width=n,r.height=o,a.texImage2D(e.target,0,r.internalFormat,n,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var i=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var n=this.managedTextures.indexOf(e);n!==-1&&Ye(this.managedTextures,n,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];!r||((e.mipmap===We.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Ce.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var i=this.gl;if(r.mipmap&&e.mipmap!==We.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ee.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===ee.LINEAR){var o=Math.min(e.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ee.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===ee.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),pa=new jt,_w=function(t){Ut(e,t);function e(r,i){r===void 0&&(r=Ki.UNKNOWN);var n=t.call(this)||this;return i=Object.assign({},Z.RENDER_OPTIONS,i),n.options=i,n.type=r,n.screen=new ct(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||Z.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(Zi("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return e.prototype.initPlugins=function(r){for(var i in r)this.plugins[i]=new r[i](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=n,this.screen.height=o,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=o+"px"),this.emit("resize",n,o)},e.prototype.generateTexture=function(r,i,n,o){i===void 0&&(i={}),typeof i=="number"&&(Zi("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:o});var a=i.region,l=Qb(i,["region"]);o=a||r.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var c=pe.create(ta({width:o.width,height:o.height},l));return pa.tx=-o.x,pa.ty=-o.y,this.render(r,{renderTexture:c,clear:!1,transform:pa,skipUpdateTransform:!!r.parent}),c},e.prototype.destroy=function(r){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Ki.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=Pu(r),si(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(ei),mw=function(){function t(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),gw=function(){function t(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(e){var r=this,i=r.gl,n=r.CONTEXT_UID,o=e._glBuffers[n]||this.createGLBuffer(e);i.bindBuffer(e.type,o.buffer)},t.prototype.bindBufferBase=function(e,r){var i=this,n=i.gl,o=i.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var a=e._glBuffers[o]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,a.buffer)}},t.prototype.bindBufferRange=function(e,r,i){var n=this,o=n.gl,a=n.CONTEXT_UID;i=i||0;var l=e._glBuffers[a]||this.createGLBuffer(e);o.bindBufferRange(o.UNIFORM_BUFFER,r||0,l.buffer,i*256,256)},t.prototype.update=function(e){var r=this,i=r.gl,n=r.CONTEXT_UID,o=e._glBuffers[n];if(e._updateID!==o.updateID)if(o.updateID=e._updateID,i.bindBuffer(e.type,o.buffer),o.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{var a=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;o.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,a)}},t.prototype.dispose=function(e,r){if(!!this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),i&&(r||n.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],e)},t.prototype.createGLBuffer=function(e){var r=this,i=r.CONTEXT_UID,n=r.gl;return e._glBuffers[i]=new mw(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]},t}(),cr=function(t){Ut(e,t);function e(r){var i=t.call(this,Ki.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new ae("destroy"),contextChange:new ae("contextChange"),reset:new ae("reset"),update:new ae("update"),postrender:new ae("postrender"),prerender:new ae("prerender"),resize:new ae("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Mr({projectionMatrix:new jt},!0),i.addSystem(Xx,"mask").addSystem(gx,"context").addSystem(fw,"state").addSystem(nw,"shader").addSystem(vw,"texture").addSystem(gw,"buffer").addSystem(wx,"geometry").addSystem(xx,"framebuffer").addSystem($x,"scissor").addSystem(jx,"stencil").addSystem(zx,"projection").addSystem(pw,"textureGC").addSystem(_x,"filter").addSystem(Wx,"renderTexture").addSystem(mx,"batch"),i.initPlugins(e.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,kg(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return e.create=function(r){if(Dg())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,i;if(this.context.webGLVersion===1){var n=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,n)}else{var n=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,n)}i>=Kt.HIGH?this.multisample=Kt.HIGH:i>=Kt.MEDIUM?this.multisample=Kt.MEDIUM:i>=Kt.LOW?this.multisample=Kt.LOW:this.multisample=Kt.NONE},e.prototype.addSystem=function(r,i){var n=new r(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var o in this.runners)this.runners[o].add(n);return this},e.prototype.render=function(r,i){var n,o,a,l;if(i&&(i instanceof pe?(Zi("6.0.0","Renderer#render arguments changed, use options instead."),n=i,o=arguments[2],a=arguments[3],l=arguments[4]):(n=i.renderTexture,o=i.clear,a=i.transform,l=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=r),!l){var c=r.enableTempParent();r.updateTransform(),r.disableTempParent(c)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,i,n,o){i===void 0&&(i={});var a=t.prototype.generateTexture.call(this,r,i,n,o);return this.framebuffer.blit(),a},e.prototype.resize=function(r,i){t.prototype.resize.call(this,r,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Zi("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,i){e.__plugins=e.__plugins||{},e.__plugins[r]=i},e}(_w);function yw(t){return cr.create(t)}var bw=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xw=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ww=bw,Oc=xw,da=function(){function t(){this.texArray=null,this.blend=0,this.type=Ee.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),va=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},t}(),_a=function(){function t(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(e){return this[e+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},t}(),Tw=function(t){Ut(e,t);function e(r){var i=t.call(this,r)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=kr.for2d(),i.size=Z.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),r.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return e.prototype.contextChange=function(){var r=this.renderer.gl;Z.PREFER_ENV===ze.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Z.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Ux(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,o=Math.floor(n/this.MAX_TEXTURES)+1;r.length<n;)r.push(new da);for(;i.length<o;)i.push(new va);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){!r._texture.valid||(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,i=r._bufferedTextures,n=r.MAX_TEXTURES,o=e._textureArrayPool,a=this.renderer.batch,l=this._tempBoundTextures,c=this.renderer.textureGC.count,f=++_t._globalBatch,d=0,v=o[0],_=0;a.copyBoundTextures(l,n);for(var m=0;m<this._bufferSize;++m){var g=i[m];i[m]=null,g._batchEnabled!==f&&(v.count>=n&&(a.boundArray(v,l,f,n),this.buildDrawCalls(v,_,m),_=m,v=o[++d],++f),g._batchEnabled=f,g.touched=c,v.elements[v.count++]=g)}v.count>0&&(a.boundArray(v,l,f,n),this.buildDrawCalls(v,_,this._bufferSize),++d,++f);for(var m=0;m<l.length;m++)l[m]=null;_t._globalBatch=f},e.prototype.buildDrawCalls=function(r,i,n){var o=this,a=o._bufferedElements,l=o._attributeBuffer,c=o._indexBuffer,f=o.vertexSize,d=e._drawCallPool,v=this._dcIndex,_=this._aIndex,m=this._iIndex,g=d[v];g.start=this._iIndex,g.texArray=r;for(var x=i;x<n;++x){var b=a[x],w=b._texture.baseTexture,C=Au[w.alphaMode?1:0][b.blendMode];a[x]=null,i<x&&g.blend!==C&&(g.size=m-g.start,i=x,g=d[++v],g.texArray=r,g.start=m),this.packInterleavedGeometry(b,l,c,_,m),_+=b.vertexData.length/2*f,m+=b.indices.length,g.blend=C}i<n&&(g.size=m-g.start,++v),this._dcIndex=v,this._aIndex=_,this._iIndex=m},e.prototype.bindAndClearTexArray=function(r){for(var i=this.renderer.texture,n=0;n<r.count;n++)i.bind(r.elements[n],r.ids[n]),r.elements[n]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,i=r._packedGeometries,n=r._attributeBuffer,o=r._indexBuffer;Z.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,i=this.renderer,n=i.gl,o=i.state,a=e._drawCallPool,l=null,c=0;c<r;c++){var f=a[c],d=f.texArray,v=f.type,_=f.size,m=f.start,g=f.blend;l!==d&&(l=d,this.bindAndClearTexArray(d)),this.state.blendMode=g,o.set(this.state),n.drawElements(v,_,n.UNSIGNED_SHORT,m*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Z.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var i=Jn(Math.ceil(r/8)),n=Lu(i),o=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new _a(o*this.vertexSize*4)),a},e.prototype.getIndexBuffer=function(r){var i=Jn(Math.ceil(r/12)),n=Lu(i),o=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(o)),a},e.prototype.packInterleavedGeometry=function(r,i,n,o,a){for(var l=i.uint32View,c=i.float32View,f=o/this.vertexSize,d=r.uvs,v=r.indices,_=r.vertexData,m=r._texture.baseTexture._batchLocation,g=Math.min(r.worldAlpha,1),x=g<1&&r._texture.baseTexture.alphaMode?Xs(r._tintRGB,g):r._tintRGB+(g*255<<24),b=0;b<_.length;b+=2)c[o++]=_[b],c[o++]=_[b+1],c[o++]=d[b],c[o++]=d[b+1],l[o++]=x,c[o++]=m;for(var b=0;b<v.length;b++)n[a++]=f+v[b]},e._drawCallPool=[],e._textureArrayPool=[],e}(uo),Ew=function(){function t(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),i=0;i<e;i++)r[i]=i;this.defaultGroupCache[e]=Mr.from({uSamplers:r},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+e),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new on(this.vertexSrc,n)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new jt,default:this.defaultGroupCache[e]};return new ge(this.programCache[e],o)},t.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var i=0;i<e;i++)i>0&&(r+=`
else `),i<e-1&&(r+="if(vTextureId < "+i+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},t}(),Uc=function(t){Ut(e,t);function e(r){r===void 0&&(r=!1);var i=t.call(this)||this;return i._buffer=new Jt(null,r,!1),i._indexBuffer=new Jt(null,r,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Q.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Q.FLOAT).addAttribute("aColor",i._buffer,4,!0,Q.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Q.FLOAT).addIndex(i._indexBuffer),i}return e}(en),Lc=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Fc=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Cw=function(){function t(){}return t.create=function(e){var r=Object.assign({vertex:Lc,fragment:Fc,geometryClass:Uc,vertexSize:6},e),i=r.vertex,n=r.fragment,o=r.vertexSize,a=r.geometryClass;return function(l){Ut(c,l);function c(f){var d=l.call(this,f)||this;return d.shaderGenerator=new Ew(i,n),d.geometryClass=a,d.vertexSize=o,d}return c}(Tw)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Lc},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Fc},enumerable:!1,configurable:!0}),t}(),Iw=Cw.create();/*!
 * @pixi/app - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _o=function(){function t(e){var r=this;this.stage=new ce,e=Object.assign({forceCanvas:!1},e),this.renderer=yw(e),t._plugins.forEach(function(i){i.init.call(r,e)})}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var i=this,n=t._plugins.slice(0);n.reverse(),n.forEach(function(o){o.destroy.call(i)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),Pw=function(){function t(){}return t.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!r._resizeTo||(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(!!r._resizeTo){r.cancelResize();var i,n;if(r._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{var o=r._resizeTo,a=o.clientWidth,l=o.clientHeight;i=a,n=l}r.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();_o.registerPlugin(Pw);/*!
 * @pixi/extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ma=/iPhone/i,Gc=/iPod/i,Bc=/iPad/i,Mc=/\biOS-universal(?:.+)Mac\b/i,ga=/\bAndroid(?:.+)Mobile\b/i,kc=/Android/i,ui=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,mo=/Silk/i,Ke=/Windows Phone/i,Dc=/\bWindows(?:.+)ARM\b/i,Vc=/BlackBerry/i,Hc=/BB10/i,Xc=/Opera Mini/i,$c=/\b(CriOS|Chrome)(?:.+)Mobile/i,jc=/Mobile(?:.+)Firefox\b/i,zc=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function Rw(t){return function(e){return e.test(t)}}function Aw(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]!="undefined"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]!="undefined"&&(r=i[0]);var n=Rw(r),o={apple:{phone:n(ma)&&!n(Ke),ipod:n(Gc),tablet:!n(ma)&&(n(Bc)||zc(e))&&!n(Ke),universal:n(Mc),device:(n(ma)||n(Gc)||n(Bc)||n(Mc)||zc(e))&&!n(Ke)},amazon:{phone:n(ui),tablet:!n(ui)&&n(mo),device:n(ui)||n(mo)},android:{phone:!n(Ke)&&n(ui)||!n(Ke)&&n(ga),tablet:!n(Ke)&&!n(ui)&&!n(ga)&&(n(mo)||n(kc)),device:!n(Ke)&&(n(ui)||n(mo)||n(ga)||n(kc))||n(/\bokhttp\b/i)},windows:{phone:n(Ke),tablet:n(Dc),device:n(Ke)||n(Dc)},other:{blackberry:n(Vc),blackberry10:n(Hc),opera:n(Xc),firefox:n(jc),chrome:n($c),device:n(Vc)||n(Hc)||n(Xc)||n(jc)||n($c)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ci=Aw(globalThis.navigator);function Nw(t){var e=!0;if(ci.tablet||ci.phone){if(ci.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(ci.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}function Sw(){return!ci.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wc;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Wc||(Wc={}));var Yc;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Yc||(Yc={}));var qc;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(qc||(qc={}));var Kc;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Kc||(Kc={}));var Zc;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Zc||(Zc={}));var Jc;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Jc||(Jc={}));var Qc;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Qc||(Qc={}));var tf;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(tf||(tf={}));var ef;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(ef||(ef={}));var ya;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(ya||(ya={}));var ba;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ba||(ba={}));var xa;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(xa||(xa={}));var rf;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(rf||(rf={}));var nf;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(nf||(nf={}));var wa;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(wa||(wa={}));var an;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(an||(an={}));var of;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(of||(of={}));var Ta;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Ta||(Ta={}));var sf;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(sf||(sf={}));var af={MIPMAP_TEXTURES:xa.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Ta.NONE,SPRITE_MAX_TEXTURES:Nw(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:wa.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:ba.CLAMP,SCALE_MODE:ya.LINEAR,PRECISION_VERTEX:an.HIGH,PRECISION_FRAGMENT:ci.apple.device?an.HIGH:an.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Sw(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */af.SORTABLE_CHILDREN=!1;var lf=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ct.EMPTY:(e=e||new ct(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var i=e.a,n=e.b,o=e.c,a=e.d,l=e.tx,c=e.ty,f=i*r.x+o*r.y+l,d=n*r.x+a*r.y+c;this.minX=Math.min(this.minX,f),this.maxX=Math.max(this.maxX,f),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)},t.prototype.addQuad=function(e){var r=this.minX,i=this.minY,n=this.maxX,o=this.maxY,a=e[0],l=e[1];r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,a=e[2],l=e[3],r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,a=e[4],l=e[5],r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,a=e[6],l=e[7],r=a<r?a:r,i=l<i?l:i,n=a>n?a:n,o=l>o?l:o,this.minX=r,this.minY=i,this.maxX=n,this.maxY=o},t.prototype.addFrame=function(e,r,i,n,o){this.addFrameMatrix(e.worldTransform,r,i,n,o)},t.prototype.addFrameMatrix=function(e,r,i,n,o){var a=e.a,l=e.b,c=e.c,f=e.d,d=e.tx,v=e.ty,_=this.minX,m=this.minY,g=this.maxX,x=this.maxY,b=a*r+c*i+d,w=l*r+f*i+v;_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,b=a*n+c*i+d,w=l*n+f*i+v,_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,b=a*r+c*o+d,w=l*r+f*o+v,_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,b=a*n+c*o+d,w=l*n+f*o+v,_=b<_?b:_,m=w<m?w:m,g=b>g?b:g,x=w>x?w:x,this.minX=_,this.minY=m,this.maxX=g,this.maxY=x},t.prototype.addVertexData=function(e,r,i){for(var n=this.minX,o=this.minY,a=this.maxX,l=this.maxY,c=r;c<i;c+=2){var f=e[c],d=e[c+1];n=f<n?f:n,o=d<o?d:o,a=f>a?f:a,l=d>l?d:l}this.minX=n,this.minY=o,this.maxX=a,this.maxY=l},t.prototype.addVertices=function(e,r,i,n){this.addVerticesMatrix(e.worldTransform,r,i,n)},t.prototype.addVerticesMatrix=function(e,r,i,n,o,a){o===void 0&&(o=0),a===void 0&&(a=o);for(var l=e.a,c=e.b,f=e.c,d=e.d,v=e.tx,_=e.ty,m=this.minX,g=this.minY,x=this.maxX,b=this.maxY,w=i;w<n;w+=2){var C=r[w],I=r[w+1],S=l*C+f*I+v,A=d*I+c*C+_;m=Math.min(m,S-o),x=Math.max(x,S+o),g=Math.min(g,A-a),b=Math.max(b,A+a)}this.minX=m,this.minY=g,this.maxX=x,this.maxY=b},t.prototype.addBounds=function(e){var r=this.minX,i=this.minY,n=this.maxX,o=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>o?e.maxY:o},t.prototype.addBoundsMask=function(e,r){var i=e.minX>r.minX?e.minX:r.minX,n=e.minY>r.minY?e.minY:r.minY,o=e.maxX<r.maxX?e.maxX:r.maxX,a=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=o&&n<=a){var l=this.minX,c=this.minY,f=this.maxX,d=this.maxY;this.minX=i<l?i:l,this.minY=n<c?n:c,this.maxX=o>f?o:f,this.maxY=a>d?a:d}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var i=e.minX>r.x?e.minX:r.x,n=e.minY>r.y?e.minY:r.y,o=e.maxX<r.x+r.width?e.maxX:r.x+r.width,a=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=o&&n<=a){var l=this.minX,c=this.minY,f=this.maxX,d=this.maxY;this.minX=i<l?i:l,this.minY=n<c?n:c,this.maxX=o>f?o:f,this.maxY=a>d?a:d}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,i,n,o,a){e-=o,r-=a,i+=o,n+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>n?this.maxY:n},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ea=function(t,e){return Ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ea(t,e)};function Ca(t,e){Ea(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ln=function(t){Ca(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new js,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new lf,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var i=Object.keys(r),n=0;n<i.length;++n){var o=i[n];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new ct),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new ct),r=this._localBoundsRect),this._localBounds||(this._localBounds=new lf);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var l=this.getBounds(!1,r);return this.parent=n,this.transform=i,this._bounds=o,this._bounds.updateID+=this._boundsID-a,l},e.prototype.toGlobal=function(r,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},e.prototype.toLocal=function(r,i,n,o){return i&&(r=i.toGlobal(r,n,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,n)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,i,n,o,a,l,c,f,d){return r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),o===void 0&&(o=1),a===void 0&&(a=0),l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=0),d===void 0&&(d=0),this.position.x=r,this.position.y=i,this.scale.x=n||1,this.scale.y=o||1,this.rotation=a,this.skew.x=l,this.skew.y=c,this.pivot.x=f,this.pivot.y=d,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Ow),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Mu},set:function(r){this.transform.rotation=r*ku},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var i=this._mask.maskObject||this._mask;i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1)}if(this._mask=r,this._mask){var i=this._mask.maskObject||this._mask;i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++}}},enumerable:!1,configurable:!0}),e}(ei),Ow=function(t){Ca(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(ln);ln.prototype.displayObjectUpdateTransform=ln.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var hf;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(hf||(hf={}));var uf;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(uf||(uf={}));var cf;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(cf||(cf={}));var ff;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(ff||(ff={}));var pf;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(pf||(pf={}));var df;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(df||(df={}));var vf;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(vf||(vf={}));var _f;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(_f||(_f={}));var mf;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(mf||(mf={}));var gf;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(gf||(gf={}));var yf;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(yf||(yf={}));var bf;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(bf||(bf={}));var xf;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(xf||(xf={}));var wf;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(wf||(wf={}));var Tf;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Tf||(Tf={}));var Ef;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Ef||(Ef={}));var Ia;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(Ia||(Ia={}));var Cf;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Cf||(Cf={}));var If;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(If||(If={}));function Uw(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var Pf=function(t){Ca(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=af.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var o=0;o<i.length;o++)this.addChild(i[o]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},e.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},e.prototype.swapChildren=function(r,i){if(r!==i){var n=this.getChildIndex(r),o=this.getChildIndex(i);this.children[n]=i,this.children[o]=r,this.onChildrenChange(n<o?n:o)}},e.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(r);Ye(this.children,n,1),this.children.splice(i,0,r),this.onChildrenChange(i)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(i.length>1)for(var o=0;o<i.length;o++)this.removeChild(i[o]);else{var a=i[0],l=this.children.indexOf(a);if(l===-1)return null;a.parent=null,a.transform._parentID=-1,Ye(this.children,l,1),this._boundsID++,this.onChildrenChange(l),a.emit("removed",this),this.emit("childRemoved",a,this,l)}return i[0]},e.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,Ye(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},e.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var n=r,o=i,a=o-n,l;if(a>0&&a<=o){l=this.children.splice(n,a);for(var c=0;c<l.length;++c)l[c].parent=null,l[c].transform&&(l[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var c=0;c<l.length;++c)l[c].emit("removed",this),this.emit("childRemoved",l[c],this,c);return l}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,i=0,n=this.children.length;i<n;++i){var o=this.children[i];o._lastSortedIndex=i,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(Uw),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var n=t.prototype.getLocalBounds.call(this,r);if(!i)for(var o=0,a=this.children.length;o<a;++o){var l=this.children[o];l.visible&&l.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var i=r.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var n,o;if(this.cullArea?(n=this.cullArea,o=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0)),n&&i.intersects(n,o))this._render(r);else if(this.cullArea)return;for(var a=0,l=this.children.length;a<l;++a){var c=this.children[a],f=c.cullable;c.cullable=f||!this.cullArea,c.render(r),c.cullable=f}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(r)}},e.prototype.renderAdvanced=function(r){var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o])}var a=i&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Ia.NONE));if(a&&r.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),n&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,l=this.children.length;o<l;++o)this.children[o].render(r)}a&&r.batch.flush(),n&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,n=this.removeChildren(0,this.children.length);if(i)for(var o=0;o<n.length;++o)n[o].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(ln);Pf.prototype.containerUpdateTransform=Pf.prototype.updateTransform;var Pa=new ct,Rf=4,Lw=function(){function t(e){this.renderer=e}return t.prototype.image=function(e,r,i){var n=new Image;return n.src=this.base64(e,r,i),n},t.prototype.base64=function(e,r,i){return this.canvas(e).toDataURL(r,i)},t.prototype.canvas=function(e){var r=this.renderer,i,n,o=!1,a,l=!1;e&&(e instanceof pe?a=e:(a=this.renderer.generateTexture(e),l=!0)),a?(i=a.baseTexture.resolution,n=a.frame,o=!1,r.renderTexture.bind(a)):(i=this.renderer.resolution,o=!0,n=Pa,n.width=this.renderer.width,n.height=this.renderer.height,r.renderTexture.bind(null));var c=Math.floor(n.width*i+1e-4),f=Math.floor(n.height*i+1e-4),d=new Bu(c,f,1),v=new Uint8Array(Rf*c*f),_=r.gl;_.readPixels(n.x*i,n.y*i,c,f,_.RGBA,_.UNSIGNED_BYTE,v);var m=d.context.getImageData(0,0,c,f);if(t.arrayPostDivide(v,m.data),d.context.putImageData(m,0,0),o){var g=new Bu(d.width,d.height,1);g.context.scale(1,-1),g.context.drawImage(d.canvas,0,-f),d.destroy(),d=g}return l&&a.destroy(!0),d.canvas},t.prototype.pixels=function(e,r){var i=this.renderer,n,o,a,l=!1;e&&(e instanceof pe?a=e:e instanceof ln&&(a=this.renderer.generateTexture(e),l=!0)),a?r?(n=r.resolution,o=a.frame,i.renderTexture.bind(a)):(n=a.baseTexture.resolution,o=a.frame,i.renderTexture.bind(a)):r?(n=r.resolution,o=Pa,o.width=r.width,o.height=r.height,i.renderTexture.bind(null)):(n=i.resolution,o=Pa,o.width=i.width,o.height=i.height,i.renderTexture.bind(null));var c=o.width*n,f=o.height*n,d=new Uint8Array(Rf*c*f),v=i.gl;return v.readPixels(o.x*n,o.y*n,c,f,v.RGBA,v.UNSIGNED_BYTE,d),l&&a.destroy(!0),t.arrayPostDivide(d,d),d},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(e,r){for(var i=0;i<e.length;i+=4){var n=r[i+3]=e[i+3];n!==0?(r[i]=Math.round(Math.min(e[i]*255/n,255)),r[i+1]=Math.round(Math.min(e[i+1]*255/n,255)),r[i+2]=Math.round(Math.min(e[i+2]*255/n,255))):(r[i]=e[i],r[i+1]=e[i+1],r[i+2]=e[i+2])}},t}();/*!
 * @pixi/loaders - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var go=function(){function t(e,r,i){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function Af(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Ze=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i},t.prototype.has=function(e){if(!(e instanceof go))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},t.prototype.dispatch=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,r),n=n._next;return!0},t.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Af(this,new go(e,!1,r))},t.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Af(this,new go(e,!0,r))},t.prototype.detach=function(e){if(!(e instanceof go))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},t.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},t}();function Nf(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[r.key[o]]=i[o]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(a,l,c){l&&(n[r.q.name][l]=c)}),n}var Ra,yo=null,Fw=0,Sf=200,Gw=204,Bw=1223,Mw=2;function Of(){}function Uf(t,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(t[e]=r)}function Aa(t){return t.toString().replace("object ","")}var zt=function(){function t(e,r,i){if(this._dequeue=Of,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Of,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ze,this.onProgress=new Ze,this.onComplete=new Ze,this.onAfterMiddleware=new Ze}return t.setExtensionLoadType=function(e,r){Uf(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){Uf(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:typeof Ra=="undefined"&&(Ra=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Ra&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(e){return(this._flags&e)!==0},t.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image!="undefined"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(r)?r[i]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t.prototype._createSource=function(e,r,i){i||(i=e+"/"+this._getExtension(r));var n=document.createElement("source");return n.src=r,n.type=i,n},t.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var e=this.xhr;this.abort(Aa(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(Aa(e)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(Aa(e)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",i=typeof e.status=="undefined"?Sf:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType=="undefined")&&(r=e.responseText),i===Fw&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=Sf:i===Bw&&(i=Gw);var n=i/100|0;if(n===Mw)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(l){this.abort("Error trying to parse loaded json: "+l);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(r,"text/xml")}else{var a=document.createElement("div");a.innerHTML=r,this.data=a}this.type=t.TYPE.XML}catch(l){this.abort("Error trying to parse loaded xml: "+l);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,yo||(yo=document.createElement("a")),yo.href=e;var i=Nf(yo.href,{strictMode:!0}),n=!i.port&&r.port===""||i.port===r.port,o=i.protocol?i.protocol+":":"";return i.host!==r.hostname||!n||o!==r.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var i=e.indexOf("/");r=e.substring(i+1,e.indexOf(";",i))}else{var n=e.indexOf("?"),o=e.indexOf("#"),a=Math.min(n>-1?n:e.length,o>-1?o:e.length);e=e.substring(0,a),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(zt||(zt={}));function Vr(){}function kw(t){return function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];if(t===null)throw new Error("Callback was already called.");var o=t;t=null,o.apply(this,i)}}var Dw=function(){function t(e,r){this.data=e,this.callback=r}return t}(),Na=function(){function t(e,r){var i=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Vr,this.unsaturated=Vr,this.empty=Vr,this.drain=Vr,this.error=Vr,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,o,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var l=new Dw(n,typeof a=="function"?a:Vr);o?i._tasks.unshift(l):i._tasks.push(l),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var n=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(n.data,kw(i._next(n)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return t.prototype._next=function(e){var r=this;return function(){for(var i=arguments,n=[],o=0;o<arguments.length;o++)n[o]=i[o];r.workers-=1,e.callback.apply(e,n),n[0]!=null&&r.error(n[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},t.prototype.push=function(e,r){this._insert(e,!1,r)},t.prototype.kill=function(){this.workers=0,this.drain=Vr,this.started=!1,this._tasks=[]},t.prototype.unshift=function(e,r){this._insert(e,!0,r)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},t.eachSeries=function(e,r,i,n){var o=0,a=e.length;function l(c){if(c||o===a){i&&i(c);return}n?setTimeout(function(){r(e[o++],l)},1):r(e[o++],l)}l()},t.queue=function(e,r){return new t(e,r)},t}(),Sa=100,Vw=/(#[\w-]+)?$/,Pe=function(){function t(e,r){var i=this;e===void 0&&(e=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,f){return i._loadResource(c,f)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,f){return i._loadResource(c,f)},this._queue=Na.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Ze,this.onError=new Ze,this.onLoad=new Ze,this.onStart=new Ze,this.onComplete=new Ze;for(var n=0;n<t._plugins.length;++n){var o=t._plugins[n],a=o.pre,l=o.use;a&&this.pre(a),l&&this.use(l)}this._protected=!1}return t.prototype._add=function(e,r,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new zt(e,r,i),typeof n=="function"&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,a=[],l=0;l<o.children.length;++l)o.children[l].isComplete||a.push(o.children[l]);var c=o.progressChunk*(a.length+1),f=c/(a.length+2);o.children.push(this.resources[e]),o.progressChunk=f;for(var l=0;l<a.length;++l)a[l].progressChunk=f;this.resources[e].progressChunk=f}return this._queue.push(this.resources[e]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},t.prototype.load=function(e){if(typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=Sa/r,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(e){var r=Nf(e,{strictMode:!0}),i;if(r.protocol||!r.path||e.indexOf("//")===0?i=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?i=this.baseUrl+"/"+e:i=this.baseUrl+e,this.defaultQueryString){var n=Vw.exec(i)[0];i=i.slice(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(e,r){var i=this;e._dequeue=r,Na.eachSeries(this._beforeMiddleware,function(n,o){n.call(i,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=Sa,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),Na.eachSeries(this._afterMiddleware,function(i,n){i.call(r,e,n)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(Sa,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();Pe.prototype.add=function(e,r,i,n){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if(typeof e=="object"&&(i=e,n=r||i.callback||i.onComplete,r=i.url,e=i.name||i.key||i.url),typeof r!="string"&&(n=i,i=r,r=e),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(n=i,i=null),this._add(e,r,i,n)};var Hw=function(){function t(){}return t.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Pe.shared:new Pe},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),Xw=function(){function t(){}return t.add=function(){zt.setExtensionLoadType("svg",zt.LOAD_TYPE.XHR),zt.setExtensionXhrType("svg",zt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){if(e.data&&(e.type===zt.TYPE.IMAGE||e.extension==="svg")){var i=e.data,n=e.url,o=e.name,a=e.metadata;it.fromLoader(i,n,o,a).then(function(l){e.texture=l,r()}).catch(r)}else r()},t}(),$w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function jw(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],o=0;o<i.length;++o)r<t.length?i[o]=t.charCodeAt(r++)&255:i[o]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var a=r-(t.length-1);switch(a){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var o=0;o<n.length;++o)e+=$w.charAt(n[o])}return e}function zw(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===zt.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var r=t.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){t.data=new Image,t.data.src="data:"+r+";base64,"+jw(t.xhr.responseText),t.type=zt.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var i=globalThis.URL||globalThis.webkitURL,n=i.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=n,t.type=zt.TYPE.IMAGE,t.data.onload=function(){i.revokeObjectURL(n),t.data.onload=null,e()};return}}e()}Pe.registerPlugin({use:zw}),Pe.registerPlugin(Xw);/*!
 * @pixi/compressed-textures - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var At,ht;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(ht||(ht={}));var bo=(At={},At[ht.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,At[ht.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,At[ht.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,At[ht.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,At[ht.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,At[ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,At[ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,At[ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,At[ht.COMPRESSED_R11_EAC]=.5,At[ht.COMPRESSED_SIGNED_R11_EAC]=.5,At[ht.COMPRESSED_RG11_EAC]=1,At[ht.COMPRESSED_SIGNED_RG11_EAC]=1,At[ht.COMPRESSED_RGB8_ETC2]=.5,At[ht.COMPRESSED_RGBA8_ETC2_EAC]=1,At[ht.COMPRESSED_SRGB8_ETC2]=.5,At[ht.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,At[ht.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,At[ht.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,At[ht.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,At[ht.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,At[ht.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,At[ht.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,At[ht.COMPRESSED_RGB_ETC1_WEBGL]=.5,At[ht.COMPRESSED_RGB_ATC_WEBGL]=.5,At[ht.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,At[ht.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,At);/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Oa=function(t,e){return Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Oa(t,e)};function Lf(t,e){Oa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Ww(t,e,r,i){return new(r||(r=Promise))(function(n,o){function a(f){try{c(i.next(f))}catch(d){o(d)}}function l(f){try{c(i.throw(f))}catch(d){o(d)}}function c(f){f.done?n(f.value):new r(function(d){d(f.value)}).then(a,l)}c((i=i.apply(t,e||[])).next())})}function Yw(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(f){return function(d){return c([f,d])}}function c(f){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=f[0]&2?n.return:f[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,f[1])).done)return o;switch(n=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,n=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(d){f=[6,d],n=0}finally{i=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var qw=function(t){Lf(e,t);function e(r,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var n=this,o,a;return typeof r=="string"?(o=r,a=new Uint8Array):(o=null,a=r),n=t.call(this,a,i)||this,n.origin=o,n.buffer=a?new _a(a):null,n.origin&&i.autoLoad!==!1&&n.load(),a&&a.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return e.prototype.onBlobLoaded=function(r){},e.prototype.load=function(){return Ww(this,void 0,Promise,function(){var r,i,n;return Yw(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return r=o.sent(),[4,r.blob()];case 2:return i=o.sent(),[4,i.arrayBuffer()];case 3:return n=o.sent(),this.data=new Uint32Array(n),this.buffer=new _a(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},e}(tn),Ua=function(t){Lf(e,t);function e(r,i){var n=t.call(this,r,i)||this;return n.format=i.format,n.levels=i.levels||1,n._width=i.width,n._height=i.height,n._extension=e._formatToExtension(n.format),(i.levelBuffers||n.buffer)&&(n._levelBuffers=i.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return e.prototype.upload=function(r,i,n){var o=r.gl,a=r.context.extensions[this._extension];if(!a)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var l=0,c=this.levels;l<c;l++){var f=this._levelBuffers[l],d=f.levelID,v=f.levelWidth,_=f.levelHeight,m=f.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,d,this.format,v,_,0,m)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(r,i,n,o,a,l,c){for(var f=new Array(n),d=r.byteOffset,v=l,_=c,m=v+o-1&~(o-1),g=_+a-1&~(a-1),x=m*g*bo[i],b=0;b<n;b++)f[b]={levelID:b,levelWidth:n>1?v:m,levelHeight:n>1?_:g,levelBuffer:new Uint8Array(r.buffer,d,x)},d+=x,v=v>>1||1,_=_>>1||1,m=v+o-1&~(o-1),g=_+a-1&~(a-1),x=m*g*bo[i];return f},e}(qw),Kw=function(){function t(){}return t.use=function(e,r){var i=e.data,n=this;if(e.type===zt.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var o=i.textures,a=void 0,l=void 0,c=0,f=o.length;c<f;c++){var d=o[c],v=d.src,_=d.format;if(_||(l=v),t.textureFormats[_]){a=v;break}}if(a=a||l,!a){r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(a===e.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var m={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},g=oi.resolve(e.url.replace(n.baseUrl,""),a),x=i.cacheID;n.add(x,g,m,function(b){if(b.error){r(b.error);return}var w=b.texture,C=w===void 0?null:w,I=b.textures,S=I===void 0?{}:I;Object.assign(e,{texture:C,textures:S}),r()})}else r()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=document.createElement("canvas"),r=e.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;t._textureFormats={};for(var r in e){var i=e[r];!i||Object.assign(t._textureFormats,Object.getPrototypeOf(i))}}return t._textureFormats},enumerable:!1,configurable:!0}),t}();function Ff(t,e,r){var i={textures:{},texture:null};if(!e)return i;var n=e.map(function(o){return new it(new _t(o,Object.assign({mipmap:We.OFF,alphaMode:Ie.NO_PREMULTIPLIED_ALPHA},r)))});return n.forEach(function(o,a){var l=o.baseTexture,c=t+"-"+(a+1);_t.addToCache(l,c),it.addToCache(o,c),a===0&&(_t.addToCache(l,t),it.addToCache(o,t),i.texture=o),i.textures[c]=o}),i}var hn,Re;zt.setExtensionXhrType("dds",zt.XHR_RESPONSE_TYPE.BUFFER);var La=4,xo=124,Zw=32,Gf=20,Jw=542327876,wo={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Qw={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},To={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Ae;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ae||(Ae={}));var Fa;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Fa||(Fa={}));var tT=1,eT=2,rT=4,iT=64,nT=512,oT=131072,sT=827611204,aT=861165636,lT=894720068,hT=808540228,uT=4,cT=(hn={},hn[sT]=ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,hn[aT]=ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,hn[lT]=ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,hn),fT=(Re={},Re[Ae.DXGI_FORMAT_BC1_TYPELESS]=ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,Re[Ae.DXGI_FORMAT_BC1_UNORM]=ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,Re[Ae.DXGI_FORMAT_BC2_TYPELESS]=ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,Re[Ae.DXGI_FORMAT_BC2_UNORM]=ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,Re[Ae.DXGI_FORMAT_BC3_TYPELESS]=ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,Re[Ae.DXGI_FORMAT_BC3_UNORM]=ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,Re[Ae.DXGI_FORMAT_BC1_UNORM_SRGB]=ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Re[Ae.DXGI_FORMAT_BC2_UNORM_SRGB]=ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Re[Ae.DXGI_FORMAT_BC3_UNORM_SRGB]=ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Re),pT=function(){function t(){}return t.use=function(e,r){if(e.extension==="dds"&&e.data)try{Object.assign(e,Ff(e.name||e.url,t.parse(e.data),e.metadata))}catch(i){r(i);return}r()},t.parse=function(e){var r=new Uint32Array(e),i=r[0];if(i!==Jw)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,xo/Uint32Array.BYTES_PER_ELEMENT),o=n[wo.HEIGHT],a=n[wo.WIDTH],l=n[wo.MIPMAP_COUNT],c=new Uint32Array(e,wo.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Zw/Uint32Array.BYTES_PER_ELEMENT),f=c[tT];if(f&rT){var d=c[Qw.FOURCC];if(d!==hT){var v=cT[d],_=La+xo,m=new Uint8Array(e,_),g=new Ua(m,{format:v,width:a,height:o,levels:l});return[g]}var x=La+xo,b=new Uint32Array(r.buffer,x,Gf/Uint32Array.BYTES_PER_ELEMENT),w=b[To.DXGI_FORMAT],C=b[To.RESOURCE_DIMENSION],I=b[To.MISC_FLAG],S=b[To.ARRAY_SIZE],A=fT[w];if(A===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+w);if(I===uT)throw new Error("DDSLoader does not support cubemap textures");if(C===Fa.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var P=new Array,O=La+xo+Gf;if(S===1)P.push(new Uint8Array(e,O));else{for(var D=bo[A],U=0,B=a,$=o,j=0;j<l;j++){var W=Math.max(1,B+3&-4),lt=Math.max(1,$+3&-4),z=W*lt*D;U+=z,B=B>>>1,$=$>>>1}for(var k=O,j=0;j<S;j++)P.push(new Uint8Array(e,k,U)),k+=U}return P.map(function(V){return new Ua(V,{format:A,width:a,height:o,levels:l})})}throw f&iT?new Error("DDSLoader does not support uncompressed texture data."):f&nT?new Error("DDSLoader does not supported YUV uncompressed texture data."):f&oT?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):f&eT?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}(),fr,Je,un;zt.setExtensionXhrType("ktx",zt.XHR_RESPONSE_TYPE.BUFFER);var Bf=[171,75,84,88,32,49,49,187,13,10,26,10],dT=67305985,Ne={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ga=64,Mf=(fr={},fr[Q.UNSIGNED_BYTE]=1,fr[Q.UNSIGNED_SHORT]=2,fr[Q.INT]=4,fr[Q.UNSIGNED_INT]=4,fr[Q.FLOAT]=4,fr[Q.HALF_FLOAT]=8,fr),vT=(Je={},Je[H.RGBA]=4,Je[H.RGB]=3,Je[H.RG]=2,Je[H.RED]=1,Je[H.LUMINANCE]=1,Je[H.LUMINANCE_ALPHA]=2,Je[H.ALPHA]=1,Je),_T=(un={},un[Q.UNSIGNED_SHORT_4_4_4_4]=2,un[Q.UNSIGNED_SHORT_5_5_5_1]=2,un[Q.UNSIGNED_SHORT_5_6_5]=2,un),mT=function(){function t(){}return t.use=function(e,r){if(e.extension==="ktx"&&e.data)try{var i=e.name||e.url,n=t.parse(i,e.data),o=n.compressed,a=n.uncompressed,l=n.kvData;if(o){var c=Ff(i,o,e.metadata);if(l&&c.textures)for(var f in c.textures)c.textures[f].baseTexture.ktxKeyValueData=l;Object.assign(e,c)}else if(a){var d={};a.forEach(function(v,_){var m=new it(new _t(v.resource,{mipmap:We.OFF,alphaMode:Ie.NO_PREMULTIPLIED_ALPHA,type:v.type,format:v.format})),g=i+"-"+(_+1);l&&(m.baseTexture.ktxKeyValueData=l),_t.addToCache(m.baseTexture,g),it.addToCache(m,g),_===0&&(d[i]=m,_t.addToCache(m.baseTexture,i),it.addToCache(m,i)),d[g]=m}),Object.assign(e,{textures:d})}}catch(v){r(v);return}r()},t.parse=function(e,r){var i=new DataView(r);if(!t.validate(e,i))return null;var n=i.getUint32(Ne.ENDIANNESS,!0)===dT,o=i.getUint32(Ne.GL_TYPE,n),a=i.getUint32(Ne.GL_FORMAT,n),l=i.getUint32(Ne.GL_INTERNAL_FORMAT,n),c=i.getUint32(Ne.PIXEL_WIDTH,n),f=i.getUint32(Ne.PIXEL_HEIGHT,n)||1,d=i.getUint32(Ne.PIXEL_DEPTH,n)||1,v=i.getUint32(Ne.NUMBER_OF_ARRAY_ELEMENTS,n)||1,_=i.getUint32(Ne.NUMBER_OF_FACES,n),m=i.getUint32(Ne.NUMBER_OF_MIPMAP_LEVELS,n),g=i.getUint32(Ne.BYTES_OF_KEY_VALUE_DATA,n);if(f===0||d!==1)throw new Error("Only 2D textures are supported");if(_!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(v!==1)throw new Error("WebGL does not support array textures");var x=4,b=4,w=c+3&-4,C=f+3&-4,I=new Array(v),S=c*f;o===0&&(S=w*C);var A;if(o!==0?Mf[o]?A=Mf[o]*vT[a]:A=_T[o]:A=bo[l],A===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var P=t.loadKeyValueData?t.parseKvData(i,g,n):null,O=S*A,D=O,U=c,B=f,$=w,j=C,W=Ga+g,lt=0;lt<m;lt++){for(var z=i.getUint32(W,n),k=W+4,V=0;V<v;V++){var Pt=I[V];Pt||(Pt=I[V]=new Array(m)),Pt[lt]={levelID:lt,levelWidth:m>1||o!==0?U:$,levelHeight:m>1||o!==0?B:j,levelBuffer:new Uint8Array(r,k,D)},k+=D}W+=z+4,W=W%4!==0?W+4-W%4:W,U=U>>1||1,B=B>>1||1,$=U+x-1&~(x-1),j=B+b-1&~(b-1),D=$*j*A}return o!==0?{uncompressed:I.map(function(dt){var G=dt[0].levelBuffer,Y=!1;return o===Q.FLOAT?G=new Float32Array(dt[0].levelBuffer.buffer,dt[0].levelBuffer.byteOffset,dt[0].levelBuffer.byteLength/4):o===Q.UNSIGNED_INT?(Y=!0,G=new Uint32Array(dt[0].levelBuffer.buffer,dt[0].levelBuffer.byteOffset,dt[0].levelBuffer.byteLength/4)):o===Q.INT&&(Y=!0,G=new Int32Array(dt[0].levelBuffer.buffer,dt[0].levelBuffer.byteOffset,dt[0].levelBuffer.byteLength/4)),{resource:new tn(G,{width:dt[0].levelWidth,height:dt[0].levelHeight}),type:o,format:Y?t.convertFormatToInteger(a):a}}),kvData:P}:{compressed:I.map(function(dt){return new Ua(null,{format:l,width:c,height:f,levels:m,levelBuffers:dt})}),kvData:P}},t.validate=function(e,r){for(var i=0;i<Bf.length;i++)if(r.getUint8(i)!==Bf[i])return console.error(e+" is not a valid *.ktx file!"),!1;return!0},t.convertFormatToInteger=function(e){switch(e){case H.RGBA:return H.RGBA_INTEGER;case H.RGB:return H.RGB_INTEGER;case H.RG:return H.RG_INTEGER;case H.RED:return H.RED_INTEGER;default:return e}},t.parseKvData=function(e,r,i){for(var n=new Map,o=0;o<r;){var a=e.getUint32(Ga+o,i),l=Ga+o+4,c=3-(a+3)%4;if(a===0||a>r-o){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var f=0;f<a&&e.getUint8(l+f)!==0;f++);if(f===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var d=new TextDecoder().decode(new Uint8Array(e.buffer,l,f)),v=new DataView(e.buffer,l+f+1,a-f-1);n.set(d,v),o+=4+a+c}return n},t.loadKeyValueData=!1,t}();/*!
 * @pixi/particle-container - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ba=function(t,e){return Ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ba(t,e)};function kf(t,e){Ba(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(function(t){kf(e,t);function e(r,i,n,o){r===void 0&&(r=1500),n===void 0&&(n=16384),o===void 0&&(o=!1);var a=t.call(this)||this,l=16384;return n>l&&(n=l),a._properties=[!1,!0,!1,!1,!1],a._maxSize=r,a._batchSize=n,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=tt.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(i),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return e.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,si(r,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(r){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},e.prototype.onChildrenChange=function(r){for(var i=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e})(ce);var Df=function(){function t(e,r,i){this.geometry=new en,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var o=e[n];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Q.FLOAT,offset:o.offset},r[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new Jt(Nb(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=r,r+=n.size,this.dynamicStride+=n.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Jt(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=a,a+=n.size,this.staticStride+=n.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=new Jt(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];e.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===Q.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];e.addAttribute(n.attributeName,this.staticBuffer,0,n.type===Q.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},t.prototype.uploadDynamic=function(e,r,i){for(var n=0;n<this.dynamicProperties.length;n++){var o=this.dynamicProperties[n];o.uploadFunction(e,r,i,o.type===Q.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(e,r,i){for(var n=0;n<this.staticProperties.length;n++){var o=this.staticProperties[n];o.uploadFunction(e,r,i,o.type===Q.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),gT=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,yT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,bT=function(t){kf(e,t);function e(r){var i=t.call(this,r)||this;return i.shader=null,i.properties=null,i.tempMatrix=new jt,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Q.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=ge.from(yT,gT,{}),i.state=kr.for2d(),i}return e.prototype.render=function(r){var i=r.children,n=r._maxSize,o=r._batchSize,a=this.renderer,l=i.length;if(l!==0){l>n&&!r.autoResize&&(l=n);var c=r._buffers;c||(c=r._buffers=this.generateBuffers(r));var f=i[0]._texture.baseTexture;this.state.blendMode=Nu(r.blendMode,f.alphaMode),a.state.set(this.state);var d=a.gl,v=r.worldTransform.copyTo(this.tempMatrix);v.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=v.toArray(!0),this.shader.uniforms.uColor=Ab(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,f.alphaMode),this.shader.uniforms.uSampler=f,this.renderer.shader.bind(this.shader);for(var _=!1,m=0,g=0;m<l;m+=o,g+=1){var x=l-m;x>o&&(x=o),g>=c.length&&c.push(this._generateOneMoreBuffer(r));var b=c[g];b.uploadDynamic(i,m,x);var w=r._bufferUpdateIDs[g]||0;_=_||b._updateID<w,_&&(b._updateID=r._updateID,b.uploadStatic(i,m,x)),a.geometry.bind(b.geometry),d.drawElements(d.TRIANGLES,x*6,d.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(r){for(var i=[],n=r._maxSize,o=r._batchSize,a=r._properties,l=0;l<n;l+=o)i.push(new Df(this.properties,a,o));return i},e.prototype._generateOneMoreBuffer=function(r){var i=r._batchSize,n=r._properties;return new Df(this.properties,n,i)},e.prototype.uploadVertices=function(r,i,n,o,a,l){for(var c=0,f=0,d=0,v=0,_=0;_<n;++_){var m=r[i+_],g=m._texture,x=m.scale.x,b=m.scale.y,w=g.trim,C=g.orig;w?(f=w.x-m.anchor.x*C.width,c=f+w.width,v=w.y-m.anchor.y*C.height,d=v+w.height):(c=C.width*(1-m.anchor.x),f=C.width*-m.anchor.x,d=C.height*(1-m.anchor.y),v=C.height*-m.anchor.y),o[l]=f*x,o[l+1]=v*b,o[l+a]=c*x,o[l+a+1]=v*b,o[l+a*2]=c*x,o[l+a*2+1]=d*b,o[l+a*3]=f*x,o[l+a*3+1]=d*b,l+=a*4}},e.prototype.uploadPosition=function(r,i,n,o,a,l){for(var c=0;c<n;c++){var f=r[i+c].position;o[l]=f.x,o[l+1]=f.y,o[l+a]=f.x,o[l+a+1]=f.y,o[l+a*2]=f.x,o[l+a*2+1]=f.y,o[l+a*3]=f.x,o[l+a*3+1]=f.y,l+=a*4}},e.prototype.uploadRotation=function(r,i,n,o,a,l){for(var c=0;c<n;c++){var f=r[i+c].rotation;o[l]=f,o[l+a]=f,o[l+a*2]=f,o[l+a*3]=f,l+=a*4}},e.prototype.uploadUvs=function(r,i,n,o,a,l){for(var c=0;c<n;++c){var f=r[i+c]._texture._uvs;f?(o[l]=f.x0,o[l+1]=f.y0,o[l+a]=f.x1,o[l+a+1]=f.y1,o[l+a*2]=f.x2,o[l+a*2+1]=f.y2,o[l+a*3]=f.x3,o[l+a*3+1]=f.y3,l+=a*4):(o[l]=0,o[l+1]=0,o[l+a]=0,o[l+a+1]=0,o[l+a*2]=0,o[l+a*2+1]=0,o[l+a*3]=0,o[l+a*3+1]=0,l+=a*4)}},e.prototype.uploadTint=function(r,i,n,o,a,l){for(var c=0;c<n;++c){var f=r[i+c],d=f._texture.baseTexture.alphaMode>0,v=f.alpha,_=v<1&&d?Xs(f._tintRGB,v):f._tintRGB+(v*255<<24);o[l]=_,o[l+a]=_,o[l+a*2]=_,o[l+a*3]=_,l+=a*4}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(uo);/*!
 * @pixi/graphics - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pr;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(pr||(pr={}));var dr;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(dr||(dr={}));var cn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(e===void 0&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},Vf=function(){function t(){this.color=16777215,this.alpha=1,this.texture=it.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=it.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ma=function(t,e){return Ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ma(t,e)};function ka(t,e){Ma(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Hf(t,e){var r,i;e===void 0&&(e=!1);var n=t.length;if(!(n<6)){for(var o=0,a=0,l=t[n-2],c=t[n-1];a<n;a+=2){var f=t[a],d=t[a+1];o+=(f-l)*(d+c),l=f,c=d}if(!e&&o>0||e&&o<=0)for(var v=n/2,a=v+v%2;a<n;a+=2){var _=n-a-2,m=n-a-1,g=a,x=a+1;r=[t[g],t[_]],t[_]=r[0],t[g]=r[1],i=[t[x],t[m]],t[m]=i[0],t[x]=i[1]}}}var Xf={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,n=e.points,o=e.indices;if(r.length>=6){Hf(r,!1);for(var a=[],l=0;l<i.length;l++){var c=i[l];Hf(c.points,!0),a.push(r.length/2),r=r.concat(c.points)}var f=xu(r,a,2);if(!f)return;for(var d=n.length/2,l=0;l<f.length;l+=3)o.push(f[l]+d),o.push(f[l+1]+d),o.push(f[l+2]+d);for(var l=0;l<r.length;l++)n.push(r[l])}}},Eo={build:function(t){var e=t.points,r,i,n,o,a,l;if(t.type===Vt.CIRC){var c=t.shape;r=c.x,i=c.y,a=l=c.radius,n=o=0}else if(t.type===Vt.ELIP){var f=t.shape;r=f.x,i=f.y,a=f.width,l=f.height,n=o=0}else{var d=t.shape,v=d.width/2,_=d.height/2;r=d.x+v,i=d.y+_,a=l=Math.max(0,Math.min(d.radius,Math.min(v,_))),n=v-a,o=_-l}if(!(a>=0&&l>=0&&n>=0&&o>=0)){e.length=0;return}var m=Math.ceil(2.3*Math.sqrt(a+l)),g=m*8+(n?4:0)+(o?4:0);if(e.length=g,g!==0){if(m===0){e.length=8,e[0]=e[6]=r+n,e[1]=e[3]=i+o,e[2]=e[4]=r-n,e[5]=e[7]=i-o;return}var x=0,b=m*4+(n?2:0)+2,w=b,C=g;{var I=n+a,S=o,A=r+I,P=r-I,O=i+S;if(e[x++]=A,e[x++]=O,e[--b]=O,e[--b]=P,o){var D=i-S;e[w++]=P,e[w++]=D,e[--C]=D,e[--C]=A}}for(var U=1;U<m;U++){var B=Math.PI/2*(U/m),I=n+Math.cos(B)*a,S=o+Math.sin(B)*l,A=r+I,P=r-I,O=i+S,D=i-S;e[x++]=A,e[x++]=O,e[--b]=O,e[--b]=P,e[w++]=P,e[w++]=D,e[--C]=D,e[--C]=A}{var I=n,S=o+l,A=r+I,P=r-I,O=i+S,D=i-S;e[x++]=A,e[x++]=O,e[--C]=D,e[--C]=A,n&&(e[x++]=P,e[x++]=O,e[--C]=D,e[--C]=P)}}},triangulate:function(t,e){var r=t.points,i=e.points,n=e.indices,o=i.length/2,a=o,l,c;if(t.type!==Vt.RREC){var f=t.shape;l=f.x,c=f.y}else{var d=t.shape;l=d.x+d.width/2,c=d.y+d.height/2}var v=t.matrix;i.push(t.matrix?v.a*l+v.c*c+v.tx:l,t.matrix?v.b*l+v.d*c+v.ty:c),o++,i.push(r[0],r[1]);for(var _=2;_<r.length;_+=2)i.push(r[_],r[_+1]),n.push(o++,a,o);n.push(a+1,a,o)}},xT={build:function(t){var e=t.shape,r=e.x,i=e.y,n=e.width,o=e.height,a=t.points;a.length=0,a.push(r,i,r+n,i,r+n,i+o,r,i+o)},triangulate:function(t,e){var r=t.points,i=e.points,n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function fi(t,e,r){var i=e-t;return t+i*r}function Co(t,e,r,i,n,o,a){a===void 0&&(a=[]);for(var l=20,c=a,f=0,d=0,v=0,_=0,m=0,g=0,x=0,b=0;x<=l;++x)b=x/l,f=fi(t,r,b),d=fi(e,i,b),v=fi(r,n,b),_=fi(i,o,b),m=fi(f,v,b),g=fi(d,_,b),!(x===0&&c[c.length-2]===m&&c[c.length-1]===g)&&c.push(m,g);return c}var wT={build:function(t){if(vr.nextRoundedRectBehavior){Eo.build(t);return}var e=t.shape,r=t.points,i=e.x,n=e.y,o=e.width,a=e.height,l=Math.max(0,Math.min(e.radius,Math.min(o,a)/2));r.length=0,l?(Co(i,n+l,i,n,i+l,n,r),Co(i+o-l,n,i+o,n,i+o,n+l,r),Co(i+o,n+a-l,i+o,n+a,i+o-l,n+a,r),Co(i+l,n+a,i,n+a,i,n+a-l,r)):r.push(i,n,i+o,n,i+o,n+a,i,n+a)},triangulate:function(t,e){if(vr.nextRoundedRectBehavior){Eo.triangulate(t,e);return}for(var r=t.points,i=e.points,n=e.indices,o=i.length/2,a=xu(r,null,2),l=0,c=a.length;l<c;l+=3)n.push(a[l]+o),n.push(a[l+1]+o),n.push(a[l+2]+o);for(var l=0,c=r.length;l<c;l++)i.push(r[l],r[++l])}};function $f(t,e,r,i,n,o,a,l){var c=t-r*n,f=e-i*n,d=t+r*o,v=e+i*o,_,m;a?(_=i,m=-r):(_=-i,m=r);var g=c+_,x=f+m,b=d+_,w=v+m;return l.push(g,x),l.push(b,w),2}function pi(t,e,r,i,n,o,a,l){var c=r-t,f=i-e,d=Math.atan2(c,f),v=Math.atan2(n-t,o-e);l&&d<v?d+=Math.PI*2:!l&&d>v&&(v+=Math.PI*2);var _=d,m=v-d,g=Math.abs(m),x=Math.sqrt(c*c+f*f),b=(15*g*Math.sqrt(x)/Math.PI>>0)+1,w=m/b;if(_+=w,l){a.push(t,e),a.push(r,i);for(var C=1,I=_;C<b;C++,I+=w)a.push(t,e),a.push(t+Math.sin(I)*x,e+Math.cos(I)*x);a.push(t,e),a.push(n,o)}else{a.push(r,i),a.push(t,e);for(var C=1,I=_;C<b;C++,I+=w)a.push(t+Math.sin(I)*x,e+Math.cos(I)*x),a.push(t,e);a.push(n,o),a.push(t,e)}return b*2}function TT(t,e){var r=t.shape,i=t.points||r.points.slice(),n=e.closePointEps;if(i.length!==0){var o=t.lineStyle,a=new Bt(i[0],i[1]),l=new Bt(i[i.length-2],i[i.length-1]),c=r.type!==Vt.POLY||r.closeStroke,f=Math.abs(a.x-l.x)<n&&Math.abs(a.y-l.y)<n;if(c){i=i.slice(),f&&(i.pop(),i.pop(),l.set(i[i.length-2],i[i.length-1]));var d=(a.x+l.x)*.5,v=(l.y+a.y)*.5;i.unshift(d,v),i.push(d,v)}var _=e.points,m=i.length/2,g=i.length,x=_.length/2,b=o.width/2,w=b*b,C=o.miterLimit*o.miterLimit,I=i[0],S=i[1],A=i[2],P=i[3],O=0,D=0,U=-(S-P),B=I-A,$=0,j=0,W=Math.sqrt(U*U+B*B);U/=W,B/=W,U*=b,B*=b;var lt=o.alignment,z=(1-lt)*2,k=lt*2;c||(o.cap===dr.ROUND?g+=pi(I-U*(z-k)*.5,S-B*(z-k)*.5,I-U*z,S-B*z,I+U*k,S+B*k,_,!0)+2:o.cap===dr.SQUARE&&(g+=$f(I,S,U,B,z,k,!0,_))),_.push(I-U*z,S-B*z),_.push(I+U*k,S+B*k);for(var V=1;V<m-1;++V){I=i[(V-1)*2],S=i[(V-1)*2+1],A=i[V*2],P=i[V*2+1],O=i[(V+1)*2],D=i[(V+1)*2+1],U=-(S-P),B=I-A,W=Math.sqrt(U*U+B*B),U/=W,B/=W,U*=b,B*=b,$=-(P-D),j=A-O,W=Math.sqrt($*$+j*j),$/=W,j/=W,$*=b,j*=b;var Pt=A-I,dt=S-P,G=A-O,Y=D-P,ot=dt*G-Y*Pt,q=ot<0;if(Math.abs(ot)<.1){_.push(A-U*z,P-B*z),_.push(A+U*k,P+B*k);continue}var nt=(-U+I)*(-B+P)-(-U+A)*(-B+S),St=(-$+O)*(-j+P)-(-$+A)*(-j+D),wt=(Pt*St-G*nt)/ot,Ot=(Y*nt-dt*St)/ot,Mt=(wt-A)*(wt-A)+(Ot-P)*(Ot-P),gt=A+(wt-A)*z,vt=P+(Ot-P)*z,ft=A-(wt-A)*k,Rt=P-(Ot-P)*k,at=Math.min(Pt*Pt+dt*dt,G*G+Y*Y),qt=q?z:k,Xt=at+qt*qt*w,ut=Mt<=Xt;ut?o.join===pr.BEVEL||Mt/w>C?(q?(_.push(gt,vt),_.push(A+U*k,P+B*k),_.push(gt,vt),_.push(A+$*k,P+j*k)):(_.push(A-U*z,P-B*z),_.push(ft,Rt),_.push(A-$*z,P-j*z),_.push(ft,Rt)),g+=2):o.join===pr.ROUND?q?(_.push(gt,vt),_.push(A+U*k,P+B*k),g+=pi(A,P,A+U*k,P+B*k,A+$*k,P+j*k,_,!0)+4,_.push(gt,vt),_.push(A+$*k,P+j*k)):(_.push(A-U*z,P-B*z),_.push(ft,Rt),g+=pi(A,P,A-U*z,P-B*z,A-$*z,P-j*z,_,!1)+4,_.push(A-$*z,P-j*z),_.push(ft,Rt)):(_.push(gt,vt),_.push(ft,Rt)):(_.push(A-U*z,P-B*z),_.push(A+U*k,P+B*k),o.join===pr.ROUND?q?g+=pi(A,P,A+U*k,P+B*k,A+$*k,P+j*k,_,!0)+2:g+=pi(A,P,A-U*z,P-B*z,A-$*z,P-j*z,_,!1)+2:o.join===pr.MITER&&Mt/w<=C&&(q?(_.push(ft,Rt),_.push(ft,Rt)):(_.push(gt,vt),_.push(gt,vt)),g+=2),_.push(A-$*z,P-j*z),_.push(A+$*k,P+j*k),g+=2)}I=i[(m-2)*2],S=i[(m-2)*2+1],A=i[(m-1)*2],P=i[(m-1)*2+1],U=-(S-P),B=I-A,W=Math.sqrt(U*U+B*B),U/=W,B/=W,U*=b,B*=b,_.push(A-U*z,P-B*z),_.push(A+U*k,P+B*k),c||(o.cap===dr.ROUND?g+=pi(A-U*(z-k)*.5,P-B*(z-k)*.5,A-U*z,P-B*z,A+U*k,P+B*k,_,!1)+2:o.cap===dr.SQUARE&&(g+=$f(A,P,U,B,z,k,!1,_)));for(var de=e.indices,be=cn.epsilon*cn.epsilon,V=x;V<g+x-2;++V)I=_[V*2],S=_[V*2+1],A=_[(V+1)*2],P=_[(V+1)*2+1],O=_[(V+2)*2],D=_[(V+2)*2+1],!(Math.abs(I*(P-D)+A*(D-S)+O*(S-P))<be)&&de.push(V,V+1,V+2)}}function ET(t,e){var r=0,i=t.shape,n=t.points||i.points,o=i.type!==Vt.POLY||i.closeStroke;if(n.length!==0){var a=e.points,l=e.indices,c=n.length/2,f=a.length/2,d=f;for(a.push(n[0],n[1]),r=1;r<c;r++)a.push(n[r*2],n[r*2+1]),l.push(d,d+1),d++;o&&l.push(d,f)}}function jf(t,e){t.lineStyle.native?ET(t,e):TT(t,e)}var zf=function(){function t(){}return t.curveTo=function(e,r,i,n,o,a){var l=a[a.length-2],c=a[a.length-1],f=c-r,d=l-e,v=n-r,_=i-e,m=Math.abs(f*_-d*v);if(m<1e-8||o===0)return(a[a.length-2]!==e||a[a.length-1]!==r)&&a.push(e,r),null;var g=f*f+d*d,x=v*v+_*_,b=f*v+d*_,w=o*Math.sqrt(g)/m,C=o*Math.sqrt(x)/m,I=w*b/g,S=C*b/x,A=w*_+C*d,P=w*v+C*f,O=d*(C+I),D=f*(C+I),U=_*(w+S),B=v*(w+S),$=Math.atan2(D-P,O-A),j=Math.atan2(B-P,U-A);return{cx:A+e,cy:P+r,radius:o,startAngle:$,endAngle:j,anticlockwise:d*v>_*f}},t.arc=function(e,r,i,n,o,a,l,c,f){for(var d=l-a,v=cn._segmentsCount(Math.abs(d)*o,Math.ceil(Math.abs(d)/eo)*40),_=d/(v*2),m=_*2,g=Math.cos(_),x=Math.sin(_),b=v-1,w=b%1/b,C=0;C<=b;++C){var I=C+w*C,S=_+a+m*I,A=Math.cos(S),P=-Math.sin(S);f.push((g*A+x*P)*o+i,(g*-P+x*A)*o+n)}},t}(),CT=function(){function t(){}return t.curveLength=function(e,r,i,n,o,a,l,c){for(var f=10,d=0,v=0,_=0,m=0,g=0,x=0,b=0,w=0,C=0,I=0,S=0,A=e,P=r,O=1;O<=f;++O)v=O/f,_=v*v,m=_*v,g=1-v,x=g*g,b=x*g,w=b*e+3*x*v*i+3*g*_*o+m*l,C=b*r+3*x*v*n+3*g*_*a+m*c,I=A-w,S=P-C,A=w,P=C,d+=Math.sqrt(I*I+S*S);return d},t.curveTo=function(e,r,i,n,o,a,l){var c=l[l.length-2],f=l[l.length-1];l.length-=2;var d=cn._segmentsCount(t.curveLength(c,f,e,r,i,n,o,a)),v=0,_=0,m=0,g=0,x=0;l.push(c,f);for(var b=1,w=0;b<=d;++b)w=b/d,v=1-w,_=v*v,m=_*v,g=w*w,x=g*w,l.push(m*c+3*_*w*e+3*v*g*i+x*o,m*f+3*_*w*r+3*v*g*n+x*a)},t}(),IT=function(){function t(){}return t.curveLength=function(e,r,i,n,o,a){var l=e-2*i+o,c=r-2*n+a,f=2*i-2*e,d=2*n-2*r,v=4*(l*l+c*c),_=4*(l*f+c*d),m=f*f+d*d,g=2*Math.sqrt(v+_+m),x=Math.sqrt(v),b=2*v*x,w=2*Math.sqrt(m),C=_/x;return(b*g+x*_*(g-w)+(4*m*v-_*_)*Math.log((2*x+C+g)/(C+w)))/(4*b)},t.curveTo=function(e,r,i,n,o){for(var a=o[o.length-2],l=o[o.length-1],c=cn._segmentsCount(t.curveLength(a,l,e,r,i,n)),f=0,d=0,v=1;v<=c;++v){var _=v/c;f=a+(e-a)*_,d=l+(r-l)*_,o.push(f+(e+(i-e)*_-f)*_,d+(r+(n-r)*_-d)*_)}},t}(),PT=function(){function t(){this.reset()}return t.prototype.begin=function(e,r,i){this.reset(),this.style=e,this.start=r,this.attribStart=i},t.prototype.end=function(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Hr,Da=(Hr={},Hr[Vt.POLY]=Xf,Hr[Vt.CIRC]=Eo,Hr[Vt.ELIP]=Eo,Hr[Vt.RECT]=xT,Hr[Vt.RREC]=wT,Hr),Wf=[],Io=[],Yf=function(){function t(e,r,i,n){r===void 0&&(r=null),i===void 0&&(i=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=r,this.matrix=n,this.type=e.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),di=new Bt,RT=new Ji,AT=function(t){ka(e,t);function e(){var r=t.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new Ji,r.boundsDirty=-1,r}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Io.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var i=this.batches[r];i.reset(),Wf.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(r,i,n,o){i===void 0&&(i=null),n===void 0&&(n=null),o===void 0&&(o=null);var a=new Yf(r,i,n,o);return this.graphicsData.push(a),this.dirty++,this},e.prototype.drawHole=function(r,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new Yf(r,null,null,i),o=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=o.lineStyle,o.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(r){for(var i=this.graphicsData,n=0;n<i.length;++n){var o=i[n];if(!!o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(r,di):di.copyFrom(r),o.shape.contains(di.x,di.y))){var a=!1;if(o.holes)for(var l=0;l<o.holes.length;l++){var c=o.holes[l];if(c.shape.contains(di.x,di.y)){a=!0;break}}if(!a)return!0}}return!1},e.prototype.updateBatches=function(r){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,n=this.graphicsData,o=null,a=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],a=o.style);for(var l=this.shapeIndex;l<n.length;l++){this.shapeIndex++;var c=n[l],f=c.fillStyle,d=c.lineStyle,v=Da[c.type];v.build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(f.visible||d.visible)&&this.processHoles(c.holes);for(var _=0;_<2;_++){var m=_===0?f:d;if(!!m.visible){var g=m.texture.baseTexture,x=this.indices.length,b=this.points.length/2;g.wrapMode=Ce.REPEAT,_===0?this.processFill(c):this.processLine(c);var w=this.points.length/2-b;w!==0&&(o&&!this._compareStyles(a,m)&&(o.end(x,b),o=null),o||(o=Wf.pop()||new PT,o.begin(m,x,b),this.batches.push(o),a=m),this.addUvs(this.points,i,m.texture,b,w,m.matrix))}}}var C=this.indices.length,I=this.points.length/2;if(o&&o.end(C,I),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var S=I>65535&&r;this.indicesUint16=S?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(r,i){return!(!r||!i||r.texture.baseTexture!==i.texture.baseTexture||r.color+r.alpha!==i.color+i.alpha||!!r.native!=!!i.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,i=this.graphicsData.length;r<i;r++){var n=this.graphicsData[r],o=n.fillStyle,a=n.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,i=0,n=r.length;i<n;i++)for(var o=r[i],a=0;a<o.size;a++){var l=o.start+a;this.indicesUint16[l]=this.indicesUint16[l]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,i=0;i<r.length;i++)if(r[i].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var r=++_t._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),Io.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,o=this.textureIds,a=Io.pop();a||(a=new da,a.texArray=new va),a.texArray.count=0,a.start=0,a.size=0,a.type=Ee.TRIANGLES;var l=0,c=null,f=0,d=!1,v=Ee.TRIANGLES,_=0;this.drawCalls.push(a);for(var i=0;i<this.batches.length;i++){var m=this.batches[i],g=8,x=m.style,b=x.texture.baseTexture;d!==!!x.native&&(d=!!x.native,v=d?Ee.LINES:Ee.TRIANGLES,c=null,l=g,r++),c!==b&&(c=b,b._batchEnabled!==r&&(l===g&&(r++,l=0,a.size>0&&(a=Io.pop(),a||(a=new da,a.texArray=new va),this.drawCalls.push(a)),a.start=_,a.size=0,a.texArray.count=0,a.type=v),b.touched=1,b._batchEnabled=r,b._batchLocation=l,b.wrapMode=Ce.REPEAT,a.texArray.elements[a.texArray.count++]=b,l++)),a.size+=m.size,_+=m.size,f=b._batchLocation,this.addColors(n,x.color,x.alpha,m.attribSize,m.attribStart),this.addTextureIds(o,f,m.attribSize,m.attribStart)}_t._globalBatch=r,this.packAttributes()},e.prototype.packAttributes=function(){for(var r=this.points,i=this.uvs,n=this.colors,o=this.textureIds,a=new ArrayBuffer(r.length*3*4),l=new Float32Array(a),c=new Uint32Array(a),f=0,d=0;d<r.length/2;d++)l[f++]=r[d*2],l[f++]=r[d*2+1],l[f++]=i[d*2],l[f++]=i[d*2+1],c[f++]=n[d],l[f++]=o[d];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(r){if(r.holes.length)Xf.triangulate(r,this);else{var i=Da[r.type];i.triangulate(r,this)}},e.prototype.processLine=function(r){jf(r,this);for(var i=0;i<r.holes.length;i++)jf(r.holes[i],this)},e.prototype.processHoles=function(r){for(var i=0;i<r.length;i++){var n=r[i],o=Da[n.type];o.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var r=this._bounds,i=RT,n=jt.IDENTITY;this._bounds.clear(),i.clear();for(var o=0;o<this.graphicsData.length;o++){var a=this.graphicsData[o],l=a.shape,c=a.type,f=a.lineStyle,d=a.matrix||jt.IDENTITY,v=0;if(f&&f.visible&&(v=f.width,c!==Vt.POLY||a.fillStyle.visible?v*=Math.max(0,f.alignment):v*=Math.max(f.alignment,1-f.alignment)),n!==d&&(i.isEmpty()||(r.addBoundsMatrix(i,n),i.clear()),n=d),c===Vt.RECT||c===Vt.RREC){var _=l;i.addFramePad(_.x,_.y,_.x+_.width,_.y+_.height,v,v)}else if(c===Vt.CIRC){var m=l;i.addFramePad(m.x,m.y,m.x,m.y,m.radius+v,m.radius+v)}else if(c===Vt.ELIP){var g=l;i.addFramePad(g.x,g.y,g.x,g.y,g.width+v,g.height+v)}else{var x=l;r.addVerticesMatrix(n,x.points,0,x.points.length,v,v)}}i.isEmpty()||r.addBoundsMatrix(i,n),r.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(r,i){for(var n=0;n<r.length/2;n++){var o=r[n*2],a=r[n*2+1];r[n*2]=i.a*o+i.c*a+i.tx,r[n*2+1]=i.b*o+i.d*a+i.ty}},e.prototype.addColors=function(r,i,n,o,a){a===void 0&&(a=0);var l=(i>>16)+(i&65280)+((i&255)<<16),c=Xs(l,n);r.length=Math.max(r.length,a+o);for(var f=0;f<o;f++)r[a+f]=c},e.prototype.addTextureIds=function(r,i,n,o){o===void 0&&(o=0),r.length=Math.max(r.length,o+n);for(var a=0;a<n;a++)r[o+a]=i},e.prototype.addUvs=function(r,i,n,o,a,l){l===void 0&&(l=null);for(var c=0,f=i.length,d=n.frame;c<a;){var v=r[(o+c)*2],_=r[(o+c)*2+1];if(l){var m=l.a*v+l.c*_+l.tx;_=l.b*v+l.d*_+l.ty,v=m}c++,i.push(v/d.width,_/d.height)}var g=n.baseTexture;(d.width<g.width||d.height<g.height)&&this.adjustUvs(i,n,f,a)},e.prototype.adjustUvs=function(r,i,n,o){for(var a=i.baseTexture,l=1e-6,c=n+o*2,f=i.frame,d=f.width/a.width,v=f.height/a.height,_=f.x/f.width,m=f.y/f.height,g=Math.floor(r[n]+l),x=Math.floor(r[n+1]+l),b=n+2;b<c;b+=2)g=Math.min(g,Math.floor(r[b]+l)),x=Math.min(x,Math.floor(r[b+1]+l));_-=g,m-=x;for(var b=n;b<c;b+=2)r[b]=(r[b]+_)*d,r[b+1]=(r[b+1]+m)*v},e.BATCHABLE_SIZE=100,e}(Uc),NT=function(t){ka(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=dr.BUTT,r.join=pr.MITER,r.miterLimit=10,r}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Vf),ST=new Float32Array(3),Va={},vr=function(t){ka(e,t);function e(r){r===void 0&&(r=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new Vf,i._lineStyle=new NT,i._matrix=null,i._holeMode=!1,i.state=kr.for2d(),i._geometry=r||new AT,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=tt.NORMAL,i}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(r,i,n,o,a){return r===void 0&&(r=null),i===void 0&&(i=0),n===void 0&&(n=1),o===void 0&&(o=.5),a===void 0&&(a=!1),typeof r=="number"&&(r={width:r,color:i,alpha:n,alignment:o,native:a}),this.lineTextureStyle(r)},e.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:it.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:dr.BUTT,join:pr.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var i=r.width>0&&r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:i},r)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new io,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[i-2],r[i-1]))}else this.currentPath=new io,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(r,i){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=i,this},e.prototype.lineTo=function(r,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,o=n[n.length-2],a=n[n.length-1];return(o!==r||a!==i)&&n.push(r,i),this},e.prototype._initCurve=function(r,i){r===void 0&&(r=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,i]):this.moveTo(r,i)},e.prototype.quadraticCurveTo=function(r,i,n,o){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),IT.curveTo(r,i,n,o,a),this},e.prototype.bezierCurveTo=function(r,i,n,o,a,l){return this._initCurve(),CT.curveTo(r,i,n,o,a,l,this.currentPath.points),this},e.prototype.arcTo=function(r,i,n,o,a){this._initCurve(r,i);var l=this.currentPath.points,c=zf.curveTo(r,i,n,o,a,l);if(c){var f=c.cx,d=c.cy,v=c.radius,_=c.startAngle,m=c.endAngle,g=c.anticlockwise;this.arc(f,d,v,_,m,g)}return this},e.prototype.arc=function(r,i,n,o,a,l){if(l===void 0&&(l=!1),o===a)return this;!l&&a<=o?a+=eo:l&&o<=a&&(o+=eo);var c=a-o;if(c===0)return this;var f=r+Math.cos(o)*n,d=i+Math.sin(o)*n,v=this._geometry.closePointEps,_=this.currentPath?this.currentPath.points:null;if(_){var m=Math.abs(_[_.length-2]-f),g=Math.abs(_[_.length-1]-d);m<v&&g<v||_.push(f,d)}else this.moveTo(f,d),_=this.currentPath.points;return zf.arc(f,d,r,i,n,o,a,l,_),this},e.prototype.beginFill=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=1),this.beginTextureFill({texture:it.WHITE,color:r,alpha:i})},e.prototype.beginTextureFill=function(r){r=Object.assign({texture:it.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var i=r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:i},r)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(r,i,n,o){return this.drawShape(new ct(r,i,n,o))},e.prototype.drawRoundedRect=function(r,i,n,o,a){return this.drawShape(new Gb(r,i,n,o,a))},e.prototype.drawCircle=function(r,i,n){return this.drawShape(new Lb(r,i,n))},e.prototype.drawEllipse=function(r,i,n,o){return this.drawShape(new Fb(r,i,n,o))},e.prototype.drawPolygon=function(){for(var r=arguments,i=[],n=0;n<arguments.length;n++)i[n]=r[n];var o,a=!0,l=i[0];l.points?(a=l.closeStroke,o=l.points):Array.isArray(i[0])?o=i[0]:o=i;var c=new io(o);return c.closeStroke=a,this.drawShape(c),this},e.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===Vt.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},e.prototype._render=function(r){this.finishPoly();var i=this._geometry,n=r.context.supports.uint32Indices;i.updateBatches(n),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},e.prototype._populateBatches=function(){var r=this._geometry,i=this.blendMode,n=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(r.points);for(var o=0;o<n;o++){var a=r.batches[o],l=a.style.color,c=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),f=new Float32Array(r.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),d=new Uint16Array(r.indicesUint16.buffer,a.start*2,a.size),v={vertexData:c,blendMode:i,indices:d,uvs:f,_batchRGB:si(l),_tintRGB:l,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=v}},e.prototype._renderBatched=function(r){if(!!this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var o=this.batches[i];o.worldAlpha=this.worldAlpha*o.alpha,r.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(r){var i=this._resolveDirectShader(r),n=this._geometry,o=this.tint,a=this.worldAlpha,l=i.uniforms,c=n.drawCalls;l.translationMatrix=this.transform.worldTransform,l.tint[0]=(o>>16&255)/255*a,l.tint[1]=(o>>8&255)/255*a,l.tint[2]=(o&255)/255*a,l.tint[3]=a,r.shader.bind(i),r.geometry.bind(n,i),r.state.set(this.state);for(var f=0,d=c.length;f<d;f++)this._renderDrawCallDirect(r,n.drawCalls[f])},e.prototype._renderDrawCallDirect=function(r,i){for(var n=i.texArray,o=i.type,a=i.size,l=i.start,c=n.count,f=0;f<c;f++)r.texture.bind(n.elements[f],f);r.geometry.draw(o,a,l)},e.prototype._resolveDirectShader=function(r){var i=this.shader,n=this.pluginName;if(!i){if(!Va[n]){for(var o=r.plugins[n].MAX_TEXTURES,a=new Int32Array(o),l=0;l<o;l++)a[l]=l;var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new jt,default:Mr.from({uSamplers:a},!0)},f=r.plugins[n]._shader.program;Va[n]=new ge(f,c)}i=Va[n]}return i},e.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(!!r.graphicsData.length){var i=r.bounds,n=i.minX,o=i.minY,a=i.maxX,l=i.maxY;this._bounds.addFrame(this.transform,n,o,a,l)}},e.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=si(this.tint,ST),i=0;i<this.batches.length;i++){var n=this.batches[i],o=n._batchRGB,a=r[0]*o[0]*255,l=r[1]*o[1]*255,c=r[2]*o[2]*255,f=(a<<16)+(l<<8)+(c|0);n._tintRGB=(f>>16)+(f&65280)+((f&255)<<16)}}},e.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var i=this.transform.worldTransform,n=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,f=i.ty,d=this._geometry.points,v=this.vertexData,_=0,m=0;m<d.length;m+=2){var g=d[m],x=d[m+1];v[_++]=n*g+a*x+c,v[_++]=l*x+o*g+f}}},e.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(r){return this._matrix=r,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,r)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new Bt,e}(ce);/*!
 * @pixi/sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ha=function(t,e){return Ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ha(t,e)};function OT(t,e){Ha(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fn=new Bt,UT=new Uint16Array([0,1,2,0,2,3]),Qe=function(t){OT(e,t);function e(r){var i=t.call(this)||this;return i._anchor=new li(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=tt.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=r||it.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=UT,i.pluginName="batch",i.isSprite=!0,i._roundPixels=Z.ROUND_PIXELS,i}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ai(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ai(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var i=this.transform.worldTransform,n=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,f=i.ty,d=this.vertexData,v=r.trim,_=r.orig,m=this._anchor,g=0,x=0,b=0,w=0;if(v?(x=v.x-m._x*_.width,g=x+v.width,w=v.y-m._y*_.height,b=w+v.height):(x=-m._x*_.width,g=x+_.width,w=-m._y*_.height,b=w+_.height),d[0]=n*x+a*w+c,d[1]=l*w+o*x+f,d[2]=n*g+a*w+c,d[3]=l*w+o*g+f,d[4]=n*g+a*b+c,d[5]=l*b+o*g+f,d[6]=n*x+a*b+c,d[7]=l*b+o*x+f,this._roundPixels)for(var C=Z.RESOLUTION,I=0;I<d.length;++I)d[I]=Math.round((d[I]*C|0)/C)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,i=this.vertexTrimmedData,n=r.orig,o=this._anchor,a=this.transform.worldTransform,l=a.a,c=a.b,f=a.c,d=a.d,v=a.tx,_=a.ty,m=-o._x*n.width,g=m+n.width,x=-o._y*n.height,b=x+n.height;i[0]=l*m+f*x+v,i[1]=d*x+c*m+_,i[2]=l*g+f*x+v,i[3]=d*x+c*g+_,i[4]=l*g+f*b+v,i[5]=d*b+c*g+_,i[6]=l*m+f*b+v,i[7]=d*b+c*m+_},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,i=this._texture.orig;!r||r.width===i.width&&r.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new Ji),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new ct),r=this._localBoundsRect),this._localBounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,fn);var i=this._texture.orig.width,n=this._texture.orig.height,o=-i*this.anchor.x,a=0;return fn.x>=o&&fn.x<o+i&&(a=-n*this.anchor.y,fn.y>=a&&fn.y<a+n)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof r=="boolean"?r:r&&r.texture;if(i){var n=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(r,i){var n=r instanceof it?r:it.from(r,i);return new e(n)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var i=ai(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var i=ai(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||it.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(ce);/*!
 * @pixi/text - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Xa=function(t,e){return Xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Xa(t,e)};function LT(t,e){Xa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pn;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(pn||(pn={}));var $a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:pn.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},FT=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],vi=function(){function t(e){this.styleID=0,this.reset(),za(this,e,e)}return t.prototype.clone=function(){var e={};return za(e,this,$a),new t(e)},t.prototype.reset=function(){za(this,$a,$a)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var r=ja(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){var r=ja(e);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){GT(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var r=ja(e);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var i=r.length-1;i>=0;i--){var n=r[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&FT.indexOf(n)<0&&(n='"'+n+'"'),r[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+r.join(",")},t}();function qf(t){return typeof t=="number"?Pu(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function ja(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=qf(t[e]);return t}else return qf(t)}function GT(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function za(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var ke=function(){function t(e,r,i,n,o,a,l,c,f){this.text=e,this.style=r,this.width=i,this.height=n,this.lines=o,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=c,this.fontProperties=f}return t.measureText=function(e,r,i,n){n===void 0&&(n=t._canvas),i=i==null?r.wordWrap:i;var o=r.toFontString(),a=t.measureFont(o);a.fontSize===0&&(a.fontSize=r.fontSize,a.ascent=r.fontSize);var l=n.getContext("2d");l.font=o;for(var c=i?t.wordWrap(e,r,n):e,f=c.split(/(?:\r\n|\r|\n)/),d=new Array(f.length),v=0,_=0;_<f.length;_++){var m=l.measureText(f[_]).width+(f[_].length-1)*r.letterSpacing;d[_]=m,v=Math.max(v,m)}var g=v+r.strokeThickness;r.dropShadow&&(g+=r.dropShadowDistance);var x=r.lineHeight||a.fontSize+r.strokeThickness,b=Math.max(x,a.fontSize+r.strokeThickness)+(f.length-1)*(x+r.leading);return r.dropShadow&&(b+=r.dropShadowDistance),new t(e,r,g,b,f,d,x+r.leading,v,a)},t.wordWrap=function(e,r,i){i===void 0&&(i=t._canvas);for(var n=i.getContext("2d"),o=0,a="",l="",c=Object.create(null),f=r.letterSpacing,d=r.whiteSpace,v=t.collapseSpaces(d),_=t.collapseNewlines(d),m=!v,g=r.wordWrapWidth+f,x=t.tokenize(e),b=0;b<x.length;b++){var w=x[b];if(t.isNewline(w)){if(!_){l+=t.addLine(a),m=!v,a="",o=0;continue}w=" "}if(v){var C=t.isBreakingSpace(w),I=t.isBreakingSpace(a[a.length-1]);if(C&&I)continue}var S=t.getFromCache(w,f,c,n);if(S>g)if(a!==""&&(l+=t.addLine(a),a="",o=0),t.canBreakWords(w,r.breakWords))for(var A=t.wordWrapSplit(w),P=0;P<A.length;P++){for(var O=A[P],D=1;A[P+D];){var U=A[P+D],B=O[O.length-1];if(!t.canBreakChars(B,U,w,P,r.breakWords))O+=U;else break;D++}P+=O.length-1;var $=t.getFromCache(O,f,c,n);$+o>g&&(l+=t.addLine(a),m=!1,a="",o=0),a+=O,o+=$}else{a.length>0&&(l+=t.addLine(a),a="",o=0);var j=b===x.length-1;l+=t.addLine(w,!j),m=!1,a="",o=0}else S+o>g&&(m=!1,l+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(w)||m)&&(a+=w,o+=S)}return l+=t.addLine(a,!1),l},t.addLine=function(e,r){return r===void 0&&(r=!0),e=t.trimRight(e),e=r?e+`
`:e,e},t.getFromCache=function(e,r,i,n){var o=i[e];if(typeof o!="number"){var a=e.length*r;o=n.measureText(e).width+a,i[e]=o}return o},t.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},t.collapseNewlines=function(e){return e==="normal"},t.trimRight=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var i=e[r];if(!t.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return typeof e!="string"?!1:t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return typeof e!="string"?!1:t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],i="";if(typeof e!="string")return r;for(var n=0;n<e.length;n++){var o=e[n],a=e[n+1];if(t.isBreakingSpace(o,a)||t.isNewline(o)){i!==""&&(r.push(i),i=""),r.push(o);continue}i+=o}return i!==""&&r.push(i),r},t.canBreakWords=function(e,r){return r},t.canBreakChars=function(e,r,i,n,o){return!0},t.wordWrapSplit=function(e){return e.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},i=t._canvas,n=t._context;n.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(n.measureText(o).width),l=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),c=Math.ceil(t.HEIGHT_MULTIPLIER*l);l=l*t.BASELINE_MULTIPLIER|0,i.width=a,i.height=c,n.fillStyle="#f00",n.fillRect(0,0,a,c),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,l);var f=n.getImageData(0,0,a,c).data,d=f.length,v=a*4,_=0,m=0,g=!1;for(_=0;_<l;++_){for(var x=0;x<v;x+=4)if(f[m+x]!==255){g=!0;break}if(!g)m+=v;else break}for(r.ascent=l-_,m=d-v,g=!1,_=c;_>l;--_){for(var x=0;x<v;x+=4)if(f[m+x]!==255){g=!0;break}if(!g)m-=v;else break}return r.descent=_-l,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){e===void 0&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),i=r.getContext("2d");if(i&&i.measureText)return t.__canvas=r,r;e=document.createElement("canvas")}catch{e=document.createElement("canvas")}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();ke._fonts={},ke.METRICS_STRING="|\xC9q\xC5",ke.BASELINE_SYMBOL="M",ke.BASELINE_MULTIPLIER=1.4,ke.HEIGHT_MULTIPLIER=2,ke._newlines=[10,13],ke._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var BT={texture:!0,children:!1,baseTexture:!0},Wa=function(t){LT(e,t);function e(r,i,n){var o=this,a=!1;n||(n=document.createElement("canvas"),a=!0),n.width=3,n.height=3;var l=it.from(n);return l.orig=new ct,l.trim=new ct,o=t.call(this,l)||this,o._ownCanvas=a,o.canvas=n,o.context=o.canvas.getContext("2d"),o._resolution=Z.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=r,o.style=i,o.localStyleID=-1,o}return e.prototype.updateText=function(r){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var n=this.context,o=ke.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,l=o.height,c=o.lines,f=o.lineHeight,d=o.lineWidths,v=o.maxLineWidth,_=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var m,g,x=i.dropShadow?2:1,b=0;b<x;++b){var w=i.dropShadow&&b===0,C=w?Math.ceil(Math.max(1,l)+i.padding*2):0,I=C*this._resolution;if(w){n.fillStyle="black",n.strokeStyle="black";var S=i.dropShadowColor,A=si(typeof S=="number"?S:Ru(S)),P=i.dropShadowBlur*this._resolution,O=i.dropShadowDistance*this._resolution;n.shadowColor="rgba("+A[0]*255+","+A[1]*255+","+A[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=P,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*O,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*O+I}else n.fillStyle=this._generateFillStyle(i,c,o),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var D=(f-_.fontSize)/2;(!e.nextLineHeightBehavior||f-_.fontSize<0)&&(D=0);for(var U=0;U<c.length;U++)m=i.strokeThickness/2,g=i.strokeThickness/2+U*f+_.ascent+D,i.align==="right"?m+=v-d[U]:i.align==="center"&&(m+=(v-d[U])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(c[U],m+i.padding,g+i.padding-C,!0),i.fill&&this.drawLetterSpacing(c[U],m+i.padding,g+i.padding-C)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(r,i,n,o){o===void 0&&(o=!1);var a=this._style,l=a.letterSpacing,c=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(l===0||c){c&&(this.context.letterSpacing=l,this.context.textLetterSpacing=l),o?this.context.strokeText(r,i,n):this.context.fillText(r,i,n);return}for(var f=i,d=Array.from?Array.from(r):r.split(""),v=this.context.measureText(r).width,_=0,m=0;m<d.length;++m){var g=d[m];o?this.context.strokeText(g,f,n):this.context.fillText(g,f,n);for(var x="",b=m+1;b<d.length;++b)x+=d[b];_=this.context.measureText(x).width,f+=v-_+l,v=_}},e.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var i=Ob(r);i.data&&(r.width=i.width,r.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,o=this._style,a=o.trim?0:o.padding,l=n.baseTexture;n.trim.width=n._frame.width=r.width/this._resolution,n.trim.height=n._frame.height=r.height/this._resolution,n.trim.x=-a,n.trim.y=-a,n.orig.width=n._frame.width-a*2,n.orig.height=n._frame.height-a*2,this._onTextureUpdate(),l.setRealSize(r.width,r.height,this._resolution),n.updateUvs(),this.dirty=!1},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,r)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(r,i){return this.updateText(!0),this._textureID===-1&&(r=!1),t.prototype.getBounds.call(this,r,i)},e.prototype.getLocalBounds=function(r){return this.updateText(!0),t.prototype.getLocalBounds.call(this,r)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(r,i,n){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,l=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,f=this.canvas.width/this._resolution-l-c*2,d=this.canvas.height/this._resolution-l-c*2,v=o.slice(),_=r.fillGradientStops.slice();if(!_.length)for(var m=v.length+1,g=1;g<m;++g)_.push(g/m);if(v.unshift(o[0]),_.unshift(0),v.push(o[o.length-1]),_.push(1),r.fillGradientType===pn.LINEAR_VERTICAL){a=this.context.createLinearGradient(f/2,c,f/2,d+c);for(var x=n.fontProperties.fontSize+r.strokeThickness,g=0;g<i.length;g++){var b=n.lineHeight*(g-1)+x,w=n.lineHeight*g,C=w;g>0&&b>w&&(C=(w+b)/2);var I=w+x,S=n.lineHeight*(g+1),A=I;g+1<i.length&&S<I&&(A=(I+S)/2);for(var P=(A-C)/d,O=0;O<v.length;O++){var D=0;typeof _[O]=="number"?D=_[O]:D=O/v.length;var U=Math.min(1,Math.max(0,C/d+D*P));U=Number(U.toFixed(5)),a.addColorStop(U,v[O])}}}else{a=this.context.createLinearGradient(c,d/2,f+c,d/2);for(var B=v.length+1,$=1,g=0;g<v.length;g++){var j=void 0;typeof _[g]=="number"?j=_[g]:j=$/B,a.addColorStop(j,v[g]),$++}}return a},e.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},BT,r),t.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var i=ai(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var i=ai(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof vi?this._style=r:this._style=new vi(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Qe);/*!
 * @pixi/prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Z.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ya=function(t,e){return Ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ya(t,e)};function MT(t,e){Ya(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var kT=function(){function t(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function DT(t,e){var r=!1;if(t&&t._textures&&t._textures.length){for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof it){var n=t._textures[i].baseTexture;e.indexOf(n)===-1&&(e.push(n),r=!0)}}return r}function VT(t,e){if(t.baseTexture instanceof _t){var r=t.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function HT(t,e){if(t._texture&&t._texture instanceof it){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function XT(t,e){return e instanceof Wa?(e.updateText(!0),!0):!1}function $T(t,e){if(e instanceof vi){var r=e.toFontString();return ke.measureFont(r),!0}return!1}function jT(t,e){if(t instanceof Wa){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function zT(t,e){return t instanceof vi?(e.indexOf(t)===-1&&e.push(t),!0):!1}var WT=function(){function t(e){var r=this;this.limiter=new kT(Z.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!r.queue||r.prepareItems()},this.registerFindHook(jT),this.registerFindHook(zT),this.registerFindHook(DT),this.registerFindHook(VT),this.registerFindHook(HT),this.registerUploadHook(XT),this.registerUploadHook($T)}return t.prototype.upload=function(e,r){typeof e=="function"&&(r=e,e=null),e&&this.add(e),this.queue.length?(r&&this.completes.push(r),this.ticking||(this.ticking=!0,ne.system.addOnce(this.tick,this,qe.UTILITY))):r&&r()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)ne.system.addOnce(this.tick,this,qe.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var i=0,n=o.length;i<n;i++)o[i]()}},t.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},t.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},t.prototype.add=function(e){for(var r=0,i=this.addHooks.length;r<i&&!this.addHooks[r](e,this.queue);r++);if(e instanceof ce)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},t.prototype.destroy=function(){this.ticking&&ne.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Kf(t,e){return e instanceof _t?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function YT(t,e){if(!(e instanceof vr))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,n=0;n<i.length;n++){var o=i[n].style.texture;o&&Kf(t,o.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function qT(t,e){return t instanceof vr?(e.push(t),!0):!1}var KT=function(t){MT(e,t);function e(r){var i=t.call(this,r)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(qT),i.registerUploadHook(Kf),i.registerUploadHook(YT),i}return e}(WT);/*!
 * @pixi/spritesheet - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zf=function(){function t(e,r,i){i===void 0&&(i=null),this._texture=e instanceof it?e:null,this.baseTexture=e instanceof _t?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,i=to(e,null);return i===null&&(i=r!==void 0?parseFloat(r):1),i!==1&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var r=e,i=t.BATCH_SIZE;r-e<i&&r<this._frameKeys.length;){var n=this._frameKeys[r],o=this._frames[n],a=o.frame;if(a){var l=null,c=null,f=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,d=new ct(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);o.rotated?l=new ct(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):l=new ct(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(c=new ct(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new it(this.baseTexture,l,d,c,o.rotated?2:0,o.anchor),it.addToCache(this.textures[n],n)}r++}},t.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var i=0;i<e[r].length;i++){var n=e[r][i];this.animations[r].push(this.textures[n])}}},t.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),ZT=function(){function t(){}return t.use=function(e,r){var i,n,o=this,a=e.name+"_image";if(!e.data||e.type!==zt.TYPE.JSON||!e.data.frames||o.resources[a]){r();return}var l=(n=(i=e.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(l))for(var c=function(g){if(typeof g!="string")return"continue";var x=g.replace(".json",""),b=oi.resolve(e.url.replace(o.baseUrl,""),g);if(o.resources[x]||Object.values(o.resources).some(function(C){return oi.format(oi.parse(C.url))===b}))return"continue";var w={crossOrigin:e.crossOrigin,loadType:zt.LOAD_TYPE.XHR,xhrType:zt.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(x,b,w)},f=0,d=l;f<d.length;f++){var v=d[f];c(v)}var _={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},m=t.getResourcePath(e,o.baseUrl);o.add(a,m,_,function(x){if(x.error){r(x.error);return}var b=new Zf(x.texture,e.data,e.url);b.parse(function(){e.spritesheet=b,e.textures=b.textures,r()})})},t.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:oi.resolve(e.url.replace(r,""),e.data.meta.image)},t}();/*!
 * @pixi/sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var qa=function(t,e){return qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},qa(t,e)};function Jf(t,e){qa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var dn=new Bt;(function(t){Jf(e,t);function e(r,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var o=t.call(this,r)||this;return o.tileTransform=new js,o._width=i,o._height=n,o.uvMatrix=o.texture.uvMatrix||new ca(r),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(r){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,i,n,o)},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new ct),r=this._localBoundsRect),this._bounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,dn);var i=this._width,n=this._height,o=-i*this.anchor._x;if(dn.x>=o&&dn.x<o+i){var a=-n*this.anchor._y;if(dn.y>=a&&dn.y<a+n)return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},e.from=function(r,i){var n=r instanceof it?r:it.from(r,i);return new e(n,i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),e})(Qe);var JT=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Qf=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,QT=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,t1=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,e1=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Po=new jt,r1=function(t){Jf(e,t);function e(r){var i=t.call(this,r)||this;return r.runners.contextChange.add(i),i.quad=new gc,i.state=kr.for2d(),i}return e.prototype.contextChange=function(){var r=this.renderer,i={globals:r.globalUniforms};this.simpleShader=ge.from(Qf,JT,i),this.shader=r.context.webGLVersion>1?ge.from(t1,e1,i):ge.from(Qf,QT,i)},e.prototype.render=function(r){var i=this.renderer,n=this.quad,o=n.vertices;o[0]=o[6]=r._width*-r.anchor.x,o[1]=o[3]=r._height*-r.anchor.y,o[2]=o[4]=r._width*(1-r.anchor.x),o[5]=o[7]=r._height*(1-r.anchor.y);var a=r.uvRespectAnchor?r.anchor.x:0,l=r.uvRespectAnchor?r.anchor.y:0;o=n.uvs,o[0]=o[6]=-a,o[1]=o[3]=-l,o[2]=o[4]=1-a,o[5]=o[7]=1-l,n.invalidate();var c=r._texture,f=c.baseTexture,d=r.tileTransform.localTransform,v=r.uvMatrix,_=f.isPowerOfTwo&&c.frame.width===f.width&&c.frame.height===f.height;_&&(f._glTextures[i.CONTEXT_UID]?_=f.wrapMode!==Ce.CLAMP:f.wrapMode===Ce.CLAMP&&(f.wrapMode=Ce.REPEAT));var m=_?this.simpleShader:this.shader,g=c.width,x=c.height,b=r._width,w=r._height;Po.set(d.a*g/b,d.b*g/w,d.c*x/b,d.d*x/w,d.tx/b,d.ty/w),Po.invert(),_?Po.prepend(v.mapCoord):(m.uniforms.uMapCoord=v.mapCoord.toArray(!0),m.uniforms.uClampFrame=v.uClampFrame,m.uniforms.uClampOffset=v.uClampOffset),m.uniforms.uTransform=Po.toArray(!0),m.uniforms.uColor=Su(r.tint,r.worldAlpha,m.uniforms.uColor,f.alphaMode),m.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),m.uniforms.uSampler=c,i.shader.bind(m),i.geometry.bind(n),this.state.blendMode=Nu(r.blendMode,f.alphaMode),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(uo);/*!
 * @pixi/mesh - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ka=function(t,e){return Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ka(t,e)};function Za(t,e){Ka(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var i1=function(){function t(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},t}(),Ja=new Bt,tp=new io,De=function(t){Za(e,t);function e(r,i,n,o){o===void 0&&(o=Ee.TRIANGLES);var a=t.call(this)||this;return a.geometry=r,a.shader=i,a.state=n||kr.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=Z.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){var i=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===Ee.TRIANGLES&&i.length<e.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},e.prototype._renderDefault=function(r){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),r.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(i),r.state.set(this.state),r.geometry.bind(this.geometry,i),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(r){var i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var o=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[o]),r.plugins[o].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry,i=r.buffers[0],n=i.data,o=i._updateID;if(!(o===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var a=this.transform.worldTransform,l=a.a,c=a.b,f=a.c,d=a.d,v=a.tx,_=a.ty,m=this.vertexData,g=0;g<m.length/2;g++){var x=n[g*2],b=n[g*2+1];m[g*2]=l*x+f*b+v,m[g*2+1]=c*x+d*b+_}if(this._roundPixels)for(var w=Z.RESOLUTION,g=0;g<m.length;++g)m[g]=Math.round((m[g]*w|0)/w);this.vertexDirty=o}},e.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new i1(r,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,Ja);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=tp.points,o=this.geometry.getIndex().data,a=o.length,l=this.drawMode===4?3:1,c=0;c+2<a;c+=l){var f=o[c]*2,d=o[c+1]*2,v=o[c+2]*2;if(n[0]=i[f],n[1]=i[f+1],n[2]=i[d],n[3]=i[d+1],n[4]=i[v],n[5]=i[v+1],tp.contains(Ja.x,Ja.y))return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(ce),n1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,o1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,vn=function(t){Za(e,t);function e(r,i){var n=this,o={uSampler:r,alpha:1,uTextureMatrix:jt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(o,i.uniforms),n=t.call(this,i.program||on.from(o1,n1),o)||this,n._colorDirty=!1,n.uvMatrix=new ca(r),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;Su(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(ge),Ro=function(t){Za(e,t);function e(r,i,n){var o=t.call(this)||this,a=new Jt(r),l=new Jt(i,!0),c=new Jt(n,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,Q.FLOAT).addAttribute("aTextureCoord",l,2,!1,Q.FLOAT).addIndex(c),o._updateId=-1,o}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(en);/*!
 * @pixi/text-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Qa=function(t,e){return Qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Qa(t,e)};function s1(t,e){Qa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ao=function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t}(),a1=function(){function t(){}return t.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},t.parse=function(e){var r=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in r){var o=r[n].match(/^[a-z]+/gm)[0],a=r[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(var c in a){var f=a[c].split("="),d=f[0],v=f[1].replace(/"/gm,""),_=parseFloat(v),m=isNaN(_)?v:_;l[d]=m}i[o].push(l)}var g=new Ao;return i.info.forEach(function(x){return g.info.push({face:x.face,size:parseInt(x.size,10)})}),i.common.forEach(function(x){return g.common.push({lineHeight:parseInt(x.lineHeight,10)})}),i.page.forEach(function(x){return g.page.push({id:parseInt(x.id,10),file:x.file})}),i.char.forEach(function(x){return g.char.push({id:parseInt(x.id,10),page:parseInt(x.page,10),x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xoffset:parseInt(x.xoffset,10),yoffset:parseInt(x.yoffset,10),xadvance:parseInt(x.xadvance,10)})}),i.kerning.forEach(function(x){return g.kerning.push({first:parseInt(x.first,10),second:parseInt(x.second,10),amount:parseInt(x.amount,10)})}),i.distanceField.forEach(function(x){return g.distanceField.push({distanceRange:parseInt(x.distanceRange,10),fieldType:x.fieldType})}),g},t}(),tl=function(){function t(){}return t.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(e){for(var r=new Ao,i=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),l=e.getElementsByTagName("kerning"),c=e.getElementsByTagName("distanceField"),f=0;f<i.length;f++)r.info.push({face:i[f].getAttribute("face"),size:parseInt(i[f].getAttribute("size"),10)});for(var f=0;f<n.length;f++)r.common.push({lineHeight:parseInt(n[f].getAttribute("lineHeight"),10)});for(var f=0;f<o.length;f++)r.page.push({id:parseInt(o[f].getAttribute("id"),10)||0,file:o[f].getAttribute("file")});for(var f=0;f<a.length;f++){var d=a[f];r.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(var f=0;f<l.length;f++)r.kerning.push({first:parseInt(l[f].getAttribute("first"),10),second:parseInt(l[f].getAttribute("second"),10),amount:parseInt(l[f].getAttribute("amount"),10)});for(var f=0;f<c.length;f++)r.distanceField.push({fieldType:c[f].getAttribute("fieldType"),distanceRange:parseInt(c[f].getAttribute("distanceRange"),10)});return r},t}(),l1=function(){function t(){}return t.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return tl.test(r)}return!1},t.parse=function(e){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return tl.parse(r)},t}(),el=[a1,tl,l1];function ep(t){for(var e=0;e<el.length;e++)if(el[e].test(t))return el[e];return null}function h1(t,e,r,i,n,o){var a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var l,c=r.dropShadow?r.dropShadowDistance:0,f=r.padding||0,d=t.width/i-c-f*2,v=t.height/i-c-f*2,_=a.slice(),m=r.fillGradientStops.slice();if(!m.length)for(var g=_.length+1,x=1;x<g;++x)m.push(x/g);if(_.unshift(a[0]),m.unshift(0),_.push(a[a.length-1]),m.push(1),r.fillGradientType===pn.LINEAR_VERTICAL){l=e.createLinearGradient(d/2,f,d/2,v+f);for(var b=0,w=o.fontProperties.fontSize+r.strokeThickness,C=w/v,x=0;x<n.length;x++)for(var I=o.lineHeight*x,S=0;S<_.length;S++){var A=0;typeof m[S]=="number"?A=m[S]:A=S/_.length;var P=I/v+A*C,O=Math.max(b,P);O=Math.min(O,1),l.addColorStop(O,_[S]),b=O}}else{l=e.createLinearGradient(f,v/2,d+f,v/2);for(var D=_.length+1,U=1,x=0;x<_.length;x++){var B=void 0;typeof m[x]=="number"?B=m[x]:B=U/D,l.addColorStop(B,_[x]),U++}}return l}function u1(t,e,r,i,n,o,a){var l=r.text,c=r.fontProperties;e.translate(i,n),e.scale(o,o);var f=a.strokeThickness/2,d=-(a.strokeThickness/2);if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=h1(t,e,a,o,[l],r),e.strokeStyle=a.stroke,a.dropShadow){var v=a.dropShadowColor,_=si(typeof v=="number"?v:Ru(v)),m=a.dropShadowBlur*o,g=a.dropShadowDistance*o;e.shadowColor="rgba("+_[0]*255+","+_[1]*255+","+_[2]*255+","+a.dropShadowAlpha+")",e.shadowBlur=m,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*g,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*g}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(l,f,d+r.lineHeight-c.descent),a.fill&&e.fillText(l,f,d+r.lineHeight-c.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function rp(t){return Array.from?Array.from(t):t.split("")}function c1(t){typeof t=="string"&&(t=[t]);for(var e=[],r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),a=n[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var l=o,c=a;l<=c;l++)e.push(String.fromCharCode(l))}else e.push.apply(e,rp(n))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function No(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var _i=function(){function t(e,r,i){var n,o,a=e.info[0],l=e.common[0],c=e.page[0],f=e.distanceField[0],d=to(c.file),v={};this._ownsTextures=i,this.font=a.face,this.size=a.size,this.lineHeight=l.lineHeight/d,this.chars={},this.pageTextures=v;for(var _=0;_<e.page.length;_++){var m=e.page[_],g=m.id,x=m.file;v[g]=r instanceof Array?r[_]:r[x],(f==null?void 0:f.fieldType)&&f.fieldType!=="none"&&(v[g].baseTexture.alphaMode=Ie.NO_PREMULTIPLIED_ALPHA)}for(var _=0;_<e.char.length;_++){var b=e.char[_],g=b.id,w=b.page,C=e.char[_],I=C.x,S=C.y,A=C.width,P=C.height,O=C.xoffset,D=C.yoffset,U=C.xadvance;I/=d,S/=d,A/=d,P/=d,O/=d,D/=d,U/=d;var B=new ct(I+v[w].frame.x/d,S+v[w].frame.y/d,A,P);this.chars[g]={xOffset:O,yOffset:D,xAdvance:U,kerning:{},texture:new it(v[w].baseTexture,B),page:w}}for(var _=0;_<e.kerning.length;_++){var $=e.kerning[_],j=$.first,W=$.second,lt=$.amount;j/=d,W/=d,lt/=d,this.chars[W]&&(this.chars[W].kerning[j]=lt)}this.distanceFieldRange=f==null?void 0:f.distanceRange,this.distanceFieldType=(o=(n=f==null?void 0:f.fieldType)===null||n===void 0?void 0:n.toLowerCase())!==null&&o!==void 0?o:"none"}return t.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,i){var n;if(e instanceof Ao)n=e;else{var o=ep(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}r instanceof it&&(r=[r]);var a=new t(n,r,i);return t.available[a.font]=a,a},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,i),o=n.chars,a=n.padding,l=n.resolution,c=n.textureWidth,f=n.textureHeight,d=c1(o),v=r instanceof vi?r:new vi(r),_=c,m=new Ao;m.info[0]={face:v.fontFamily,size:v.fontSize},m.common[0]={lineHeight:v.fontSize};for(var g=0,x=0,b,w,C,I=0,S=[],A=0;A<d.length;A++){b||(b=document.createElement("canvas"),b.width=c,b.height=f,w=b.getContext("2d"),C=new _t(b,{resolution:l}),S.push(new it(C)),m.page.push({id:S.length-1,file:""}));var P=ke.measureText(d[A],v,!1,b),O=P.width,D=Math.ceil(P.height),U=Math.ceil((v.fontStyle==="italic"?2:1)*O);if(x>=f-D*l){if(x===0)throw new Error("[BitmapFont] textureHeight "+f+"px is "+("too small for "+v.fontSize+"px fonts"));--A,b=null,w=null,C=null,x=0,g=0,I=0;continue}if(I=Math.max(D+P.fontProperties.descent,I),U*l+g>=_){--A,x+=I*l,x=Math.ceil(x),g=0,I=0;continue}u1(b,w,P,g,x,l,v);var B=No(P.text);m.char.push({id:B,page:S.length-1,x:g/l,y:x/l,width:U,height:D,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(v.dropShadow?v.dropShadowDistance:0)-(v.stroke?v.strokeThickness:0))}),g+=(U+2*a)*l,g=Math.ceil(g)}for(var A=0,$=d.length;A<$;A++)for(var j=d[A],W=0;W<$;W++){var lt=d[W],z=w.measureText(j).width,k=w.measureText(lt).width,V=w.measureText(j+lt).width,Pt=V-(z+k);Pt&&m.kerning.push({first:No(j),second:No(lt),amount:Pt})}var dt=new t(m,S,!0);return t.available[e]!==void 0&&t.uninstall(e),t.available[e]=dt,dt},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),f1=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,p1=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,d1=[],v1=[],ip=[];(function(t){s1(e,t);function e(r,i){i===void 0&&(i={});var n=t.call(this)||this;n._tint=16777215;var o=Object.assign({},e.styleDefaults,i),a=o.align,l=o.tint,c=o.maxWidth,f=o.letterSpacing,d=o.fontName,v=o.fontSize;if(!_i.available[d])throw new Error('Missing BitmapFont "'+d+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=a,n._tint=l,n._fontName=d,n._fontSize=v||_i.available[d].size,n.text=r,n._maxWidth=c,n._maxLineHeight=0,n._letterSpacing=f,n._anchor=new li(function(){n.dirty=!0},n,0,0),n._roundPixels=Z.ROUND_PIXELS,n.dirty=!0,n._resolution=Z.RESOLUTION,n._autoResolution=!0,n._textureCache={},n}return e.prototype.updateText=function(){for(var r,i=_i.available[this._fontName],n=this._fontSize/i.size,o=new Bt,a=[],l=[],c=[],f=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",d=rp(f),v=this._maxWidth*i.size/this._fontSize,_=i.distanceFieldType==="none"?d1:v1,m=null,g=0,x=0,b=0,w=-1,C=0,I=0,S=0,A=0,P=0;P<d.length;P++){var O=d[P],D=No(O);if(/(?:\s)/.test(O)&&(w=P,C=g,A++),O==="\r"||O===`
`){l.push(g),c.push(-1),x=Math.max(x,g),++b,++I,o.x=0,o.y+=i.lineHeight,m=null,A=0;continue}var U=i.chars[D];if(!!U){m&&U.kerning[m]&&(o.x+=U.kerning[m]);var B=ip.pop()||{texture:it.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Bt};B.texture=U.texture,B.line=b,B.charCode=D,B.position.x=o.x+U.xOffset+this._letterSpacing/2,B.position.y=o.y+U.yOffset,B.prevSpaces=A,a.push(B),g=B.position.x+Math.max(U.xAdvance,U.texture.orig.width),o.x+=U.xAdvance+this._letterSpacing,S=Math.max(S,U.yOffset+U.texture.height),m=D,w!==-1&&v>0&&o.x>v&&(++I,Ye(a,1+w-I,1+P-w),P=w,w=-1,l.push(C),c.push(a.length>0?a[a.length-1].prevSpaces:0),x=Math.max(x,C),b++,o.x=0,o.y+=i.lineHeight,m=null,A=0)}}var $=d[d.length-1];$!=="\r"&&$!==`
`&&(/(?:\s)/.test($)&&(g=C),l.push(g),x=Math.max(x,g),c.push(-1));for(var j=[],P=0;P<=b;P++){var W=0;this._align==="right"?W=x-l[P]:this._align==="center"?W=(x-l[P])/2:this._align==="justify"&&(W=c[P]<0?0:(x-l[P])/c[P]),j.push(W)}for(var lt=a.length,z={},k=[],V=this._activePagesMeshData,P=0;P<V.length;P++)_.push(V[P]);for(var P=0;P<lt;P++){var Pt=a[P].texture,dt=Pt.baseTexture.uid;if(!z[dt]){var G=_.pop();if(!G){var Y=new Ro,ot=void 0,q=void 0;i.distanceFieldType==="none"?(ot=new vn(it.EMPTY),q=tt.NORMAL):(ot=new vn(it.EMPTY,{program:on.from(p1,f1),uniforms:{uFWidth:0}}),q=tt.NORMAL_NPM);var nt=new De(Y,ot);nt.blendMode=q,G={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:nt,vertices:null,uvs:null,indices:null}}G.index=0,G.indexCount=0,G.vertexCount=0,G.uvsCount=0,G.total=0;var St=this._textureCache;St[dt]=St[dt]||new it(Pt.baseTexture),G.mesh.texture=St[dt],G.mesh.tint=this._tint,k.push(G),z[dt]=G}z[dt].total++}for(var P=0;P<V.length;P++)k.indexOf(V[P])===-1&&this.removeChild(V[P].mesh);for(var P=0;P<k.length;P++)k[P].mesh.parent!==this&&this.addChild(k[P].mesh);this._activePagesMeshData=k;for(var P in z){var G=z[P],wt=G.total;if(!(((r=G.indices)===null||r===void 0?void 0:r.length)>6*wt)||G.vertices.length<De.BATCHABLE_SIZE*2)G.vertices=new Float32Array(4*2*wt),G.uvs=new Float32Array(4*2*wt),G.indices=new Uint16Array(6*wt);else for(var Ot=G.total,Mt=G.vertices,gt=Ot*4*2;gt<Mt.length;gt++)Mt[gt]=0;G.mesh.size=6*wt}for(var P=0;P<lt;P++){var O=a[P],vt=O.position.x+j[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(vt=Math.round(vt));var ft=vt*n,Rt=O.position.y*n,Pt=O.texture,at=z[Pt.baseTexture.uid],qt=Pt.frame,Xt=Pt._uvs,ut=at.index++;at.indices[ut*6+0]=0+ut*4,at.indices[ut*6+1]=1+ut*4,at.indices[ut*6+2]=2+ut*4,at.indices[ut*6+3]=0+ut*4,at.indices[ut*6+4]=2+ut*4,at.indices[ut*6+5]=3+ut*4,at.vertices[ut*8+0]=ft,at.vertices[ut*8+1]=Rt,at.vertices[ut*8+2]=ft+qt.width*n,at.vertices[ut*8+3]=Rt,at.vertices[ut*8+4]=ft+qt.width*n,at.vertices[ut*8+5]=Rt+qt.height*n,at.vertices[ut*8+6]=ft,at.vertices[ut*8+7]=Rt+qt.height*n,at.uvs[ut*8+0]=Xt.x0,at.uvs[ut*8+1]=Xt.y0,at.uvs[ut*8+2]=Xt.x1,at.uvs[ut*8+3]=Xt.y1,at.uvs[ut*8+4]=Xt.x2,at.uvs[ut*8+5]=Xt.y2,at.uvs[ut*8+6]=Xt.x3,at.uvs[ut*8+7]=Xt.y3}this._textWidth=x*n,this._textHeight=(o.y+i.lineHeight)*n;for(var P in z){var G=z[P];if(this.anchor.x!==0||this.anchor.y!==0)for(var de=0,be=this._textWidth*this.anchor.x,tr=this._textHeight*this.anchor.y,jr=0;jr<G.total;jr++)G.vertices[de++]-=be,G.vertices[de++]-=tr,G.vertices[de++]-=be,G.vertices[de++]-=tr,G.vertices[de++]-=be,G.vertices[de++]-=tr,G.vertices[de++]-=be,G.vertices[de++]-=tr;this._maxLineHeight=S*n;var xr=G.mesh.geometry.getBuffer("aVertexPosition"),Ui=G.mesh.geometry.getBuffer("aTextureCoord"),zr=G.mesh.geometry.getIndex();xr.data=G.vertices,Ui.data=G.uvs,zr.data=G.indices,xr.update(),Ui.update(),zr.update()}for(var P=0;P<a.length;P++)ip.push(a[P])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var i=_i.available[this._fontName],n=i.distanceFieldRange,o=i.distanceFieldType,a=i.size;if(o!=="none")for(var l=this.worldTransform,c=l.a,f=l.b,d=l.c,v=l.d,_=Math.sqrt(c*c+f*f),m=Math.sqrt(d*d+v*v),g=(Math.abs(_)+Math.abs(m))/2,x=this._fontSize/a,b=0,w=this._activePagesMeshData;b<w.length;b++){var C=w[b];C.mesh.shader.uniforms.uFWidth=g*n*x*this._resolution}t.prototype._render.call(this,r)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!_i.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r){var i=this._textureCache;for(var n in i){var o=i[n];o.destroy(),delete i[n]}this._textureCache=null,t.prototype.destroy.call(this,r)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e})(ce);var _1=function(){function t(){}return t.add=function(){zt.setExtensionXhrType("fnt",zt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var i=ep(e.data);if(!i){r();return}for(var n=t.getBaseUrl(this,e),o=i.parse(e.data),a={},l=function(x){a[x.metadata.pageFile]=x.texture,Object.keys(a).length===o.page.length&&(e.bitmapFont=_i.install(o,a,!0),r())},c=0;c<o.page.length;++c){var f=o.page[c].file,d=n+f,v=!1;for(var _ in this.resources){var m=this.resources[_];if(m.url===d){m.metadata.pageFile=f,m.texture?l(m):m.onAfterMiddleware.add(l),v=!0;break}}if(!v){var g={crossOrigin:e.crossOrigin,loadType:zt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:f},e.metadata.imageMetadata),parentResource:e};this.add(d,g,l)}}},t.getBaseUrl=function(e,r){var i=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&(i==="."&&(i=""),e.baseUrl&&i&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(e.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},t.dirname=function(e){var r=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===e?".":r===""?"/":r},t}();/*!
 * @pixi/filter-alpha - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var rl=function(t,e){return rl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},rl(t,e)};function m1(t,e){rl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var g1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(t){m1(e,t);function e(r){r===void 0&&(r=1);var i=t.call(this,ww,g1,{uAlpha:1})||this;return i.alpha=r,i}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e})(ur);/*!
 * @pixi/filter-blur - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var il=function(t,e){return il=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},il(t,e)};function np(t,e){il(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var y1=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function b1(t,e){var r=Math.ceil(t/2),i=y1,n="",o;e?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var l=o.replace("%index%",a.toString());l=l.replace("%sampleIndex%",a-(r-1)+".0"),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",t.toString()),i}var x1={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},w1=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function T1(t){for(var e=x1[t],r=e.length,i=w1,n="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,l=0;l<t;l++){var c=o.replace("%index%",l.toString());a=l,l>=r&&(a=t-l-1),c=c.replace("%value%",e[a].toString()),n+=c,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",t.toString()),i}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var op;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(op||(op={}));var sp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(sp||(sp={}));var ap;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ap||(ap={}));var lp;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(lp||(lp={}));var hp;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(hp||(hp={}));var up;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(up||(up={}));var cp;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(cp||(cp={}));var fp;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(fp||(fp={}));var pp;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(pp||(pp={}));var dp;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(dp||(dp={}));var vp;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(vp||(vp={}));var _p;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(_p||(_p={}));var mp;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(mp||(mp={}));var _n;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(_n||(_n={}));var gp;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(gp||(gp={}));var yp;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(yp||(yp={}));var bp;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(bp||(bp={}));var xp;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(xp||(xp={}));var wp;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(wp||(wp={}));var Tp=function(t){np(e,t);function e(r,i,n,o,a){i===void 0&&(i=8),n===void 0&&(n=4),o===void 0&&(o=Z.FILTER_RESOLUTION),a===void 0&&(a=5);var l=this,c=b1(a,r),f=T1(a);return l=t.call(this,c,f)||this,l.horizontal=r,l.resolution=o,l._quality=0,l.quality=n,l.blur=i,l}return e.prototype.apply=function(r,i,n,o){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/i.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,i,n,o);else{var a=r.getFilterTexture(),l=r.renderer,c=i,f=a;this.state.blend=!1,r.applyFilter(this,c,f,_n.CLEAR);for(var d=1;d<this.passes-1;d++){r.bindAndClear(c,_n.BLIT),this.uniforms.uSampler=f;var v=f;f=c,c=v,l.shader.bind(this),l.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,f,n,o),r.returnFilterTexture(a)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),e}(ur);(function(t){np(e,t);function e(r,i,n,o){r===void 0&&(r=8),i===void 0&&(i=4),n===void 0&&(n=Z.FILTER_RESOLUTION),o===void 0&&(o=5);var a=t.call(this)||this;return a.blurXFilter=new Tp(!0,r,i,n,o),a.blurYFilter=new Tp(!1,r,i,n,o),a.resolution=n,a.quality=i,a.blur=r,a.repeatEdgePixels=!1,a}return e.prototype.apply=function(r,i,n,o){var a=Math.abs(this.blurXFilter.strength),l=Math.abs(this.blurYFilter.strength);if(a&&l){var c=r.getFilterTexture();this.blurXFilter.apply(r,i,c,_n.CLEAR),this.blurYFilter.apply(r,c,n,o),r.returnFilterTexture(c)}else l?this.blurYFilter.apply(r,i,n,o):this.blurXFilter.apply(r,i,n,o)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),e})(ur);/*!
 * @pixi/filter-color-matrix - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var nl=function(t,e){return nl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},nl(t,e)};function E1(t,e){nl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var C1=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Ep=function(t){E1(e,t);function e(){var r=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=t.call(this,Oc,C1,i)||this,r.alpha=1,r}return e.prototype._loadMatrix=function(r,i){i===void 0&&(i=!1);var n=r;i&&(this._multiply(n,this.uniforms.m,r),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(r,i,n){return r[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],r[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],r[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],r[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],r[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],r[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],r[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],r[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],r[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],r[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],r[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],r[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],r[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],r[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],r[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],r[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],r[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],r[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],r[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],r[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],r},e.prototype._colorMatrix=function(r){var i=new Float32Array(r);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},e.prototype.brightness=function(r,i){var n=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.tint=function(r,i){var n=r>>16&255,o=r>>8&255,a=r&255,l=[n/255,0,0,0,0,0,o/255,0,0,0,0,0,a/255,0,0,0,0,0,1,0];this._loadMatrix(l,i)},e.prototype.greyscale=function(r,i){var n=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.blackAndWhite=function(r){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.hue=function(r,i){r=(r||0)/180*Math.PI;var n=Math.cos(r),o=Math.sin(r),a=Math.sqrt,l=1/3,c=a(l),f=n+(1-n)*l,d=l*(1-n)-c*o,v=l*(1-n)+c*o,_=l*(1-n)+c*o,m=n+l*(1-n),g=l*(1-n)-c*o,x=l*(1-n)-c*o,b=l*(1-n)+c*o,w=n+l*(1-n),C=[f,d,v,0,0,_,m,g,0,0,x,b,w,0,0,0,0,0,1,0];this._loadMatrix(C,i)},e.prototype.contrast=function(r,i){var n=(r||0)+1,o=-.5*(n-1),a=[n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0];this._loadMatrix(a,i)},e.prototype.saturate=function(r,i){r===void 0&&(r=0);var n=r*2/3+1,o=(n-1)*-.5,a=[n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0];this._loadMatrix(a,i)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(r){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.sepia=function(r){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.technicolor=function(r){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.polaroid=function(r){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.toBGR=function(r){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.kodachrome=function(r){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.browni=function(r){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.vintage=function(r){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.colorTone=function(r,i,n,o,a){r=r||.2,i=i||.15,n=n||16770432,o=o||3375104;var l=(n>>16&255)/255,c=(n>>8&255)/255,f=(n&255)/255,d=(o>>16&255)/255,v=(o>>8&255)/255,_=(o&255)/255,m=[.3,.59,.11,0,0,l,c,f,r,0,d,v,_,i,0,l-d,c-v,f-_,0,0];this._loadMatrix(m,a)},e.prototype.night=function(r,i){r=r||.1;var n=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.predator=function(r,i){var n=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.lsd=function(r){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(ur);Ep.prototype.grayscale=Ep.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var ol=function(t,e){return ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},ol(t,e)};function I1(t,e){ol(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var P1=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,R1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(t){I1(e,t);function e(r,i){var n=this,o=new jt;return r.renderable=!1,n=t.call(this,R1,P1,{mapSampler:r._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=r,n.maskMatrix=o,i==null&&(i=20),n.scale=new Bt(i,i),n}return e.prototype.apply=function(r,i,n,o){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,l=Math.sqrt(a.a*a.a+a.b*a.b),c=Math.sqrt(a.c*a.c+a.d*a.d);l!==0&&c!==0&&(this.uniforms.rotation[0]=a.a/l,this.uniforms.rotation[1]=a.b/l,this.uniforms.rotation[2]=a.c/c,this.uniforms.rotation[3]=a.d/c),r.applyFilter(this,i,n,o)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),e})(ur);/*!
 * @pixi/filter-fxaa - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var sl=function(t,e){return sl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},sl(t,e)};function A1(t,e){sl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var N1=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,S1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(t){A1(e,t);function e(){return t.call(this,N1,S1)||this}return e})(ur);/*!
 * @pixi/filter-noise - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var al=function(t,e){return al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},al(t,e)};function O1(t,e){al(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var U1=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(t){O1(e,t);function e(r,i){r===void 0&&(r=.5),i===void 0&&(i=Math.random());var n=t.call(this,Oc,U1,{uNoise:0,uSeed:0})||this;return n.noise=r,n.seed=i,n}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),e})(ur);/*!
 * @pixi/mixin-cache-as-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Cp;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Cp||(Cp={}));var Ip;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Ip||(Ip={}));var Pp;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Pp||(Pp={}));var Rp;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Rp||(Rp={}));var Ap;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ap||(Ap={}));var Np;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Np||(Np={}));var Sp;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Sp||(Sp={}));var Op;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Op||(Op={}));var Up;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Up||(Up={}));var Lp;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Lp||(Lp={}));var Fp;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Fp||(Fp={}));var Gp;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Gp||(Gp={}));var Bp;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Bp||(Bp={}));var Mp;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Mp||(Mp={}));var kp;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(kp||(kp={}));var Dp;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Dp||(Dp={}));var Vp;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(Vp||(Vp={}));var ll;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(ll||(ll={}));var Hp;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Hp||(Hp={}));var Xp=new jt;Yt.prototype._cacheAsBitmap=!1,Yt.prototype._cacheData=null,Yt.prototype._cacheAsBitmapResolution=null,Yt.prototype._cacheAsBitmapMultisample=ll.NONE;var L1=function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t}();Object.defineProperties(Yt.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e;t?(this._cacheData||(this._cacheData=new L1),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),Yt.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Yt.prototype._initCachedDisplayObject=function(e){var r;if(!(this._cacheData&&this._cacheData.sprite)){var i=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;n.pad(o)}n.ceil(Z.RESOLUTION);var a=e.renderTexture.current,l=e.renderTexture.sourceFrame.clone(),c=e.renderTexture.destinationFrame.clone(),f=e.projection.transform,d=pe.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:e.multisample}),v="cacheAsBitmap_"+Ur();this._cacheData.textureCacheId=v,_t.addToCache(d.baseTexture,v),it.addToCache(d,v);var _=this.transform.localTransform.copyTo(Xp).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:d,clear:!0,transform:_,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=f,e.renderTexture.bind(a,l,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var m=new Qe(d);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(n.x/n.width),m.anchor.y=-(n.y/n.height),m.alpha=i,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)}},Yt.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Yt.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=e.context,o=e._projTransform;r.ceil(Z.RESOLUTION);var a=pe.create({width:r.width,height:r.height}),l="cacheAsBitmap_"+Ur();this._cacheData.textureCacheId=l,_t.addToCache(a.baseTexture,l),it.addToCache(a,l);var c=Xp;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=r.x,c.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:a,clear:!0,transform:c,skipUpdateTransform:!1}),e.context=n,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var f=new Qe(a);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(r.x/r.width),f.anchor.y=-(r.y/r.height),f.alpha=i,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},Yt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Yt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Yt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_t.removeFromCache(this._cacheData.textureCacheId),it.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Yt.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Yt.prototype.name=null,ce.prototype.getChildByName=function(e,r){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===e)return this.children[i];if(r)for(var i=0,n=this.children.length;i<n;i++){var o=this.children[i];if(!!o.getChildByName){var a=this.children[i].getChildByName(e,!0);if(a)return a}}return null};/*!
 * @pixi/mixin-get-global-position - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Yt.prototype.getGlobalPosition=function(e,r){return e===void 0&&(e=new Bt),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/mesh-extras - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var hl=function(t,e){return hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},hl(t,e)};function mi(t,e){hl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ul=function(t){mi(e,t);function e(r,i,n,o){r===void 0&&(r=100),i===void 0&&(i=100),n===void 0&&(n=10),o===void 0&&(o=10);var a=t.call(this)||this;return a.segWidth=n,a.segHeight=o,a.width=r,a.height=i,a.build(),a}return e.prototype.build=function(){for(var r=this.segWidth*this.segHeight,i=[],n=[],o=[],a=this.segWidth-1,l=this.segHeight-1,c=this.width/a,f=this.height/l,d=0;d<r;d++){var v=d%this.segWidth,_=d/this.segWidth|0;i.push(v*c,_*f),n.push(v/a,_/l)}for(var m=a*l,d=0;d<m;d++){var g=d%a,x=d/a|0,b=x*this.segWidth+g,w=x*this.segWidth+g+1,C=(x+1)*this.segWidth+g,I=(x+1)*this.segWidth+g+1;o.push(b,w,C,w,I,C)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Ro),F1=function(t){mi(e,t);function e(r,i,n){r===void 0&&(r=200),n===void 0&&(n=0);var o=t.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return o.points=i,o._width=r,o.textureScale=n,o.build(),o}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var r=this.points;if(!!r){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(r.length<1)){i.data.length/4!==r.length&&(i.data=new Float32Array(r.length*4),n.data=new Float32Array(r.length*4),o.data=new Uint16Array((r.length-1)*6));var a=n.data,l=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var c=0,f=r[0],d=this._width*this.textureScale,v=r.length,_=0;_<v;_++){var m=_*4;if(this.textureScale>0){var g=f.x-r[_].x,x=f.y-r[_].y,b=Math.sqrt(g*g+x*x);f=r[_],c+=b/d}else c=_/(v-1);a[m]=c,a[m+1]=0,a[m+2]=c,a[m+3]=1}for(var w=0,_=0;_<v-1;_++){var m=_*2;l[w++]=m,l[w++]=m+1,l[w++]=m+2,l[w++]=m+2,l[w++]=m+1,l[w++]=m+3}n.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var i=r[0],n,o=0,a=0,l=this.buffers[0].data,c=r.length,f=0;f<c;f++){var d=r[f],v=f*4;f<r.length-1?n=r[f+1]:n=d,a=-(n.x-i.x),o=n.y-i.y;var _=Math.sqrt(o*o+a*a),m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=_,a/=_,o*=m,a*=m,l[v]=d.x+o,l[v+1]=d.y+a,l[v+2]=d.x-o,l[v+3]=d.y-a,i=d}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Ro);(function(t){mi(e,t);function e(r,i,n){n===void 0&&(n=0);var o=this,a=new F1(r.height,i,n),l=new vn(r);return n>0&&(r.baseTexture.wrapMode=Ce.REPEAT),o=t.call(this,a,l)||this,o.autoUpdate=!0,o}return e.prototype._render=function(r){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,r)},e})(De);var G1=function(t){mi(e,t);function e(r,i,n){var o=this,a=new ul(r.width,r.height,i,n),l=new vn(it.WHITE);return o=t.call(this,a,l)||this,o.texture=r,o.autoResize=!0,o}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,i=this.shader.texture,n=i.width,o=i.height;this.autoResize&&(r.width!==n||r.height!==o)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,r)},e.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,r)},e}(De);(function(t){mi(e,t);function e(r,i,n,o,a){r===void 0&&(r=it.EMPTY);var l=this,c=new Ro(i,n,o);c.getBuffer("aVertexPosition").static=!1;var f=new vn(r);return l=t.call(this,c,f,null,a)||this,l.autoUpdate=!0,l}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,r)},e})(De);var So=10;(function(t){mi(e,t);function e(r,i,n,o,a){i===void 0&&(i=So),n===void 0&&(n=So),o===void 0&&(o=So),a===void 0&&(a=So);var l=t.call(this,it.WHITE,4,4)||this;return l._origWidth=r.orig.width,l._origHeight=r.orig.height,l._width=l._origWidth,l._height=l._origHeight,l._leftWidth=i,l._rightWidth=o,l._topHeight=n,l._bottomHeight=a,l.texture=r,l}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var r=this.vertices,i=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*i,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*i,r[25]=r[27]=r[29]=r[31]=this._height},e.prototype.updateVerticalVertices=function(){var r=this.vertices,i=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*i,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*i,r[6]=r[14]=r[22]=r[30]=this._width},e.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,i=this._width>r?1:this._width/r,n=this._topHeight+this._bottomHeight,o=this._height>n?1:this._height/n,a=Math.min(i,o);return a},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var r=this.texture,i=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var n=1/this._origWidth,o=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=o*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e})(G1);/*!
 * @pixi/sprite-animated - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var cl=function(t,e){return cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},cl(t,e)};function B1(t,e){cl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(function(t){B1(e,t);function e(r,i){i===void 0&&(i=!0);var n=t.call(this,r[0]instanceof it?r[0]:r[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=r,n}return e.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ne.shared.add(this.update,this,qe.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(r){this.stop();var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(r){var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(r){if(!!this._playing){var i=this.animationSpeed*r,n=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=i/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(r){this.stop(),t.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(r){for(var i=[],n=0;n<r.length;++n)i.push(it.from(r[n]));return new e(i)},e.fromImages=function(r){for(var i=[],n=0;n<r.length;++n)i.push(it.from(r[n]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof it)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<r.length;i++)this._textures.push(r[i].texture),this._durations.push(r[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ne.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e})(Qe);/*!
 * pixi.js - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */cr.registerPlugin("accessibility",zb),cr.registerPlugin("extract",Lw),cr.registerPlugin("interaction",Jb),cr.registerPlugin("particle",bT),cr.registerPlugin("prepare",KT),cr.registerPlugin("batch",Iw),cr.registerPlugin("tilingSprite",r1),Pe.registerPlugin(_1),Pe.registerPlugin(Kw),Pe.registerPlugin(pT),Pe.registerPlugin(mT),Pe.registerPlugin(ZT),_o.registerPlugin(Wb),_o.registerPlugin(Hw);var M1={test:1},$p={exports:{}};(function(t){(function(){function e(T,R,F){return T.call.apply(T.bind,arguments)}function r(T,R,F){if(!T)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,L),T.apply(R,X)}}return function(){return T.apply(R,arguments)}}function i(T,R,F){return i=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?e:r,i.apply(null,arguments)}var n=Date.now||function(){return+new Date};function o(T,R){this.a=T,this.o=R||T,this.c=this.o.document}var a=!!window.FontFace;function l(T,R,F,L){if(R=T.c.createElement(R),F)for(var X in F)F.hasOwnProperty(X)&&(X=="style"?R.style.cssText=F[X]:R.setAttribute(X,F[X]));return L&&R.appendChild(T.c.createTextNode(L)),R}function c(T,R,F){T=T.c.getElementsByTagName(R)[0],T||(T=document.documentElement),T.insertBefore(F,T.lastChild)}function f(T){T.parentNode&&T.parentNode.removeChild(T)}function d(T,R,F){R=R||[],F=F||[];for(var L=T.className.split(/\s+/),X=0;X<R.length;X+=1){for(var K=!1,et=0;et<L.length;et+=1)if(R[X]===L[et]){K=!0;break}K||L.push(R[X])}for(R=[],X=0;X<L.length;X+=1){for(K=!1,et=0;et<F.length;et+=1)if(L[X]===F[et]){K=!0;break}K||R.push(L[X])}T.className=R.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function v(T,R){for(var F=T.className.split(/\s+/),L=0,X=F.length;L<X;L++)if(F[L]==R)return!0;return!1}function _(T){return T.o.location.hostname||T.a.location.hostname}function m(T,R,F){function L(){yt&&X&&K&&(yt(et),yt=null)}R=l(T,"link",{rel:"stylesheet",href:R,media:"all"});var X=!1,K=!0,et=null,yt=F||null;a?(R.onload=function(){X=!0,L()},R.onerror=function(){X=!0,et=Error("Stylesheet failed to load"),L()}):setTimeout(function(){X=!0,L()},0),c(T,"head",R)}function g(T,R,F,L){var X=T.c.getElementsByTagName("head")[0];if(X){var K=l(T,"script",{src:R}),et=!1;return K.onload=K.onreadystatechange=function(){et||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(et=!0,F&&F(null),K.onload=K.onreadystatechange=null,K.parentNode.tagName=="HEAD"&&X.removeChild(K))},X.appendChild(K),setTimeout(function(){et||(et=!0,F&&F(Error("Script load timeout")))},L||5e3),K}return null}function x(){this.a=0,this.c=null}function b(T){return T.a++,function(){T.a--,C(T)}}function w(T,R){T.c=R,C(T)}function C(T){T.a==0&&T.c&&(T.c(),T.c=null)}function I(T){this.a=T||"-"}I.prototype.c=function(T){for(var R=[],F=0;F<arguments.length;F++)R.push(arguments[F].replace(/[\W_]+/g,"").toLowerCase());return R.join(this.a)};function S(T,R){this.c=T,this.f=4,this.a="n";var F=(R||"n4").match(/^([nio])([1-9])$/i);F&&(this.a=F[1],this.f=parseInt(F[2],10))}function A(T){return D(T)+" "+(T.f+"00")+" 300px "+P(T.c)}function P(T){var R=[];T=T.split(/,\s*/);for(var F=0;F<T.length;F++){var L=T[F].replace(/['"]/g,"");L.indexOf(" ")!=-1||/^\d/.test(L)?R.push("'"+L+"'"):R.push(L)}return R.join(",")}function O(T){return T.a+T.f}function D(T){var R="normal";return T.a==="o"?R="oblique":T.a==="i"&&(R="italic"),R}function U(T){var R=4,F="n",L=null;return T&&((L=T.match(/(normal|oblique|italic)/i))&&L[1]&&(F=L[1].substr(0,1).toLowerCase()),(L=T.match(/([1-9]00|normal|bold)/i))&&L[1]&&(/bold/i.test(L[1])?R=7:/[1-9]00/.test(L[1])&&(R=parseInt(L[1].substr(0,1),10)))),F+R}function B(T,R){this.c=T,this.f=T.o.document.documentElement,this.h=R,this.a=new I("-"),this.j=R.events!==!1,this.g=R.classes!==!1}function $(T){T.g&&d(T.f,[T.a.c("wf","loading")]),W(T,"loading")}function j(T){if(T.g){var R=v(T.f,T.a.c("wf","active")),F=[],L=[T.a.c("wf","loading")];R||F.push(T.a.c("wf","inactive")),d(T.f,F,L)}W(T,"inactive")}function W(T,R,F){T.j&&T.h[R]&&(F?T.h[R](F.c,O(F)):T.h[R]())}function lt(){this.c={}}function z(T,R,F){var L=[],X;for(X in R)if(R.hasOwnProperty(X)){var K=T.c[X];K&&L.push(K(R[X],F))}return L}function k(T,R){this.c=T,this.f=R,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function V(T){c(T.c,"body",T.a)}function Pt(T){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+P(T.c)+";"+("font-style:"+D(T)+";font-weight:"+(T.f+"00")+";")}function dt(T,R,F,L,X,K){this.g=T,this.j=R,this.a=L,this.c=F,this.f=X||3e3,this.h=K||void 0}dt.prototype.start=function(){var T=this.c.o.document,R=this,F=n(),L=new Promise(function(et,yt){function bt(){n()-F>=R.f?yt():T.fonts.load(A(R.a),R.h).then(function(Lt){1<=Lt.length?et():setTimeout(bt,25)},function(){yt()})}bt()}),X=null,K=new Promise(function(et,yt){X=setTimeout(yt,R.f)});Promise.race([K,L]).then(function(){X&&(clearTimeout(X),X=null),R.g(R.a)},function(){R.j(R.a)})};function G(T,R,F,L,X,K,et){this.v=T,this.B=R,this.c=F,this.a=L,this.s=et||"BESbswy",this.f={},this.w=X||3e3,this.u=K||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),T=new S(this.a.c+",serif",O(this.a)),T=Pt(T),this.g.a.style.cssText=T,T=new S(this.a.c+",sans-serif",O(this.a)),T=Pt(T),this.h.a.style.cssText=T,T=new S("serif",O(this.a)),T=Pt(T),this.j.a.style.cssText=T,T=new S("sans-serif",O(this.a)),T=Pt(T),this.m.a.style.cssText=T,V(this.g),V(this.h),V(this.j),V(this.m)}var Y={D:"serif",C:"sans-serif"},ot=null;function q(){if(ot===null){var T=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ot=!!T&&(536>parseInt(T[1],10)||parseInt(T[1],10)===536&&11>=parseInt(T[2],10))}return ot}G.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=n(),St(this)};function nt(T,R,F){for(var L in Y)if(Y.hasOwnProperty(L)&&R===T.f[Y[L]]&&F===T.f[Y[L]])return!0;return!1}function St(T){var R=T.g.a.offsetWidth,F=T.h.a.offsetWidth,L;(L=R===T.f.serif&&F===T.f["sans-serif"])||(L=q()&&nt(T,R,F)),L?n()-T.A>=T.w?q()&&nt(T,R,F)&&(T.u===null||T.u.hasOwnProperty(T.a.c))?Ot(T,T.v):Ot(T,T.B):wt(T):Ot(T,T.v)}function wt(T){setTimeout(i(function(){St(this)},T),50)}function Ot(T,R){setTimeout(i(function(){f(this.g.a),f(this.h.a),f(this.j.a),f(this.m.a),R(this.a)},T),0)}function Mt(T,R,F){this.c=T,this.a=R,this.f=0,this.m=this.j=!1,this.s=F}var gt=null;Mt.prototype.g=function(T){var R=this.a;R.g&&d(R.f,[R.a.c("wf",T.c,O(T).toString(),"active")],[R.a.c("wf",T.c,O(T).toString(),"loading"),R.a.c("wf",T.c,O(T).toString(),"inactive")]),W(R,"fontactive",T),this.m=!0,vt(this)},Mt.prototype.h=function(T){var R=this.a;if(R.g){var F=v(R.f,R.a.c("wf",T.c,O(T).toString(),"active")),L=[],X=[R.a.c("wf",T.c,O(T).toString(),"loading")];F||L.push(R.a.c("wf",T.c,O(T).toString(),"inactive")),d(R.f,L,X)}W(R,"fontinactive",T),vt(this)};function vt(T){--T.f==0&&T.j&&(T.m?(T=T.a,T.g&&d(T.f,[T.a.c("wf","active")],[T.a.c("wf","loading"),T.a.c("wf","inactive")]),W(T,"active")):j(T.a))}function ft(T){this.j=T,this.a=new lt,this.h=0,this.f=this.g=!0}ft.prototype.load=function(T){this.c=new o(this.j,T.context||this.j),this.g=T.events!==!1,this.f=T.classes!==!1,at(this,new B(this.c,T),T)};function Rt(T,R,F,L,X){var K=--T.h==0;(T.f||T.g)&&setTimeout(function(){var et=X||null,yt=L||null||{};if(F.length===0&&K)j(R.a);else{R.f+=F.length,K&&(R.j=K);var bt,Lt=[];for(bt=0;bt<F.length;bt++){var xt=F[bt],Qt=yt[xt.c],Zt=R.a,Tr=xt;if(Zt.g&&d(Zt.f,[Zt.a.c("wf",Tr.c,O(Tr).toString(),"loading")]),W(Zt,"fontloading",Tr),Zt=null,gt===null)if(window.FontFace){var Tr=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),Yr=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);gt=Tr?42<parseInt(Tr[1],10):!Yr}else gt=!1;gt?Zt=new dt(i(R.g,R),i(R.h,R),R.c,xt,R.s,Qt):Zt=new G(i(R.g,R),i(R.h,R),R.c,xt,R.s,et,Qt),Lt.push(Zt)}for(bt=0;bt<Lt.length;bt++)Lt[bt].start()}},0)}function at(T,R,F){var X=[],L=F.timeout;$(R);var X=z(T.a,F,T.c),K=new Mt(T.c,R,L);for(T.h=X.length,R=0,F=X.length;R<F;R++)X[R].load(function(et,yt,bt){Rt(T,K,et,yt,bt)})}function qt(T,R){this.c=T,this.a=R}qt.prototype.load=function(T){function R(){if(K["__mti_fntLst"+L]){var et=K["__mti_fntLst"+L](),yt=[],bt;if(et)for(var Lt=0;Lt<et.length;Lt++){var xt=et[Lt].fontfamily;et[Lt].fontStyle!=null&&et[Lt].fontWeight!=null?(bt=et[Lt].fontStyle+et[Lt].fontWeight,yt.push(new S(xt,bt))):yt.push(new S(xt))}T(yt)}else setTimeout(function(){R()},50)}var F=this,L=F.a.projectId,X=F.a.version;if(L){var K=F.c.o;g(this.c,(F.a.api||"https://fast.fonts.net/jsapi")+"/"+L+".js"+(X?"?v="+X:""),function(et){et?T([]):(K["__MonotypeConfiguration__"+L]=function(){return F.a},R())}).id="__MonotypeAPIScript__"+L}else T([])};function Xt(T,R){this.c=T,this.a=R}Xt.prototype.load=function(T){var R,F,L=this.a.urls||[],X=this.a.families||[],K=this.a.testStrings||{},et=new x;for(R=0,F=L.length;R<F;R++)m(this.c,L[R],b(et));var yt=[];for(R=0,F=X.length;R<F;R++)if(L=X[R].split(":"),L[1])for(var bt=L[1].split(","),Lt=0;Lt<bt.length;Lt+=1)yt.push(new S(L[0],bt[Lt]));else yt.push(new S(L[0]));w(et,function(){T(yt,K)})};function ut(T,R){T?this.c=T:this.c=de,this.a=[],this.f=[],this.g=R||""}var de="https://fonts.googleapis.com/css";function be(T,R){for(var F=R.length,L=0;L<F;L++){var X=R[L].split(":");X.length==3&&T.f.push(X.pop());var K="";X.length==2&&X[1]!=""&&(K=":"),T.a.push(X.join(K))}}function tr(T){if(T.a.length==0)throw Error("No fonts to load!");if(T.c.indexOf("kit=")!=-1)return T.c;for(var R=T.a.length,F=[],L=0;L<R;L++)F.push(T.a[L].replace(/ /g,"+"));return R=T.c+"?family="+F.join("%7C"),0<T.f.length&&(R+="&subset="+T.f.join(",")),0<T.g.length&&(R+="&text="+encodeURIComponent(T.g)),R}function jr(T){this.f=T,this.a=[],this.c={}}var xr={latin:"BESbswy","latin-ext":"\xE7\xF6\xFC\u011F\u015F",cyrillic:"\u0439\u044F\u0416",greek:"\u03B1\u03B2\u03A3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Ui={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},zr={i:"i",italic:"i",n:"n",normal:"n"},Wr=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function hh(T){for(var R=T.f.length,F=0;F<R;F++){var L=T.f[F].split(":"),X=L[0].replace(/\+/g," "),K=["n4"];if(2<=L.length){var et,yt=L[1];if(et=[],yt)for(var yt=yt.split(","),bt=yt.length,Lt=0;Lt<bt;Lt++){var xt;if(xt=yt[Lt],xt.match(/^[\w-]+$/)){var Qt=Wr.exec(xt.toLowerCase());if(Qt==null)xt="";else{if(xt=Qt[2],xt=xt==null||xt==""?"n":zr[xt],Qt=Qt[1],Qt==null||Qt=="")Qt="4";else var Zt=Ui[Qt],Qt=Zt||(isNaN(Qt)?"4":Qt.substr(0,1));xt=[xt,Qt].join("")}}else xt="";xt&&et.push(xt)}0<et.length&&(K=et),L.length==3&&(L=L[2],et=[],L=L?L.split(","):et,0<L.length&&(L=xr[L[0]])&&(T.c[X]=L))}for(T.c[X]||(L=xr[X])&&(T.c[X]=L),L=0;L<K.length;L+=1)T.a.push(new S(X,K[L]))}}function In(T,R){this.c=T,this.a=R}var Li={Arimo:!0,Cousine:!0,Tinos:!0};In.prototype.load=function(T){var R=new x,F=this.c,L=new ut(this.a.api,this.a.text),X=this.a.families;be(L,X);var K=new jr(X);hh(K),m(F,tr(L),b(R)),w(R,function(){T(K.a,K.c,Li)})};function us(T,R){this.c=T,this.a=R}us.prototype.load=function(T){var R=this.a.id,F=this.c.o;R?g(this.c,(this.a.api||"https://use.typekit.net")+"/"+R+".js",function(L){if(L)T([]);else if(F.Typekit&&F.Typekit.config&&F.Typekit.config.fn){L=F.Typekit.config.fn;for(var X=[],K=0;K<L.length;K+=2)for(var et=L[K],yt=L[K+1],bt=0;bt<yt.length;bt++)X.push(new S(et,yt[bt]));try{F.Typekit.load({events:!1,classes:!1,async:!0})}catch{}T(X)}},2e3):T([])};function er(T,R){this.c=T,this.f=R,this.a=[]}er.prototype.load=function(T){var R=this.f.id,F=this.c.o,L=this;R?(F.__webfontfontdeckmodule__||(F.__webfontfontdeckmodule__={}),F.__webfontfontdeckmodule__[R]=function(X,K){for(var et=0,yt=K.fonts.length;et<yt;++et){var bt=K.fonts[et];L.a.push(new S(bt.name,U("font-weight:"+bt.weight+";font-style:"+bt.style)))}T(L.a)},g(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+_(this.c)+"/"+R+".js",function(X){X&&T([])})):T([])};var ve=new ft(window);ve.a.c.custom=function(T,R){return new Xt(R,T)},ve.a.c.fontdeck=function(T,R){return new er(R,T)},ve.a.c.monotype=function(T,R){return new qt(R,T)},ve.a.c.typekit=function(T,R){return new us(R,T)},ve.a.c.google=function(T,R){return new In(R,T)};var wr={load:i(ve.load,ve)};t.exports?t.exports=wr:(window.WebFont=wr,window.WebFontConfig&&ve.load(window.WebFontConfig))})()})($p);var k1=$p.exports,mn={exports:{}},D1="Function.prototype.bind called on incompatible ",fl=Array.prototype.slice,V1=Object.prototype.toString,H1="[object Function]",X1=function(e){var r=this;if(typeof r!="function"||V1.call(r)!==H1)throw new TypeError(D1+r);for(var i=fl.call(arguments,1),n,o=function(){if(this instanceof n){var d=r.apply(this,i.concat(fl.call(arguments)));return Object(d)===d?d:this}else return r.apply(e,i.concat(fl.call(arguments)))},a=Math.max(0,r.length-i.length),l=[],c=0;c<a;c++)l.push("$"+c);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var f=function(){};f.prototype=r.prototype,n.prototype=new f,f.prototype=null}return n},$1=X1,pl=Function.prototype.bind||$1,dl=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==n||a.enumerable!==!0)return!1}return!0},jp=typeof Symbol!="undefined"&&Symbol,j1=dl,vl=function(){return typeof jp!="function"||typeof Symbol!="function"||typeof jp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:j1()},z1=pl,_r=z1.call(Function.call,Object.prototype.hasOwnProperty),mt,gi=SyntaxError,zp=Function,yi=TypeError,_l=function(t){try{return zp('"use strict"; return ('+t+").constructor;")()}catch{}},Xr=Object.getOwnPropertyDescriptor;if(Xr)try{Xr({},"")}catch{Xr=null}var ml=function(){throw new yi},W1=Xr?function(){try{return arguments.callee,ml}catch{try{return Xr(arguments,"callee").get}catch{return ml}}}():ml,bi=vl(),mr=Object.getPrototypeOf||function(t){return t.__proto__},xi={},Y1=typeof Uint8Array=="undefined"?mt:mr(Uint8Array),wi={"%AggregateError%":typeof AggregateError=="undefined"?mt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?mt:ArrayBuffer,"%ArrayIteratorPrototype%":bi?mr([][Symbol.iterator]()):mt,"%AsyncFromSyncIteratorPrototype%":mt,"%AsyncFunction%":xi,"%AsyncGenerator%":xi,"%AsyncGeneratorFunction%":xi,"%AsyncIteratorPrototype%":xi,"%Atomics%":typeof Atomics=="undefined"?mt:Atomics,"%BigInt%":typeof BigInt=="undefined"?mt:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?mt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?mt:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?mt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?mt:FinalizationRegistry,"%Function%":zp,"%GeneratorFunction%":xi,"%Int8Array%":typeof Int8Array=="undefined"?mt:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?mt:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?mt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bi?mr(mr([][Symbol.iterator]())):mt,"%JSON%":typeof JSON=="object"?JSON:mt,"%Map%":typeof Map=="undefined"?mt:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!bi?mt:mr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?mt:Promise,"%Proxy%":typeof Proxy=="undefined"?mt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?mt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?mt:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!bi?mt:mr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?mt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bi?mr(""[Symbol.iterator]()):mt,"%Symbol%":bi?Symbol:mt,"%SyntaxError%":gi,"%ThrowTypeError%":W1,"%TypedArray%":Y1,"%TypeError%":yi,"%Uint8Array%":typeof Uint8Array=="undefined"?mt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?mt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?mt:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?mt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?mt:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?mt:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?mt:WeakSet},q1=function t(e){var r;if(e==="%AsyncFunction%")r=_l("async function () {}");else if(e==="%GeneratorFunction%")r=_l("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=_l("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&(r=mr(n.prototype))}return wi[e]=r,r},Wp={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},gn=pl,Oo=_r,K1=gn.call(Function.call,Array.prototype.concat),Z1=gn.call(Function.apply,Array.prototype.splice),Yp=gn.call(Function.call,String.prototype.replace),Uo=gn.call(Function.call,String.prototype.slice),J1=gn.call(Function.call,RegExp.prototype.exec),Q1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tE=/\\(\\)?/g,eE=function(e){var r=Uo(e,0,1),i=Uo(e,-1);if(r==="%"&&i!=="%")throw new gi("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new gi("invalid intrinsic syntax, expected opening `%`");var n=[];return Yp(e,Q1,function(o,a,l,c){n[n.length]=l?Yp(c,tE,"$1"):a||o}),n},rE=function(e,r){var i=e,n;if(Oo(Wp,i)&&(n=Wp[i],i="%"+n[0]+"%"),Oo(wi,i)){var o=wi[i];if(o===xi&&(o=q1(i)),typeof o=="undefined"&&!r)throw new yi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new gi("intrinsic "+e+" does not exist!")},Ct=function(e,r){if(typeof e!="string"||e.length===0)throw new yi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new yi('"allowMissing" argument must be a boolean');if(J1(/^%?[^%]*%?$/g,e)===null)throw new gi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=eE(e),n=i.length>0?i[0]:"",o=rE("%"+n+"%",r),a=o.name,l=o.value,c=!1,f=o.alias;f&&(n=f[0],Z1(i,K1([0,1],f)));for(var d=1,v=!0;d<i.length;d+=1){var _=i[d],m=Uo(_,0,1),g=Uo(_,-1);if((m==='"'||m==="'"||m==="`"||g==='"'||g==="'"||g==="`")&&m!==g)throw new gi("property names with quotes must have matching quotes");if((_==="constructor"||!v)&&(c=!0),n+="."+_,a="%"+n+"%",Oo(wi,a))l=wi[a];else if(l!=null){if(!(_ in l)){if(!r)throw new yi("base intrinsic for "+e+" exists, but the property is not available.");return}if(Xr&&d+1>=i.length){var x=Xr(l,_);v=!!x,v&&"get"in x&&!("originalValue"in x.get)?l=x.get:l=l[_]}else v=Oo(l,_),l=l[_];v&&!c&&(wi[a]=l)}}return l};(function(t){var e=pl,r=Ct,i=r("%Function.prototype.apply%"),n=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(n,i),a=r("%Object.getOwnPropertyDescriptor%",!0),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(v){var _=o(e,n,arguments);if(a&&l){var m=a(_,"length");m.configurable&&l(_,"length",{value:1+c(0,v.length-(arguments.length-1))})}return _};var f=function(){return o(e,i,arguments)};l?l(t.exports,"apply",{value:f}):t.exports.apply=f})(mn);var qp=Object.prototype.toString,Kp=function(e){var r=qp.call(e),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&qp.call(e.callee)==="[object Function]"),i},Zp;if(!Object.keys){var Lo=Object.prototype.hasOwnProperty,Jp=Object.prototype.toString,iE=Kp,Qp=Object.prototype.propertyIsEnumerable,nE=!Qp.call({toString:null},"toString"),oE=Qp.call(function(){},"prototype"),Fo=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],gl=function(t){var e=t.constructor;return e&&e.prototype===t},sE={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},aE=function(){if(typeof window=="undefined")return!1;for(var t in window)try{if(!sE["$"+t]&&Lo.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{gl(window[t])}catch{return!0}}catch{return!0}return!1}(),lE=function(t){if(typeof window=="undefined"||!aE)return gl(t);try{return gl(t)}catch{return!1}};Zp=function(e){var r=e!==null&&typeof e=="object",i=Jp.call(e)==="[object Function]",n=iE(e),o=r&&Jp.call(e)==="[object String]",a=[];if(!r&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var l=oE&&i;if(o&&e.length>0&&!Lo.call(e,0))for(var c=0;c<e.length;++c)a.push(String(c));if(n&&e.length>0)for(var f=0;f<e.length;++f)a.push(String(f));else for(var d in e)!(l&&d==="prototype")&&Lo.call(e,d)&&a.push(String(d));if(nE)for(var v=lE(e),_=0;_<Fo.length;++_)!(v&&Fo[_]==="constructor")&&Lo.call(e,Fo[_])&&a.push(Fo[_]);return a}}var hE=Zp,uE=Array.prototype.slice,cE=Kp,td=Object.keys,Go=td?function(e){return td(e)}:hE,ed=Object.keys;Go.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(i){return cE(i)?ed(uE.call(i)):ed(i)})}else Object.keys=Go;return Object.keys||Go};var fE=Go,pE=Ct,yl=pE("%Object.defineProperty%",!0),bl=function(){if(yl)try{return yl({},"a",{value:1}),!0}catch{return!1}return!1};bl.hasArrayLengthDefineBug=function(){if(!bl())return null;try{return yl([],"length",{value:1}).length!==1}catch{return!0}};var rd=bl,dE=fE,vE=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",_E=Object.prototype.toString,mE=Array.prototype.concat,id=Object.defineProperty,gE=function(t){return typeof t=="function"&&_E.call(t)==="[object Function]"},yE=rd(),nd=id&&yE,bE=function(t,e,r,i){e in t&&(!gE(i)||!i())||(nd?id(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},od=function(t,e){var r=arguments.length>2?arguments[2]:{},i=dE(e);vE&&(i=mE.call(i,Object.getOwnPropertySymbols(e)));for(var n=0;n<i.length;n+=1)bE(t,i[n],e[i[n]],r[i[n]])};od.supportsDescriptors=!!nd;var Bo=od,Mo=function(){if(typeof Promise!="function")throw new TypeError("`Promise.allSettled` requires a global `Promise` be available.")},xE=Ct,wE=mn.exports,sd=xE("%Promise.resolve%",!0),ad=sd&&wE(sd),TE=function(e,r){if(!ad)throw new SyntaxError("This environment does not support Promises.");return ad(e,r)},EE=function(e){if(e===null)return"Null";if(typeof e=="undefined")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"},CE=EE,ye=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":CE(e)},ko={exports:{}},IE=dl,Do=function(){return IE()&&!!Symbol.toStringTag},ld=Ct,hd=mn.exports,PE=hd(ld("String.prototype.indexOf")),Se=function(e,r){var i=ld(e,!!r);return typeof i=="function"&&PE(e,".prototype.")>-1?hd(i):i},RE=Do(),AE=Se,xl=AE("Object.prototype.toString"),Vo=function(e){return RE&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:xl(e)==="[object Arguments]"},ud=function(e){return Vo(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&xl(e)!=="[object Array]"&&xl(e.callee)==="[object Function]"},NE=function(){return Vo(arguments)}();Vo.isLegacyArguments=ud;var SE=NE?Vo:ud,OE={}.toString,UE=Array.isArray||function(t){return OE.call(t)=="[object Array]"},LE=String.prototype.valueOf,FE=function(e){try{return LE.call(e),!0}catch{return!1}},GE=Object.prototype.toString,BE="[object String]",ME=Do(),cd=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:ME?FE(e):GE.call(e)===BE},wl=typeof Map=="function"&&Map.prototype?Map:null,kE=typeof Set=="function"&&Set.prototype?Set:null,Ho;wl||(Ho=function(e){return!1});var fd=wl?Map.prototype.has:null,pd=kE?Set.prototype.has:null;!Ho&&!fd&&(Ho=function(e){return!1});var DE=Ho||function(e){if(!e||typeof e!="object")return!1;try{if(fd.call(e),pd)try{pd.call(e)}catch{return!0}return e instanceof wl}catch{}return!1},VE=typeof Map=="function"&&Map.prototype?Map:null,Tl=typeof Set=="function"&&Set.prototype?Set:null,Xo;Tl||(Xo=function(e){return!1});var dd=VE?Map.prototype.has:null,vd=Tl?Set.prototype.has:null;!Xo&&!vd&&(Xo=function(e){return!1});var HE=Xo||function(e){if(!e||typeof e!="object")return!1;try{if(vd.call(e),dd)try{dd.call(e)}catch{return!0}return e instanceof Tl}catch{}return!1},_d=SE;if(vl()||dl()){var El=Symbol.iterator;ko.exports=function(e){if(e!=null&&typeof e[El]!="undefined")return e[El]();if(_d(e))return Array.prototype[El].call(e)}}else{var XE=UE,$E=cd,md=Ct,jE=md("%Map%",!0),zE=md("%Set%",!0),Oe=Se,gd=Oe("Array.prototype.push"),yd=Oe("String.prototype.charCodeAt"),WE=Oe("String.prototype.slice"),YE=function(e,r){var i=e.length;if(r+1>=i)return r+1;var n=yd(e,r);if(n<55296||n>56319)return r+1;var o=yd(e,r+1);return o<56320||o>57343?r+1:r+2},Cl=function(e){var r=0;return{next:function(){var n=r>=e.length,o;return n||(o=e[r],r+=1),{done:n,value:o}}}},bd=function(e,r){if(XE(e)||_d(e))return Cl(e);if($E(e)){var i=0;return{next:function(){var o=YE(e,i),a=WE(e,i,o);return i=o,{done:o>e.length,value:a}}}}if(r&&typeof e["_es6-shim iterator_"]!="undefined")return e["_es6-shim iterator_"]()};if(!jE&&!zE)ko.exports=function(e){if(e!=null)return bd(e,!0)};else{var qE=DE,KE=HE,xd=Oe("Map.prototype.forEach",!0),wd=Oe("Set.prototype.forEach",!0);if(typeof process=="undefined"||!process.versions||!process.versions.node)var Td=Oe("Map.prototype.iterator",!0),Ed=Oe("Set.prototype.iterator",!0),Cd=function(t){var e=!1;return{next:function(){try{return{done:e,value:e?void 0:t.next()}}catch{return e=!0,{done:!0,value:void 0}}}}};var Id=Oe("Map.prototype.@@iterator",!0)||Oe("Map.prototype._es6-shim iterator_",!0),Pd=Oe("Set.prototype.@@iterator",!0)||Oe("Set.prototype._es6-shim iterator_",!0),ZE=function(e){if(qE(e)){if(Td)return Cd(Td(e));if(Id)return Id(e);if(xd){var r=[];return xd(e,function(n,o){gd(r,[o,n])}),Cl(r)}}if(KE(e)){if(Ed)return Cd(Ed(e));if(Pd)return Pd(e);if(wd){var i=[];return wd(e,function(n){gd(i,n)}),Cl(i)}}};ko.exports=function(e){return ZE(e)||bd(e)}}}var Rd=TypeError,JE=function(e){if(!e||typeof e.next!="function")throw new Rd("iterator must be an object with a `next` method");if(arguments.length>1){var r=arguments[1];if(typeof r!="function")throw new Rd("`callback`, if provided, must be a function")}for(var i=r||[],n;(n=e.next())&&!n.done;)r?r(n.value):i.push(n.value);if(!r)return i},QE=ko.exports,tC=TypeError,Ad=JE,eC=function(e){var r=QE(e);if(!r)throw new tC("non-iterable value provided");return arguments.length>1?Ad(r,arguments[1]):Ad(r)},rC=Ct,iC=rC("%TypeError%"),nC=function(e,r){if(e==null)throw new iC(r||"Cannot call method on "+e);return e},Nd=nC,oC=Ct,sC=oC("%Math.abs%"),aC=function(e){return sC(e)},lC=Math.floor,hC=function(e){return lC(e)},Sd=Number.isNaN||function(e){return e!==e},uC=Number.isNaN||function(t){return t!==t},cC=Number.isFinite||function(t){return typeof t=="number"&&!uC(t)&&t!==1/0&&t!==-1/0},fC=aC,pC=hC,dC=ye,vC=Sd,_C=cC,Od=function(e){if(dC(e)!=="Number"||vC(e)||!_C(e))return!1;var r=fC(e);return pC(r)===r},yn=Ct,Il=yn("%Array.prototype%"),mC=yn("%RangeError%"),gC=yn("%SyntaxError%"),yC=yn("%TypeError%"),bC=Od,xC=Math.pow(2,32)-1,Ud=yn("%Object.setPrototypeOf%",!0)||([].__proto__!==Il?null:function(t,e){return t.__proto__=e,t}),wC=function(e){if(!bC(e)||e<0)throw new yC("Assertion failed: `length` must be an integer Number >= 0");if(e>xC)throw new mC("length is greater than (2**32 - 1)");var r=arguments.length>1?arguments[1]:Il,i=[];if(r!==Il){if(!Ud)throw new gC("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");Ud(i,r)}return e!==0&&(i.length=e),i},TC={},EC=Object.freeze(Object.defineProperty({__proto__:null,default:TC},Symbol.toStringTag,{value:"Module"})),CC=qm(EC),Pl=typeof Map=="function"&&Map.prototype,Rl=Object.getOwnPropertyDescriptor&&Pl?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,$o=Pl&&Rl&&typeof Rl.get=="function"?Rl.get:null,IC=Pl&&Map.prototype.forEach,Al=typeof Set=="function"&&Set.prototype,Nl=Object.getOwnPropertyDescriptor&&Al?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,jo=Al&&Nl&&typeof Nl.get=="function"?Nl.get:null,PC=Al&&Set.prototype.forEach,RC=typeof WeakMap=="function"&&WeakMap.prototype,bn=RC?WeakMap.prototype.has:null,AC=typeof WeakSet=="function"&&WeakSet.prototype,xn=AC?WeakSet.prototype.has:null,NC=typeof WeakRef=="function"&&WeakRef.prototype,Ld=NC?WeakRef.prototype.deref:null,SC=Boolean.prototype.valueOf,OC=Object.prototype.toString,UC=Function.prototype.toString,LC=String.prototype.match,Sl=String.prototype.slice,gr=String.prototype.replace,FC=String.prototype.toUpperCase,Fd=String.prototype.toLowerCase,Gd=RegExp.prototype.test,Bd=Array.prototype.concat,Ve=Array.prototype.join,GC=Array.prototype.slice,Md=Math.floor,Ol=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ul=Object.getOwnPropertySymbols,Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="object",le=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ti?"object":"symbol")?Symbol.toStringTag:null,kd=Object.prototype.propertyIsEnumerable,Dd=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Vd(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Gd.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-Md(-t):Md(t);if(i!==t){var n=String(i),o=Sl.call(e,n.length+1);return gr.call(n,r,"$&_")+"."+gr.call(gr.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return gr.call(e,r,"$&_")}var Fl=CC,Hd=Fl.custom,Xd=zd(Hd)?Hd:null,BC=function t(e,r,i,n){var o=r||{};if(yr(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(yr(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=yr(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(yr(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(yr(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=o.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Yd(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return l?Vd(e,c):c}if(typeof e=="bigint"){var f=String(e)+"n";return l?Vd(e,f):f}var d=typeof o.depth=="undefined"?5:o.depth;if(typeof i=="undefined"&&(i=0),i>=d&&d>0&&typeof e=="object")return Gl(e)?"[Array]":"[Object]";var v=eI(o,i);if(typeof n=="undefined")n=[];else if(Wd(n,e)>=0)return"[Circular]";function _(W,lt,z){if(lt&&(n=GC.call(n),n.push(lt)),z){var k={depth:o.depth};return yr(o,"quoteStyle")&&(k.quoteStyle=o.quoteStyle),t(W,k,i+1,n)}return t(W,o,i+1,n)}if(typeof e=="function"&&!jd(e)){var m=zC(e),g=zo(e,_);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(g.length>0?" { "+Ve.call(g,", ")+" }":"")}if(zd(e)){var x=Ti?gr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ll.call(e);return typeof e=="object"&&!Ti?wn(x):x}if(JC(e)){for(var b="<"+Fd.call(String(e.nodeName)),w=e.attributes||[],C=0;C<w.length;C++)b+=" "+w[C].name+"="+$d(MC(w[C].value),"double",o);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+Fd.call(String(e.nodeName))+">",b}if(Gl(e)){if(e.length===0)return"[]";var I=zo(e,_);return v&&!tI(I)?"["+Ml(I,v)+"]":"[ "+Ve.call(I,", ")+" ]"}if(DC(e)){var S=zo(e,_);return!("cause"in Error.prototype)&&"cause"in e&&!kd.call(e,"cause")?"{ ["+String(e)+"] "+Ve.call(Bd.call("[cause]: "+_(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ve.call(S,", ")+" }"}if(typeof e=="object"&&a){if(Xd&&typeof e[Xd]=="function"&&Fl)return Fl(e,{depth:d-i});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(WC(e)){var A=[];return IC.call(e,function(W,lt){A.push(_(lt,e,!0)+" => "+_(W,e))}),qd("Map",$o.call(e),A,v)}if(KC(e)){var P=[];return PC.call(e,function(W){P.push(_(W,e))}),qd("Set",jo.call(e),P,v)}if(YC(e))return Bl("WeakMap");if(ZC(e))return Bl("WeakSet");if(qC(e))return Bl("WeakRef");if(HC(e))return wn(_(Number(e)));if($C(e))return wn(_(Ol.call(e)));if(XC(e))return wn(SC.call(e));if(VC(e))return wn(_(String(e)));if(!kC(e)&&!jd(e)){var O=zo(e,_),D=Dd?Dd(e)===Object.prototype:e instanceof Object||e.constructor===Object,U=e instanceof Object?"":"null prototype",B=!D&&le&&Object(e)===e&&le in e?Sl.call(br(e),8,-1):U?"Object":"",$=D||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",j=$+(B||U?"["+Ve.call(Bd.call([],B||[],U||[]),": ")+"] ":"");return O.length===0?j+"{}":v?j+"{"+Ml(O,v)+"}":j+"{ "+Ve.call(O,", ")+" }"}return String(e)};function $d(t,e,r){var i=(r.quoteStyle||e)==="double"?'"':"'";return i+t+i}function MC(t){return gr.call(String(t),/"/g,"&quot;")}function Gl(t){return br(t)==="[object Array]"&&(!le||!(typeof t=="object"&&le in t))}function kC(t){return br(t)==="[object Date]"&&(!le||!(typeof t=="object"&&le in t))}function jd(t){return br(t)==="[object RegExp]"&&(!le||!(typeof t=="object"&&le in t))}function DC(t){return br(t)==="[object Error]"&&(!le||!(typeof t=="object"&&le in t))}function VC(t){return br(t)==="[object String]"&&(!le||!(typeof t=="object"&&le in t))}function HC(t){return br(t)==="[object Number]"&&(!le||!(typeof t=="object"&&le in t))}function XC(t){return br(t)==="[object Boolean]"&&(!le||!(typeof t=="object"&&le in t))}function zd(t){if(Ti)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Ll)return!1;try{return Ll.call(t),!0}catch{}return!1}function $C(t){if(!t||typeof t!="object"||!Ol)return!1;try{return Ol.call(t),!0}catch{}return!1}var jC=Object.prototype.hasOwnProperty||function(t){return t in this};function yr(t,e){return jC.call(t,e)}function br(t){return OC.call(t)}function zC(t){if(t.name)return t.name;var e=LC.call(UC.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Wd(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}function WC(t){if(!$o||!t||typeof t!="object")return!1;try{$o.call(t);try{jo.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function YC(t){if(!bn||!t||typeof t!="object")return!1;try{bn.call(t,bn);try{xn.call(t,xn)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function qC(t){if(!Ld||!t||typeof t!="object")return!1;try{return Ld.call(t),!0}catch{}return!1}function KC(t){if(!jo||!t||typeof t!="object")return!1;try{jo.call(t);try{$o.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function ZC(t){if(!xn||!t||typeof t!="object")return!1;try{xn.call(t,xn);try{bn.call(t,bn)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function JC(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Yd(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return Yd(Sl.call(t,0,e.maxStringLength),e)+i}var n=gr.call(gr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,QC);return $d(n,"single",e)}function QC(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+FC.call(e.toString(16))}function wn(t){return"Object("+t+")"}function Bl(t){return t+" { ? }"}function qd(t,e,r,i){var n=i?Ml(r,i):Ve.call(r,", ");return t+" ("+e+") {"+n+"}"}function tI(t){for(var e=0;e<t.length;e++)if(Wd(t[e],`
`)>=0)return!1;return!0}function eI(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Ve.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Ve.call(Array(e+1),r)}}function Ml(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Ve.call(t,","+r)+`
`+e.prev}function zo(t,e){var r=Gl(t),i=[];if(r){i.length=t.length;for(var n=0;n<t.length;n++)i[n]=yr(t,n)?e(t[n],t):""}var o=typeof Ul=="function"?Ul(t):[],a;if(Ti){a={};for(var l=0;l<o.length;l++)a["$"+o[l]]=o[l]}for(var c in t)!yr(t,c)||r&&String(Number(c))===c&&c<t.length||Ti&&a["$"+c]instanceof Symbol||(Gd.call(/[^\w$]/,c)?i.push(e(c,t)+": "+e(t[c],t)):i.push(c+": "+e(t[c],t)));if(typeof Ul=="function")for(var f=0;f<o.length;f++)kd.call(t,o[f])&&i.push("["+e(o[f])+"]: "+e(t[o[f]],t));return i}var Ei=function(e){return typeof e=="string"||typeof e=="symbol"},rI=Ct,Kd=rI("%TypeError%"),iI=BC,nI=Ei,oI=ye,Zd=function(e,r){if(oI(e)!=="Object")throw new Kd("Assertion failed: Type(O) is not Object");if(!nI(r))throw new Kd("Assertion failed: IsPropertyKey(P) is not true, got "+iI(r));return e[r]},sI=Ct,Jd=sI("%Array%"),aI=!Jd.isArray&&Se("Object.prototype.toString"),Qd=Jd.isArray||function(e){return aI(e)==="[object Array]"},kl=Qd,Dl={exports:{}},lI=Ct,hI=Ct,uI=_r,cI=hI("%TypeError%"),fI=function(e,r){if(e.Type(r)!=="Object")return!1;var i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in r)if(uI(r,n)&&!i[n])return!1;if(e.IsDataDescriptor(r)&&e.IsAccessorDescriptor(r))throw new cI("Property Descriptors may not be both accessor and data descriptors");return!0},tv=rd,pI=Ct,ev=tv()&&pI("%Object.defineProperty%",!0),rv=tv.hasArrayLengthDefineBug(),dI=rv&&Qd,vI=Se,_I=vI("Object.prototype.propertyIsEnumerable"),iv=function(e,r,i,n,o,a){if(!ev){if(!e(a)||!a["[[Configurable]]"]||!a["[[Writable]]"]||o in n&&_I(n,o)!==!!a["[[Enumerable]]"])return!1;var l=a["[[Value]]"];return n[o]=l,r(n[o],l)}return rv&&o==="length"&&"[[Value]]"in a&&dI(n)&&n.length!==a["[[Value]]"]?(n.length=a["[[Value]]"],n.length===a["[[Value]]"]):(ev(n,o,i(a)),!0)},nv=_r,mI=function(e){return nv(e,"[[StartIndex]]")&&nv(e,"[[EndIndex]]")&&e["[[StartIndex]]"]>=0&&e["[[EndIndex]]"]>=e["[[StartIndex]]"]&&String(parseInt(e["[[StartIndex]]"],10))===String(e["[[StartIndex]]"])&&String(parseInt(e["[[EndIndex]]"],10))===String(e["[[EndIndex]]"])},ov=Ct,sv=ov("%TypeError%"),gI=ov("%SyntaxError%"),Wo=_r,yI=mI,bI={"Property Descriptor":function(e){var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var i in e)if(Wo(e,i)&&!r[i])return!1;var n=Wo(e,"[[Value]]"),o=Wo(e,"[[Get]]")||Wo(e,"[[Set]]");if(n&&o)throw new sv("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":yI},Vl=function(e,r,i,n){var o=bI[r];if(typeof o!="function")throw new gI("unknown record type: "+r);if(e(n)!=="Object"||!o(n))throw new sv(i+" must be a "+r)},xI=function(e){if(typeof e=="undefined")return e;var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=!!e["[[Configurable]]"]),r},wI=Vl,TI=xI,EI=ye,av=function(e){return typeof e!="undefined"&&wI(EI,"Property Descriptor","Desc",e),TI(e)},lv=_r,CI=Vl,II=ye,PI=function(e){return!(typeof e=="undefined"||(CI(II,"Property Descriptor","Desc",e),!lv(e,"[[Get]]")&&!lv(e,"[[Set]]")))},hv=_r,RI=Vl,AI=ye,uv=function(e){return!(typeof e=="undefined"||(RI(AI,"Property Descriptor","Desc",e),!hv(e,"[[Value]]")&&!hv(e,"[[Writable]]")))},cv=Sd,fv=function(e,r){return e===r?e===0?1/e===1/r:!0:cv(e)&&cv(r)},pv=function(e){return!!e},dv=Function.prototype.toString,Ci=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Hl,Yo;if(typeof Ci=="function"&&typeof Object.defineProperty=="function")try{Hl=Object.defineProperty({},"length",{get:function(){throw Yo}}),Yo={},Ci(function(){throw 42},null,Hl)}catch(t){t!==Yo&&(Ci=null)}else Ci=null;var NI=/^\s*class\b/,Xl=function(e){try{var r=dv.call(e);return NI.test(r)}catch{return!1}},SI=function(e){try{return Xl(e)?!1:(dv.call(e),!0)}catch{return!1}},OI=Object.prototype.toString,UI="[object Function]",LI="[object GeneratorFunction]",FI=typeof Symbol=="function"&&!!Symbol.toStringTag,vv=typeof document=="object"&&typeof document.all=="undefined"&&document.all!==void 0?document.all:{},_v=Ci?function(e){if(e===vv)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;try{Ci(e,null,Hl)}catch(r){if(r!==Yo)return!1}return!Xl(e)}:function(e){if(e===vv)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;if(FI)return SI(e);if(Xl(e))return!1;var r=OI.call(e);return r===UI||r===LI},mv=_v,He=_r,GI=Ct,qo=GI("%TypeError%"),BI=ye,$l=pv,gv=mv,yv=function(e){if(BI(e)!=="Object")throw new qo("ToPropertyDescriptor requires an object");var r={};if(He(e,"enumerable")&&(r["[[Enumerable]]"]=$l(e.enumerable)),He(e,"configurable")&&(r["[[Configurable]]"]=$l(e.configurable)),He(e,"value")&&(r["[[Value]]"]=e.value),He(e,"writable")&&(r["[[Writable]]"]=$l(e.writable)),He(e,"get")){var i=e.get;if(typeof i!="undefined"&&!gv(i))throw new qo("getter must be a function");r["[[Get]]"]=i}if(He(e,"set")){var n=e.set;if(typeof n!="undefined"&&!gv(n))throw new qo("setter must be a function");r["[[Set]]"]=n}if((He(r,"[[Get]]")||He(r,"[[Set]]"))&&(He(r,"[[Value]]")||He(r,"[[Writable]]")))throw new qo("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r},MI=Ct,jl=MI("%TypeError%"),bv=fI,kI=iv,DI=av,xv=PI,zl=uv,VI=Ei,HI=fv,XI=yv,Wl=ye,$I=function(e,r,i){if(Wl(e)!=="Object")throw new jl("Assertion failed: Type(O) is not Object");if(!VI(r))throw new jl("Assertion failed: IsPropertyKey(P) is not true");var n=bv({Type:Wl,IsDataDescriptor:zl,IsAccessorDescriptor:xv},i)?i:XI(i);if(!bv({Type:Wl,IsDataDescriptor:zl,IsAccessorDescriptor:xv},n))throw new jl("Assertion failed: Desc is not a valid Property Descriptor");return kI(zl,HI,DI,e,r,n)},jI=lI,wv=jI("%Reflect.construct%",!0),Ko=$I;try{Ko({},"",{"[[Get]]":function(){}})}catch{Ko=null}if(Ko&&wv){var Tv={},Ev={};Ko(Ev,"length",{"[[Get]]":function(){throw Tv},"[[Enumerable]]":!0}),Dl.exports=function(e){try{wv(e,Ev)}catch(r){return r===Tv}}}else Dl.exports=function(e){return typeof e=="function"&&!!e.prototype};var Cv=Ct,Iv=Cv("%Symbol.species%",!0),Pv=Cv("%TypeError%"),Rv=wC,Av=Zd,zI=kl,WI=Dl.exports,YI=Od,qI=ye,KI=function(e,r){if(!YI(r)||r<0)throw new Pv("Assertion failed: length must be an integer >= 0");var i=zI(e);if(!i)return Rv(r);var n=Av(e,"constructor");if(Iv&&qI(n)==="Object"&&(n=Av(n,Iv),n===null&&(n=void 0)),typeof n=="undefined")return Rv(r);if(!WI(n))throw new Pv("C must be a constructor");return new n(r)},Nv=Ct,ZI=Se,JI=Nv("%TypeError%"),QI=kl,tP=Nv("%Reflect.apply%",!0)||ZI("%Function.prototype.apply%"),eP=function(e,r){var i=arguments.length>2?arguments[2]:[];if(!QI(i))throw new JI("Assertion failed: optional `argumentsList`, if provided, must be a List");return tP(e,r,i)},rP=Ct,Zo=rP("%Object.getOwnPropertyDescriptor%",!0);if(Zo)try{Zo([],"length")}catch{Zo=null}var iP=Zo,Yl=Se,Sv=Do(),Ov,Uv,ql,Kl;if(Sv){Ov=Yl("Object.prototype.hasOwnProperty"),Uv=Yl("RegExp.prototype.exec"),ql={};var Zl=function(){throw ql};Kl={toString:Zl,valueOf:Zl},typeof Symbol.toPrimitive=="symbol"&&(Kl[Symbol.toPrimitive]=Zl)}var nP=Yl("Object.prototype.toString"),oP=Object.getOwnPropertyDescriptor,sP="[object RegExp]",aP=Sv?function(e){if(!e||typeof e!="object")return!1;var r=oP(e,"lastIndex"),i=r&&Ov(r,"value");if(!i)return!1;try{Uv(e,Kl)}catch(n){return n===ql}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:nP(e)===sP},lP=Ct,Lv=lP("%Symbol.match%",!0),hP=aP,uP=pv,cP=function(e){if(!e||typeof e!="object")return!1;if(Lv){var r=e[Lv];if(typeof r!="undefined")return uP(r)}return hP(e)},fP=Ct,Fv=iP,Gv=fP("%TypeError%"),pP=Se,dP=pP("Object.prototype.propertyIsEnumerable"),vP=_r,_P=kl,mP=Ei,gP=cP,yP=yv,bP=ye,xP=function(e,r){if(bP(e)!=="Object")throw new Gv("Assertion failed: O must be an Object");if(!mP(r))throw new Gv("Assertion failed: P must be a Property Key");if(!!vP(e,r)){if(!Fv){var i=_P(e)&&r==="length",n=gP(e)&&r==="lastIndex";return{"[[Configurable]]":!(i||n),"[[Enumerable]]":dP(e,r),"[[Value]]":e[r],"[[Writable]]":!0}}return yP(Fv(e,r))}},Bv=function(e){return e===null||typeof e!="function"&&typeof e!="object"},Mv=Ct,wP=Mv("%Object.preventExtensions%",!0),TP=Mv("%Object.isExtensible%",!0),kv=Bv,EP=wP?function(e){return!kv(e)&&TP(e)}:function(e){return!kv(e)},CP=Ct,Dv=CP("%TypeError%"),IP=iv,PP=av,RP=xP,AP=uv,NP=EP,SP=Ei,OP=fv,UP=ye,LP=function(e,r,i){if(UP(e)!=="Object")throw new Dv("Assertion failed: Type(O) is not Object");if(!SP(r))throw new Dv("Assertion failed: IsPropertyKey(P) is not true");var n=RP(e,r),o=!n||NP(e),a=n&&!n["[[Configurable]]"];return a||!o?!1:IP(AP,OP,PP,e,r,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":i,"[[Writable]]":!0})},FP=Ct,Jl=FP("%TypeError%"),GP=LP,BP=Ei,MP=ye,kP=function(e,r,i){if(MP(e)!=="Object")throw new Jl("Assertion failed: Type(O) is not Object");if(!BP(r))throw new Jl("Assertion failed: IsPropertyKey(P) is not true");var n=GP(e,r,i);if(!n)throw new Jl("unable to create data property");return n},DP=Ct,Vv=DP("%TypeError%"),VP=Ei,HP=ye,XP=function(e,r){if(HP(e)!=="Object")throw new Vv("Assertion failed: `O` must be an Object");if(!VP(r))throw new Vv("Assertion failed: `P` must be a Property Key");return r in e},$P=Se,jP=$P("RegExp.prototype.exec"),zP=function(e){return function(i){return jP(e,i)!==null}},WP=function(e){return e===null||typeof e!="function"&&typeof e!="object"},YP=Date.prototype.getDay,qP=function(e){try{return YP.call(e),!0}catch{return!1}},KP=Object.prototype.toString,ZP="[object Date]",JP=Do(),QP=function(e){return typeof e!="object"||e===null?!1:JP?qP(e):KP.call(e)===ZP},Ql={exports:{}},tR=Object.prototype.toString,eR=vl();if(eR){var rR=Symbol.prototype.toString,iR=/^Symbol\(.*\)$/,nR=function(e){return typeof e.valueOf()!="symbol"?!1:iR.test(rR.call(e))};Ql.exports=function(e){if(typeof e=="symbol")return!0;if(tR.call(e)!=="[object Symbol]")return!1;try{return nR(e)}catch{return!1}}}else Ql.exports=function(e){return!1};var oR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",th=WP,Hv=_v,sR=QP,Xv=Ql.exports,aR=function(e,r){if(typeof e=="undefined"||e===null)throw new TypeError("Cannot call method on "+e);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var i=r==="string"?["toString","valueOf"]:["valueOf","toString"],n,o,a;for(a=0;a<i.length;++a)if(n=e[i[a]],Hv(n)&&(o=n.call(e),th(o)))return o;throw new TypeError("No default value")},lR=function(e,r){var i=e[r];if(i!==null&&typeof i!="undefined"){if(!Hv(i))throw new TypeError(i+" returned for property "+r+" of object "+e+" is not a function");return i}},hR=function(e){if(th(e))return e;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var i;if(oR&&(Symbol.toPrimitive?i=lR(e,Symbol.toPrimitive):Xv(e)&&(i=Symbol.prototype.valueOf)),typeof i!="undefined"){var n=i.call(e,r);if(th(n))return n;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(sR(e)||Xv(e))&&(r="string"),aR(e,r==="default"?"number":r)},$v=hR,uR=function(e){return arguments.length>1?$v(e,arguments[1]):$v(e)},Jo=Ct,jv=Jo("%TypeError%"),zv=Jo("%Number%"),cR=Jo("%RegExp%"),Wv=Jo("%parseInt%"),Yv=Se,Qo=zP,fR=Bv,qv=Yv("String.prototype.slice"),pR=Qo(/^0b[01]+$/i),dR=Qo(/^0o[0-7]+$/i),vR=Qo(/^[-+]0x[0-9a-f]+$/i),_R=["\x85","\u200B","\uFFFE"].join(""),mR=new cR("["+_R+"]","g"),gR=Qo(mR),Kv=[`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003`,"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),yR=new RegExp("(^["+Kv+"]+)|(["+Kv+"]+$)","g"),bR=Yv("String.prototype.replace"),xR=function(t){return bR(t,yR,"")},wR=uR,TR=function t(e){var r=fR(e)?e:wR(e,zv);if(typeof r=="symbol")throw new jv("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new jv("Conversion from 'BigInt' to 'number' is not allowed.");if(typeof r=="string"){if(pR(r))return t(Wv(qv(r,2),2));if(dR(r))return t(Wv(qv(r,2),8));if(gR(r)||vR(r))return NaN;var i=xR(r);if(i!==r)return t(i)}return zv(r)},ER=TR,CR=function(e){return ER(e)>>>0},IR=Ct,PR=IR("%Object%"),RR=Nd,AR=function(e){return RR(e),PR(e)},Zv=Ct,NR=Zv("%String%"),SR=Zv("%TypeError%"),OR=function(e){if(typeof e=="symbol")throw new SR("Cannot convert a Symbol value to a string");return NR(e)},UR=KI,LR=eP,FR=kP,GR=Zd,BR=XP,MR=mv,kR=CR,DR=AR,VR=OR,HR=Se,XR=cd,Jv=Object("a"),$R=Jv[0]!=="a"||!(0 in Jv),jR=HR("String.prototype.split"),Qv=function(e){var r=DR(this),i=$R&&XR(r)?jR(r,""):r,n=kR(i.length);if(!MR(e))throw new TypeError("Array.prototype.map callback must be a function");var o;arguments.length>1&&(o=arguments[1]);for(var a=UR(r,n),l=0;l<n;){var c=VR(l),f=BR(r,c);if(f){var d=GR(r,c),v=LR(e,o,[d,l,r]);FR(a,c,v)}l+=1}return a},zR=function(e){var r=!0,i=!0,n=!1;if(typeof e=="function"){try{e.call("f",function(o,a,l){typeof l!="object"&&(r=!1)}),e.call([null],function(){"use strict";i=typeof this=="string"},"x")}catch{n=!0}return!n&&r&&i}return!1},WR=zR,YR=Qv,t_=function(){var e=Array.prototype.map;return WR(e)?e:YR},qR=Bo,KR=t_,ZR=function(){var e=KR();return qR(Array.prototype,{map:e},{map:function(){return Array.prototype.map!==e}}),e},JR=Bo,QR=Nd,t2=Se,e2=Qv,e_=t_,r2=e_(),i2=ZR,n2=t2("Array.prototype.slice"),r_=function(e,r){return QR(e),r2.apply(e,n2(arguments,1))};JR(r_,{getPolyfill:e_,implementation:e2,shim:i2});var o2=r_,s2=Mo;s2();var a2=TE,l2=ye,h2=eC,u2=o2,i_=Ct,n_=mn.exports,c2=n_(i_("%Promise.all%")),f2=n_(i_("%Promise.reject%")),o_=function(e){var r=this;if(l2(r)!=="Object")throw new TypeError("`this` value must be an object");var i=h2(e);return c2(r,u2(i,function(n){var o=function(c){return{status:"fulfilled",value:c}},a=function(c){return{status:"rejected",reason:c}},l=a2(r,n);try{return l.then(o,a)}catch(c){return f2(r,c)}}))},p2=Mo,d2=o_,s_=function(){return p2(),typeof Promise.allSettled=="function"?Promise.allSettled:d2},v2=Mo,_2=s_,m2=Bo,g2=function(){v2();var e=_2();return m2(Promise,{allSettled:e},{allSettled:function(){return Promise.allSettled!==e}}),e},y2=mn.exports,b2=Bo,x2=Mo,w2=o_,a_=s_,T2=g2;x2();var E2=y2(a_()),l_=function(e){return E2(typeof this=="undefined"?Promise:this,e)};b2(l_,{getPolyfill:a_,implementation:w2,shim:T2});var C2=l_;class I2{constructor({optimize:e}){this.optimize=e,this.loader=new Pe,this.resolveLoaderComplete=null,this.onLoaderComplete=new Promise(r=>this.resolveLoaderComplete=r),this.fonts=[],this.customFonts=null,this.jsons=[],this.jsonMap=new Map,this.spritesheets=[],this.callback=null}addManifest(e){e.forEach(r=>{if(r.src.includes("json")){let n=r.src.replace(".json",".png");this.jsons.push(r.src),this.loader.add(n,n),this.spritesheets.push(n)}else this.loader.add(r.src,r.src)})}addOthers(e){e.map(r=>{console.log(r.id||r.src,r.src),this.loader.add(r.id||r.src,r.src)})}addFonts(e){this.fonts.push(...e)}addCustomFonts(e){this.customFonts=e}loadFonts(){return new Promise(e=>{let r=[],i={};const n=async()=>{C2(r).then(()=>{e()})},o={loading:()=>{n()},fontloading:a=>{r.push(new Promise((l,c)=>{i[a]={resolve:l,reject:c}}))},fontactive:a=>{i[a].resolve()},fontinactive:a=>{console.error(`font ${a} failed to load`),i[a].reject()}};this.fonts.length&&(o.google={families:this.fonts}),this.customFonts&&(o.custom=this.customFonts),k1.load(o)})}load(e){this.callback=e,this.loadFonts().then(()=>{this.loader.load(this.onComplete.bind(this))})}async onComplete(e,r){await this.loadJsons(),this.resizeTextures(r),this.createSpritesheets(r),this.resolveLoaderComplete()}async loadJsons(){for(let e=0;e<this.jsons.length;e++){const r=this.jsons[e];let i=r.replace(".json",".png");const o=await(await fetch(r)).json();this.jsonMap.set(i,o)}}resizeTextures(e){for(const r in e){const i=e[r];let n=r;i.tags&&i.tags.tps&&(n=`${n}_image`);const o=lr[n];o&&(i.tags&&(i.tags.REPEAT&&(o.wrapMode=Ce.REPEAT),i.tags.NEAREST&&(o.scaleMode=ee.NEAREST)),this.optimize&&(!i.tags||i.tags&&!i.tags.high)&&(o.type=Q.UNSIGNED_SHORT_4_4_4_4),Gt.renderer.texture.bind(o))}}createSpritesheets(){let e=[];this.spritesheets.forEach(r=>{e.push(new Promise(i=>{new Zf(Me[r].baseTexture,this.jsonMap.get(r)).parse(()=>{i()})}))}),Promise.all(e).then(r=>{this.callback&&this.callback()}).catch(r=>{console.log("AssetsLoader",r.message,r)})}}class P2{constructor(e={},r){this.view=new ce}resize(e,r){this.w=Gt.app.screen.width,this.h=Gt.app.screen.height,this.isPortrait=this.w<this.h,this.onResize(this.w,this.h)}update(){}pause(){this.paused=!0,this.onPause()}resume(){this.paused=!1,this.onResume()}show(){this.onShow()}hide(){this.onHide()}onShow(){}onPause(){}onResume(){}onResize(e,r){}onHide(){}}function rt(){this._protocol=null,this._href="",this._port=-1,this._query=null,this.auth=null,this.slashes=null,this.host=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null,this._prependSlash=!1}var R2=ii;rt.queryString=R2,rt.prototype.parse=function(e,r,i,n){if(typeof e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof e);for(var o=0,a=e.length-1;e.charCodeAt(o)<=32;)o++;for(;e.charCodeAt(a)<=32;)a--;if(o=this._parseProtocol(e,o,a),this._protocol!=="javascript"){o=this._parseHost(e,o,a,i);var l=this._protocol;!this.hostname&&(this.slashes||l&&!Pi[l])&&(this.hostname=this.host="")}if(o<=a){var c=e.charCodeAt(o);c===47||c===92?this._parsePath(e,o,a,n):c===63?this._parseQuery(e,o,a,n):c===35?this._parseHash(e,o,a,n):this._protocol!=="javascript"?this._parsePath(e,o,a,n):this.pathname=e.slice(o,a+1)}if(!this.pathname&&this.hostname&&this._slashProtocols[this._protocol]&&(this.pathname="/"),r){var f=this.search;f==null&&(f=this.search=""),f.charCodeAt(0)===63&&(f=f.slice(1)),this.query=rt.queryString.parse(f)}},rt.prototype.resolve=function(e){return this.resolveObject(rt.parse(e,!1,!0)).format()},rt.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var r=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=this.search||"",a="",l=this.hostname||"",c=this.port||"",f=!1,d="",v=this.query;if(v&&typeof v=="object"&&(a=rt.queryString.stringify(v)),o||(o=a?"?"+a:""),r&&r.charCodeAt(r.length-1)!==58&&(r+=":"),this.host)f=e+this.host;else if(l){var _=l.indexOf(":")>-1;_&&(l="["+l+"]"),f=e+l+(c?":"+c:"")}var m=this.slashes||(!r||Pi[r])&&f!==!1;return r?d=r+(m?"//":""):m&&(d="//"),m&&i&&i.charCodeAt(0)!==47&&(i="/"+i),o&&o.charCodeAt(0)!==63&&(o="?"+o),n&&n.charCodeAt(0)!==35&&(n="#"+n),i=N2(i),o=S2(o),d+(f===!1?"":f)+i+o+n},rt.prototype.resolveObject=function(e){typeof e=="string"&&(e=rt.parse(e,!1,!0));var r=this._clone();if(r.hash=e.hash,!e.href)return r._href="",r;if(e.slashes&&!e._protocol)return e._copyPropsTo(r,!0),Pi[r._protocol]&&r.hostname&&!r.pathname&&(r.pathname="/"),r._href="",r;if(e._protocol&&e._protocol!==r._protocol){if(!Pi[e._protocol])return e._copyPropsTo(r,!1),r._href="",r;if(r._protocol=e._protocol,!e.host&&e._protocol!=="javascript"){for(var c=(e.pathname||"").split("/");c.length&&!(e.host=c.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),c[0]!==""&&c.unshift(""),c.length<2&&c.unshift(""),r.pathname=c.join("/")}else r.pathname=e.pathname;return r.search=e.search,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r._port=e._port,r.slashes=r.slashes||e.slashes,r._href="",r}var i=r.pathname&&r.pathname.charCodeAt(0)===47,n=e.host||e.pathname&&e.pathname.charCodeAt(0)===47,o=n||i||r.host&&e.pathname,a=o,l=r.pathname&&r.pathname.split("/")||[],c=e.pathname&&e.pathname.split("/")||[],f=r._protocol&&!Pi[r._protocol];if(f&&(r.hostname="",r._port=-1,r.host&&(l[0]===""?l[0]=r.host:l.unshift(r.host)),r.host="",e._protocol&&(e.hostname="",e._port=-1,e.host&&(c[0]===""?c[0]=e.host:c.unshift(e.host)),e.host=""),o=o&&(c[0]===""||l[0]==="")),n)r.host=e.host?e.host:r.host,r.hostname=e.hostname?e.hostname:r.hostname,r.search=e.search,l=c;else if(c.length)l||(l=[]),l.pop(),l=l.concat(c),r.search=e.search;else if(e.search){if(f){r.hostname=r.host=l.shift();var d=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;d&&(r.auth=d.shift(),r.host=r.hostname=d.shift())}return r.search=e.search,r._href="",r}if(!l.length)return r.pathname=null,r._href="",r;for(var v=l.slice(-1)[0],_=(r.host||e.host)&&(v==="."||v==="..")||v==="",m=0,g=l.length;g>=0;g--)v=l[g],v==="."?l.splice(g,1):v===".."?(l.splice(g,1),m++):m&&(l.splice(g,1),m--);if(!o&&!a)for(;m--;m)l.unshift("..");o&&l[0]!==""&&(!l[0]||l[0].charCodeAt(0)!==47)&&l.unshift(""),_&&l.join("/").substr(-1)!=="/"&&l.push("");var x=l[0]===""||l[0]&&l[0].charCodeAt(0)===47;if(f){r.hostname=r.host=x?"":l.length?l.shift():"";var d=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;d&&(r.auth=d.shift(),r.host=r.hostname=d.shift())}return o=o||r.host&&l.length,o&&!x&&l.unshift(""),r.pathname=l.length===0?null:l.join("/"),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r._href="",r};var A2=Yn.exports;rt.prototype._hostIdna=function(e){return A2.toASCII(e)};var N2=rt.prototype._escapePathName=function(e){return h_(e,35,63)?O2(e):e},S2=rt.prototype._escapeSearch=function(e){return h_(e,35,-1)?U2(e):e};rt.prototype._parseProtocol=function(e,r,i){for(var n=!1,o=this._protocolCharacters,a=r;a<=i;++a){var l=e.charCodeAt(a);if(l===58){var c=e.slice(r,a);return n&&(c=c.toLowerCase()),this._protocol=c,a+1}else if(o[l]===1)l<97&&(n=!0);else return r}return r},rt.prototype._parseAuth=function(e,r,i,n){var o=e.slice(r,i+1);n&&(o=decodeURIComponent(o)),this.auth=o},rt.prototype._parsePort=function(e,r,i){for(var n=0,o=!1,a=!0,l=r;l<=i;++l){var c=e.charCodeAt(l);if(48<=c&&c<=57)n=10*n+(c-48),o=!0;else{a=!1,(c===92||c===47)&&(a=!0);break}}return n===0&&!o||!a?(a||(this._port=-2),0):(this._port=n,l-r)},rt.prototype._parseHost=function(e,r,i,n){var o=this._hostEndingCharacters,a=e.charCodeAt(r),l=e.charCodeAt(r+1);if((a===47||a===92)&&(l===47||l===92)){if(this.slashes=!0,r===0){if(i<2)return r;var c=L2(e,64,2,o);if(!c&&!n)return this.slashes=null,r}r+=2}else if(!this._protocol||Pi[this._protocol])return r;for(var f=!1,d=!1,v=r,_=i,m=0,g=0,x=!1,b=-1,w=r;w<=i;++w){var C=e.charCodeAt(w);if(C===64)b=w;else if(C===37)x=!0;else if(o[C]===1)break}if(b>-1&&(this._parseAuth(e,r,b-1,x),r=v=b+1),e.charCodeAt(r)===91){for(var w=r+1;w<=i;++w){var C=e.charCodeAt(w);if(C===93){e.charCodeAt(w+1)===58&&(m=this._parsePort(e,w+2,i)+1);var I=e.slice(r+1,w).toLowerCase();return this.hostname=I,this.host=this._port>0?"["+I+"]:"+this._port:"["+I+"]",this.pathname="/",w+m+1}}return r}for(var w=r;w<=i;++w){if(g>62)return this.hostname=this.host=e.slice(r,w),w;var C=e.charCodeAt(w);if(C===58){m=this._parsePort(e,w+1,i)+1,_=w-1;break}else if(C<97){if(C===46)g=-1;else if(65<=C&&C<=90)f=!0;else if(!(C===45||C===95||C===43||48<=C&&C<=57)){o[C]===0&&this._noPrependSlashHostEnders[C]===0&&(this._prependSlash=!0),_=w-1;break}}else if(C>=123){if(C<=126){this._noPrependSlashHostEnders[C]===0&&(this._prependSlash=!0),_=w-1;break}d=!0}g++}if(_+1!==r&&_-v<=256){var I=e.slice(v,_+1);f&&(I=I.toLowerCase()),d&&(I=this._hostIdna(I)),this.hostname=I,this.host=this._port>0?I+":"+this._port:I}return _+1+m},rt.prototype._copyPropsTo=function(e,r){r||(e._protocol=this._protocol),e._href=this._href,e._port=this._port,e._prependSlash=this._prependSlash,e.auth=this.auth,e.slashes=this.slashes,e.host=this.host,e.hostname=this.hostname,e.hash=this.hash,e.search=this.search,e.pathname=this.pathname},rt.prototype._clone=function(){var e=new rt;return e._protocol=this._protocol,e._href=this._href,e._port=this._port,e._prependSlash=this._prependSlash,e.auth=this.auth,e.slashes=this.slashes,e.host=this.host,e.hostname=this.hostname,e.hash=this.hash,e.search=this.search,e.pathname=this.pathname,e},rt.prototype._getComponentEscaped=function(e,r,i,n){for(var o=r,a=r,l="",c=n?this._afterQueryAutoEscapeMap:this._autoEscapeMap;a<=i;++a){var f=e.charCodeAt(a),d=c[f];d!==""&&d!==void 0&&(o<a&&(l+=e.slice(o,a)),l+=d,o=a+1)}return o<a+1&&(l+=e.slice(o,a)),l},rt.prototype._parsePath=function(e,r,i,n){for(var o=r,a=i,l=!1,c=this._autoEscapeCharacters,f=this._port===-2?"/:":"",d=r;d<=i;++d){var v=e.charCodeAt(d);if(v===35){this._parseHash(e,d,i,n),a=d-1;break}else if(v===63){this._parseQuery(e,d,i,n),a=d-1;break}else!n&&!l&&c[v]===1&&(l=!0)}if(o>a){this.pathname=f===""?"/":f;return}var _;l?_=this._getComponentEscaped(e,o,a,!1):_=e.slice(o,a+1),this.pathname=f===""?this._prependSlash?"/"+_:_:f+_},rt.prototype._parseQuery=function(e,r,i,n){for(var o=r,a=i,l=!1,c=this._autoEscapeCharacters,f=r;f<=i;++f){var d=e.charCodeAt(f);if(d===35){this._parseHash(e,f,i,n),a=f-1;break}else!n&&!l&&c[d]===1&&(l=!0)}if(o>a){this.search="";return}var v;l?v=this._getComponentEscaped(e,o,a,!0):v=e.slice(o,a+1),this.search=v},rt.prototype._parseHash=function(e,r,i,n){if(r>i){this.hash="";return}this.hash=n?e.slice(r,i+1):this._getComponentEscaped(e,r,i,!0)},Object.defineProperty(rt.prototype,"port",{get:function(){return this._port>=0?""+this._port:null},set:function(t){t==null?this._port=-1:this._port=parseInt(t,10)}}),Object.defineProperty(rt.prototype,"query",{get:function(){var t=this._query;if(t!=null)return t;var e=this.search;return e&&(e.charCodeAt(0)===63&&(e=e.slice(1)),e!=="")&&(this._query=e),e},set:function(t){this._query=t}}),Object.defineProperty(rt.prototype,"path",{get:function(){var t=this.pathname||"",e=this.search||"";return t||e?t+e:t==null&&e?"/"+e:null},set:function(){}}),Object.defineProperty(rt.prototype,"protocol",{get:function(){var t=this._protocol;return t&&t+":"},set:function(t){if(typeof t=="string"){var e=t.length-1;t.charCodeAt(e)===58?this._protocol=t.slice(0,e):this._protocol=t}else t==null&&(this._protocol=null)}}),Object.defineProperty(rt.prototype,"href",{get:function(){var t=this._href;return t||(t=this._href=this.format()),t},set:function(t){this._href=t}}),rt.parse=function(e,r,i,n){if(e instanceof rt)return e;var o=new rt;return o.parse(e,!!r,!!i,!!n),o},rt.format=function(e){return typeof e=="string"&&(e=rt.parse(e)),e instanceof rt?e.format():rt.prototype.format.call(e)},rt.resolve=function(e,r){return rt.parse(e,!1,!0).resolve(r)},rt.resolveObject=function(e,r){return e?rt.parse(e,!1,!0).resolveObject(r):r};function O2(t){return t.replace(/[?#]/g,function(e){return encodeURIComponent(e)})}function U2(t){return t.replace(/#/g,function(e){return encodeURIComponent(e)})}function L2(t,e,r,i){for(var n=t.length,o=r;o<n;++o){var a=t.charCodeAt(o);if(a===e)return!0;if(i[a]===1)return!1}return!1}function h_(t,e,r){for(var i=0,n=t.length;i<n;++i){var o=t.charCodeAt(i);if(o===e||o===r)return!0}return!1}function ts(t){var e=new Uint8Array(128);return t.forEach(function(r){if(typeof r=="number")e[r]=1;else for(var i=r[0],n=r[1],o=i;o<=n;++o)e[o]=1}),e}for(var eh=["<",">",'"',"`"," ","\r",`
`,"	","{","}","|","\\","^","`","'"],Ii=new Array(128),$r=0,rh=Ii.length;$r<rh;++$r)Ii[$r]="";for(var $r=0,rh=eh.length;$r<rh;++$r){var es=eh[$r],ih=encodeURIComponent(es);ih===es&&(ih=escape(es)),Ii[es.charCodeAt(0)]=ih}var F2=Ii.slice();Ii[92]="/";var Pi=rt.prototype._slashProtocols={http:!0,https:!0,gopher:!0,file:!0,ftp:!0,"http:":!0,"https:":!0,"gopher:":!0,"file:":!0,"ftp:":!0};rt.prototype._protocolCharacters=ts([[97,122],[65,90],46,43,45]),rt.prototype._hostEndingCharacters=ts([35,63,47,92]),rt.prototype._autoEscapeCharacters=ts(eh.map(function(t){return t.charCodeAt(0)})),rt.prototype._noPrependSlashHostEnders=ts(["<",">","'","`"," ","\r",`
`,"	","{","}","|","^","`",'"',"%",";"].map(function(t){return t.charCodeAt(0)})),rt.prototype._autoEscapeMap=Ii,rt.prototype._afterQueryAutoEscapeMap=F2;var G2=rt;rt.replace=function(){require.cache.url={exports:rt}};var B2=f_,rs=encodeURIComponent,M2=[],u_=Array.isArray,c_=Object.getPrototypeOf,k2=c_({});function D2(t){if(u_(t))return!0;if(t===null||typeof t!="object")return!1;var e=c_(t);return e===k2||e===null}function f_(){}f_.prototype.serialize=function(e){if(e===null||typeof e!="object")throw new TypeError("the obj to stringify must be an object");for(var r=Object.keys(e),i=r.length,n=M2,o=[],a=[],l=e,c="",f=0;f<i;++f){var d=r===n?f:r[f],v=l[d];if(D2(v))o.push(c,l,r,i,f),c===""?c=d:c=c+"["+rs(d)+"]",u_(v)?(r=n,i=v.length):(r=Object.keys(v),i=r.length),f=-1,l=v;else{typeof v!="string"&&(v=""+v);var _=c===""?rs(d):c+"["+rs(d)+"]";a.push(_+"="+rs(v))}f===i-1&&o.length>0&&(f=o.pop(),i=o.pop(),r=o.pop(),l=o.pop(),c=o.pop())}return a.join("&")};var V2=B2,H2=Wt,X2=/\+/g,$2=/^[0-9]+$/,is=Array.isArray,nh={}.hasOwnProperty;function Wt(){this.containsSparse=!1,this.cacheKey="",this.cacheVal=null}Wt.maxLength=32768,Wt.maxDepth=4,Wt.maxKeys=256,Wt.parse=function(e){if(typeof e=="string"){var r=Wt.maxLength;if(e.length>r)throw new RangeError("str is too large (QueryStringParser.maxLength="+r+")");var i=new Wt;return i.parseString(e,!1)}else if(e!==null&&typeof e=="object"){var i=new Wt;return i.parseObject(e)}return{}},Wt.stringify=function(e){var r=new V2;return r.serialize(e)},Wt.prototype.decode=function(e,r,i){if(r===!1)return e;i===!0&&(e=e.replace(X2," "));try{return decodeURIComponent(e)}catch{return e}},Wt.prototype.maybeArrayIndex=function(e,r){var i=e.length;if(i===0)return r;var n=e.charCodeAt(0);if(n===48)return i>1?-1:0;if(48<=n&&n<=57){if(i===1)return n-48;if($2.test(e)){var o=parseInt(e,10);if(0<o&&o<=1073741822)return o}}return-1},Wt.prototype.getSlot=function(e,r,i){var n;if(nh.call(e,r))n=e[r];else{var o=this.maybeArrayIndex(i,0);o>-1?n=[]:n={},e[r]=n}return n},Wt.prototype.placeNestedValue=function(e,r,i,n,o,a){var l=this.getSlot(e,o,a),c=-1;is(l)&&(c=this.maybeArrayIndex(a,l.length));for(var f=r.length,d=2,v=Wt.maxDepth,_=-1;n<f;++n){var m=r.charCodeAt(n);if(m===91)_=n+1;else if(m===93&&_>-1){if(o=a,a=_===n?"":r.substring(_,n),_=-1,d++,d>v)throw new RangeError("Nesting depth of keys is too large (QueryStringParser.maxDepth="+v+")");l=this.getSlot(l,o,a),c=is(l)?this.maybeArrayIndex(a,l.length):-1}}c>-1?i!==""&&(c===l.length?l.push(i):(this.containsSparse=!0,l[c]=i)):this.insert(l,a,i)},Wt.prototype.insert=function(e,r,i){var n=null;if(nh.call(e,r)){var o=e[r];is(o)?(o.push(i),n=o):(n=[o,i],e[r]=n)}else e[r]=i;return n},Wt.prototype.push=function(e,r,i){var n=null;if(nh.call(e,r)){var o=e[r];o.push(i),n=o}else n=[i],e[r]=n;return n},Wt.prototype.maybePlaceNestedValue=function(e,r,i){var n=r.length;if(r.charCodeAt(n-1)!==93){this.placeValue(e,r,i,!1);return}for(var o=-1,a=0,l,c;a<n;++a){var f=r.charCodeAt(a);if(f===91)o=a+1,c=r.slice(0,a);else if(f===93){if(o<0){this.placeValue(e,r,i,!1);return}l=o===a?"":r.slice(o,a),a++;break}}if(l===void 0){this.placeValue(e,r,i,!1);return}l===""&&i!==""&&a===n?r===this.cacheKey?this.cacheVal.push(i):(this.cacheKey=r,this.cacheVal=this.push(e,c,i)):this.placeNestedValue(e,r,i,a,c,l)},Wt.prototype.placeValue=function(e,r,i,n){if(n===!0){this.maybePlaceNestedValue(e,r,i);return}if(r===this.cacheKey){this.cacheVal.push(i);return}var o=this.insert(e,r,i);o!==null&&(this.cacheKey=r,this.cacheVal=o)},Wt.prototype.compact=function(e){if(is(e)){for(var r=[],i=Object.keys(e),n=0,o=i.length;n<o;++n)r.push(e[i[n]]);return r}else if(typeof e=="object")for(var i=Object.keys(e),n=0,o=i.length;n<o;++n){var a=i[n];e[a]=this.compact(e[a])}else return e},Wt.prototype.parseObject=function(e){var r=Object.keys(e),i=r.length;if(i===0)return{};i--;for(var n="",o,a=0;a<i;++a)o=r[a],n+=o+"="+e[o]+"&";return o=r[a],n+=o+"="+e[o],this.parseString(n,!0)},Wt.prototype.parseString=function(e,r){for(var i=Wt.maxKeys,n=0,o=!1,a=!1,l=!1,c=e.length,f=0,d={},v=0,_=0,m=0,g=0,x=0,b=c-1,w=!1;f<c;++f){var C=e.charCodeAt(f);if(C===91)x++;else if(x>0&&C===93)l=!0,x--;else if(x===0&&C===61){var I=f+1;_=f-1,g=m=I;var S=e.slice(v,_+1);for(S=this.decode(S,o,w),o=!1;I<c;++I)if(C=e.charCodeAt(I),(C===43||C===37)&&!r&&(C===43&&(w=!0),a=!0),C===38||I===b){g=I,f=I,C===38&&g--;var A=e.slice(m,g+1);if(A=this.decode(A,a,w),this.placeValue(d,S,A,l),w=a=!1,l=!1,v=I+1,n++,n>i)throw new RangeError("Amount of keys is too large (QueryStringParser.maxKeys="+i+")");break}}else(C===43||C===37)&&!r&&(C===43&&(w=!0),o=!0)}if(v!==c){var A="",S=e.slice(v,c);S=this.decode(S,o,w),this.placeValue(d,S,A,l)}return this.containsSparse&&this.compact(d),d};var oh={exports:{}};/*! Tweakpane 3.1.0 (c) 2016 cocopon, licensed under the MIT license. */(function(t,e){(function(r,i){i(e)})(Hn,function(r){class i{constructor(s){const[h,p]=s.split("-"),y=h.split(".");this.major=parseInt(y[0],10),this.minor=parseInt(y[1],10),this.patch=parseInt(y[2],10),this.prerelease=p!=null?p:null}toString(){const s=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[s,this.prerelease].join("-"):s}}class n{constructor(s){this.controller_=s}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(s){this.controller_.viewProps.set("disabled",s)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(s){this.controller_.viewProps.set("hidden",s)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class o{constructor(s){this.target=s}}class a extends o{constructor(s,h,p,y){super(s),this.value=h,this.presetKey=p,this.last=y!=null?y:!0}}class l extends o{constructor(s,h,p){super(s),this.value=h,this.presetKey=p}}class c extends o{constructor(s,h){super(s),this.expanded=h}}class f extends o{constructor(s,h){super(s),this.index=h}}function d(u){return u}function v(u){return u==null}function _(u,s){if(u.length!==s.length)return!1;for(let h=0;h<u.length;h++)if(u[h]!==s[h])return!1;return!0}const m={alreadydisposed:()=>"View has been already disposed",invalidparams:u=>`Invalid parameters for '${u.name}'`,nomatchingcontroller:u=>`No matching controller for '${u.key}'`,nomatchingview:u=>`No matching view for '${JSON.stringify(u.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:u=>`Property '${u.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class g{constructor(s){var h;this.message=(h=m[s.type](s.context))!==null&&h!==void 0?h:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=s.type}static alreadyDisposed(){return new g({type:"alreadydisposed"})}static notBindable(){return new g({type:"notbindable"})}static propertyNotFound(s){return new g({type:"propertynotfound",context:{name:s}})}static shouldNeverHappen(){return new g({type:"shouldneverhappen"})}}class x{constructor(s,h,p){this.obj_=s,this.key_=h,this.presetKey_=p!=null?p:h}static isBindable(s){return!(s===null||typeof s!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(s){this.obj_[this.key_]=s}writeProperty(s,h){const p=this.read();if(!x.isBindable(p))throw g.notBindable();if(!(s in p))throw g.propertyNotFound(s);p[s]=h}}class b extends n{get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get title(){var s;return(s=this.controller_.valueController.props.get("title"))!==null&&s!==void 0?s:""}set title(s){this.controller_.valueController.props.set("title",s)}on(s,h){const p=h.bind(this);return this.controller_.valueController.emitter.on(s,()=>{p(new o(this))}),this}}class w{constructor(){this.observers_={}}on(s,h){let p=this.observers_[s];return p||(p=this.observers_[s]=[]),p.push({handler:h}),this}off(s,h){const p=this.observers_[s];return p&&(this.observers_[s]=p.filter(y=>y.handler!==h)),this}emit(s,h){const p=this.observers_[s];!p||p.forEach(y=>{y.handler(h)})}}const C="tp";function I(u){return(h,p)=>[C,"-",u,"v",h?`_${h}`:"",p?`-${p}`:""].join("")}function S(u,s){return h=>s(u(h))}function A(u){return u.rawValue}function P(u,s){u.emitter.on("change",S(A,s)),s(u.rawValue)}function O(u,s,h){P(u.value(s),h)}function D(u,s,h){h?u.classList.add(s):u.classList.remove(s)}function U(u,s){return h=>{D(u,s,h)}}function B(u,s){P(u,h=>{s.textContent=h!=null?h:""})}const $=I("btn");class j{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add($()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("button");p.classList.add($("b")),h.viewProps.bindDisabled(p),this.element.appendChild(p),this.buttonElement=p;const y=s.createElement("div");y.classList.add($("t")),B(h.props.value("title"),y),this.buttonElement.appendChild(y)}}class W{constructor(s,h){this.emitter=new w,this.onClick_=this.onClick_.bind(this),this.props=h.props,this.viewProps=h.viewProps,this.view=new j(s,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class lt{constructor(s,h){var p;this.constraint_=h==null?void 0:h.constraint,this.equals_=(p=h==null?void 0:h.equals)!==null&&p!==void 0?p:(y,E)=>y===E,this.emitter=new w,this.rawValue_=s}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(s){this.setRawValue(s,{forceEmit:!1,last:!0})}setRawValue(s,h){const p=h!=null?h:{forceEmit:!1,last:!0},y=this.constraint_?this.constraint_.constrain(s):s;!!this.equals_(this.rawValue_,y)&&!p.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=y,this.emitter.emit("change",{options:p,rawValue:y,sender:this}))}}class z{constructor(s){this.emitter=new w,this.value_=s}get rawValue(){return this.value_}set rawValue(s){this.setRawValue(s,{forceEmit:!1,last:!0})}setRawValue(s,h){const p=h!=null?h:{forceEmit:!1,last:!0};this.value_===s&&!p.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=s,this.emitter.emit("change",{options:p,rawValue:this.value_,sender:this}))}}function k(u,s){const h=s==null?void 0:s.constraint,p=s==null?void 0:s.equals;return!h&&!p?new z(u):new lt(u,s)}class V{constructor(s){this.emitter=new w,this.valMap_=s;for(const h in this.valMap_)this.valMap_[h].emitter.on("change",()=>{this.emitter.emit("change",{key:h,sender:this})})}static createCore(s){return Object.keys(s).reduce((p,y)=>Object.assign(p,{[y]:k(s[y])}),{})}static fromObject(s){const h=this.createCore(s);return new V(h)}get(s){return this.valMap_[s].rawValue}set(s,h){this.valMap_[s].rawValue=h}value(s){return this.valMap_[s]}}function Pt(u,s){const p=Object.keys(s).reduce((y,E)=>{if(y===void 0)return;const N=s[E],M=N(u[E]);return M.succeeded?Object.assign(Object.assign({},y),{[E]:M.value}):void 0},{});return p}function dt(u,s){return u.reduce((h,p)=>{if(h===void 0)return;const y=s(p);if(!(!y.succeeded||y.value===void 0))return[...h,y.value]},[])}function G(u){return u===null?!1:typeof u=="object"}function Y(u){return s=>h=>{if(!s&&h===void 0)return{succeeded:!1,value:void 0};if(s&&h===void 0)return{succeeded:!0,value:void 0};const p=u(h);return p!==void 0?{succeeded:!0,value:p}:{succeeded:!1,value:void 0}}}function ot(u){return{custom:s=>Y(s)(u),boolean:Y(s=>typeof s=="boolean"?s:void 0)(u),number:Y(s=>typeof s=="number"?s:void 0)(u),string:Y(s=>typeof s=="string"?s:void 0)(u),function:Y(s=>typeof s=="function"?s:void 0)(u),constant:s=>Y(h=>h===s?s:void 0)(u),raw:Y(s=>s)(u),object:s=>Y(h=>{if(!!G(h))return Pt(h,s)})(u),array:s=>Y(h=>{if(!!Array.isArray(h))return dt(h,s)})(u)}}const q={optional:ot(!0),required:ot(!1)};function nt(u,s){const h=q.required.object(s)(u);return h.succeeded?h.value:void 0}function St(u){return u&&u.parentElement&&u.parentElement.removeChild(u),null}function wt(){return["veryfirst","first","last","verylast"]}const Ot=I(""),Mt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class gt{constructor(s){this.parent_=null,this.blade=s.blade,this.view=s.view,this.viewProps=s.viewProps;const h=this.view.element;this.blade.value("positions").emitter.on("change",()=>{wt().forEach(p=>{h.classList.remove(Ot(void 0,Mt[p]))}),this.blade.get("positions").forEach(p=>{h.classList.add(Ot(void 0,Mt[p]))})}),this.viewProps.handleDispose(()=>{St(h)})}get parent(){return this.parent_}}const vt="http://www.w3.org/2000/svg";function ft(u){u.offsetHeight}function Rt(u,s){const h=u.style.transition;u.style.transition="none",s(),u.style.transition=h}function at(u){return u.ontouchstart!==void 0}function qt(){return new Function("return this")()}function Xt(){return qt().document}function ut(u){const s=u.ownerDocument.defaultView;return s&&"document"in s?u.getContext("2d"):null}const de={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function be(u,s){const h=u.createElementNS(vt,"svg");return h.innerHTML=de[s],h}function tr(u,s,h){u.insertBefore(s,u.children[h])}function jr(u){u.parentElement&&u.parentElement.removeChild(u)}function xr(u){for(;u.children.length>0;)u.removeChild(u.children[0])}function Ui(u){for(;u.childNodes.length>0;)u.removeChild(u.childNodes[0])}function zr(u){return u.relatedTarget?u.relatedTarget:"explicitOriginalTarget"in u?u.explicitOriginalTarget:null}const Wr=I("lbl");function hh(u,s){const h=u.createDocumentFragment();return s.split(`
`).map(y=>u.createTextNode(y)).forEach((y,E)=>{E>0&&h.appendChild(u.createElement("br")),h.appendChild(y)}),h}class In{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(Wr()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("div");p.classList.add(Wr("l")),O(h.props,"label",E=>{v(E)?this.element.classList.add(Wr(void 0,"nol")):(this.element.classList.remove(Wr(void 0,"nol")),Ui(p),p.appendChild(hh(s,E)))}),this.element.appendChild(p),this.labelElement=p;const y=s.createElement("div");y.classList.add(Wr("v")),this.element.appendChild(y),this.valueElement=y}}class Li extends gt{constructor(s,h){const p=h.valueController.viewProps;super(Object.assign(Object.assign({},h),{view:new In(s,{props:h.props,viewProps:p}),viewProps:p})),this.props=h.props,this.valueController=h.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const us={id:"button",type:"blade",accept(u){const s=q,h=nt(u,{title:s.required.string,view:s.required.constant("button"),label:s.optional.string});return h?{params:h}:null},controller(u){return new Li(u.document,{blade:u.blade,props:V.fromObject({label:u.params.label}),valueController:new W(u.document,{props:V.fromObject({title:u.params.title}),viewProps:u.viewProps})})},api(u){return!(u.controller instanceof Li)||!(u.controller.valueController instanceof W)?null:new b(u.controller)}};class er extends gt{constructor(s){super(s),this.value=s.value}}function ve(){return new V({positions:k([],{equals:_})})}class wr extends V{constructor(s){super(s)}static create(s){const h={completed:!0,expanded:s,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},p=V.createCore(h);return new wr(p)}get styleExpanded(){var s;return(s=this.get("temporaryExpanded"))!==null&&s!==void 0?s:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const s=this.get("expandedHeight");return this.get("shouldFixHeight")&&!v(s)?`${s}px`:"auto"}bindExpandedClass(s,h){const p=()=>{this.styleExpanded?s.classList.add(h):s.classList.remove(h)};O(this,"expanded",p),O(this,"temporaryExpanded",p)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function T(u,s){let h=0;return Rt(s,()=>{u.set("expandedHeight",null),u.set("temporaryExpanded",!0),ft(s),h=s.clientHeight,u.set("temporaryExpanded",null),ft(s)}),h}function R(u,s){s.style.height=u.styleHeight}function F(u,s){u.value("expanded").emitter.on("beforechange",()=>{u.set("completed",!1),v(u.get("expandedHeight"))&&u.set("expandedHeight",T(u,s)),u.set("shouldFixHeight",!0),ft(s)}),u.emitter.on("change",()=>{R(u,s)}),R(u,s),s.addEventListener("transitionend",h=>{h.propertyName==="height"&&u.cleanUpTransition()})}class L extends n{constructor(s,h){super(s),this.rackApi_=h}}function X(u,s){return u.addBlade(Object.assign(Object.assign({},s),{view:"button"}))}function K(u,s){return u.addBlade(Object.assign(Object.assign({},s),{view:"folder"}))}function et(u,s){const h=s!=null?s:{};return u.addBlade(Object.assign(Object.assign({},h),{view:"separator"}))}function yt(u,s){return u.addBlade(Object.assign(Object.assign({},s),{view:"tab"}))}class bt{constructor(s){this.emitter=new w,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=s}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(s){for(const h of this.allItems())if(s(h))return h;return null}includes(s){return this.cache_.has(s)}add(s,h){if(this.includes(s))throw g.shouldNeverHappen();const p=h!==void 0?h:this.items_.length;this.items_.splice(p,0,s),this.cache_.add(s);const y=this.extract_(s);y&&(y.emitter.on("add",this.onSubListAdd_),y.emitter.on("remove",this.onSubListRemove_),y.allItems().forEach(E=>{this.cache_.add(E)})),this.emitter.emit("add",{index:p,item:s,root:this,target:this})}remove(s){const h=this.items_.indexOf(s);if(h<0)return;this.items_.splice(h,1),this.cache_.delete(s);const p=this.extract_(s);p&&(p.emitter.off("add",this.onSubListAdd_),p.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:h,item:s,root:this,target:this})}onSubListAdd_(s){this.cache_.add(s.item),this.emitter.emit("add",{index:s.index,item:s.item,root:this,target:s.target})}onSubListRemove_(s){this.cache_.delete(s.item),this.emitter.emit("remove",{index:s.index,item:s.item,root:this,target:s.target})}}class Lt extends n{constructor(s){super(s),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new w,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(s){const h=s.sender.target.read();this.emitter_.emit("change",{event:new a(this,h,this.controller_.binding.target.presetKey,s.options.last)})}}class xt extends Li{constructor(s,h){super(s,h),this.binding=h.binding}}class Qt extends n{constructor(s){super(s),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new w,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(s){const h=s.sender.target.read();this.emitter_.emit("update",{event:new l(this,h,this.controller_.binding.target.presetKey)})}}class Zt extends Li{constructor(s,h){super(s,h),this.binding=h.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Tr(u){return u instanceof cs?u.apiSet_:u instanceof L?u.rackApi_.apiSet_:null}function Yr(u,s){const h=u.find(p=>p.controller_===s);if(!h)throw g.shouldNeverHappen();return h}function N_(u,s,h){if(!x.isBindable(u))throw g.notBindable();return new x(u,s,h)}class cs extends n{constructor(s,h){super(s),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new w,this.apiSet_=new bt(Tr),this.pool_=h;const p=this.controller_.rack;p.emitter.on("add",this.onRackAdd_),p.emitter.on("remove",this.onRackRemove_),p.emitter.on("inputchange",this.onRackInputChange_),p.emitter.on("monitorupdate",this.onRackMonitorUpdate_),p.children.forEach(y=>{this.setUpApi_(y)})}get children(){return this.controller_.rack.children.map(s=>Yr(this.apiSet_,s))}addInput(s,h,p){const y=p!=null?p:{},E=this.controller_.view.element.ownerDocument,N=this.pool_.createInput(E,N_(s,h,y.presetKey),y),M=new Lt(N);return this.add(M,y.index)}addMonitor(s,h,p){const y=p!=null?p:{},E=this.controller_.view.element.ownerDocument,N=this.pool_.createMonitor(E,N_(s,h),y),M=new Qt(N);return this.add(M,y.index)}addFolder(s){return K(this,s)}addButton(s){return X(this,s)}addSeparator(s){return et(this,s)}addTab(s){return yt(this,s)}add(s,h){this.controller_.rack.add(s.controller_,h);const p=this.apiSet_.find(y=>y.controller_===s.controller_);return p&&this.apiSet_.remove(p),this.apiSet_.add(s),s}remove(s){this.controller_.rack.remove(s.controller_)}addBlade(s){const h=this.controller_.view.element.ownerDocument,p=this.pool_.createBlade(h,s),y=this.pool_.createBladeApi(p);return this.add(y,s.index)}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}setUpApi_(s){this.apiSet_.find(p=>p.controller_===s)||this.apiSet_.add(this.pool_.createBladeApi(s))}onRackAdd_(s){this.setUpApi_(s.bladeController)}onRackRemove_(s){if(s.isRoot){const h=Yr(this.apiSet_,s.bladeController);this.apiSet_.remove(h)}}onRackInputChange_(s){const h=s.bladeController;if(h instanceof xt){const p=Yr(this.apiSet_,h),y=h.binding;this.emitter_.emit("change",{event:new a(p,y.target.read(),y.target.presetKey,s.options.last)})}else if(h instanceof er){const p=Yr(this.apiSet_,h);this.emitter_.emit("change",{event:new a(p,h.value.rawValue,void 0,s.options.last)})}}onRackMonitorUpdate_(s){if(!(s.bladeController instanceof Zt))throw g.shouldNeverHappen();const h=Yr(this.apiSet_,s.bladeController),p=s.bladeController.binding;this.emitter_.emit("update",{event:new l(h,p.target.read(),p.target.presetKey)})}}class uh extends L{constructor(s,h){super(s,new cs(s.rackController,h)),this.emitter_=new w,this.controller_.foldable.value("expanded").emitter.on("change",p=>{this.emitter_.emit("fold",{event:new c(this,p.sender.rawValue)})}),this.rackApi_.on("change",p=>{this.emitter_.emit("change",{event:p})}),this.rackApi_.on("update",p=>{this.emitter_.emit("update",{event:p})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(s){this.controller_.foldable.set("expanded",s)}get title(){return this.controller_.props.get("title")}set title(s){this.controller_.props.set("title",s)}get children(){return this.rackApi_.children}addInput(s,h,p){return this.rackApi_.addInput(s,h,p)}addMonitor(s,h,p){return this.rackApi_.addMonitor(s,h,p)}addFolder(s){return this.rackApi_.addFolder(s)}addButton(s){return this.rackApi_.addButton(s)}addSeparator(s){return this.rackApi_.addSeparator(s)}addTab(s){return this.rackApi_.addTab(s)}add(s,h){return this.rackApi_.add(s,h)}remove(s){this.rackApi_.remove(s)}addBlade(s){return this.rackApi_.addBlade(s)}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}}class ch extends gt{constructor(s){super({blade:s.blade,view:s.view,viewProps:s.rackController.viewProps}),this.rackController=s.rackController}}class pA{constructor(s,h){const p=I(h.viewName);this.element=s.createElement("div"),this.element.classList.add(p()),h.viewProps.bindClassModifiers(this.element)}}function dA(u,s){for(let h=0;h<u.length;h++){const p=u[h];if(p instanceof xt&&p.binding===s)return p}return null}function vA(u,s){for(let h=0;h<u.length;h++){const p=u[h];if(p instanceof Zt&&p.binding===s)return p}return null}function _A(u,s){for(let h=0;h<u.length;h++){const p=u[h];if(p instanceof er&&p.value===s)return p}return null}function fh(u){return u instanceof Pn?u.rack:u instanceof ch?u.rackController.rack:null}function mA(u){const s=fh(u);return s?s.bcSet_:null}class gA{constructor(s){var h;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new w,this.blade_=s!=null?s:null,(h=this.blade_)===null||h===void 0||h.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new bt(mA),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(s,h){s.parent&&s.parent.remove(s),s.parent_=this,this.bcSet_.add(s,h)}remove(s){s.parent_=null,this.bcSet_.remove(s)}find(s){return this.bcSet_.allItems().filter(h=>h instanceof s)}onSetAdd_(s){this.updatePositions_();const h=s.target===s.root;if(this.emitter.emit("add",{bladeController:s.item,index:s.index,isRoot:h,sender:this}),!h)return;const p=s.item;if(p.viewProps.emitter.on("change",this.onChildViewPropsChange_),p.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),p.viewProps.handleDispose(this.onChildDispose_),p instanceof xt)p.binding.emitter.on("change",this.onChildInputChange_);else if(p instanceof Zt)p.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(p instanceof er)p.value.emitter.on("change",this.onChildValueChange_);else{const y=fh(p);if(y){const E=y.emitter;E.on("layout",this.onDescendantLayout_),E.on("inputchange",this.onDescendantInputChange_),E.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(s){this.updatePositions_();const h=s.target===s.root;if(this.emitter.emit("remove",{bladeController:s.item,isRoot:h,sender:this}),!h)return;const p=s.item;if(p instanceof xt)p.binding.emitter.off("change",this.onChildInputChange_);else if(p instanceof Zt)p.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(p instanceof er)p.value.emitter.off("change",this.onChildValueChange_);else{const y=fh(p);if(y){const E=y.emitter;E.off("layout",this.onDescendantLayout_),E.off("inputchange",this.onDescendantInputChange_),E.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const s=this.bcSet_.items.filter(y=>!y.viewProps.get("hidden")),h=s[0],p=s[s.length-1];this.bcSet_.items.forEach(y=>{const E=[];y===h&&(E.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&E.push("veryfirst")),y===p&&(E.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&E.push("verylast")),y.blade.set("positions",E)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(s){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(h=>h.viewProps.get("disposed")).forEach(h=>{this.bcSet_.remove(h)})}onChildInputChange_(s){const h=dA(this.find(xt),s.sender);if(!h)throw g.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:h,options:s.options,sender:this})}onChildMonitorUpdate_(s){const h=vA(this.find(Zt),s.sender);if(!h)throw g.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:h,sender:this})}onChildValueChange_(s){const h=_A(this.find(er),s.sender);if(!h)throw g.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:h,options:s.options,sender:this})}onDescendantLayout_(s){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(s){this.emitter.emit("inputchange",{bladeController:s.bladeController,options:s.options,sender:this})}onDescendantMonitorUpdate_(s){this.emitter.emit("monitorupdate",{bladeController:s.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Pn extends gt{constructor(s,h){super(Object.assign(Object.assign({},h),{view:new pA(s,{viewName:"brk",viewProps:h.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const p=new gA(h.root?void 0:h.blade);p.emitter.on("add",this.onRackAdd_),p.emitter.on("remove",this.onRackRemove_),this.rack=p,this.viewProps.handleDispose(()=>{for(let y=this.rack.children.length-1;y>=0;y--)this.rack.children[y].viewProps.set("disposed",!0)})}onRackAdd_(s){!s.isRoot||tr(this.view.element,s.bladeController.view.element,s.index)}onRackRemove_(s){!s.isRoot||jr(s.bladeController.view.element)}}const S_=I("cnt");class yA{constructor(s,h){var p;this.className_=I((p=h.viewName)!==null&&p!==void 0?p:"fld"),this.element=s.createElement("div"),this.element.classList.add(this.className_(),S_()),h.viewProps.bindClassModifiers(this.element),this.foldable_=h.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),O(this.foldable_,"completed",U(this.element,this.className_(void 0,"cpl")));const y=s.createElement("button");y.classList.add(this.className_("b")),O(h.props,"title",J=>{v(J)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),h.viewProps.bindDisabled(y),this.element.appendChild(y),this.buttonElement=y;const E=s.createElement("div");E.classList.add(this.className_("t")),B(h.props.value("title"),E),this.buttonElement.appendChild(E),this.titleElement=E;const N=s.createElement("div");N.classList.add(this.className_("m")),this.buttonElement.appendChild(N);const M=h.containerElement;M.classList.add(this.className_("c")),this.element.appendChild(M),this.containerElement=M}}class ph extends ch{constructor(s,h){var p;const y=wr.create((p=h.expanded)!==null&&p!==void 0?p:!0),E=new Pn(s,{blade:h.blade,root:h.root,viewProps:h.viewProps});super(Object.assign(Object.assign({},h),{rackController:E,view:new yA(s,{containerElement:E.view.element,foldable:y,props:h.props,viewName:h.root?"rot":void 0,viewProps:h.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=h.props,this.foldable=y,F(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const bA={id:"folder",type:"blade",accept(u){const s=q,h=nt(u,{title:s.required.string,view:s.required.constant("folder"),expanded:s.optional.boolean});return h?{params:h}:null},controller(u){return new ph(u.document,{blade:u.blade,expanded:u.params.expanded,props:V.fromObject({title:u.params.title}),viewProps:u.viewProps})},api(u){return u.controller instanceof ph?new uh(u.controller,u.pool):null}};class Fi extends er{constructor(s,h){const p=h.valueController.viewProps;super(Object.assign(Object.assign({},h),{value:h.valueController.value,view:new In(s,{props:h.props,viewProps:p}),viewProps:p})),this.props=h.props,this.valueController=h.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class O_ extends n{}const U_=I("spr");class xA{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(U_()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("hr");p.classList.add(U_("r")),this.element.appendChild(p)}}class L_ extends gt{constructor(s,h){super(Object.assign(Object.assign({},h),{view:new xA(s,{viewProps:h.viewProps})}))}}const wA={id:"separator",type:"blade",accept(u){const h=nt(u,{view:q.required.constant("separator")});return h?{params:h}:null},controller(u){return new L_(u.document,{blade:u.blade,viewProps:u.viewProps})},api(u){return u.controller instanceof L_?new O_(u.controller):null}},TA=I("");function F_(u,s){return U(u,TA(void 0,s))}class Er extends V{constructor(s){super(s)}static create(s){var h,p;const y=s!=null?s:{},E={disabled:(h=y.disabled)!==null&&h!==void 0?h:!1,disposed:!1,hidden:(p=y.hidden)!==null&&p!==void 0?p:!1},N=V.createCore(E);return new Er(N)}bindClassModifiers(s){O(this,"disabled",F_(s,"disabled")),O(this,"hidden",F_(s,"hidden"))}bindDisabled(s){O(this,"disabled",h=>{s.disabled=h})}bindTabIndex(s){O(this,"disabled",h=>{s.tabIndex=h?-1:0})}handleDispose(s){this.value("disposed").emitter.on("change",h=>{h&&s()})}}const Rn=I("tbi");class EA{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(Rn()),h.viewProps.bindClassModifiers(this.element),O(h.props,"selected",E=>{E?this.element.classList.add(Rn(void 0,"sel")):this.element.classList.remove(Rn(void 0,"sel"))});const p=s.createElement("button");p.classList.add(Rn("b")),h.viewProps.bindDisabled(p),this.element.appendChild(p),this.buttonElement=p;const y=s.createElement("div");y.classList.add(Rn("t")),B(h.props.value("title"),y),this.buttonElement.appendChild(y),this.titleElement=y}}class CA{constructor(s,h){this.emitter=new w,this.onClick_=this.onClick_.bind(this),this.props=h.props,this.viewProps=h.viewProps,this.view=new EA(s,{props:h.props,viewProps:h.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class G_{constructor(s,h){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new CA(s,{props:h.itemProps,viewProps:Er.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Pn(s,{blade:ve(),viewProps:Er.create()}),this.props=h.props,O(this.props,"selected",p=>{this.itemController.props.set("selected",p),this.contentController.viewProps.set("hidden",!p)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class B_{constructor(s,h){this.controller_=s,this.rackApi_=h}get title(){var s;return(s=this.controller_.itemController.props.get("title"))!==null&&s!==void 0?s:""}set title(s){this.controller_.itemController.props.set("title",s)}get selected(){return this.controller_.props.get("selected")}set selected(s){this.controller_.props.set("selected",s)}get children(){return this.rackApi_.children}addButton(s){return this.rackApi_.addButton(s)}addFolder(s){return this.rackApi_.addFolder(s)}addSeparator(s){return this.rackApi_.addSeparator(s)}addTab(s){return this.rackApi_.addTab(s)}add(s,h){this.rackApi_.add(s,h)}remove(s){this.rackApi_.remove(s)}addInput(s,h,p){return this.rackApi_.addInput(s,h,p)}addMonitor(s,h,p){return this.rackApi_.addMonitor(s,h,p)}addBlade(s){return this.rackApi_.addBlade(s)}}class M_ extends L{constructor(s,h){super(s,new cs(s.rackController,h)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new w,this.pageApiMap_=new Map,this.rackApi_.on("change",p=>{this.emitter_.emit("change",{event:p})}),this.rackApi_.on("update",p=>{this.emitter_.emit("update",{event:p})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(p=>{this.setUpPageApi_(p)})}get pages(){return this.controller_.pageSet.items.map(s=>{const h=this.pageApiMap_.get(s);if(!h)throw g.shouldNeverHappen();return h})}addPage(s){const h=this.controller_.view.element.ownerDocument,p=new G_(h,{itemProps:V.fromObject({selected:!1,title:s.title}),props:V.fromObject({selected:!1})});this.controller_.add(p,s.index);const y=this.pageApiMap_.get(p);if(!y)throw g.shouldNeverHappen();return y}removePage(s){this.controller_.remove(s)}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}setUpPageApi_(s){const h=this.rackApi_.apiSet_.find(y=>y.controller_===s.contentController);if(!h)throw g.shouldNeverHappen();const p=new B_(s,h);this.pageApiMap_.set(s,p)}onPageAdd_(s){this.setUpPageApi_(s.item)}onPageRemove_(s){if(!this.pageApiMap_.get(s.item))throw g.shouldNeverHappen();this.pageApiMap_.delete(s.item)}onSelect_(s){this.emitter_.emit("select",{event:new f(this,s.rawValue)})}}const k_=-1;class IA{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=k(!0),this.selectedIndex=k(k_),this.items_=[]}add(s,h){const p=h!=null?h:this.items_.length;this.items_.splice(p,0,s),s.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(s){const h=this.items_.indexOf(s);h<0||(this.items_.splice(h,1),s.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=k_,this.empty.rawValue=!0;return}const s=this.items_.findIndex(h=>h.rawValue);s<0?(this.items_.forEach((h,p)=>{h.rawValue=p===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((h,p)=>{h.rawValue=p===s}),this.selectedIndex.rawValue=s),this.empty.rawValue=!1}onItemSelectedChange_(s){if(s.rawValue){const h=this.items_.findIndex(p=>p===s.sender);this.items_.forEach((p,y)=>{p.rawValue=y===h}),this.selectedIndex.rawValue=h}else this.keepSelection_()}}const fs=I("tab");class PA{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(fs(),S_()),h.viewProps.bindClassModifiers(this.element),P(h.empty,U(this.element,fs(void 0,"nop")));const p=s.createElement("div");p.classList.add(fs("i")),this.element.appendChild(p),this.itemsElement=p;const y=h.contentsElement;y.classList.add(fs("c")),this.element.appendChild(y),this.contentsElement=y}}class D_ extends ch{constructor(s,h){const p=new Pn(s,{blade:h.blade,viewProps:h.viewProps}),y=new IA;super({blade:h.blade,rackController:p,view:new PA(s,{contentsElement:p.view.element,empty:y.empty,viewProps:h.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new bt(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=y}get pageSet(){return this.pageSet_}add(s,h){this.pageSet_.add(s,h)}remove(s){this.pageSet_.remove(this.pageSet_.items[s])}onPageAdd_(s){const h=s.item;tr(this.view.itemsElement,h.itemController.view.element,s.index),this.rackController.rack.add(h.contentController,s.index),this.tab.add(h.props.value("selected"))}onPageRemove_(s){const h=s.item;jr(h.itemController.view.element),this.rackController.rack.remove(h.contentController),this.tab.remove(h.props.value("selected"))}}const V_={id:"tab",type:"blade",accept(u){const s=q,h=nt(u,{pages:s.required.array(s.required.object({title:s.required.string})),view:s.required.constant("tab")});return!h||h.pages.length===0?null:{params:h}},controller(u){const s=new D_(u.document,{blade:u.blade,viewProps:u.viewProps});return u.params.pages.forEach(h=>{const p=new G_(u.document,{itemProps:V.fromObject({selected:!1,title:h.title}),props:V.fromObject({selected:!1})});s.add(p)}),s},api(u){return u.controller instanceof D_?new M_(u.controller,u.pool):null}};function RA(u,s){const h=u.accept(s.params);if(!h)return null;const p=q.optional.boolean(s.params.disabled).value,y=q.optional.boolean(s.params.hidden).value;return u.controller({blade:ve(),document:s.document,params:Object.assign(Object.assign({},h.params),{disabled:p,hidden:y}),viewProps:Er.create({disabled:p,hidden:y})})}class AA{constructor(){this.disabled=!1,this.emitter=new w}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class NA{constructor(s,h){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=s,this.emitter=new w,this.interval_=h,this.setTimer_()}get disabled(){return this.disabled_}set disabled(s){this.disabled_=s,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const s=this.doc_.defaultView;s&&s.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const s=this.doc_.defaultView;s&&(this.timerId_=s.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class An{constructor(s){this.constraints=s}constrain(s){return this.constraints.reduce((h,p)=>p.constrain(h),s)}}function $e(u,s){if(u instanceof s)return u;if(u instanceof An){const h=u.constraints.reduce((p,y)=>p||(y instanceof s?y:null),null);if(h)return h}return null}class Nn{constructor(s){this.options=s}constrain(s){const h=this.options;return h.length===0||h.filter(y=>y.value===s).length>0?s:h[0].value}}class Gi{constructor(s){this.maxValue=s.max,this.minValue=s.min}constrain(s){let h=s;return v(this.minValue)||(h=Math.max(h,this.minValue)),v(this.maxValue)||(h=Math.min(h,this.maxValue)),h}}class ps{constructor(s,h=0){this.step=s,this.origin=h}constrain(s){const h=this.origin%this.step,p=Math.round((s-h)/this.step);return h+p*this.step}}const dh=I("lst");class SA{constructor(s,h){this.onValueChange_=this.onValueChange_.bind(this),this.props_=h.props,this.element=s.createElement("div"),this.element.classList.add(dh()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("select");p.classList.add(dh("s")),O(this.props_,"options",E=>{xr(p),E.forEach((N,M)=>{const J=s.createElement("option");J.dataset.index=String(M),J.textContent=N.text,J.value=String(N.value),p.appendChild(J)})}),h.viewProps.bindDisabled(p),this.element.appendChild(p),this.selectElement=p;const y=s.createElement("div");y.classList.add(dh("m")),y.appendChild(be(s,"dropdown")),this.element.appendChild(y),h.value.emitter.on("change",this.onValueChange_),this.value_=h.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Sn{constructor(s,h){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=h.props,this.value=h.value,this.viewProps=h.viewProps,this.view=new SA(s,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(s){const p=s.currentTarget.selectedOptions.item(0);if(!p)return;const y=Number(p.dataset.index);this.value.rawValue=this.props.get("options")[y].value}}const H_=I("pop");class OA{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(H_()),h.viewProps.bindClassModifiers(this.element),P(h.shows,U(this.element,H_(void 0,"v")))}}class X_{constructor(s,h){this.shows=k(!1),this.viewProps=h.viewProps,this.view=new OA(s,{shows:this.shows,viewProps:this.viewProps})}}const $_=I("txt");class UA{constructor(s,h){this.onChange_=this.onChange_.bind(this),this.element=s.createElement("div"),this.element.classList.add($_()),h.viewProps.bindClassModifiers(this.element),this.props_=h.props,this.props_.emitter.on("change",this.onChange_);const p=s.createElement("input");p.classList.add($_("i")),p.type="text",h.viewProps.bindDisabled(p),this.element.appendChild(p),this.inputElement=p,h.value.emitter.on("change",this.onChange_),this.value_=h.value,this.refresh()}refresh(){const s=this.props_.get("formatter");this.inputElement.value=s(this.value_.rawValue)}onChange_(){this.refresh()}}class ds{constructor(s,h){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=h.parser,this.props=h.props,this.value=h.value,this.viewProps=h.viewProps,this.view=new UA(s,{props:h.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(s){const p=s.currentTarget.value,y=this.parser_(p);v(y)||(this.value.rawValue=y),this.view.refresh()}}function LA(u){return String(u)}function j_(u){return u==="false"?!1:!!u}function z_(u){return LA(u)}class FA{constructor(s){this.text=s}evaluate(){return Number(this.text)}toString(){return this.text}}const GA={"**":(u,s)=>Math.pow(u,s),"*":(u,s)=>u*s,"/":(u,s)=>u/s,"%":(u,s)=>u%s,"+":(u,s)=>u+s,"-":(u,s)=>u-s,"<<":(u,s)=>u<<s,">>":(u,s)=>u>>s,">>>":(u,s)=>u>>>s,"&":(u,s)=>u&s,"^":(u,s)=>u^s,"|":(u,s)=>u|s};class BA{constructor(s,h,p){this.left=h,this.operator=s,this.right=p}evaluate(){const s=GA[this.operator];if(!s)throw new Error(`unexpected binary operator: '${this.operator}`);return s(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const MA={"+":u=>u,"-":u=>-u,"~":u=>~u};class kA{constructor(s,h){this.operator=s,this.expression=h}evaluate(){const s=MA[this.operator];if(!s)throw new Error(`unexpected unary operator: '${this.operator}`);return s(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function vh(u){return(s,h)=>{for(let p=0;p<u.length;p++){const y=u[p](s,h);if(y!=="")return y}return""}}function On(u,s){var h;const p=u.substr(s).match(/^\s+/);return(h=p&&p[0])!==null&&h!==void 0?h:""}function DA(u,s){const h=u.substr(s,1);return h.match(/^[1-9]$/)?h:""}function Un(u,s){var h;const p=u.substr(s).match(/^[0-9]+/);return(h=p&&p[0])!==null&&h!==void 0?h:""}function VA(u,s){const h=Un(u,s);if(h!=="")return h;const p=u.substr(s,1);if(s+=1,p!=="-"&&p!=="+")return"";const y=Un(u,s);return y===""?"":p+y}function _h(u,s){const h=u.substr(s,1);if(s+=1,h.toLowerCase()!=="e")return"";const p=VA(u,s);return p===""?"":h+p}function W_(u,s){const h=u.substr(s,1);if(h==="0")return h;const p=DA(u,s);return s+=p.length,p===""?"":p+Un(u,s)}function HA(u,s){const h=W_(u,s);if(s+=h.length,h==="")return"";const p=u.substr(s,1);if(s+=p.length,p!==".")return"";const y=Un(u,s);return s+=y.length,h+p+y+_h(u,s)}function XA(u,s){const h=u.substr(s,1);if(s+=h.length,h!==".")return"";const p=Un(u,s);return s+=p.length,p===""?"":h+p+_h(u,s)}function $A(u,s){const h=W_(u,s);return s+=h.length,h===""?"":h+_h(u,s)}const jA=vh([HA,XA,$A]);function zA(u,s){var h;const p=u.substr(s).match(/^[01]+/);return(h=p&&p[0])!==null&&h!==void 0?h:""}function WA(u,s){const h=u.substr(s,2);if(s+=h.length,h.toLowerCase()!=="0b")return"";const p=zA(u,s);return p===""?"":h+p}function YA(u,s){var h;const p=u.substr(s).match(/^[0-7]+/);return(h=p&&p[0])!==null&&h!==void 0?h:""}function qA(u,s){const h=u.substr(s,2);if(s+=h.length,h.toLowerCase()!=="0o")return"";const p=YA(u,s);return p===""?"":h+p}function KA(u,s){var h;const p=u.substr(s).match(/^[0-9a-f]+/i);return(h=p&&p[0])!==null&&h!==void 0?h:""}function ZA(u,s){const h=u.substr(s,2);if(s+=h.length,h.toLowerCase()!=="0x")return"";const p=KA(u,s);return p===""?"":h+p}const JA=vh([WA,qA,ZA]),QA=vh([JA,jA]);function tN(u,s){const h=QA(u,s);return s+=h.length,h===""?null:{evaluable:new FA(h),cursor:s}}function eN(u,s){const h=u.substr(s,1);if(s+=h.length,h!=="(")return null;const p=q_(u,s);if(!p)return null;s=p.cursor,s+=On(u,s).length;const y=u.substr(s,1);return s+=y.length,y!==")"?null:{evaluable:p.evaluable,cursor:s}}function rN(u,s){var h;return(h=tN(u,s))!==null&&h!==void 0?h:eN(u,s)}function Y_(u,s){const h=rN(u,s);if(h)return h;const p=u.substr(s,1);if(s+=p.length,p!=="+"&&p!=="-"&&p!=="~")return null;const y=Y_(u,s);return y?(s=y.cursor,{cursor:s,evaluable:new kA(p,y.evaluable)}):null}function iN(u,s,h){h+=On(s,h).length;const p=u.filter(y=>s.startsWith(y,h))[0];return p?(h+=p.length,h+=On(s,h).length,{cursor:h,operator:p}):null}function nN(u,s){return(h,p)=>{const y=u(h,p);if(!y)return null;p=y.cursor;let E=y.evaluable;for(;;){const N=iN(s,h,p);if(!N)break;p=N.cursor;const M=u(h,p);if(!M)return null;p=M.cursor,E=new BA(N.operator,E,M.evaluable)}return E?{cursor:p,evaluable:E}:null}}const oN=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((u,s)=>nN(u,s),Y_);function q_(u,s){return s+=On(u,s).length,oN(u,s)}function sN(u){const s=q_(u,0);return!s||s.cursor+On(u,s.cursor).length!==u.length?null:s.evaluable}function rr(u){var s;const h=sN(u);return(s=h==null?void 0:h.evaluate())!==null&&s!==void 0?s:null}function K_(u){if(typeof u=="number")return u;if(typeof u=="string"){const s=rr(u);if(!v(s))return s}return 0}function aN(u){return String(u)}function oe(u){return s=>s.toFixed(Math.max(Math.min(u,20),0))}const lN=oe(0);function vs(u){return lN(u)+"%"}function Z_(u){return String(u)}function mh(u){return u}function J_(u,s){for(;u.length<s;)u.push(void 0)}function hN(u){const s=[];return J_(s,u),k(s)}function uN(u){const s=u.indexOf(void 0);return s<0?u:u.slice(0,s)}function cN(u,s){const h=[...uN(u),s];return h.length>u.length?h.splice(0,h.length-u.length):J_(h,u.length),h}function Ln({primary:u,secondary:s,forward:h,backward:p}){let y=!1;function E(N){y||(y=!0,N(),y=!1)}u.emitter.on("change",N=>{E(()=>{s.setRawValue(h(u,s),N.options)})}),s.emitter.on("change",N=>{E(()=>{u.setRawValue(p(u,s),N.options)}),E(()=>{s.setRawValue(h(u,s),N.options)})}),E(()=>{s.setRawValue(h(u,s),{forceEmit:!1,last:!0})})}function _e(u,s){const h=u*(s.altKey?.1:1)*(s.shiftKey?10:1);return s.upKey?+h:s.downKey?-h:0}function Fn(u){return{altKey:u.altKey,downKey:u.key==="ArrowDown",shiftKey:u.shiftKey,upKey:u.key==="ArrowUp"}}function ir(u){return{altKey:u.altKey,downKey:u.key==="ArrowLeft",shiftKey:u.shiftKey,upKey:u.key==="ArrowRight"}}function fN(u){return u==="ArrowUp"||u==="ArrowDown"}function Q_(u){return fN(u)||u==="ArrowLeft"||u==="ArrowRight"}function gh(u,s){var h,p;const y=s.ownerDocument.defaultView,E=s.getBoundingClientRect();return{x:u.pageX-(((h=y&&y.scrollX)!==null&&h!==void 0?h:0)+E.left),y:u.pageY-(((p=y&&y.scrollY)!==null&&p!==void 0?p:0)+E.top)}}class qr{constructor(s){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=s,this.emitter=new w,s.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),s.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),s.addEventListener("touchend",this.onTouchEnd_),s.addEventListener("mousedown",this.onMouseDown_)}computePosition_(s){const h=this.elem_.getBoundingClientRect();return{bounds:{width:h.width,height:h.height},point:s?{x:s.x,y:s.y}:null}}onMouseDown_(s){var h;s.preventDefault(),(h=s.currentTarget)===null||h===void 0||h.focus();const p=this.elem_.ownerDocument;p.addEventListener("mousemove",this.onDocumentMouseMove_),p.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:s.altKey,data:this.computePosition_(gh(s,this.elem_)),sender:this,shiftKey:s.shiftKey})}onDocumentMouseMove_(s){this.emitter.emit("move",{altKey:s.altKey,data:this.computePosition_(gh(s,this.elem_)),sender:this,shiftKey:s.shiftKey})}onDocumentMouseUp_(s){const h=this.elem_.ownerDocument;h.removeEventListener("mousemove",this.onDocumentMouseMove_),h.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:s.altKey,data:this.computePosition_(gh(s,this.elem_)),sender:this,shiftKey:s.shiftKey})}onTouchStart_(s){s.preventDefault();const h=s.targetTouches.item(0),p=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:s.altKey,data:this.computePosition_(h?{x:h.clientX-p.left,y:h.clientY-p.top}:void 0),sender:this,shiftKey:s.shiftKey}),this.lastTouch_=h}onTouchMove_(s){const h=s.targetTouches.item(0),p=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:s.altKey,data:this.computePosition_(h?{x:h.clientX-p.left,y:h.clientY-p.top}:void 0),sender:this,shiftKey:s.shiftKey}),this.lastTouch_=h}onTouchEnd_(s){var h;const p=(h=s.targetTouches.item(0))!==null&&h!==void 0?h:this.lastTouch_,y=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:s.altKey,data:this.computePosition_(p?{x:p.clientX-y.left,y:p.clientY-y.top}:void 0),sender:this,shiftKey:s.shiftKey})}}function kt(u,s,h,p,y){const E=(u-s)/(h-s);return p+E*(y-p)}function tm(u){return String(u.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function te(u,s,h){return Math.min(Math.max(u,s),h)}function em(u,s){return(u%s+s)%s}const xe=I("txt");class pN{constructor(s,h){this.onChange_=this.onChange_.bind(this),this.props_=h.props,this.props_.emitter.on("change",this.onChange_),this.element=s.createElement("div"),this.element.classList.add(xe(),xe(void 0,"num")),h.arrayPosition&&this.element.classList.add(xe(void 0,h.arrayPosition)),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("input");p.classList.add(xe("i")),p.type="text",h.viewProps.bindDisabled(p),this.element.appendChild(p),this.inputElement=p,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=h.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(xe()),this.inputElement.classList.add(xe("i"));const y=s.createElement("div");y.classList.add(xe("k")),this.element.appendChild(y),this.knobElement=y;const E=s.createElementNS(vt,"svg");E.classList.add(xe("g")),this.knobElement.appendChild(E);const N=s.createElementNS(vt,"path");N.classList.add(xe("gb")),E.appendChild(N),this.guideBodyElem_=N;const M=s.createElementNS(vt,"path");M.classList.add(xe("gh")),E.appendChild(M),this.guideHeadElem_=M;const J=s.createElement("div");J.classList.add(I("tt")()),this.knobElement.appendChild(J),this.tooltipElem_=J,h.value.emitter.on("change",this.onChange_),this.value=h.value,this.refresh()}onDraggingChange_(s){if(s.rawValue===null){this.element.classList.remove(xe(void 0,"drg"));return}this.element.classList.add(xe(void 0,"drg"));const h=s.rawValue/this.props_.get("draggingScale"),p=h+(h>0?-1:h<0?1:0),y=te(-p,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${p+y},0 L${p},4 L${p+y},8`,`M ${h},-1 L${h},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${h},4`);const E=this.props_.get("formatter");this.tooltipElem_.textContent=E(this.value.rawValue),this.tooltipElem_.style.left=`${h}px`}refresh(){const s=this.props_.get("formatter");this.inputElement.value=s(this.value.rawValue)}onChange_(){this.refresh()}}class Gn{constructor(s,h){var p;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=h.baseStep,this.parser_=h.parser,this.props=h.props,this.sliderProps_=(p=h.sliderProps)!==null&&p!==void 0?p:null,this.value=h.value,this.viewProps=h.viewProps,this.dragging_=k(null),this.view=new pN(s,{arrayPosition:h.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const y=new qr(this.view.knobElement);y.emitter.on("down",this.onPointerDown_),y.emitter.on("move",this.onPointerMove_),y.emitter.on("up",this.onPointerUp_)}constrainValue_(s){var h,p;const y=(h=this.sliderProps_)===null||h===void 0?void 0:h.get("minValue"),E=(p=this.sliderProps_)===null||p===void 0?void 0:p.get("maxValue");let N=s;return y!==void 0&&(N=Math.max(N,y)),E!==void 0&&(N=Math.min(N,E)),N}onInputChange_(s){const p=s.currentTarget.value,y=this.parser_(p);v(y)||(this.value.rawValue=this.constrainValue_(y)),this.view.refresh()}onInputKeyDown_(s){const h=_e(this.baseStep_,Fn(s));h!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+h),{forceEmit:!1,last:!1})}onInputKeyUp_(s){_e(this.baseStep_,Fn(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(s){if(!s.point)return null;const h=s.point.x-s.bounds.width/2;return this.constrainValue_(this.originRawValue_+h*this.props.get("draggingScale"))}onPointerMove_(s){const h=this.computeDraggingValue_(s.data);h!==null&&(this.value.setRawValue(h,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(s){const h=this.computeDraggingValue_(s.data);h!==null&&(this.value.setRawValue(h,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const yh=I("sld");class dN{constructor(s,h){this.onChange_=this.onChange_.bind(this),this.props_=h.props,this.props_.emitter.on("change",this.onChange_),this.element=s.createElement("div"),this.element.classList.add(yh()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("div");p.classList.add(yh("t")),h.viewProps.bindTabIndex(p),this.element.appendChild(p),this.trackElement=p;const y=s.createElement("div");y.classList.add(yh("k")),this.trackElement.appendChild(y),this.knobElement=y,h.value.emitter.on("change",this.onChange_),this.value=h.value,this.update_()}update_(){const s=te(kt(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${s}%`}onChange_(){this.update_()}}class vN{constructor(s,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=h.baseStep,this.value=h.value,this.viewProps=h.viewProps,this.props=h.props,this.view=new dN(s,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qr(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,h){!s.point||this.value.setRawValue(kt(te(s.point.x,0,s.bounds.width),0,s.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),h)}onPointerDownOrMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){const h=_e(this.baseStep_,ir(s));h!==0&&this.value.setRawValue(this.value.rawValue+h,{forceEmit:!1,last:!1})}onKeyUp_(s){_e(this.baseStep_,ir(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const bh=I("sldtxt");class _N{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(bh());const p=s.createElement("div");p.classList.add(bh("s")),this.sliderView_=h.sliderView,p.appendChild(this.sliderView_.element),this.element.appendChild(p);const y=s.createElement("div");y.classList.add(bh("t")),this.textView_=h.textView,y.appendChild(this.textView_.element),this.element.appendChild(y)}}class xh{constructor(s,h){this.value=h.value,this.viewProps=h.viewProps,this.sliderC_=new vN(s,{baseStep:h.baseStep,props:h.sliderProps,value:h.value,viewProps:this.viewProps}),this.textC_=new Gn(s,{baseStep:h.baseStep,parser:h.parser,props:h.textProps,sliderProps:h.sliderProps,value:h.value,viewProps:h.viewProps}),this.view=new _N(s,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Bn(u,s){u.write(s)}function _s(u){const s=q;if(Array.isArray(u))return s.required.array(s.required.object({text:s.required.string,value:s.required.raw}))(u).value;if(typeof u=="object")return s.required.raw(u).value}function rm(u){if(u==="inline"||u==="popup")return u}function Cr(u){const s=q;return s.required.object({max:s.optional.number,min:s.optional.number,step:s.optional.number})(u).value}function im(u){if(Array.isArray(u))return u;const s=[];return Object.keys(u).forEach(h=>{s.push({text:h,value:u[h]})}),s}function wh(u){return v(u)?null:new Nn(im(u))}function Th(u){const s=u?$e(u,Nn):null;return s?s.options:null}function mN(u){const s=u?$e(u,ps):null;return s?s.step:null}function ms(u,s){const h=u&&$e(u,ps);return h?tm(h.step):Math.max(tm(s),2)}function Bi(u){const s=mN(u);return s!=null?s:1}function Mi(u,s){var h;const p=u&&$e(u,ps),y=Math.abs((h=p==null?void 0:p.step)!==null&&h!==void 0?h:s);return y===0?.1:Math.pow(10,Math.floor(Math.log10(y))-1)}const gs=I("ckb");class gN{constructor(s,h){this.onValueChange_=this.onValueChange_.bind(this),this.element=s.createElement("div"),this.element.classList.add(gs()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("label");p.classList.add(gs("l")),this.element.appendChild(p);const y=s.createElement("input");y.classList.add(gs("i")),y.type="checkbox",p.appendChild(y),this.inputElement=y,h.viewProps.bindDisabled(this.inputElement);const E=s.createElement("div");E.classList.add(gs("w")),p.appendChild(E);const N=be(s,"check");E.appendChild(N),h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class yN{constructor(s,h){this.onInputChange_=this.onInputChange_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new gN(s,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(s){const h=s.currentTarget;this.value.rawValue=h.checked}}function bN(u){const s=[],h=wh(u.options);return h&&s.push(h),new An(s)}const xN={id:"input-bool",type:"input",accept:(u,s)=>{if(typeof u!="boolean")return null;const p=nt(s,{options:q.optional.custom(_s)});return p?{initialValue:u,params:p}:null},binding:{reader:u=>j_,constraint:u=>bN(u.params),writer:u=>Bn},controller:u=>{var s;const h=u.document,p=u.value,y=u.constraint;return y&&$e(y,Nn)?new Sn(h,{props:V.fromObject({options:(s=Th(y))!==null&&s!==void 0?s:[]}),value:p,viewProps:u.viewProps}):new yN(h,{value:p,viewProps:u.viewProps})}},Kr=I("col");class wN{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(Kr()),h.foldable.bindExpandedClass(this.element,Kr(void 0,"expanded")),O(h.foldable,"completed",U(this.element,Kr(void 0,"cpl")));const p=s.createElement("div");p.classList.add(Kr("h")),this.element.appendChild(p);const y=s.createElement("div");y.classList.add(Kr("s")),p.appendChild(y),this.swatchElement=y;const E=s.createElement("div");if(E.classList.add(Kr("t")),p.appendChild(E),this.textElement=E,h.pickerLayout==="inline"){const N=s.createElement("div");N.classList.add(Kr("p")),this.element.appendChild(N),this.pickerElement=N}else this.pickerElement=null}}function TN(u,s,h){const p=te(u/255,0,1),y=te(s/255,0,1),E=te(h/255,0,1),N=Math.max(p,y,E),M=Math.min(p,y,E),J=N-M;let st=0,Tt=0;const Et=(M+N)/2;return J!==0&&(Tt=J/(1-Math.abs(N+M-1)),p===N?st=(y-E)/J:y===N?st=2+(E-p)/J:st=4+(p-y)/J,st=st/6+(st<0?1:0)),[st*360,Tt*100,Et*100]}function EN(u,s,h){const p=(u%360+360)%360,y=te(s/100,0,1),E=te(h/100,0,1),N=(1-Math.abs(2*E-1))*y,M=N*(1-Math.abs(p/60%2-1)),J=E-N/2;let st,Tt,Et;return p>=0&&p<60?[st,Tt,Et]=[N,M,0]:p>=60&&p<120?[st,Tt,Et]=[M,N,0]:p>=120&&p<180?[st,Tt,Et]=[0,N,M]:p>=180&&p<240?[st,Tt,Et]=[0,M,N]:p>=240&&p<300?[st,Tt,Et]=[M,0,N]:[st,Tt,Et]=[N,0,M],[(st+J)*255,(Tt+J)*255,(Et+J)*255]}function CN(u,s,h){const p=te(u/255,0,1),y=te(s/255,0,1),E=te(h/255,0,1),N=Math.max(p,y,E),M=Math.min(p,y,E),J=N-M;let st;J===0?st=0:N===p?st=60*(((y-E)/J%6+6)%6):N===y?st=60*((E-p)/J+2):st=60*((p-y)/J+4);const Tt=N===0?0:J/N,Et=N;return[st,Tt*100,Et*100]}function nm(u,s,h){const p=em(u,360),y=te(s/100,0,1),E=te(h/100,0,1),N=E*y,M=N*(1-Math.abs(p/60%2-1)),J=E-N;let st,Tt,Et;return p>=0&&p<60?[st,Tt,Et]=[N,M,0]:p>=60&&p<120?[st,Tt,Et]=[M,N,0]:p>=120&&p<180?[st,Tt,Et]=[0,N,M]:p>=180&&p<240?[st,Tt,Et]=[0,M,N]:p>=240&&p<300?[st,Tt,Et]=[M,0,N]:[st,Tt,Et]=[N,0,M],[(st+J)*255,(Tt+J)*255,(Et+J)*255]}function IN(u,s,h){const p=h+s*(100-Math.abs(2*h-100))/200;return[u,p!==0?s*(100-Math.abs(2*h-100))/p:0,h+s*(100-Math.abs(2*h-100))/(2*100)]}function PN(u,s,h){const p=100-Math.abs(h*(200-s)/100-100);return[u,p!==0?s*h/p:0,h*(200-s)/(2*100)]}function Zr(u){return[u[0],u[1],u[2]]}function om(u,s){return[u[0],u[1],u[2],s]}const RN={hsl:{hsl:(u,s,h)=>[u,s,h],hsv:IN,rgb:EN},hsv:{hsl:PN,hsv:(u,s,h)=>[u,s,h],rgb:nm},rgb:{hsl:TN,hsv:CN,rgb:(u,s,h)=>[u,s,h]}};function ys(u,s){return[s==="float"?1:u==="rgb"?255:360,s==="float"?1:u==="rgb"?255:100,s==="float"?1:u==="rgb"?255:100]}function AN(u,s,h){var p;const y=ys(s,h);return[s==="rgb"?te(u[0],0,y[0]):em(u[0],y[0]),te(u[1],0,y[1]),te(u[2],0,y[2]),te((p=u[3])!==null&&p!==void 0?p:1,0,1)]}function sm(u,s,h,p){const y=ys(s,h),E=ys(s,p);return u.map((N,M)=>N/y[M]*E[M])}function NN(u,s,h){const p=sm(u,s.mode,s.type,"int"),y=RN[s.mode][h.mode](...p);return sm(y,h.mode,"int",h.type)}function bs(u,s){return typeof u!="object"||v(u)?!1:s in u&&typeof u[s]=="number"}class pt{constructor(s,h,p="int"){this.mode=h,this.type=p,this.comps_=AN(s,h,p)}static black(s="int"){return new pt([0,0,0],"rgb",s)}static fromObject(s,h="int"){const p="a"in s?[s.r,s.g,s.b,s.a]:[s.r,s.g,s.b];return new pt(p,"rgb",h)}static toRgbaObject(s,h="int"){return s.toRgbaObject(h)}static isRgbColorObject(s){return bs(s,"r")&&bs(s,"g")&&bs(s,"b")}static isRgbaColorObject(s){return this.isRgbColorObject(s)&&bs(s,"a")}static isColorObject(s){return this.isRgbColorObject(s)}static equals(s,h){if(s.mode!==h.mode)return!1;const p=s.comps_,y=h.comps_;for(let E=0;E<p.length;E++)if(p[E]!==y[E])return!1;return!0}getComponents(s,h="int"){return om(NN(Zr(this.comps_),{mode:this.mode,type:this.type},{mode:s!=null?s:this.mode,type:h}),this.comps_[3])}toRgbaObject(s="int"){const h=this.getComponents("rgb",s);return{r:h[0],g:h[1],b:h[2],a:h[3]}}}const Ir=I("colp");class SN{constructor(s,h){this.alphaViews_=null,this.element=s.createElement("div"),this.element.classList.add(Ir());const p=s.createElement("div");p.classList.add(Ir("hsv"));const y=s.createElement("div");y.classList.add(Ir("sv")),this.svPaletteView_=h.svPaletteView,y.appendChild(this.svPaletteView_.element),p.appendChild(y);const E=s.createElement("div");E.classList.add(Ir("h")),this.hPaletteView_=h.hPaletteView,E.appendChild(this.hPaletteView_.element),p.appendChild(E),this.element.appendChild(p);const N=s.createElement("div");if(N.classList.add(Ir("rgb")),this.textView_=h.textView,N.appendChild(this.textView_.element),this.element.appendChild(N),h.alphaViews){this.alphaViews_={palette:h.alphaViews.palette,text:h.alphaViews.text};const M=s.createElement("div");M.classList.add(Ir("a"));const J=s.createElement("div");J.classList.add(Ir("ap")),J.appendChild(this.alphaViews_.palette.element),M.appendChild(J);const st=s.createElement("div");st.classList.add(Ir("at")),st.appendChild(this.alphaViews_.text.element),M.appendChild(st),this.element.appendChild(M)}}get allFocusableElements(){const s=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(h=>h.inputElement)];return this.alphaViews_&&s.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),s}}function ON(u){return u==="int"?"int":u==="float"?"float":void 0}function Eh(u){const s=q;return nt(u,{alpha:s.optional.boolean,color:s.optional.object({alpha:s.optional.boolean,type:s.optional.custom(ON)}),expanded:s.optional.boolean,picker:s.optional.custom(rm)})}function Jr(u){return u?.1:1}function Qr(u){var s;return(s=u.color)===null||s===void 0?void 0:s.type}function UN(u,s){return u.alpha===s.alpha&&u.mode===s.mode&&u.notation===s.notation&&u.type===s.type}function we(u,s){const h=u.match(/^(.+)%$/);return Math.min(h?parseFloat(h[1])*.01*s:parseFloat(u),s)}const LN={deg:u=>u,grad:u=>u*360/400,rad:u=>u*360/(2*Math.PI),turn:u=>u*360};function am(u){const s=u.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!s)return parseFloat(u);const h=parseFloat(s[1]),p=s[2];return LN[p](h)}function lm(u){const s=u.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const h=[we(s[1],255),we(s[2],255),we(s[3],255)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function hm(u){return s=>{const h=lm(s);return h?new pt(h,"rgb",u):null}}function um(u){const s=u.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const h=[we(s[1],255),we(s[2],255),we(s[3],255),we(s[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function cm(u){return s=>{const h=um(s);return h?new pt(h,"rgb",u):null}}function fm(u){const s=u.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const h=[am(s[1]),we(s[2],100),we(s[3],100)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function pm(u){return s=>{const h=fm(s);return h?new pt(h,"hsl",u):null}}function dm(u){const s=u.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!s)return null;const h=[am(s[1]),we(s[2],100),we(s[3],100),we(s[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function vm(u){return s=>{const h=dm(s);return h?new pt(h,"hsl",u):null}}function _m(u){const s=u.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(s)return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)];const h=u.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]:null}function FN(u){const s=_m(u);return s?new pt(s,"rgb","int"):null}function mm(u){const s=u.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(s)return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16),kt(parseInt(s[4]+s[4],16),0,255,0,1)];const h=u.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),kt(parseInt(h[4],16),0,255,0,1)]:null}function GN(u){const s=mm(u);return s?new pt(s,"rgb","int"):null}function gm(u){const s=u.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!s)return null;const h=[parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function ym(u){return s=>{const h=gm(s);return h?new pt(h,"rgb",u):null}}function bm(u){const s=u.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!s)return null;const h=[parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseFloat(s[4])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function xm(u){return s=>{const h=bm(s);return h?new pt(h,"rgb",u):null}}const BN=[{parser:_m,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:mm,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:lm,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:um,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:fm,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:dm,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:gm,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:bm,result:{alpha:!0,mode:"rgb",notation:"object"}}];function MN(u){return BN.reduce((s,{parser:h,result:p})=>s||(h(u)?p:null),null)}function Ch(u,s="int"){const h=MN(u);return h?h.notation==="hex"&&s!=="float"?Object.assign(Object.assign({},h),{type:"int"}):h.notation==="func"?Object.assign(Object.assign({},h),{type:s}):null:null}const wm={int:[FN,GN,hm("int"),cm("int"),pm("int"),vm("int"),ym("int"),xm("int")],float:[hm("float"),cm("float"),pm("float"),vm("float"),ym("float"),xm("float")]};function kN(u){const s=wm[u];return h=>{if(typeof h!="string")return pt.black(u);const p=s.reduce((y,E)=>y||E(h),null);return p!=null?p:pt.black(u)}}function Ih(u){const s=wm[u];return h=>s.reduce((p,y)=>p||y(h),null)}function Tm(u){const s=te(Math.floor(u),0,255).toString(16);return s.length===1?`0${s}`:s}function Em(u,s="#"){const h=Zr(u.getComponents("rgb")).map(Tm).join("");return`${s}${h}`}function Ph(u,s="#"){const h=u.getComponents("rgb"),p=[h[0],h[1],h[2],h[3]*255].map(Tm).join("");return`${s}${p}`}function Cm(u,s){const h=oe(s==="float"?2:0);return`rgb(${Zr(u.getComponents("rgb",s)).map(y=>h(y)).join(", ")})`}function DN(u){return s=>Cm(s,u)}function xs(u,s){const h=oe(2),p=oe(s==="float"?2:0);return`rgba(${u.getComponents("rgb",s).map((E,N)=>(N===3?h:p)(E)).join(", ")})`}function VN(u){return s=>xs(s,u)}function HN(u){const s=[oe(0),vs,vs];return`hsl(${Zr(u.getComponents("hsl")).map((p,y)=>s[y](p)).join(", ")})`}function XN(u){const s=[oe(0),vs,vs,oe(2)];return`hsla(${u.getComponents("hsl").map((p,y)=>s[y](p)).join(", ")})`}function Im(u,s){const h=oe(s==="float"?2:0),p=["r","g","b"];return`{${Zr(u.getComponents("rgb",s)).map((E,N)=>`${p[N]}: ${h(E)}`).join(", ")}}`}function $N(u){return s=>Im(s,u)}function Pm(u,s){const h=oe(2),p=oe(s==="float"?2:0),y=["r","g","b","a"];return`{${u.getComponents("rgb",s).map((N,M)=>{const J=M===3?h:p;return`${y[M]}: ${J(N)}`}).join(", ")}}`}function jN(u){return s=>Pm(s,u)}const zN=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Em},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Ph},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:HN},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:XN},...["int","float"].reduce((u,s)=>[...u,{format:{alpha:!1,mode:"rgb",notation:"func",type:s},stringifier:DN(s)},{format:{alpha:!0,mode:"rgb",notation:"func",type:s},stringifier:VN(s)},{format:{alpha:!1,mode:"rgb",notation:"object",type:s},stringifier:$N(s)},{format:{alpha:!0,mode:"rgb",notation:"object",type:s},stringifier:jN(s)}],[])];function Rh(u){return zN.reduce((s,h)=>s||(UN(h.format,u)?h.stringifier:null),null)}const Mn=I("apl");class WN{constructor(s,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=s.createElement("div"),this.element.classList.add(Mn()),h.viewProps.bindTabIndex(this.element);const p=s.createElement("div");p.classList.add(Mn("b")),this.element.appendChild(p);const y=s.createElement("div");y.classList.add(Mn("c")),p.appendChild(y),this.colorElem_=y;const E=s.createElement("div");E.classList.add(Mn("m")),this.element.appendChild(E),this.markerElem_=E;const N=s.createElement("div");N.classList.add(Mn("p")),this.markerElem_.appendChild(N),this.previewElem_=N,this.update_()}update_(){const s=this.value.rawValue,h=s.getComponents("rgb"),p=new pt([h[0],h[1],h[2],0],"rgb"),y=new pt([h[0],h[1],h[2],255],"rgb"),E=["to right",xs(p),xs(y)];this.colorElem_.style.background=`linear-gradient(${E.join(",")})`,this.previewElem_.style.backgroundColor=xs(s);const N=kt(h[3],0,1,0,100);this.markerElem_.style.left=`${N}%`}onValueChange_(){this.update_()}}class YN{constructor(s,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new WN(s,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,h){if(!s.point)return;const p=s.point.x/s.bounds.width,y=this.value.rawValue,[E,N,M]=y.getComponents("hsv");this.value.setRawValue(new pt([E,N,M,p],"hsv"),h)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){const h=_e(Jr(!0),ir(s));if(h===0)return;const p=this.value.rawValue,[y,E,N,M]=p.getComponents("hsv");this.value.setRawValue(new pt([y,E,N,M+h],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(s){_e(Jr(!0),ir(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ki=I("coltxt");function qN(u){const s=u.createElement("select"),h=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return s.appendChild(h.reduce((p,y)=>{const E=u.createElement("option");return E.textContent=y.text,E.value=y.value,p.appendChild(E),p},u.createDocumentFragment())),s}class KN{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(ki());const p=s.createElement("div");p.classList.add(ki("m")),this.modeElem_=qN(s),this.modeElem_.classList.add(ki("ms")),p.appendChild(this.modeSelectElement);const y=s.createElement("div");y.classList.add(ki("mm")),y.appendChild(be(s,"dropdown")),p.appendChild(y),this.element.appendChild(p);const E=s.createElement("div");E.classList.add(ki("w")),this.element.appendChild(E),this.textsElem_=E,this.textViews_=h.textViews,this.applyTextViews_(),P(h.colorMode,N=>{this.modeElem_.value=N})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(s){this.textViews_=s,this.applyTextViews_()}applyTextViews_(){xr(this.textsElem_);const s=this.element.ownerDocument;this.textViews_.forEach(h=>{const p=s.createElement("div");p.classList.add(ki("c")),p.appendChild(h.element),this.textsElem_.appendChild(p)})}}function ZN(u){return oe(u==="float"?2:0)}function JN(u,s,h){const p=ys(u,s)[h];return new Gi({min:0,max:p})}function Ah(u,s,h){return new Gn(u,{arrayPosition:h===0?"fst":h===3-1?"lst":"mid",baseStep:Jr(!1),parser:s.parser,props:V.fromObject({draggingScale:s.colorType==="float"?.01:1,formatter:ZN(s.colorType)}),value:k(0,{constraint:JN(s.colorMode,s.colorType,h)}),viewProps:s.viewProps})}class QN{constructor(s,h){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=h.colorType,this.parser_=h.parser,this.value=h.value,this.viewProps=h.viewProps,this.colorMode=k(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(s),this.view=new KN(s,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(s){const h={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},p=[Ah(s,h,0),Ah(s,h,1),Ah(s,h,2)];return p.forEach((y,E)=>{Ln({primary:this.value,secondary:y.value,forward:N=>N.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[E],backward:(N,M)=>{const J=this.colorMode.rawValue,st=N.rawValue.getComponents(J,this.colorType_);return st[E]=M.rawValue,new pt(om(Zr(st),st[3]),J,this.colorType_)}})}),p}onModeSelectChange_(s){const h=s.currentTarget;this.colorMode.rawValue=h.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Nh=I("hpl");class tS{constructor(s,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=s.createElement("div"),this.element.classList.add(Nh()),h.viewProps.bindTabIndex(this.element);const p=s.createElement("div");p.classList.add(Nh("c")),this.element.appendChild(p);const y=s.createElement("div");y.classList.add(Nh("m")),this.element.appendChild(y),this.markerElem_=y,this.update_()}update_(){const s=this.value.rawValue,[h]=s.getComponents("hsv");this.markerElem_.style.backgroundColor=Cm(new pt([h,100,100],"hsv"));const p=kt(h,0,360,0,100);this.markerElem_.style.left=`${p}%`}onValueChange_(){this.update_()}}class eS{constructor(s,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new tS(s,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,h){if(!s.point)return;const p=kt(te(s.point.x,0,s.bounds.width),0,s.bounds.width,0,359),y=this.value.rawValue,[,E,N,M]=y.getComponents("hsv");this.value.setRawValue(new pt([p,E,N,M],"hsv"),h)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){const h=_e(Jr(!1),ir(s));if(h===0)return;const p=this.value.rawValue,[y,E,N,M]=p.getComponents("hsv");this.value.setRawValue(new pt([y+h,E,N,M],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(s){_e(Jr(!1),ir(s))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Sh=I("svp"),Rm=64;class rS{constructor(s,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=s.createElement("div"),this.element.classList.add(Sh()),h.viewProps.bindTabIndex(this.element);const p=s.createElement("canvas");p.height=Rm,p.width=Rm,p.classList.add(Sh("c")),this.element.appendChild(p),this.canvasElement=p;const y=s.createElement("div");y.classList.add(Sh("m")),this.element.appendChild(y),this.markerElem_=y,this.update_()}update_(){const s=ut(this.canvasElement);if(!s)return;const p=this.value.rawValue.getComponents("hsv"),y=this.canvasElement.width,E=this.canvasElement.height,N=s.getImageData(0,0,y,E),M=N.data;for(let Tt=0;Tt<E;Tt++)for(let Et=0;Et<y;Et++){const or=kt(Et,0,y,0,100),Dn=kt(Tt,0,E,100,0),Vn=nm(p[0],or,Dn),Xi=(Tt*y+Et)*4;M[Xi]=Vn[0],M[Xi+1]=Vn[1],M[Xi+2]=Vn[2],M[Xi+3]=255}s.putImageData(N,0,0);const J=kt(p[1],0,100,0,100);this.markerElem_.style.left=`${J}%`;const st=kt(p[2],0,100,100,0);this.markerElem_.style.top=`${st}%`}onValueChange_(){this.update_()}}class iS{constructor(s,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new rS(s,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(s,h){if(!s.point)return;const p=kt(s.point.x,0,s.bounds.width,0,100),y=kt(s.point.y,0,s.bounds.height,100,0),[E,,,N]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new pt([E,p,y,N],"hsv"),h)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onKeyDown_(s){Q_(s.key)&&s.preventDefault();const[h,p,y,E]=this.value.rawValue.getComponents("hsv"),N=Jr(!1),M=_e(N,ir(s)),J=_e(N,Fn(s));M===0&&J===0||this.value.setRawValue(new pt([h,p+M,y+J,E],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(s){const h=Jr(!1),p=_e(h,ir(s)),y=_e(h,Fn(s));p===0&&y===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class nS{constructor(s,h){this.value=h.value,this.viewProps=h.viewProps,this.hPaletteC_=new eS(s,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new iS(s,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=h.supportsAlpha?{palette:new YN(s,{value:this.value,viewProps:this.viewProps}),text:new Gn(s,{parser:rr,baseStep:.1,props:V.fromObject({draggingScale:.01,formatter:oe(2)}),value:k(0,{constraint:new Gi({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Ln({primary:this.value,secondary:this.alphaIcs_.text.value,forward:p=>p.rawValue.getComponents()[3],backward:(p,y)=>{const E=p.rawValue.getComponents();return E[3]=y.rawValue,new pt(E,p.rawValue.mode)}}),this.textC_=new QN(s,{colorType:h.colorType,parser:rr,value:this.value,viewProps:this.viewProps}),this.view=new SN(s,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:h.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const Oh=I("colsw");class oS{constructor(s,h){this.onValueChange_=this.onValueChange_.bind(this),h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.element=s.createElement("div"),this.element.classList.add(Oh()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("div");p.classList.add(Oh("sw")),this.element.appendChild(p),this.swatchElem_=p;const y=s.createElement("button");y.classList.add(Oh("b")),h.viewProps.bindDisabled(y),this.element.appendChild(y),this.buttonElement=y,this.update_()}update_(){const s=this.value.rawValue;this.swatchElem_.style.backgroundColor=Ph(s)}onValueChange_(){this.update_()}}class sS{constructor(s,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new oS(s,{value:this.value,viewProps:this.viewProps})}}class Uh{constructor(s,h){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.foldable_=wr.create(h.expanded),this.swatchC_=new sS(s,{value:this.value,viewProps:this.viewProps});const p=this.swatchC_.view.buttonElement;p.addEventListener("blur",this.onButtonBlur_),p.addEventListener("click",this.onButtonClick_),this.textC_=new ds(s,{parser:h.parser,props:V.fromObject({formatter:h.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new wN(s,{foldable:this.foldable_,pickerLayout:h.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=h.pickerLayout==="popup"?new X_(s,{viewProps:this.viewProps}):null;const y=new nS(s,{colorType:h.colorType,supportsAlpha:h.supportsAlpha,value:this.value,viewProps:this.viewProps});y.view.allFocusableElements.forEach(E=>{E.addEventListener("blur",this.onPopupChildBlur_),E.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=y,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(y.view.element),Ln({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:E=>E.rawValue,backward:(E,N)=>N.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),F(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(s){if(!this.popC_)return;const h=this.view.element,p=s.relatedTarget;(!p||!h.contains(p))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(s){if(!this.popC_)return;const h=this.popC_.view.element,p=zr(s);p&&h.contains(p)||p&&p===this.swatchC_.view.buttonElement&&!at(h.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(s){this.popC_?s.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&s.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function aS(u,s){return pt.isColorObject(u)?pt.fromObject(u,s):pt.black(s)}function lS(u){return Zr(u.getComponents("rgb")).reduce((s,h)=>s<<8|Math.floor(h)&255,0)}function hS(u){return u.getComponents("rgb").reduce((s,h,p)=>{const y=Math.floor(p===3?h*255:h)&255;return s<<8|y},0)>>>0}function uS(u){return new pt([u>>16&255,u>>8&255,u&255],"rgb")}function cS(u){return new pt([u>>24&255,u>>16&255,u>>8&255,kt(u&255,0,255,0,1)],"rgb")}function fS(u){return typeof u!="number"?pt.black():uS(u)}function pS(u){return typeof u!="number"?pt.black():cS(u)}function dS(u){const s=Rh(u);return s?(h,p)=>{Bn(h,s(p))}:null}function vS(u){const s=u?hS:lS;return(h,p)=>{Bn(h,s(p))}}function _S(u,s,h){const p=s.toRgbaObject(h);u.writeProperty("r",p.r),u.writeProperty("g",p.g),u.writeProperty("b",p.b),u.writeProperty("a",p.a)}function mS(u,s,h){const p=s.toRgbaObject(h);u.writeProperty("r",p.r),u.writeProperty("g",p.g),u.writeProperty("b",p.b)}function gS(u,s){return(h,p)=>{u?_S(h,p,s):mS(h,p,s)}}function Lh(u){var s;return!!((u==null?void 0:u.alpha)||((s=u==null?void 0:u.color)===null||s===void 0?void 0:s.alpha))}function yS(u){return u?s=>Ph(s,"0x"):s=>Em(s,"0x")}function bS(u){return"color"in u||"view"in u&&u.view==="color"}const xS={id:"input-color-number",type:"input",accept:(u,s)=>{if(typeof u!="number"||!bS(s))return null;const h=Eh(s);return h?{initialValue:u,params:h}:null},binding:{reader:u=>Lh(u.params)?pS:fS,equals:pt.equals,writer:u=>vS(Lh(u.params))},controller:u=>{const s=Lh(u.params),h="expanded"in u.params?u.params.expanded:void 0,p="picker"in u.params?u.params.picker:void 0;return new Uh(u.document,{colorType:"int",expanded:h!=null?h:!1,formatter:yS(s),parser:Ih("int"),pickerLayout:p!=null?p:"popup",supportsAlpha:s,value:u.value,viewProps:u.viewProps})}};function wS(u){return pt.isRgbaColorObject(u)}function TS(u){return s=>aS(s,u)}function ES(u,s){return h=>u?Pm(h,s):Im(h,s)}const CS={id:"input-color-object",type:"input",accept:(u,s)=>{if(!pt.isColorObject(u))return null;const h=Eh(s);return h?{initialValue:u,params:h}:null},binding:{reader:u=>TS(Qr(u.params)),equals:pt.equals,writer:u=>gS(wS(u.initialValue),Qr(u.params))},controller:u=>{var s;const h=pt.isRgbaColorObject(u.initialValue),p="expanded"in u.params?u.params.expanded:void 0,y="picker"in u.params?u.params.picker:void 0,E=(s=Qr(u.params))!==null&&s!==void 0?s:"int";return new Uh(u.document,{colorType:E,expanded:p!=null?p:!1,formatter:ES(h,E),parser:Ih(E),pickerLayout:y!=null?y:"popup",supportsAlpha:h,value:u.value,viewProps:u.viewProps})}},IS={id:"input-color-string",type:"input",accept:(u,s)=>{if(typeof u!="string"||"view"in s&&s.view==="text")return null;const h=Ch(u,Qr(s));if(!h||!Rh(h))return null;const y=Eh(s);return y?{initialValue:u,params:y}:null},binding:{reader:u=>{var s;return kN((s=Qr(u.params))!==null&&s!==void 0?s:"int")},equals:pt.equals,writer:u=>{const s=Ch(u.initialValue,Qr(u.params));if(!s)throw g.shouldNeverHappen();const h=dS(s);if(!h)throw g.notBindable();return h}},controller:u=>{const s=Ch(u.initialValue,Qr(u.params));if(!s)throw g.shouldNeverHappen();const h=Rh(s);if(!h)throw g.shouldNeverHappen();const p="expanded"in u.params?u.params.expanded:void 0,y="picker"in u.params?u.params.picker:void 0;return new Uh(u.document,{colorType:s.type,expanded:p!=null?p:!1,formatter:h,parser:Ih(s.type),pickerLayout:y!=null?y:"popup",supportsAlpha:s.alpha,value:u.value,viewProps:u.viewProps})}};class Pr{constructor(s){this.components=s.components,this.asm_=s.assembly}constrain(s){const h=this.asm_.toComponents(s).map((p,y)=>{var E,N;return(N=(E=this.components[y])===null||E===void 0?void 0:E.constrain(p))!==null&&N!==void 0?N:p});return this.asm_.fromComponents(h)}}const Am=I("pndtxt");class PS{constructor(s,h){this.textViews=h.textViews,this.element=s.createElement("div"),this.element.classList.add(Am()),this.textViews.forEach(p=>{const y=s.createElement("div");y.classList.add(Am("a")),y.appendChild(p.element),this.element.appendChild(y)})}}function RS(u,s,h){return new Gn(u,{arrayPosition:h===0?"fst":h===s.axes.length-1?"lst":"mid",baseStep:s.axes[h].baseStep,parser:s.parser,props:s.axes[h].textProps,value:k(0,{constraint:s.axes[h].constraint}),viewProps:s.viewProps})}class Fh{constructor(s,h){this.value=h.value,this.viewProps=h.viewProps,this.acs_=h.axes.map((p,y)=>RS(s,h,y)),this.acs_.forEach((p,y)=>{Ln({primary:this.value,secondary:p.value,forward:E=>h.assembly.toComponents(E.rawValue)[y],backward:(E,N)=>{const M=h.assembly.toComponents(E.rawValue);return M[y]=N.rawValue,h.assembly.fromComponents(M)}})}),this.view=new PS(s,{textViews:this.acs_.map(p=>p.view)})}}function Nm(u,s){return"step"in u&&!v(u.step)?new ps(u.step,s):null}function Sm(u){return"max"in u&&!v(u.max)||"min"in u&&!v(u.min)?new Gi({max:u.max,min:u.min}):null}function AS(u,s){const h=[],p=Nm(u,s);p&&h.push(p);const y=Sm(u);y&&h.push(y);const E=wh(u.options);return E&&h.push(E),new An(h)}function NS(u){const s=u?$e(u,Gi):null;return s?[s.minValue,s.maxValue]:[void 0,void 0]}function SS(u){const[s,h]=NS(u);return[s!=null?s:0,h!=null?h:100]}const OS={id:"input-number",type:"input",accept:(u,s)=>{if(typeof u!="number")return null;const h=q,p=nt(s,{format:h.optional.function,max:h.optional.number,min:h.optional.number,options:h.optional.custom(_s),step:h.optional.number});return p?{initialValue:u,params:p}:null},binding:{reader:u=>K_,constraint:u=>AS(u.params,u.initialValue),writer:u=>Bn},controller:u=>{var s,h;const p=u.value,y=u.constraint;if(y&&$e(y,Nn))return new Sn(u.document,{props:V.fromObject({options:(s=Th(y))!==null&&s!==void 0?s:[]}),value:p,viewProps:u.viewProps});const E=(h="format"in u.params?u.params.format:void 0)!==null&&h!==void 0?h:oe(ms(y,p.rawValue));if(y&&$e(y,Gi)){const[N,M]=SS(y);return new xh(u.document,{baseStep:Bi(y),parser:rr,sliderProps:V.fromObject({maxValue:M,minValue:N}),textProps:V.fromObject({draggingScale:Mi(y,p.rawValue),formatter:E}),value:p,viewProps:u.viewProps})}return new Gn(u.document,{baseStep:Bi(y),parser:rr,props:V.fromObject({draggingScale:Mi(y,p.rawValue),formatter:E}),value:p,viewProps:u.viewProps})}};class Rr{constructor(s=0,h=0){this.x=s,this.y=h}getComponents(){return[this.x,this.y]}static isObject(s){if(v(s))return!1;const h=s.x,p=s.y;return!(typeof h!="number"||typeof p!="number")}static equals(s,h){return s.x===h.x&&s.y===h.y}toObject(){return{x:this.x,y:this.y}}}const Om={toComponents:u=>u.getComponents(),fromComponents:u=>new Rr(...u)},Di=I("p2d");class US{constructor(s,h){this.element=s.createElement("div"),this.element.classList.add(Di()),h.viewProps.bindClassModifiers(this.element),P(h.expanded,U(this.element,Di(void 0,"expanded")));const p=s.createElement("div");p.classList.add(Di("h")),this.element.appendChild(p);const y=s.createElement("button");y.classList.add(Di("b")),y.appendChild(be(s,"p2dpad")),h.viewProps.bindDisabled(y),p.appendChild(y),this.buttonElement=y;const E=s.createElement("div");if(E.classList.add(Di("t")),p.appendChild(E),this.textElement=E,h.pickerLayout==="inline"){const N=s.createElement("div");N.classList.add(Di("p")),this.element.appendChild(N),this.pickerElement=N}else this.pickerElement=null}}const Ar=I("p2dp");class LS{constructor(s,h){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=h.invertsY,this.maxValue_=h.maxValue,this.element=s.createElement("div"),this.element.classList.add(Ar()),h.layout==="popup"&&this.element.classList.add(Ar(void 0,"p"));const p=s.createElement("div");p.classList.add(Ar("p")),h.viewProps.bindTabIndex(p),this.element.appendChild(p),this.padElement=p;const y=s.createElementNS(vt,"svg");y.classList.add(Ar("g")),this.padElement.appendChild(y),this.svgElem_=y;const E=s.createElementNS(vt,"line");E.classList.add(Ar("ax")),E.setAttributeNS(null,"x1","0"),E.setAttributeNS(null,"y1","50%"),E.setAttributeNS(null,"x2","100%"),E.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(E);const N=s.createElementNS(vt,"line");N.classList.add(Ar("ax")),N.setAttributeNS(null,"x1","50%"),N.setAttributeNS(null,"y1","0"),N.setAttributeNS(null,"x2","50%"),N.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(N);const M=s.createElementNS(vt,"line");M.classList.add(Ar("l")),M.setAttributeNS(null,"x1","50%"),M.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(M),this.lineElem_=M;const J=s.createElement("div");J.classList.add(Ar("m")),this.padElement.appendChild(J),this.markerElem_=J,h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[s,h]=this.value.rawValue.getComponents(),p=this.maxValue_,y=kt(s,-p,+p,0,100),E=kt(h,-p,+p,0,100),N=this.invertsY_?100-E:E;this.lineElem_.setAttributeNS(null,"x2",`${y}%`),this.lineElem_.setAttributeNS(null,"y2",`${N}%`),this.markerElem_.style.left=`${y}%`,this.markerElem_.style.top=`${N}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Um(u,s,h){return[_e(s[0],ir(u)),_e(s[1],Fn(u))*(h?1:-1)]}class FS{constructor(s,h){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.baseSteps_=h.baseSteps,this.maxValue_=h.maxValue,this.invertsY_=h.invertsY,this.view=new LS(s,{invertsY:this.invertsY_,layout:h.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new qr(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(s,h){if(!s.point)return;const p=this.maxValue_,y=kt(s.point.x,0,s.bounds.width,-p,+p),E=kt(this.invertsY_?s.bounds.height-s.point.y:s.point.y,0,s.bounds.height,-p,+p);this.value.setRawValue(new Rr(y,E),h)}onPointerDown_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerMove_(s){this.handlePointerEvent_(s.data,{forceEmit:!1,last:!1})}onPointerUp_(s){this.handlePointerEvent_(s.data,{forceEmit:!0,last:!0})}onPadKeyDown_(s){Q_(s.key)&&s.preventDefault();const[h,p]=Um(s,this.baseSteps_,this.invertsY_);h===0&&p===0||this.value.setRawValue(new Rr(this.value.rawValue.x+h,this.value.rawValue.y+p),{forceEmit:!1,last:!1})}onPadKeyUp_(s){const[h,p]=Um(s,this.baseSteps_,this.invertsY_);h===0&&p===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class GS{constructor(s,h){var p,y;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.foldable_=wr.create(h.expanded),this.popC_=h.pickerLayout==="popup"?new X_(s,{viewProps:this.viewProps}):null;const E=new FS(s,{baseSteps:[h.axes[0].baseStep,h.axes[1].baseStep],invertsY:h.invertsY,layout:h.pickerLayout,maxValue:h.maxValue,value:this.value,viewProps:this.viewProps});E.view.allFocusableElements.forEach(N=>{N.addEventListener("blur",this.onPopupChildBlur_),N.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=E,this.textC_=new Fh(s,{assembly:Om,axes:h.axes,parser:h.parser,value:this.value,viewProps:this.viewProps}),this.view=new US(s,{expanded:this.foldable_.value("expanded"),pickerLayout:h.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(p=this.view.buttonElement)===null||p===void 0||p.addEventListener("blur",this.onPadButtonBlur_),(y=this.view.buttonElement)===null||y===void 0||y.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Ln({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:N=>N.rawValue,backward:(N,M)=>M.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),F(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(s){if(!this.popC_)return;const h=this.view.element,p=s.relatedTarget;(!p||!h.contains(p))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(s){if(!this.popC_)return;const h=this.popC_.view.element,p=zr(s);p&&h.contains(p)||p&&p===this.view.buttonElement&&!at(h.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(s){this.popC_?s.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&s.key==="Escape"&&this.view.buttonElement.focus()}}function BS(u){return Rr.isObject(u)?new Rr(u.x,u.y):new Rr}function MS(u,s){u.writeProperty("x",s.x),u.writeProperty("y",s.y)}function nr(u,s){if(!u)return;const h=[],p=Nm(u,s);p&&h.push(p);const y=Sm(u);return y&&h.push(y),new An(h)}function kS(u,s){return new Pr({assembly:Om,components:[nr("x"in u?u.x:void 0,s.x),nr("y"in u?u.y:void 0,s.y)]})}function Lm(u,s){var h,p;const y=u&&$e(u,Gi);if(y)return Math.max(Math.abs((h=y.minValue)!==null&&h!==void 0?h:0),Math.abs((p=y.maxValue)!==null&&p!==void 0?p:0));const E=Bi(u);return Math.max(Math.abs(E)*10,Math.abs(s)*10)}function DS(u,s){const h=s instanceof Pr?s.components[0]:void 0,p=s instanceof Pr?s.components[1]:void 0,y=Lm(h,u.x),E=Lm(p,u.y);return Math.max(y,E)}function Fm(u,s){return{baseStep:Bi(s),constraint:s,textProps:V.fromObject({draggingScale:Mi(s,u),formatter:oe(ms(s,u))})}}function VS(u){if(!("y"in u))return!1;const s=u.y;return s&&"inverted"in s?!!s.inverted:!1}const HS={id:"input-point2d",type:"input",accept:(u,s)=>{if(!Rr.isObject(u))return null;const h=q,p=nt(s,{expanded:h.optional.boolean,picker:h.optional.custom(rm),x:h.optional.custom(Cr),y:h.optional.object({inverted:h.optional.boolean,max:h.optional.number,min:h.optional.number,step:h.optional.number})});return p?{initialValue:u,params:p}:null},binding:{reader:u=>BS,constraint:u=>kS(u.params,u.initialValue),equals:Rr.equals,writer:u=>MS},controller:u=>{const s=u.document,h=u.value,p=u.constraint;if(!(p instanceof Pr))throw g.shouldNeverHappen();const y="expanded"in u.params?u.params.expanded:void 0,E="picker"in u.params?u.params.picker:void 0;return new GS(s,{axes:[Fm(h.rawValue.x,p.components[0]),Fm(h.rawValue.y,p.components[1])],expanded:y!=null?y:!1,invertsY:VS(u.params),maxValue:DS(h.rawValue,p),parser:rr,pickerLayout:E!=null?E:"popup",value:h,viewProps:u.viewProps})}};class Vi{constructor(s=0,h=0,p=0){this.x=s,this.y=h,this.z=p}getComponents(){return[this.x,this.y,this.z]}static isObject(s){if(v(s))return!1;const h=s.x,p=s.y,y=s.z;return!(typeof h!="number"||typeof p!="number"||typeof y!="number")}static equals(s,h){return s.x===h.x&&s.y===h.y&&s.z===h.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Gm={toComponents:u=>u.getComponents(),fromComponents:u=>new Vi(...u)};function XS(u){return Vi.isObject(u)?new Vi(u.x,u.y,u.z):new Vi}function $S(u,s){u.writeProperty("x",s.x),u.writeProperty("y",s.y),u.writeProperty("z",s.z)}function jS(u,s){return new Pr({assembly:Gm,components:[nr("x"in u?u.x:void 0,s.x),nr("y"in u?u.y:void 0,s.y),nr("z"in u?u.z:void 0,s.z)]})}function Gh(u,s){return{baseStep:Bi(s),constraint:s,textProps:V.fromObject({draggingScale:Mi(s,u),formatter:oe(ms(s,u))})}}const zS={id:"input-point3d",type:"input",accept:(u,s)=>{if(!Vi.isObject(u))return null;const h=q,p=nt(s,{x:h.optional.custom(Cr),y:h.optional.custom(Cr),z:h.optional.custom(Cr)});return p?{initialValue:u,params:p}:null},binding:{reader:u=>XS,constraint:u=>jS(u.params,u.initialValue),equals:Vi.equals,writer:u=>$S},controller:u=>{const s=u.value,h=u.constraint;if(!(h instanceof Pr))throw g.shouldNeverHappen();return new Fh(u.document,{assembly:Gm,axes:[Gh(s.rawValue.x,h.components[0]),Gh(s.rawValue.y,h.components[1]),Gh(s.rawValue.z,h.components[2])],parser:rr,value:s,viewProps:u.viewProps})}};class Hi{constructor(s=0,h=0,p=0,y=0){this.x=s,this.y=h,this.z=p,this.w=y}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(s){if(v(s))return!1;const h=s.x,p=s.y,y=s.z,E=s.w;return!(typeof h!="number"||typeof p!="number"||typeof y!="number"||typeof E!="number")}static equals(s,h){return s.x===h.x&&s.y===h.y&&s.z===h.z&&s.w===h.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Bm={toComponents:u=>u.getComponents(),fromComponents:u=>new Hi(...u)};function WS(u){return Hi.isObject(u)?new Hi(u.x,u.y,u.z,u.w):new Hi}function YS(u,s){u.writeProperty("x",s.x),u.writeProperty("y",s.y),u.writeProperty("z",s.z),u.writeProperty("w",s.w)}function qS(u,s){return new Pr({assembly:Bm,components:[nr("x"in u?u.x:void 0,s.x),nr("y"in u?u.y:void 0,s.y),nr("z"in u?u.z:void 0,s.z),nr("w"in u?u.w:void 0,s.w)]})}function KS(u,s){return{baseStep:Bi(s),constraint:s,textProps:V.fromObject({draggingScale:Mi(s,u),formatter:oe(ms(s,u))})}}const ZS={id:"input-point4d",type:"input",accept:(u,s)=>{if(!Hi.isObject(u))return null;const h=q,p=nt(s,{x:h.optional.custom(Cr),y:h.optional.custom(Cr),z:h.optional.custom(Cr),w:h.optional.custom(Cr)});return p?{initialValue:u,params:p}:null},binding:{reader:u=>WS,constraint:u=>qS(u.params,u.initialValue),equals:Hi.equals,writer:u=>YS},controller:u=>{const s=u.value,h=u.constraint;if(!(h instanceof Pr))throw g.shouldNeverHappen();return new Fh(u.document,{assembly:Bm,axes:s.rawValue.getComponents().map((p,y)=>KS(p,h.components[y])),parser:rr,value:s,viewProps:u.viewProps})}};function JS(u){const s=[],h=wh(u.options);return h&&s.push(h),new An(s)}const QS={id:"input-string",type:"input",accept:(u,s)=>{if(typeof u!="string")return null;const p=nt(s,{options:q.optional.custom(_s)});return p?{initialValue:u,params:p}:null},binding:{reader:u=>Z_,constraint:u=>JS(u.params),writer:u=>Bn},controller:u=>{var s;const h=u.document,p=u.value,y=u.constraint;return y&&$e(y,Nn)?new Sn(h,{props:V.fromObject({options:(s=Th(y))!==null&&s!==void 0?s:[]}),value:p,viewProps:u.viewProps}):new ds(h,{parser:E=>E,props:V.fromObject({formatter:mh}),value:p,viewProps:u.viewProps})}},kn={monitor:{defaultInterval:200,defaultLineCount:3}},Mm=I("mll");class tO{constructor(s,h){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=h.formatter,this.element=s.createElement("div"),this.element.classList.add(Mm()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("textarea");p.classList.add(Mm("i")),p.style.height=`calc(var(--bld-us) * ${h.lineCount})`,p.readOnly=!0,h.viewProps.bindDisabled(p),this.element.appendChild(p),this.textareaElem_=p,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}update_(){const s=this.textareaElem_,h=s.scrollTop===s.scrollHeight-s.clientHeight,p=[];this.value.rawValue.forEach(y=>{y!==void 0&&p.push(this.formatter_(y))}),s.textContent=p.join(`
`),h&&(s.scrollTop=s.scrollHeight)}onValueUpdate_(){this.update_()}}class Bh{constructor(s,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new tO(s,{formatter:h.formatter,lineCount:h.lineCount,value:this.value,viewProps:this.viewProps})}}const km=I("sgl");class eO{constructor(s,h){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=h.formatter,this.element=s.createElement("div"),this.element.classList.add(km()),h.viewProps.bindClassModifiers(this.element);const p=s.createElement("input");p.classList.add(km("i")),p.readOnly=!0,p.type="text",h.viewProps.bindDisabled(p),this.element.appendChild(p),this.inputElement=p,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}update_(){const s=this.value.rawValue,h=s[s.length-1];this.inputElement.value=h!==void 0?this.formatter_(h):""}onValueUpdate_(){this.update_()}}class Mh{constructor(s,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new eO(s,{formatter:h.formatter,value:this.value,viewProps:this.viewProps})}}const rO={id:"monitor-bool",type:"monitor",accept:(u,s)=>{if(typeof u!="boolean")return null;const p=nt(s,{lineCount:q.optional.number});return p?{initialValue:u,params:p}:null},binding:{reader:u=>j_},controller:u=>{var s;return u.value.rawValue.length===1?new Mh(u.document,{formatter:z_,value:u.value,viewProps:u.viewProps}):new Bh(u.document,{formatter:z_,lineCount:(s=u.params.lineCount)!==null&&s!==void 0?s:kn.monitor.defaultLineCount,value:u.value,viewProps:u.viewProps})}},Nr=I("grl");class iO{constructor(s,h){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=s.createElement("div"),this.element.classList.add(Nr()),h.viewProps.bindClassModifiers(this.element),this.formatter_=h.formatter,this.props_=h.props,this.cursor_=h.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const p=s.createElementNS(vt,"svg");p.classList.add(Nr("g")),p.style.height=`calc(var(--bld-us) * ${h.lineCount})`,this.element.appendChild(p),this.svgElem_=p;const y=s.createElementNS(vt,"polyline");this.svgElem_.appendChild(y),this.lineElem_=y;const E=s.createElement("div");E.classList.add(Nr("t"),I("tt")()),this.element.appendChild(E),this.tooltipElem_=E,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const s=this.svgElem_.getBoundingClientRect(),h=this.value.rawValue.length-1,p=this.props_.get("minValue"),y=this.props_.get("maxValue"),E=[];this.value.rawValue.forEach((Tt,Et)=>{if(Tt===void 0)return;const or=kt(Et,0,h,0,s.width),Dn=kt(Tt,p,y,s.height,0);E.push([or,Dn].join(","))}),this.lineElem_.setAttributeNS(null,"points",E.join(" "));const N=this.tooltipElem_,M=this.value.rawValue[this.cursor_.rawValue];if(M===void 0){N.classList.remove(Nr("t","a"));return}const J=kt(this.cursor_.rawValue,0,h,0,s.width),st=kt(M,p,y,s.height,0);N.style.left=`${J}px`,N.style.top=`${st}px`,N.textContent=`${this.formatter_(M)}`,N.classList.contains(Nr("t","a"))||(N.classList.add(Nr("t","a"),Nr("t","in")),ft(N),N.classList.remove(Nr("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class nO{constructor(s,h){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=h.props,this.value=h.value,this.viewProps=h.viewProps,this.cursor_=k(-1),this.view=new iO(s,{cursor:this.cursor_,formatter:h.formatter,lineCount:h.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!at(s))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const p=new qr(this.view.element);p.emitter.on("down",this.onGraphPointerDown_),p.emitter.on("move",this.onGraphPointerMove_),p.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(s){const h=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(kt(s.offsetX,0,h.width,0,this.value.rawValue.length))}onGraphPointerDown_(s){this.onGraphPointerMove_(s)}onGraphPointerMove_(s){if(!s.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(kt(s.data.point.x,0,s.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function kh(u){return"format"in u&&!v(u.format)?u.format:oe(2)}function oO(u){var s;return u.value.rawValue.length===1?new Mh(u.document,{formatter:kh(u.params),value:u.value,viewProps:u.viewProps}):new Bh(u.document,{formatter:kh(u.params),lineCount:(s=u.params.lineCount)!==null&&s!==void 0?s:kn.monitor.defaultLineCount,value:u.value,viewProps:u.viewProps})}function sO(u){var s,h,p;return new nO(u.document,{formatter:kh(u.params),lineCount:(s=u.params.lineCount)!==null&&s!==void 0?s:kn.monitor.defaultLineCount,props:V.fromObject({maxValue:(h="max"in u.params?u.params.max:null)!==null&&h!==void 0?h:100,minValue:(p="min"in u.params?u.params.min:null)!==null&&p!==void 0?p:0}),value:u.value,viewProps:u.viewProps})}function Dm(u){return"view"in u&&u.view==="graph"}const aO={id:"monitor-number",type:"monitor",accept:(u,s)=>{if(typeof u!="number")return null;const h=q,p=nt(s,{format:h.optional.function,lineCount:h.optional.number,max:h.optional.number,min:h.optional.number,view:h.optional.string});return p?{initialValue:u,params:p}:null},binding:{defaultBufferSize:u=>Dm(u)?64:1,reader:u=>K_},controller:u=>Dm(u.params)?sO(u):oO(u)},lO={id:"monitor-string",type:"monitor",accept:(u,s)=>{if(typeof u!="string")return null;const h=q,p=nt(s,{lineCount:h.optional.number,multiline:h.optional.boolean});return p?{initialValue:u,params:p}:null},binding:{reader:u=>Z_},controller:u=>{var s;const h=u.value;return h.rawValue.length>1||"multiline"in u.params&&u.params.multiline?new Bh(u.document,{formatter:mh,lineCount:(s=u.params.lineCount)!==null&&s!==void 0?s:kn.monitor.defaultLineCount,value:h,viewProps:u.viewProps}):new Mh(u.document,{formatter:mh,value:h,viewProps:u.viewProps})}};class hO{constructor(s){this.onValueChange_=this.onValueChange_.bind(this),this.reader=s.reader,this.writer=s.writer,this.emitter=new w,this.value=s.value,this.value.emitter.on("change",this.onValueChange_),this.target=s.target,this.read()}read(){const s=this.target.read();s!==void 0&&(this.value.rawValue=this.reader(s))}write_(s){this.writer(this.target,s)}onValueChange_(s){this.write_(s.rawValue),this.emitter.emit("change",{options:s.options,rawValue:s.rawValue,sender:this})}}function uO(u,s){const h=u.accept(s.target.read(),s.params);if(v(h))return null;const p=q,y={target:s.target,initialValue:h.initialValue,params:h.params},E=u.binding.reader(y),N=u.binding.constraint?u.binding.constraint(y):void 0,M=k(E(h.initialValue),{constraint:N,equals:u.binding.equals}),J=new hO({reader:E,target:s.target,value:M,writer:u.binding.writer(y)}),st=p.optional.boolean(s.params.disabled).value,Tt=p.optional.boolean(s.params.hidden).value,Et=u.controller({constraint:N,document:s.document,initialValue:h.initialValue,params:h.params,value:J.value,viewProps:Er.create({disabled:st,hidden:Tt})}),or=p.optional.string(s.params.label).value;return new xt(s.document,{binding:J,blade:ve(),props:V.fromObject({label:or!=null?or:s.target.key}),valueController:Et})}class cO{constructor(s){this.onTick_=this.onTick_.bind(this),this.reader_=s.reader,this.target=s.target,this.emitter=new w,this.value=s.value,this.ticker=s.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const s=this.target.read();if(s===void 0)return;const h=this.value.rawValue,p=this.reader_(s);this.value.rawValue=cN(h,p),this.emitter.emit("update",{rawValue:p,sender:this})}onTick_(s){this.read()}}function fO(u,s){return s===0?new AA:new NA(u,s!=null?s:kn.monitor.defaultInterval)}function pO(u,s){var h,p,y;const E=q,N=u.accept(s.target.read(),s.params);if(v(N))return null;const M={target:s.target,initialValue:N.initialValue,params:N.params},J=u.binding.reader(M),st=(p=(h=E.optional.number(s.params.bufferSize).value)!==null&&h!==void 0?h:u.binding.defaultBufferSize&&u.binding.defaultBufferSize(N.params))!==null&&p!==void 0?p:1,Tt=E.optional.number(s.params.interval).value,Et=new cO({reader:J,target:s.target,ticker:fO(s.document,Tt),value:hN(st)}),or=E.optional.boolean(s.params.disabled).value,Dn=E.optional.boolean(s.params.hidden).value,Vn=u.controller({document:s.document,params:N.params,value:Et.value,viewProps:Er.create({disabled:or,hidden:Dn})}),Xi=(y=E.optional.string(s.params.label).value)!==null&&y!==void 0?y:s.target.key;return new Zt(s.document,{binding:Et,blade:ve(),props:V.fromObject({label:Xi}),valueController:Vn})}class dO{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(s){s.type==="blade"?this.pluginsMap_.blades.unshift(s):s.type==="input"?this.pluginsMap_.inputs.unshift(s):s.type==="monitor"&&this.pluginsMap_.monitors.unshift(s)}createInput(s,h,p){const y=h.read();if(v(y))throw new g({context:{key:h.key},type:"nomatchingcontroller"});const E=this.pluginsMap_.inputs.reduce((N,M)=>N!=null?N:uO(M,{document:s,target:h,params:p}),null);if(E)return E;throw new g({context:{key:h.key},type:"nomatchingcontroller"})}createMonitor(s,h,p){const y=this.pluginsMap_.monitors.reduce((E,N)=>E!=null?E:pO(N,{document:s,params:p,target:h}),null);if(y)return y;throw new g({context:{key:h.key},type:"nomatchingcontroller"})}createBlade(s,h){const p=this.pluginsMap_.blades.reduce((y,E)=>y!=null?y:RA(E,{document:s,params:h}),null);if(!p)throw new g({type:"nomatchingview",context:{params:h}});return p}createBladeApi(s){if(s instanceof xt)return new Lt(s);if(s instanceof Zt)return new Qt(s);if(s instanceof Pn)return new cs(s,this);const h=this.pluginsMap_.blades.reduce((p,y)=>p!=null?p:y.api({controller:s,pool:this}),null);if(!h)throw g.shouldNeverHappen();return h}}function vO(){const u=new dO;return[HS,zS,ZS,QS,OS,IS,CS,xS,xN,rO,lO,aO,us,bA,wA,V_].forEach(s=>{u.register(s)}),u}class Vm extends n{constructor(s){super(s),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new a(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get options(){return this.controller_.valueController.props.get("options")}set options(s){this.controller_.valueController.props.set("options",s)}get value(){return this.controller_.valueController.value.rawValue}set value(s){this.controller_.valueController.value.rawValue=s}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}}class Hm extends n{constructor(s){super(s),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new a(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(s){this.controller_.valueController.sliderController.props.set("maxValue",s)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(s){this.controller_.valueController.sliderController.props.set("minValue",s)}get value(){return this.controller_.valueController.value.rawValue}set value(s){this.controller_.valueController.value.rawValue=s}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}}class Xm extends n{constructor(s){super(s),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new a(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(s){this.controller_.props.set("label",s)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(s){this.controller_.valueController.props.set("formatter",s)}get value(){return this.controller_.valueController.value.rawValue}set value(s){this.controller_.valueController.value.rawValue=s}on(s,h){const p=h.bind(this);return this.emitter_.on(s,y=>{p(y.event)}),this}}const _O=function(){return{id:"list",type:"blade",accept(u){const s=q,h=nt(u,{options:s.required.custom(_s),value:s.required.raw,view:s.required.constant("list"),label:s.optional.string});return h?{params:h}:null},controller(u){const s=new Sn(u.document,{props:V.fromObject({options:im(u.params.options)}),value:k(u.params.value),viewProps:u.viewProps});return new Fi(u.document,{blade:u.blade,props:V.fromObject({label:u.params.label}),valueController:s})},api(u){return!(u.controller instanceof Fi)||!(u.controller.valueController instanceof Sn)?null:new Vm(u.controller)}}}();function mO(u){return u.reduce((s,h)=>Object.assign(s,{[h.presetKey]:h.read()}),{})}function gO(u,s){u.forEach(h=>{const p=s[h.presetKey];p!==void 0&&h.write(p)})}class yO extends uh{constructor(s,h){super(s,h)}get element(){return this.controller_.view.element}importPreset(s){const h=this.controller_.rackController.rack.find(xt).map(p=>p.binding.target);gO(h,s),this.refresh()}exportPreset(){const s=this.controller_.rackController.rack.find(xt).map(h=>h.binding.target);return mO(s)}refresh(){this.controller_.rackController.rack.find(xt).forEach(s=>{s.binding.read()}),this.controller_.rackController.rack.find(Zt).forEach(s=>{s.binding.read()})}}class bO extends ph{constructor(s,h){super(s,{expanded:h.expanded,blade:h.blade,props:h.props,root:!0,viewProps:h.viewProps})}}const xO={id:"slider",type:"blade",accept(u){const s=q,h=nt(u,{max:s.required.number,min:s.required.number,view:s.required.constant("slider"),format:s.optional.function,label:s.optional.string,value:s.optional.number});return h?{params:h}:null},controller(u){var s,h;const p=(s=u.params.value)!==null&&s!==void 0?s:0,y=new xh(u.document,{baseStep:1,parser:rr,sliderProps:V.fromObject({maxValue:u.params.max,minValue:u.params.min}),textProps:V.fromObject({draggingScale:Mi(void 0,p),formatter:(h=u.params.format)!==null&&h!==void 0?h:aN}),value:k(p),viewProps:u.viewProps});return new Fi(u.document,{blade:u.blade,props:V.fromObject({label:u.params.label}),valueController:y})},api(u){return!(u.controller instanceof Fi)||!(u.controller.valueController instanceof xh)?null:new Hm(u.controller)}},wO=function(){return{id:"text",type:"blade",accept(u){const s=q,h=nt(u,{parse:s.required.function,value:s.required.raw,view:s.required.constant("text"),format:s.optional.function,label:s.optional.string});return h?{params:h}:null},controller(u){var s;const h=new ds(u.document,{parser:u.params.parse,props:V.fromObject({formatter:(s=u.params.format)!==null&&s!==void 0?s:p=>String(p)}),value:k(u.params.value),viewProps:u.viewProps});return new Fi(u.document,{blade:u.blade,props:V.fromObject({label:u.params.label}),valueController:h})},api(u){return!(u.controller instanceof Fi)||!(u.controller.valueController instanceof ds)?null:new Xm(u.controller)}}}();function TO(u){const s=u.createElement("div");return s.classList.add(I("dfw")()),u.body&&u.body.appendChild(s),s}function $m(u,s,h){if(u.querySelector(`style[data-tp-style=${s}]`))return;const p=u.createElement("style");p.dataset.tpStyle=s,p.textContent=h,u.head.appendChild(p)}class EO extends yO{constructor(s){var h,p;const y=s!=null?s:{},E=(h=y.document)!==null&&h!==void 0?h:Xt(),N=vO(),M=new bO(E,{expanded:y.expanded,blade:ve(),props:V.fromObject({title:y.title}),viewProps:Er.create()});super(M,N),this.pool_=N,this.containerElem_=(p=y.container)!==null&&p!==void 0?p:TO(E),this.containerElem_.appendChild(this.element),this.doc_=E,this.usesDefaultWrapper_=!y.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw g.alreadyDisposed();return this.doc_}dispose(){const s=this.containerElem_;if(!s)throw g.alreadyDisposed();if(this.usesDefaultWrapper_){const h=s.parentElement;h&&h.removeChild(s)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(s){("plugin"in s?[s.plugin]:"plugins"in s?s.plugins:[]).forEach(p=>{this.pool_.register(p),this.embedPluginStyle_(p)})}embedPluginStyle_(s){s.css&&$m(this.document,`plugin-${s.id}`,s.css)}setUpDefaultPlugins_(){$m(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(s=>{this.embedPluginStyle_(s)}),this.registerPlugin({plugins:[xO,_O,V_,wO]})}}const CO=new i("3.1.0");r.BladeApi=n,r.ButtonApi=b,r.FolderApi=uh,r.InputBindingApi=Lt,r.ListApi=Vm,r.MonitorBindingApi=Qt,r.Pane=EO,r.SeparatorApi=O_,r.SliderApi=Hm,r.TabApi=M_,r.TabPageApi=B_,r.TextApi=Xm,r.TpChangeEvent=a,r.VERSION=CO,Object.defineProperty(r,"__esModule",{value:!0})})})(oh,oh.exports),G2.queryString=H2;let ns;const p_=t=>{const e=window.location.href,r=e.substring(e.indexOf("?")+1).split("&"),i={};for(let n=0;n<r.length;n++)r[n]=r[n].split("="),i[r[n][0]]=decodeURIComponent(r[n][1]);return i.hasOwnProperty(t)?i[t]:!1},d_=t=>{window.history.pushState("Kindeo Title Slide","Title",window.location.origin+window.location.pathname+"?config="+encodeURIComponent(JSON.stringify(t)))},j2=t=>{p_("config")&&(ns=JSON.parse(p_("config")));const e=new oh.exports.Pane,r={customConfig:""};return e.addInput(r,"customConfig").on("change",()=>{let n=r.customConfig.replace(/\s/g,"");n=n.replaceAll(",}","}"),n=n.replaceAll(",]","]"),n=n.replaceAll(/\w+(?=:)/g,'"$&"'),n[n.length-1]===","&&(n=n.slice(0,-1)),ns=JSON.parse(n),d_(ns),window.location.reload()}),e.addButton({title:"Share"}).on("click",()=>{const n=t();console.log(JSON.stringify(n)),d_(n)}),{pane:e,currentConfig:ns}},z2=`
precision highp float;

uniform sampler2D uMap;
varying vec2 vTextureCoord;

vec2 F16_V2(float f) { return vec2(floor(f * 255.0) / 255.0, fract(f * 255.0)); }

void main(){

    // vec4 scene = texture2D(uMap, vTextureCoord);
    // float alpha = scene.a;
    // gl_FragColor = vec4(vTextureCoord.x, vTextureCoord.y, 1.0, alpha);
    // gl_FragColor.rgb*= alpha;
    // gl_FragColor.rgb*= (alpha>0. ? 1.: 0.);
    // gl_FragColor = vec4(F16_V2(vTextureCoord.x * scene.a), F16_V2(vTextureCoord.y * scene.a));

    float alpha=texture2D(uMap,vTextureCoord).a;
    gl_FragColor=vec4(vTextureCoord, 1., alpha);
    gl_FragColor.rgb*= (alpha>0. ? 1.: 0.);
}`;var W2=`

precision highp float;
// varying vec2 vTextureCoord;
// uniform sampler2D u_texture;
// uniform float u_offset; 
// uniform vec2 u_lowResolution;

// float V2_F16(vec2 v) { return v.x + (v.y / 255.0); }
// float V2_F16(vec2 v) { return v.x + (v.y / 255.0); }

varying vec2 vTextureCoord;
uniform sampler2D u_texture;
uniform vec2 u_stepSize;
uniform vec2 u_lowResolution;
uniform float u_offset; 
uniform vec2 u_aspect;

void main() {
  float minDist = 10000.;
  vec2 minDistUv = vec2(0., 0.);
  vec2 stepSize = u_stepSize/u_lowResolution;
  for(int y = -1;y <= 1;++y) {
      for(int x = -1;x <= 1;++x) {
          vec2 pos = vTextureCoord-vec2(x, y)*stepSize;
          vec2 targetUv = texture2D(u_texture, pos).rg;
          float dist = length((targetUv-vTextureCoord)*u_aspect);
          if(dot(targetUv, targetUv)>0.&&dist<minDist) {
              minDist = dist;
              minDistUv = targetUv;
          }

      }

  }
  vec2 ba = texture2D(u_texture, vTextureCoord).ba;
  gl_FragColor = vec4(minDistUv, ba);
}

// void main(){

//   float minDist=10000.;
//   vec2 minDistUv=vec2(0.,0.);

//   // vec2 stepSize= u_stepSize/u_lowResolution;
//   for(int x=-1;x<=1;++x){
//     for(int y=-1;y<=1;++y){

  
//       vec2 offset = vec2(x, y);
//       vec2 pos = vTextureCoord + (offset * (u_offset / (u_lowResolution)));
//       vec2 targetUv= texture2D(u_texture,pos).rg;
      
//       float dist=length((targetUv-vTextureCoord)*u_aspect);
//       if(dot(targetUv,targetUv)>0.&&dist<minDist){
//         minDist=dist;
//         minDistUv=targetUv;
//       }
//     }
//   }
  
//   vec2 ba=texture2D(u_texture,vTextureCoord).ba;
//   gl_FragColor=vec4(minDistUv,ba);
// }


// void main() 
// {
//   vec2 offsets[9];
// 	offsets[0] = vec2(-1.0, -1.0);
// 	offsets[1] = vec2(-1.0, 0.0);
// 	offsets[2] = vec2(-1.0, 1.0);
// 	offsets[3] = vec2(0.0, -1.0);
// 	offsets[4] = vec2(0.0, 0.0);
// 	offsets[5] = vec2(0.0, 1.0);
// 	offsets[6] = vec2(1.0, -1.0);
// 	offsets[7] = vec2(1.0, 0.0);
//     offsets[8] = vec2(1.0, 1.0);
    
//     float closest_dist = 9999999.9;
//     vec2 closest_pos = vec2(0.0);
//     vec4 closest_data = vec4(0.0);
    
//     for(int i = 0; i < 9; i++) {
//         vec2 jump = vTextureCoord + (offsets[i] * (u_offset / u_lowResolution));
//         vec4 seed = texture2D(u_texture, jump);
//         vec2 seedpos = vec2(V2_F16(seed.xy), V2_F16(seed.zw));
//         float dist = distance(seedpos, vTextureCoord);
        
//         if (seedpos != vec2(0.0) && dist <= closest_dist) {
//             closest_dist = dist;
//             closest_data = seed;
//         }
//     }
    
//     gl_FragColor = closest_data;
// }

`,Y2=`
#define SAMPLES 32
#define STEP_COUNT 24
precision highp float;
#define GLSLIFY 1
uniform sampler2D u_dfTexture;
uniform sampler2D u_texture;
#define EPS 1.e-5
uniform vec2 u_aspect;
uniform float u_sdfBorder;
uniform vec3 u_ambientColor;
uniform float u_ambientMissHitOpacity;
uniform float u_minStepSize;
uniform float u_falloffStrength;
uniform float u_emissiveStrength;
varying vec2 vTextureCoord;
uniform sampler2D u_blueNoiseTexture;
uniform vec2 u_blueNoiseTexelSize;
uniform vec2 u_blueNoiseCoordOffset;
vec3 getBlueNoise(vec2 coord) {
    return texture2D(u_blueNoiseTexture, coord*u_blueNoiseTexelSize+u_blueNoiseCoordOffset).rgb;
}
vec3 getStaticBlueNoise(vec2 coord) {
    return texture2D(u_blueNoiseTexture, coord*u_blueNoiseTexelSize).rgb;
}
vec3 rayMarch(vec2 uv, vec2 dir) {
    float dd = 0.;
    float d;
    float emissiveStrength = u_emissiveStrength;
    float fallofStrength = u_falloffStrength;
    float ambientMissHitOpacity = u_ambientMissHitOpacity;
    
    for(int i = 0;i<STEP_COUNT;i++) {
      vec4 dfInfo = texture2D(u_dfTexture, uv);
      float d = dfInfo.a<1. ? distance(dfInfo.xy, uv): 0.;
      dd += d;
      if(d<EPS) {
            vec3 colorTexture = texture2D(u_texture, uv).rgb;

            if (colorTexture.rgb == vec3(1.)) {
              // emissiveStrength *= 2.;
              // fallofStrength = -1.0;
              // ambientMissHitOpacity = 0.;
            }
            
            if (colorTexture.rgb == vec3(0.)) {
              // emissiveStrength = 0.;
              // fallofStrength = 100.0;
            }

            // float distIntensity = distance(colorTexture.rgb, vec3(1.));
            // if (distIntensity < 0.5) {
            //   emissiveStrength *= (1. + 5. * (1. - distIntensity / 0.5));
            //   // fallofStrength = .0;
            //   // ambientMissHitOpacity = 0.;
            // }
            // return (dfInfo.a) * vec3(1.) *exp(-dd*fallofStrength)*emissiveStrength;
            return mix(u_ambientColor*ambientMissHitOpacity, colorTexture, dfInfo.a)*exp(-dd*fallofStrength)*emissiveStrength;
        }
        uv += dir*max(u_minStepSize, d);
        if(uv.x<0.||uv.y<0.||uv.x>1.||uv.y>1.)break;
    }
    return vec3(0.);//u_ambientColor*ambientMissHitOpacity;
}
void main() {
    vec3 bnoise = getBlueNoise(gl_FragCoord.xy+vec2(10., 83.));
    float opacity = texture2D(u_dfTexture, vTextureCoord).b;
    vec3 col = vec3(0.);
    float samplesInv = 1./float(SAMPLES);
    float angleBit = 6.283185*samplesInv;
    float t = bnoise.x*angleBit;
    float hitCount = 0.;
    for(int i = 0;i<SAMPLES;i++) {
        col += rayMarch(vTextureCoord, vec2(cos(t), sin(t))/u_aspect);
        t += angleBit;
    }
    col *= samplesInv;
    gl_FragColor = vec4(col, 1.)*(1.-opacity);
}`;const q2=`
uniform sampler2D u_texture;
uniform vec2 u_lowResolution;
varying vec2 vTextureCoord;

vec3 lin_to_srgb(vec4 color)
{
   vec3 x = color.rgb * 12.92;
   vec3 y = 1.055 * pow(clamp(color.rgb, 0.0, 1.0), vec3(0.4166667)) - 0.055;
   vec3 clr = color.rgb;
   clr.r = (color.r < 0.0031308) ? x.r : y.r;
   clr.g = (color.g < 0.0031308) ? x.g : y.g;
   clr.b = (color.b < 0.0031308) ? x.b : y.b;
   return clr.rgb;
}

void main(){
    vec3 stepSize=vec3(1./u_lowResolution,0.);
    vec4 sum= 
        texture2D(u_texture, vTextureCoord)
        + texture2D(u_texture,vTextureCoord-stepSize.xz)
        + texture2D(u_texture,vTextureCoord+vec2(-stepSize.x,stepSize.y))
        + texture2D(u_texture,vTextureCoord-stepSize.zy)
        + texture2D(u_texture,vTextureCoord)
        + texture2D(u_texture,vTextureCoord+stepSize.zy)
        + texture2D(u_texture,vTextureCoord+vec2(stepSize.x,-stepSize.y))
        + texture2D(u_texture,vTextureCoord+stepSize.yz)
        + texture2D(u_texture,vTextureCoord+stepSize.xy);

    // gl_FragColor=sum.a>0. ? vec4(sum.rgb/sum.a,min(1.,1.)): vec4(0.);
    gl_FragColor=sum.a>0. ? vec4(sum.rgb/sum.a,min(1.,1.)): vec4(0.);
}`,K2=`
precision highp float;
uniform sampler2D u_texture;
uniform sampler2D u_cacheTexture;
uniform vec3 u_ambientColor;
uniform float u_ambientBaseOpacity;
uniform float u_sceneColorIntensity;
varying vec2 vTextureCoord;
void main() {
    vec2 uv = vTextureCoord;
    vec4 color = texture2D(u_texture, vTextureCoord);
    vec4 cache = texture2D(u_cacheTexture, uv)+vec4(u_ambientColor*u_ambientBaseOpacity, 0.);
    gl_FragColor = vec4(u_sceneColorIntensity*color.rgb+cache.rgb*(1.-color.a), 1.);

    // gl_FragColor = color;
}
`;var sh=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function re(){var t=new sh(2);return sh!=Float32Array&&(t[0]=0,t[1]=0),t}function v_(t,e){var r=new sh(2);return r[0]=t,r[1]=e,r}function ie(t,e){return t[0]=e[0],t[1]=e[1],t}function Ri(t,e,r){return t[0]=e,t[1]=r,t}function Ai(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Z2(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Ue(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function os(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function Ni(t,e){var r=e[0],i=e[1],n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}function __(t,e){return t[0]*e[0]+t[1]*e[1]}function m_(t,e,r){var i=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=i,t}var Tn=Z2;(function(){var t=re();return function(e,r,i,n,o,a){var l,c;for(r||(r=2),i||(i=0),n?c=Math.min(n*r+i,e.length):c=e.length,l=i;l<c;l+=r)t[0]=e[l],t[1]=e[l+1],o(t,t,a),e[l]=t[0],e[l+1]=t[1];return e}})();class J2{constructor(e){this.factoryFn=e,this.pool=[],this.numCreated=0}get(){return this.pool.length>0?this.pool.pop():(this.numCreated++,this.factoryFn())}return(e){this.pool.push(e)}fill(e){for(;this.pool.length<e;)this.numCreated++,this.pool[this.pool.length]=this.factoryFn()}empty(){this.pool=[]}}const ss=re();class Q2{constructor(){Ft(this,"position0",re());Ft(this,"velocity0",re());Ft(this,"position",re());Ft(this,"velocity",re());Ft(this,"radius",1);Ft(this,"mass",1);Ft(this,"volume",1);Ft(this,"density",1);Ft(this,"friction",1);Ft(this,"frictionTot",0);Ft(this,"restitution",1);Ft(this,"inertia",0)}reset({radius:e,density:r,friction:i,restitution:n,width:o,height:a}={}){Ri(this.position0,Math.random()*o,Math.random()*a),Ue(this.position0,this.position0,100),ie(this.velocity0,this.position0),Ue(this.velocity0,this.velocity0,-2),this.radius=e,this.density=r,this.friction=i,this.restitution=n,this.volume=Math.PI*this.radius*1.333333,this.mass=this.volume*this.radius*this.radius*this.density,this.inertia=this.mass*this.radius*this.radius*.25,ie(this.position,this.position0),ie(this.velocity,this.velocity0)}addImpulse(){Ri(ss,Math.random()*this.velocity[0],Math.random()*this.velocity[1]),Ue(ss,ss,1500),Ai(this.velocity,this.velocity,ss)}addScaledVector(e,r,i){e[0]+=r[0]*i,e[1]+=r[1]*i}update(e){this.addScaledVector(this.position,this.velocity,e),Ue(this.velocity,this.velocity,.95)}}const he=re(),Xe=re(),fe=re(),It=re(),En=re(),ue=re();class tA{constructor(){Ft(this,"MOUSE_RADIUS",100);Ft(this,"MOUSE_INFLUENCE",.1);Ft(this,"MOUSE_PUSH_FORCE",.2);Ft(this,"bodies",[]);Ft(this,"cursor",re());Ft(this,"cursorPushForce",re());Ft(this,"cursorPrev",re());Ft(this,"poolSpheres",new J2(()=>new Q2))}initWorld(e){for(let r=0;r<as;r++){const i=e[r],{radius:n,density:o,friction:a,restitution:l}=i,c=this.poolSpheres.get();c.reset({radius:n,density:o,friction:a,restitution:l,width:this.w,height:this.h}),this.bodies.push(c)}}addScaledVector(e,r,i){e[0]+=r[0]*i,e[1]+=r[1]*i}update(e=[0,0],r=1,i=[]){const o=this.w,a=0,l=this.h;Ri(this.cursor,e[0],e[1]),ie(this.cursorPushForce,this.cursor),Tn(this.cursorPushForce,this.cursorPushForce,this.cursorPrev),Ue(this.cursorPushForce,this.cursorPushForce,this.MOUSE_PUSH_FORCE/r),ie(this.cursorPrev,this.cursor);const c=this.w/2,f=this.h/2,d=520,v=114,_=c-d/2,m=c+d/2,g=f-v/2,x=f+v/2;for(let b=0;b<this.bodies.length;b++){const w=this.bodies[b];if(!i[b].isVisible)continue;ie(he,w.velocity),ie(It,w.position);const C=Math.max(_,Math.min(It[0],m)),I=Math.max(g,Math.min(It[1],x)),S=re();Ri(S,C-It[0],I-It[1]),Ni(S,S);const A=w.density/100*.5;if(Ue(S,S,A/r),Ai(he,he,S),It[0]+w.radius>_&&It[0]-w.radius<m&&It[1]+w.radius>g&&It[1]-w.radius<x){const P=Math.max(_,Math.min(It[0],m)),O=Math.max(g,Math.min(It[1],x)),D=re();Ri(D,It[0]-P,It[1]-O),Ni(D,D),i[b].sphere.lighten();const U=(Math.random()-.5)*.5,B=Math.cos(U),$=Math.sin(U),j=re();j[0]=D[0]*B-D[1]*$,j[1]=D[0]*$+D[1]*B;const W=15+20*w.density/10;Ue(j,j,W/r),Ai(he,he,j)}for(let P=b+1;P<this.bodies.length;P++){const O=this.bodies[P];if(!i[P].isVisible)continue;ie(fe,O.velocity),ie(En,O.position),ie(ue,It),Tn(ue,ue,En);const D=os(ue),U=w.radius+O.radius;if(D<U){const B=Math.sqrt(w.friction*O.friction,2);w.frictionTot+=B,O.frictionTot+=B,Ni(ue,ue),Ue(ue,ue,.5*(D-U)),Tn(It,It,ue),Ai(En,En,ue),Ni(ue,ue);const $=__(he,ue),j=__(fe,ue),W=w.mass,lt=O.mass,z=w.restitution,k=O.restitution,V=(W*$+lt*j-lt*($-j)*z)/(W+lt),Pt=(W*$+lt*j-W*(j-$)*k)/(W+lt);this.addScaledVector(he,ue,(V-$)/(1+B)),this.addScaledVector(fe,ue,(Pt-j)/(1+B)),ie(O.position,En),ie(O.velocity,fe)}}ie(Xe,It),Tn(Xe,Xe,this.cursor),os(Xe)/this.MOUSE_RADIUS<1&&(i[b].sphere.lighten(),ie(Xe,It),m_(Xe,Xe,this.cursor),Ni(Xe,Xe),ie(fe,this.cursor),m_(fe,fe,Xe),Ni(fe,fe),Ue(fe,fe,this.MOUSE_INFLUENCE),Tn(It,It,fe),Ue(fe,fe,-this.MOUSE_PUSH_FORCE/r),Ai(he,he,fe),Ai(he,he,this.cursorPushForce)),It[0]<0+w.radius&&(It[0]=0+w.radius,he[0]*=-1,w.addImpulse()),It[0]>o-w.radius&&(It[0]=o-w.radius,he[0]*=-1,w.addImpulse()),It[1]<a+w.radius&&(It[1]=a+w.radius,he[1]*=-1,w.addImpulse()),It[1]>l-w.radius&&(It[1]=l-w.radius,he[1]*=-1,w.addImpulse()),ie(w.position,It),ie(w.velocity,he),w.update(r)}}resize(e,r){this.w=e,this.h=r}}class eA{constructor(){this.view=new ce,this.circleBack=Qe.from("./assets/images/circle.png"),this.circleBack.tint=0,this.circleBack.anchor.set(.5),this.circleFront=Qe.from("./assets/images/circle.png"),this.circleFront.anchor.set(.5),this.view.addChild(this.circleBack,this.circleFront)}reset({radius:e,color:r,colorLight:i}){this.view.scale.set(1),this.circleBack.tint=r,this.circleFront.tint=i,this.view.scale.set(e*2/this.view.width)}lighten(){this.circleFront.alpha=1}update(e,r){const i=os(r.velocity);this.circleFront.alpha*=.95,this.circleFront.alpha=Math.min(this.circleFront.alpha,i)}}const g_=[12518454,15861127,9175886,10914563],y_=[15914461,15903942,15254770,15257842,12776178],as=50;class rA{constructor(){Ft(this,"view",new ce);Ft(this,"spheres",[]);Ft(this,"colorPalette",[]);Ft(this,"visibleSphereCount",0);Ft(this,"spheresPhysics",new tA)}init(){this.visibleSphereCount=as;let e=0;for(let r=0;r<this.visibleSphereCount;r++){const i=r%4===0,n=i?15+Math.random()*20:50*(.1+Math.random()*.9),o=10*(.2+Math.random()*.8),a=.2+Math.random()*.8,l=.5+Math.random()*.5,c=new eA;i||e++,c.reset({radius:n,color:i?2039582:g_[e%g_.length],colorLight:y_[e%y_.length]}),this.spheres.push({sphere:c,radius:n,prevRadius:n,time:0,time2:0,delay:Math.random(),density:o,friction:a,restitution:l,needsUpdate:!1,isVisible:!0}),this.view.addChild(c.view)}this.spheresPhysics.initWorld(this.spheres)}resize(e,r){this.spheresPhysics.resize(e,r)}reset(){for(let e=0;e<as;e++)this.spheresPhysics.bodies[e].reset()}update(e,r){this.spheresPhysics.update(r,e,this.spheres);for(let i=0;i<as;i++){const n=this.spheres[i],o=this.spheresPhysics.bodies[i];n.sphere.view.position.x=o.position[0],n.sphere.view.position.y=o.position[1],n.sphere.update(e,o)}}}const iA=(t,e,r)=>Math.max(Math.min(t,r),e),ah=new jt,Cn={u_ambientColor:[.8667,.8667,.8667],u_minStepSize:.0024,u_ambientMissHitOpacity:0,u_falloffStrength:.5,u_emissiveStrength:1};class nA extends P2{constructor(){super(),this.paddingPassCount=3,this.bg=new Qe(it.WHITE),this.bg.tint=0,this.DOWNSCALE=1.5,this.minStepSize=3,this.lowResolution=v_(1,1),this.stepSize=v_(1,1),this.aspect=[1,1],this.sharedUniforms={u_dfTextureFrom:{value:it.WHITE},u_dfTextureTo:{value:it.WHITE},u_cacheFromTexture:{value:it.WHITE},u_cacheToTexture:{value:it.WHITE}};const{pane:e}=j2(this.export.bind(this)),r=e.addFolder({title:"params",expanded:!1});this.pane=r,this.tick=0,this.containerScene=new ce,this.text=new Wa("LIGHTS",{fill:"#000000",fontSize:240,fontFamily:"Montserrat",fontWeight:600}),this.text.scale.set(.6),this.text.anchor.set(.5),this.containerScene.addChild(this.text),this.containerCursor=new ce;const i=new vr;i.beginFill(16777215,1).drawCircle(0,0,10),i.rotation=Math.PI/4;const n=new vr;n.rotation=Math.PI/4,n.beginFill(0).drawRect(-24,-24,48,48),n.position.y=8,this.containerCursor.addChild(i),this.containerScene.addChild(this.containerCursor),this.g2=new vr,this.g2.beginFill(0).drawCircle(0,0,15),this.g3=new vr,this.g3.beginFill(15658734).drawCircle(0,0,15),this.inLowRT=pe.create({width:1,height:1,resolution:1,scaleMode:ee.NEAREST}),this.inRT=pe.create({width:1,height:1,resolution:1,scaleMode:ee.NEAREST}),this.dfRTFrom=pe.create({width:1,height:1,resolution:1,scaleMode:ee.NEAREST}),this.dfRTTo=pe.create({width:1,height:1,resolution:1,scaleMode:ee.NEAREST}),this.distFieldRT=pe.create({width:1,height:1,scaleMode:ee.NEAREST}),this.cacheFromRT=pe.create({width:1,height:1,scaleMode:ee.NEAREST}),this.cacheToRT=pe.create({width:1,height:1,resolution:1,scaleMode:ee.NEAREST});const o=new ul(1,1,2,2),a=ge.from(void 0,z2,{uMap:this.inLowRT});this.meshUV=new De(o,a),this.shaderUV=a;const l=ge.from(void 0,W2,{u_texture:this.sharedUniforms.u_dfTextureFrom.value,u_lowResolution:[this.lowResolution[0],this.lowResolution[1]],u_offset:0,u_aspect:[...this.aspect],u_stepSize:[this.stepSize[0],this.stepSize[1]]});this.meshJumpFloor=new De(o,l),this.shaderJumpFlood=l;const c=it.from("./assets/images/bluenoise.png");c.baseTexture.wrapMode=Ce.REPEAT,c.baseTexture.scaleMode=ee.NEAREST,c.update();const f=ge.from(void 0,Y2,{u_dfTexture:this.sharedUniforms.u_dfTextureFrom.value,u_lowResolution:[this.lowResolution[0],this.lowResolution[1]],u_texture:this.inLowRT,u_aspect:this.aspect,u_minStepSize:this.minStepSize,u_ambientColor:Cn.u_ambientColor,u_ambientMissHitOpacity:Cn.u_ambientMissHitOpacity,u_falloffStrength:Cn.u_falloffStrength,u_emissiveStrength:Cn.u_emissiveStrength,u_blueNoiseTexture:c,u_blueNoiseTexelSize:[1/128,1/128],u_blueNoiseCoordOffset:[Math.random(),Math.random()]});this.shaderRaymarch=f,this.meshRaymarch=new De(o,f);const d=ge.from(void 0,q2,{u_lowResolution:[this.lowResolution[0],this.lowResolution[1]],u_texture:this.sharedUniforms.u_cacheFromTexture.value});this.shaderPadding=d,this.meshPadding=new De(o,d);const v=ge.from(void 0,K2,{u_texture:this.inRT,u_cacheTexture:this.sharedUniforms.u_cacheFromTexture.value,u_ambientColor:[...Cn.u_ambientColor],u_ambientBaseOpacity:.05,u_sceneColorIntensity:1}),_=new ul(1,1,2,2);this.geometryRender=_,this.shaderRender=v,this.meshRender=new De(_,v),this.view.addChild(this.meshRender),this.renderSprite=new Qe(this.cacheToRT),this.geometry=o,this.speed=0,this.targetCursor={x:0,y:0},this.prevPos={x:0,y:0},this.view.interactive=!0,this.view.on("pointermove",x=>{const b=x.data.getLocalPosition(this.view);this.targetCursor.x=b.x,this.targetCursor.y=b.y});let m=0;this.meshUV.name="uv",this.meshJumpFloor.name="jump",this.meshRaymarch.name="ray";const g=[this.meshUV,this.meshJumpFloor,this.meshRaymarch];this.pane.addButton({title:"toggle"}).on("click",()=>{m++,g.forEach(b=>{this.view.removeChild(b)});const x=g[m%g.length];console.log("mesh:",x.name),this.view.addChild(x)}),this.tick=0,this.spheres=new rA,this.containerScene.addChildAt(this.spheres.view,0)}onShow(){this.spheres.init(),this.updateLight()}updateLight(){Gt.app.renderer.render(this.containerScene,{renderTexture:this.inRT}),this.containerScene.scale.set(1/this.DOWNSCALE),Gt.app.renderer.render(this.containerScene,{renderTexture:this.inLowRT,transform:ah}),this.containerScene.scale.set(1),Gt.app.renderer.render(this.meshUV,{renderTexture:this.dfRTTo}),ie(this.stepSize,this.lowResolution),this.shaderJumpFlood.uniforms.u_lowResolution=[...this.lowResolution],this.shaderJumpFlood.uniforms.u_aspect=[...this.aspect];for(let e=0;e<this._iterationCount;e++)Ue(this.stepSize,this.stepSize,.5),this.shaderJumpFlood.uniforms.u_stepSize=[this.stepSize[0],this.stepSize[1]],this._swapJumpFloodRTs(),this.shaderJumpFlood.uniforms.u_texture=this.sharedUniforms.u_dfTextureFrom.value,Gt.app.renderer.render(this.meshJumpFloor,{renderTexture:this.dfRTTo});this._swapJumpFloodRTs(),this.shaderJumpFlood.uniforms.u_texture=this.sharedUniforms.u_dfTextureFrom.value,this.shaderRaymarch.uniforms.u_minStepSize=this.minStepSize/os(this.lowResolution),this.shaderRaymarch.uniforms.u_lowResolution=[...this.lowResolution],this.shaderRaymarch.uniforms.u_aspect=[...this.aspect],this.shaderRaymarch.uniforms.u_dfTexture=this.sharedUniforms.u_dfTextureFrom.value,Gt.app.renderer.render(this.meshRaymarch,{renderTexture:this.cacheToRT}),this.shaderPadding.uniforms.u_lowResolution=[...this.lowResolution];for(let e=0;e<this.paddingPassCount;e++)this._swapCacheRTs(),this.shaderPadding.uniforms.u_texture=this.sharedUniforms.u_cacheFromTexture.value,Gt.app.renderer.render(this.meshPadding,{renderTexture:this.cacheToRT});this._swapCacheRTs(),this.shaderRender.uniforms.u_cacheTexture=this.sharedUniforms.u_cacheFromTexture.value}_swapJumpFloodRTs(){let e=this.dfRTFrom;this.dfRTFrom=this.dfRTTo,this.dfRTTo=e,this.sharedUniforms.u_dfTextureFrom.value=this.dfRTFrom,this.sharedUniforms.u_dfTextureTo.value=this.dfRTTo}_swapCacheRTs(){let e=this.cacheFromRT;this.cacheFromRT=this.cacheToRT,this.cacheToRT=e,this.sharedUniforms.u_cacheFromTexture.value=this.cacheFromRT,this.sharedUniforms.u_cacheToTexture.value=this.cacheToRT}update(){this.containerCursor.position.x+=(this.targetCursor.x-this.containerCursor.position.x)*.1,this.containerCursor.position.y+=(this.targetCursor.y-this.containerCursor.position.y)*.1;const e=Math.abs(this.containerCursor.position.x-this.prevPos.x),r=Math.abs(this.containerCursor.position.y-this.prevPos.y);let i=iA(e+r,0,30)/30;this.prevPos.x=this.containerCursor.position.x,this.prevPos.y=this.containerCursor.position.y,this.speed+=(i-this.speed)*.1,this.containerCursor.scale.x=this.containerCursor.scale.y=1+this.speed*2,this.spheres.update(1,[this.targetCursor.x,this.targetCursor.y]),this.tick++,this.shaderRaymarch.uniforms.u_blueNoiseCoordOffset=[Math.random(),Math.random()],this.updateLight()}onResize(e,r){this.spheres.resize(e,r),this.bg.width=e,this.bg.height=r,e=Math.ceil(e/this.DOWNSCALE),r=Math.ceil(r/this.DOWNSCALE),e>r?this.aspect=[e/r,1]:this.aspect=[1,r/e],Ri(this.lowResolution,e,r),this.inRT.resize(this.w,this.h),this.inLowRT.resize(e,r),this.dfRTFrom.resize(e,r),this.dfRTTo.resize(e,r),this.distFieldRT.resize(e,r),this.cacheFromRT.resize(e,r),this.cacheToRT.resize(e,r),this.g2.position.x=this.w/4*3+-25,this.g2.position.y=this.h/4-25,this.g3.position.x=this.w/4-50,this.g3.position.y=this.h/4*2.2+50,this.geometry.width=e,this.geometry.height=r,this.geometry.build(),this.containerScene.pivot.x=this.w/2,this.containerScene.pivot.y=this.h/2,this.containerScene.position.x=this.w/2,this.containerScene.position.y=this.h/2,this._iterationCount=Math.ceil(Math.log(e*r)),this.text.x=this.w/2,this.text.y=this.h/2,ah.tx=-(this.w-e)/2,ah.ty=-(this.h-r)/2,this.renderSprite.width=this.w,this.renderSprite.height=this.h,this.geometryRender.width=this.w,this.geometryRender.height=this.h,this.geometryRender.build()}export(){return{test:"name"}}}var Si={images:[{src:"./assets/images/circle.png"},{src:"./assets/images/bluenoise.png"}],fonts:["Montserrat:800","Montserrat:400","Montserrat:700","Montserrat:200"]},lh={exports:{}},Oi=typeof Reflect=="object"?Reflect:null,b_=Oi&&typeof Oi.apply=="function"?Oi.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},ls;Oi&&typeof Oi.ownKeys=="function"?ls=Oi.ownKeys:Object.getOwnPropertySymbols?ls=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ls=function(e){return Object.getOwnPropertyNames(e)};function oA(t){console&&console.warn&&console.warn(t)}var x_=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}lh.exports=Nt,lh.exports.once=hA,Nt.EventEmitter=Nt,Nt.prototype._events=void 0,Nt.prototype._eventsCount=0,Nt.prototype._maxListeners=void 0;var w_=10;function hs(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return w_},set:function(t){if(typeof t!="number"||t<0||x_(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");w_=t}}),Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||x_(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function T_(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return T_(this)},Nt.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")b_(c,this,r);else for(var f=c.length,d=R_(c,f),i=0;i<f;++i)b_(d[i],this,r);return!0};function E_(t,e,r,i){var n,o,a;if(hs(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),n=T_(t),n>0&&a.length>n&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,oA(l)}return t}Nt.prototype.addListener=function(e,r){return E_(this,e,r,!1)},Nt.prototype.on=Nt.prototype.addListener,Nt.prototype.prependListener=function(e,r){return E_(this,e,r,!0)};function sA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C_(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=sA.bind(i);return n.listener=r,i.wrapFn=n,n}Nt.prototype.once=function(e,r){return hs(r),this.on(e,C_(this,e,r)),this},Nt.prototype.prependOnceListener=function(e,r){return hs(r),this.prependListener(e,C_(this,e,r)),this},Nt.prototype.removeListener=function(e,r){var i,n,o,a,l;if(hs(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(o=-1,a=i.length-1;a>=0;a--)if(i[a]===r||i[a].listener===r){l=i[a].listener,o=a;break}if(o<0)return this;o===0?i.shift():aA(i,o),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this},Nt.prototype.off=Nt.prototype.removeListener,Nt.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var o=Object.keys(i),a;for(n=0;n<o.length;++n)a=o[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function I_(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?lA(n):R_(n,n.length)}Nt.prototype.listeners=function(e){return I_(this,e,!0)},Nt.prototype.rawListeners=function(e){return I_(this,e,!1)},Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):P_.call(t,e)},Nt.prototype.listenerCount=P_;function P_(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?ls(this._events):[]};function R_(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function aA(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function lA(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function hA(t,e){return new Promise(function(r,i){function n(a){t.removeListener(e,o),i(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}A_(t,e,o,{once:!0}),e!=="error"&&uA(t,n,{once:!0})})}function uA(t,e,r){typeof t.on=="function"&&A_(t,"error",e,r)}function A_(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(o){i.once&&t.removeEventListener(e,n),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var cA=lh.exports;Gt.app=null,Gt.renderer=null;class fA extends cA{constructor(e={}){if(super(),this.isSupported=!0,this._isPlaying=!0,$h(M1,e),this.isSupported){this.app=new _o({width:window.innerWidth,height:window.innerHeight,backgroundColor:1087931,autoDensity:!0,antialias:!0,resolution:Math.max(window.devicePixelRatio||1,1.5)}),Gt.app=this.app,Gt.renderer=this.app.renderer,e.container.appendChild(this.app.view),this.app.resizeTo=window;const r=this.app.view;r.style.position="fixed",r.style.top=0,r.style.left=0,this.stage=this.app.stage,this.preloader=new I2({optimize:!1}),this._loadAssets(e.ASSETS_PATH||"assets/")}else setTimeout(()=>{this.emit("onError",{error:"Mobile not supported for this experiment"})},10)}_loadAssets(e){if(!this.isSupported)return;const r=Si.images.map(i=>(i.src=i.src.replace("assets/",e),i));this.preloader.addManifest(r||[]),Si.fonts&&this.preloader.addFonts(Si.fonts||[]),Si.customFonts&&this.preloader.addCustomFonts(Si.customFonts),Si.others&&this.preloader.addOthers(current.assets.others),this.preloader.load(),this.preloader.loader.onProgress.add((i,n)=>{this.emit("onProgress",{percent:n})}),this.preloader.onLoaderComplete.then(()=>{this._onAssetsLoaded()})}_onAssetsLoaded(e){!this.isSupported||(this.emit("onLoaded"),this._initScenes())}onToggleSound(){}start(){!this.isSupported||this.app.ticker.add(this._update.bind(this))}play(){!this.isSupported||(this._isPlaying=!0)}pause(){!this.isSupported||(this._isPlaying=!1)}_initScenes(){!this.isSupported||setTimeout(()=>{this.view=new nA,this.stage.addChild(this.view.view),this.view.resize(this.w,this.h),this.view.show()},100)}_update(){!this.isSupported||this.view&&this.view.update()}resize(e,r){!this.isSupported||(this.app.resize(),this.view&&this.view.resize(e,r))}}Gt.default=fA,Object.defineProperties(Gt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
